(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Zc="modulepreload",Xc=function(e){return"/TimemanTODO/"+e},Da={},Ai=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Xc(o),o in Da)return;Da[o]=!0;const a=o.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!r)for(let p=i.length-1;p>=0;p--){const f=i[p];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Zc,a||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),a)return new Promise((p,f)=>{l.addEventListener("load",p),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function de(){}const Su=e=>e;function Gn(e,t){for(const n in t)e[n]=t[n];return e}function el(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Cu(e){return e()}function Na(){return Object.create(null)}function dt(e){e.forEach(Cu)}function Xt(e){return typeof e=="function"}function et(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function tl(e){return Object.keys(e).length===0}function Ou(e,...t){if(e==null)return de;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Dr(e,t,n){e.$$.on_destroy.push(Ou(t,n))}function nl(e,t,n,r){if(e){const i=xu(e,t,n,r);return e[0](i)}}function xu(e,t,n,r){return e[1]&&r?Gn(n.ctx.slice(),e[1](r(t))):n.ctx}function rl(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(t.dirty.length,i.length);for(let u=0;u<a;u+=1)o[u]=t.dirty[u]|i[u];return o}return t.dirty|i}return t.dirty}function il(e,t,n,r,i,o){if(i){const a=xu(t,n,r,o);e.p(a,i)}}function ol(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Io(e){return e&&Xt(e.destroy)?e.destroy:de}const ku=typeof window<"u";let Ru=ku?()=>window.performance.now():()=>Date.now(),Do=ku?e=>requestAnimationFrame(e):de;const hn=new Set;function ju(e){hn.forEach(t=>{t.c(e)||(hn.delete(t),t.f())}),hn.size!==0&&Do(ju)}function Pu(e){let t;return hn.size===0&&Do(ju),{promise:new Promise(n=>{hn.add(t={c:e,f:n})}),abort(){hn.delete(t)}}}function ne(e,t){e.appendChild(t)}function Fu(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function al(e){const t=oe("style");return sl(Fu(e),t),t.sheet}function sl(e,t){return ne(e.head||e,t),t.sheet}function $e(e,t,n){e.insertBefore(t,n||null)}function ye(e){e.parentNode&&e.parentNode.removeChild(e)}function wn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function oe(e){return document.createElement(e)}function jt(e){return document.createTextNode(e)}function ve(){return jt(" ")}function Zn(){return jt("")}function Me(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function c1(e){return function(t){return t.preventDefault(),e.call(this,t)}}function fe(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ul(e){return Array.from(e.childNodes)}function Xn(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ma(e,t){e.value=t??""}function nt(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Nr(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Iu(e){const t=e.querySelector(":checked");return t&&t.__value}function La(e,t,n){e.classList[n?"add":"remove"](t)}function Du(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}function Mr(e,t){return new e(t)}const Lr=new Map;let Br=0;function fl(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function cl(e,t){const n={stylesheet:al(t),rules:{}};return Lr.set(e,n),n}function Nu(e,t,n,r,i,o,a,u=0){const s=16.666/r;let l=`{
`;for(let w=0;w<=1;w+=s){const g=t+(n-t)*o(w);l+=w*100+`%{${a(g,1-g)}}
`}const p=l+`100% {${a(n,1-n)}}
}`,f=`__svelte_${fl(p)}_${u}`,d=Fu(e),{stylesheet:y,rules:m}=Lr.get(d)||cl(d,e);m[f]||(m[f]=!0,y.insertRule(`@keyframes ${f} ${p}`,y.cssRules.length));const $=e.style.animation||"";return e.style.animation=`${$?`${$}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Br+=1,f}function zi(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Br-=i,Br||ll())}function ll(){Do(()=>{Br||(Lr.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&ye(t)}),Lr.clear())})}let zn;function bt(e){zn=e}function er(){if(!zn)throw new Error("Function called outside component initialization");return zn}function dl(e){er().$$.after_update.push(e)}function Mu(e){er().$$.on_destroy.push(e)}function Lu(){const e=er();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Du(t,n,{cancelable:r});return i.slice().forEach(a=>{a.call(e,o)}),!o.defaultPrevented}return!0}}function hl(e,t){return er().$$.context.set(e,t),t}function Ba(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const ln=[],Wn=[];let vn=[];const Wi=[],Bu=Promise.resolve();let Ki=!1;function Uu(){Ki||(Ki=!0,Bu.then(No))}function vl(){return Uu(),Bu}function kt(e){vn.push(e)}function Yi(e){Wi.push(e)}const Si=new Set;let an=0;function No(){if(an!==0)return;const e=zn;do{try{for(;an<ln.length;){const t=ln[an];an++,bt(t),pl(t.$$)}}catch(t){throw ln.length=0,an=0,t}for(bt(null),ln.length=0,an=0;Wn.length;)Wn.pop()();for(let t=0;t<vn.length;t+=1){const n=vn[t];Si.has(n)||(Si.add(n),n())}vn.length=0}while(ln.length);for(;Wi.length;)Wi.pop()();Ki=!1,Si.clear(),bt(e)}function pl(e){if(e.fragment!==null){e.update(),dt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(kt)}}function gl(e){const t=[],n=[];vn.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),vn=t}let jn;function qu(){return jn||(jn=Promise.resolve(),jn.then(()=>{jn=null})),jn}function Ur(e,t,n){e.dispatchEvent(Du(`${t?"intro":"outro"}${n}`))}const xr=new Set;let Ot;function Sn(){Ot={r:0,c:[],p:Ot}}function Cn(){Ot.r||dt(Ot.c),Ot=Ot.p}function Te(e,t){e&&e.i&&(xr.delete(e),e.i(t))}function ke(e,t,n,r){if(e&&e.o){if(xr.has(e))return;xr.add(e),Ot.c.push(()=>{xr.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Hu={duration:0};function yl(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,a,u,s=0;function l(){a&&zi(e,a)}function p(){const{delay:d=0,duration:y=300,easing:m=Su,tick:$=de,css:w}=i||Hu;w&&(a=Nu(e,0,1,y,d,m,w,s++)),$(0,1);const g=Ru()+d,v=g+y;u&&u.abort(),o=!0,kt(()=>Ur(e,!0,"start")),u=Pu(c=>{if(o){if(c>=v)return $(1,0),Ur(e,!0,"end"),l(),o=!1;if(c>=g){const h=m((c-g)/y);$(h,1-h)}}return o})}let f=!1;return{start(){f||(f=!0,zi(e),Xt(i)?(i=i(r),qu().then(p)):p())},invalidate(){f=!1},end(){o&&(l(),o=!1)}}}function _l(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,a;const u=Ot;u.r+=1;function s(){const{delay:l=0,duration:p=300,easing:f=Su,tick:d=de,css:y}=i||Hu;y&&(a=Nu(e,1,0,p,l,f,y));const m=Ru()+l,$=m+p;kt(()=>Ur(e,!1,"start")),Pu(w=>{if(o){if(w>=$)return d(0,1),Ur(e,!1,"end"),--u.r||dt(u.c),!1;if(w>=m){const g=f((w-m)/p);d(1-g,g)}}return o})}return Xt(i)?qu().then(()=>{i=i(r),s()}):s(),{end(l){l&&i.tick&&i.tick(1,0),o&&(a&&zi(e,a),o=!1)}}}function Ua(e,t){const n=t.token={};function r(i,o,a,u){if(t.token!==n)return;t.resolved=u;let s=t.ctx;a!==void 0&&(s=s.slice(),s[a]=u);const l=i&&(t.current=i)(s);let p=!1;t.block&&(t.blocks?t.blocks.forEach((f,d)=>{d!==o&&f&&(Sn(),ke(f,1,1,()=>{t.blocks[d]===f&&(t.blocks[d]=null)}),Cn())}):t.block.d(1),l.c(),Te(l,1),l.m(t.mount(),t.anchor),p=!0),t.block=l,t.blocks&&(t.blocks[o]=l),p&&No()}if(el(e)){const i=er();if(e.then(o=>{bt(i),r(t.then,1,t.value,o),bt(null)},o=>{if(bt(i),r(t.catch,2,t.error,o),bt(null),!t.hasCatch)throw o}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function ml(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function l1(e,t){e.d(1),t.delete(e.key)}function d1(e,t,n,r,i,o,a,u,s,l,p,f){let d=e.length,y=o.length,m=d;const $={};for(;m--;)$[e[m].key]=m;const w=[],g=new Map,v=new Map,c=[];for(m=y;m--;){const x=f(i,o,m),j=n(x);let P=a.get(j);P?r&&c.push(()=>P.p(x,t)):(P=l(j,x),P.c()),g.set(j,w[m]=P),j in $&&v.set(j,Math.abs(m-$[j]))}const h=new Set,_=new Set;function b(x){Te(x,1),x.m(u,p),a.set(x.key,x),p=x.first,y--}for(;d&&y;){const x=w[y-1],j=e[d-1],P=x.key,L=j.key;x===j?(p=x.first,d--,y--):g.has(L)?!a.has(P)||h.has(P)?b(x):_.has(L)?d--:v.get(P)>v.get(L)?(_.add(P),b(x)):(h.add(L),d--):(s(j,a),d--)}for(;d--;){const x=e[d];g.has(x.key)||s(x,a)}for(;y;)b(w[y-1]);return dt(c),w}function Gu(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const a=e[o],u=t[o];if(u){for(const s in a)s in u||(r[s]=1);for(const s in u)i[s]||(n[s]=u[s],i[s]=1);e[o]=u}else for(const s in a)i[s]=1}for(const a in r)a in n||(n[a]=void 0);return n}function zu(e){return typeof e=="object"&&e!==null?e:{}}const wl=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...wl];function Qi(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ve(e){e&&e.c()}function Ke(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||kt(()=>{const a=e.$$.on_mount.map(Cu).filter(Xt);e.$$.on_destroy?e.$$.on_destroy.push(...a):dt(a),e.$$.on_mount=[]}),o.forEach(kt)}function Ye(e,t){const n=e.$$;n.fragment!==null&&(gl(n.after_update),dt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function bl(e,t){e.$$.dirty[0]===-1&&(ln.push(e),Uu(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function it(e,t,n,r,i,o,a,u=[-1]){const s=zn;bt(e);const l=e.$$={fragment:null,ctx:[],props:o,update:de,not_equal:i,bound:Na(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Na(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};a&&a(l.root);let p=!1;if(l.ctx=n?n(e,t.props||{},(f,d,...y)=>{const m=y.length?y[0]:d;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),p&&bl(e,f)),d}):[],l.update(),p=!0,dt(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=ul(t.target);l.fragment&&l.fragment.l(f),f.forEach(ye)}else l.fragment&&l.fragment.c();t.intro&&Te(e.$$.fragment),Ke(e,t.target,t.anchor,t.customElement),No()}bt(s)}class ot{$destroy(){Ye(this,1),this.$destroy=de}$on(t,n){if(!Xt(n))return de;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!tl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ci(e){if(!e)throw Error("Parameter args is required");if(!e.component==!e.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(e.component&&(e.asyncComponent=()=>Promise.resolve(e.component)),typeof e.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(e.conditions){Array.isArray(e.conditions)||(e.conditions=[e.conditions]);for(let n=0;n<e.conditions.length;n++)if(!e.conditions[n]||typeof e.conditions[n]!="function")throw Error("Invalid parameter conditions["+n+"]")}return e.loadingComponent&&(e.asyncComponent.loading=e.loadingComponent,e.asyncComponent.loadingParams=e.loadingParams||void 0),{component:e.asyncComponent,userData:e.userData,conditions:e.conditions&&e.conditions.length?e.conditions:void 0,props:e.props&&Object.keys(e.props).length?e.props:{},_sveltesparouter:!0}}const sn=[];function Wu(e,t){return{subscribe:Xr(e,t).subscribe}}function Xr(e,t=de){let n;const r=new Set;function i(u){if(et(e,u)&&(e=u,n)){const s=!sn.length;for(const l of r)l[1](),sn.push(l,e);if(s){for(let l=0;l<sn.length;l+=2)sn[l][0](sn[l+1]);sn.length=0}}}function o(u){i(u(e))}function a(u,s=de){const l=[u,s];return r.add(l),r.size===1&&(n=t(i)||de),u(e),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:a}}function Ku(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return Wu(n,a=>{let u=!1;const s=[];let l=0,p=de;const f=()=>{if(l)return;p();const y=t(r?s[0]:s,a);o?a(y):p=Xt(y)?y:de},d=i.map((y,m)=>Ou(y,$=>{s[m]=$,l&=~(1<<m),u&&f()},()=>{l|=1<<m}));return u=!0,f(),function(){dt(d),p(),u=!1}})}function Tl(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,o,a=[],u="",s=e.split("/");for(s[0]||s.shift();i=s.shift();)n=i[0],n==="*"?(a.push("wild"),u+="/(.*)"):n===":"?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),u+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(u+=(~r?"?":"")+"\\"+i.substring(o))):u+="/"+i;return{keys:a,pattern:new RegExp("^"+u+(t?"(?=$|/)":"/?$"),"i")}}function $l(e){let t,n,r;const i=[e[2]];var o=e[0];function a(u){let s={};for(let l=0;l<i.length;l+=1)s=Gn(s,i[l]);return{props:s}}return o&&(t=Mr(o,a()),t.$on("routeEvent",e[7])),{c(){t&&Ve(t.$$.fragment),n=Zn()},m(u,s){t&&Ke(t,u,s),$e(u,n,s),r=!0},p(u,s){const l=s&4?Gu(i,[zu(u[2])]):{};if(s&1&&o!==(o=u[0])){if(t){Sn();const p=t;ke(p.$$.fragment,1,0,()=>{Ye(p,1)}),Cn()}o?(t=Mr(o,a()),t.$on("routeEvent",u[7]),Ve(t.$$.fragment),Te(t.$$.fragment,1),Ke(t,n.parentNode,n)):t=null}else o&&t.$set(l)},i(u){r||(t&&Te(t.$$.fragment,u),r=!0)},o(u){t&&ke(t.$$.fragment,u),r=!1},d(u){u&&ye(n),t&&Ye(t,u)}}}function El(e){let t,n,r;const i=[{params:e[1]},e[2]];var o=e[0];function a(u){let s={};for(let l=0;l<i.length;l+=1)s=Gn(s,i[l]);return{props:s}}return o&&(t=Mr(o,a()),t.$on("routeEvent",e[6])),{c(){t&&Ve(t.$$.fragment),n=Zn()},m(u,s){t&&Ke(t,u,s),$e(u,n,s),r=!0},p(u,s){const l=s&6?Gu(i,[s&2&&{params:u[1]},s&4&&zu(u[2])]):{};if(s&1&&o!==(o=u[0])){if(t){Sn();const p=t;ke(p.$$.fragment,1,0,()=>{Ye(p,1)}),Cn()}o?(t=Mr(o,a()),t.$on("routeEvent",u[6]),Ve(t.$$.fragment),Te(t.$$.fragment,1),Ke(t,n.parentNode,n)):t=null}else o&&t.$set(l)},i(u){r||(t&&Te(t.$$.fragment,u),r=!0)},o(u){t&&ke(t.$$.fragment,u),r=!1},d(u){u&&ye(n),t&&Ye(t,u)}}}function Al(e){let t,n,r,i;const o=[El,$l],a=[];function u(s,l){return s[1]?0:1}return t=u(e),n=a[t]=o[t](e),{c(){n.c(),r=Zn()},m(s,l){a[t].m(s,l),$e(s,r,l),i=!0},p(s,[l]){let p=t;t=u(s),t===p?a[t].p(s,l):(Sn(),ke(a[p],1,1,()=>{a[p]=null}),Cn(),n=a[t],n?n.p(s,l):(n=a[t]=o[t](s),n.c()),Te(n,1),n.m(r.parentNode,r))},i(s){i||(Te(n),i=!0)},o(s){ke(n),i=!1},d(s){a[t].d(s),s&&ye(r)}}}function qa(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const Mo=Wu(null,function(t){t(qa());const n=()=>{t(qa())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});Ku(Mo,e=>e.location);Ku(Mo,e=>e.querystring);const Ha=Xr(void 0);function Lo(e,t){if(t=za(t),!e||!e.tagName||e.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Ga(e,t),{update(n){n=za(n),Ga(e,n)}}}function Sl(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Ga(e,t){let n=t.href||e.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);e.setAttribute("href",n),e.addEventListener("click",r=>{r.preventDefault(),t.disabled||Cl(r.currentTarget.getAttribute("href"))})}function za(e){return e&&typeof e=="string"?{href:e}:e||{}}function Cl(e){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=e}function Ol(e,t,n){let{routes:r={}}=t,{prefix:i=""}=t,{restoreScrollState:o=!1}=t;class a{constructor(_,b){if(!b||typeof b!="function"&&(typeof b!="object"||b._sveltesparouter!==!0))throw Error("Invalid component object");if(!_||typeof _=="string"&&(_.length<1||_.charAt(0)!="/"&&_.charAt(0)!="*")||typeof _=="object"&&!(_ instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:x,keys:j}=Tl(_);this.path=_,typeof b=="object"&&b._sveltesparouter===!0?(this.component=b.component,this.conditions=b.conditions||[],this.userData=b.userData,this.props=b.props||{}):(this.component=()=>Promise.resolve(b),this.conditions=[],this.props={}),this._pattern=x,this._keys=j}match(_){if(i){if(typeof i=="string")if(_.startsWith(i))_=_.substr(i.length)||"/";else return null;else if(i instanceof RegExp){const P=_.match(i);if(P&&P[0])_=_.substr(P[0].length)||"/";else return null}}const b=this._pattern.exec(_);if(b===null)return null;if(this._keys===!1)return b;const x={};let j=0;for(;j<this._keys.length;){try{x[this._keys[j]]=decodeURIComponent(b[j+1]||"")||null}catch{x[this._keys[j]]=null}j++}return x}async checkConditions(_){for(let b=0;b<this.conditions.length;b++)if(!await this.conditions[b](_))return!1;return!0}}const u=[];r instanceof Map?r.forEach((h,_)=>{u.push(new a(_,h))}):Object.keys(r).forEach(h=>{u.push(new a(h,r[h]))});let s=null,l=null,p={};const f=Lu();async function d(h,_){await vl(),f(h,_)}let y=null,m=null;o&&(m=h=>{h.state&&(h.state.__svelte_spa_router_scrollY||h.state.__svelte_spa_router_scrollX)?y=h.state:y=null},window.addEventListener("popstate",m),dl(()=>{Sl(y)}));let $=null,w=null;const g=Mo.subscribe(async h=>{$=h;let _=0;for(;_<u.length;){const b=u[_].match(h.location);if(!b){_++;continue}const x={route:u[_].path,location:h.location,querystring:h.querystring,userData:u[_].userData,params:b&&typeof b=="object"&&Object.keys(b).length?b:null};if(!await u[_].checkConditions(x)){n(0,s=null),w=null,d("conditionsFailed",x);return}d("routeLoading",Object.assign({},x));const j=u[_].component;if(w!=j){j.loading?(n(0,s=j.loading),w=j,n(1,l=j.loadingParams),n(2,p={}),d("routeLoaded",Object.assign({},x,{component:s,name:s.name,params:l}))):(n(0,s=null),w=null);const P=await j();if(h!=$)return;n(0,s=P&&P.default||P),w=j}b&&typeof b=="object"&&Object.keys(b).length?n(1,l=b):n(1,l=null),n(2,p=u[_].props),d("routeLoaded",Object.assign({},x,{component:s,name:s.name,params:l})).then(()=>{Ha.set(l)});return}n(0,s=null),w=null,Ha.set(void 0)});Mu(()=>{g(),m&&window.removeEventListener("popstate",m)});function v(h){Ba.call(this,e,h)}function c(h){Ba.call(this,e,h)}return e.$$set=h=>{"routes"in h&&n(3,r=h.routes),"prefix"in h&&n(4,i=h.prefix),"restoreScrollState"in h&&n(5,o=h.restoreScrollState)},e.$$.update=()=>{e.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[s,l,p,r,i,o,v,c]}class xl extends ot{constructor(t){super(),it(this,t,Ol,Al,et,{routes:3,prefix:4,restoreScrollState:5})}}function kl(e,t){const n=t.replace(/\((?!\?)/g,"(?:");return`${e}${n}\\s{0,5}(?:,?\\s{0,5}${n}){0,10}`}function Rl(e){let t;return e instanceof Array?t=[...e]:e instanceof Map?t=Array.from(e.keys()):t=Object.keys(e),t}function $t(e){return`(?:${Rl(e).sort((n,r)=>r.length-n.length).join("|").replace(/\./g,"\\.")})`}var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bo(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(t,i);return new o}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Yu={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ge,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",a="second",u="minute",s="hour",l="day",p="week",f="month",d="quarter",y="year",m="date",$="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var D=["th","st","nd","rd"],F=K%100;return"["+K+(D[(F-20)%10]||D[F]||D[0])+"]"}},c=function(K,D,F){var U=String(K);return!U||U.length>=D?K:""+Array(D+1-U.length).join(F)+K},h={s:c,z:function(K){var D=-K.utcOffset(),F=Math.abs(D),U=Math.floor(F/60),E=F%60;return(D<=0?"+":"-")+c(U,2,"0")+":"+c(E,2,"0")},m:function K(D,F){if(D.date()<F.date())return-K(F,D);var U=12*(F.year()-D.year())+(F.month()-D.month()),E=D.clone().add(U,f),S=F-E<0,C=D.clone().add(U+(S?-1:1),f);return+(-(U+(F-E)/(S?E-C:C-E))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:f,y,w:p,d:l,D:m,h:s,m:u,s:a,ms:o,Q:d}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},_="en",b={};b[_]=v;var x=function(K){return K instanceof V},j=function K(D,F,U){var E;if(!D)return _;if(typeof D=="string"){var S=D.toLowerCase();b[S]&&(E=S),F&&(b[S]=F,E=S);var C=D.split("-");if(!E&&C.length>1)return K(C[0])}else{var k=D.name;b[k]=D,E=k}return!U&&E&&(_=E),E||!U&&_},P=function(K,D){if(x(K))return K.clone();var F=typeof D=="object"?D:{};return F.date=K,F.args=arguments,new V(F)},L=h;L.l=j,L.i=x,L.w=function(K,D){return P(K,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var V=function(){function K(F){this.$L=j(F.locale,null,!0),this.parse(F)}var D=K.prototype;return D.parse=function(F){this.$d=function(U){var E=U.date,S=U.utc;if(E===null)return new Date(NaN);if(L.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var C=E.match(w);if(C){var k=C[2]-1||0,I=(C[7]||"0").substring(0,3);return S?new Date(Date.UTC(C[1],k,C[3]||1,C[4]||0,C[5]||0,C[6]||0,I)):new Date(C[1],k,C[3]||1,C[4]||0,C[5]||0,C[6]||0,I)}}return new Date(E)}(F),this.$x=F.x||{},this.init()},D.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},D.$utils=function(){return L},D.isValid=function(){return this.$d.toString()!==$},D.isSame=function(F,U){var E=P(F);return this.startOf(U)<=E&&E<=this.endOf(U)},D.isAfter=function(F,U){return P(F)<this.startOf(U)},D.isBefore=function(F,U){return this.endOf(U)<P(F)},D.$g=function(F,U,E){return L.u(F)?this[U]:this.set(E,F)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(F,U){var E=this,S=!!L.u(U)||U,C=L.p(F),k=function(T,R){var N=L.w(E.$u?Date.UTC(E.$y,R,T):new Date(E.$y,R,T),E);return S?N:N.endOf(l)},I=function(T,R){return L.w(E.toDate()[T].apply(E.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(R)),E)},B=this.$W,A=this.$M,M=this.$D,H="set"+(this.$u?"UTC":"");switch(C){case y:return S?k(1,0):k(31,11);case f:return S?k(1,A):k(0,A+1);case p:var W=this.$locale().weekStart||0,O=(B<W?B+7:B)-W;return k(S?M-O:M+(6-O),A);case l:case m:return I(H+"Hours",0);case s:return I(H+"Minutes",1);case u:return I(H+"Seconds",2);case a:return I(H+"Milliseconds",3);default:return this.clone()}},D.endOf=function(F){return this.startOf(F,!1)},D.$set=function(F,U){var E,S=L.p(F),C="set"+(this.$u?"UTC":""),k=(E={},E[l]=C+"Date",E[m]=C+"Date",E[f]=C+"Month",E[y]=C+"FullYear",E[s]=C+"Hours",E[u]=C+"Minutes",E[a]=C+"Seconds",E[o]=C+"Milliseconds",E)[S],I=S===l?this.$D+(U-this.$W):U;if(S===f||S===y){var B=this.clone().set(m,1);B.$d[k](I),B.init(),this.$d=B.set(m,Math.min(this.$D,B.daysInMonth())).$d}else k&&this.$d[k](I);return this.init(),this},D.set=function(F,U){return this.clone().$set(F,U)},D.get=function(F){return this[L.p(F)]()},D.add=function(F,U){var E,S=this;F=Number(F);var C=L.p(U),k=function(A){var M=P(S);return L.w(M.date(M.date()+Math.round(A*F)),S)};if(C===f)return this.set(f,this.$M+F);if(C===y)return this.set(y,this.$y+F);if(C===l)return k(1);if(C===p)return k(7);var I=(E={},E[u]=r,E[s]=i,E[a]=n,E)[C]||1,B=this.$d.getTime()+F*I;return L.w(B,this)},D.subtract=function(F,U){return this.add(-1*F,U)},D.format=function(F){var U=this,E=this.$locale();if(!this.isValid())return E.invalidDate||$;var S=F||"YYYY-MM-DDTHH:mm:ssZ",C=L.z(this),k=this.$H,I=this.$m,B=this.$M,A=E.weekdays,M=E.months,H=function(R,N,Y,G){return R&&(R[N]||R(U,S))||Y[N].slice(0,G)},W=function(R){return L.s(k%12||12,R,"0")},O=E.meridiem||function(R,N,Y){var G=R<12?"AM":"PM";return Y?G.toLowerCase():G},T={YY:String(this.$y).slice(-2),YYYY:this.$y,M:B+1,MM:L.s(B+1,2,"0"),MMM:H(E.monthsShort,B,M,3),MMMM:H(M,B),D:this.$D,DD:L.s(this.$D,2,"0"),d:String(this.$W),dd:H(E.weekdaysMin,this.$W,A,2),ddd:H(E.weekdaysShort,this.$W,A,3),dddd:A[this.$W],H:String(k),HH:L.s(k,2,"0"),h:W(1),hh:W(2),a:O(k,I,!0),A:O(k,I,!1),m:String(I),mm:L.s(I,2,"0"),s:String(this.$s),ss:L.s(this.$s,2,"0"),SSS:L.s(this.$ms,3,"0"),Z:C};return S.replace(g,function(R,N){return N||T[R]||C.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(F,U,E){var S,C=L.p(U),k=P(F),I=(k.utcOffset()-this.utcOffset())*r,B=this-k,A=L.m(this,k);return A=(S={},S[y]=A/12,S[f]=A,S[d]=A/3,S[p]=(B-I)/6048e5,S[l]=(B-I)/864e5,S[s]=B/i,S[u]=B/r,S[a]=B/n,S)[C]||B,E?A:L.a(A)},D.daysInMonth=function(){return this.endOf(f).$D},D.$locale=function(){return b[this.$L]},D.locale=function(F,U){if(!F)return this.$L;var E=this.clone(),S=j(F,U,!0);return S&&(E.$L=S),E},D.clone=function(){return L.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},K}(),J=V.prototype;return P.prototype=J,[["$ms",o],["$s",a],["$m",u],["$H",s],["$W",l],["$M",f],["$y",y],["$D",m]].forEach(function(K){J[K[1]]=function(D){return this.$g(D,K[0],K[1])}}),P.extend=function(K,D){return K.$i||(K(D,V,P),K.$i=!0),P},P.locale=j,P.isDayjs=x,P.unix=function(K){return P(1e3*K)},P.en=b[_],P.Ls=b,P.p={},P})})(Yu);var jl=Yu.exports;const Xe=at(jl);function Qu(e){return e<100&&(e>50?e=e+1900:e=e+2e3),e}function ei(e,t,n){const r=Xe(e);let i=r;i=i.month(n-1),i=i.date(t),i=i.year(r.year());const o=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(o.diff(r))<Math.abs(i.diff(r))?i=o:Math.abs(a.diff(r))<Math.abs(i.diff(r))&&(i=a),i.year()}const Vu={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Ju={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Pt={...Ju,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Vi={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},Ji={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},ti={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"},Pl=`(?:${$t(Vi)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Fl(e){const t=e.toLowerCase();return Vi[t]!==void 0?Vi[t]:t==="a"||t==="an"||t=="the"?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}const qr=`(?:${$t(Ji)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Hr(e){let t=e.toLowerCase();return Ji[t]!==void 0?Ji[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const Uo="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function qo(e){if(/BE/i.test(e))return e=e.replace(/BE/i,""),parseInt(e)-543;if(/BCE?/i.test(e))return e=e.replace(/BCE?/i,""),-parseInt(e);if(/(AD|CE)/i.test(e))return e=e.replace(/(AD|CE)/i,""),parseInt(e);const t=parseInt(e);return Qu(t)}const Zu=`(${Pl})\\s{0,3}(${$t(ti)})`,Wa=new RegExp(Zu,"i"),en=kl("(?:(?:about|around)\\s{0,3})?",Zu);function tr(e){const t={};let n=e,r=Wa.exec(n);for(;r;)Il(t,r),n=n.substring(r[0].length).trim(),r=Wa.exec(n);return t}function Il(e,t){const n=Fl(t[1]),r=ti[t[2].toLowerCase()];e[r]=n}var Xu={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ge,function(){var n="month",r="quarter";return function(i,o){var a=o.prototype;a.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var u=a.add;a.add=function(l,p){return l=Number(l),this.$utils().p(p)===r?this.add(3*l,n):u.bind(this)(l,p)};var s=a.startOf;a.startOf=function(l,p){var f=this.$utils(),d=!!f.u(p)||p;if(f.p(l)===r){var y=this.quarter()-1;return d?this.month(3*y).startOf(n).startOf("day"):this.month(3*y+2).endOf(n).endOf("day")}return s.bind(this)(l,p)}}})})(Xu);var Dl=Xu.exports;const Nl=at(Dl);function Ml(e,t){t=t.add(1,"day"),qn(e,t),ni(e,t)}function tn(e,t){e.assign("day",t.date()),e.assign("month",t.month()+1),e.assign("year",t.year())}function ef(e,t){e.assign("hour",t.hour()),e.assign("minute",t.minute()),e.assign("second",t.second()),e.assign("millisecond",t.millisecond()),e.get("hour")<12?e.assign("meridiem",pe.AM):e.assign("meridiem",pe.PM)}function qn(e,t){e.imply("day",t.date()),e.imply("month",t.month()+1),e.imply("year",t.year())}function ni(e,t){e.imply("hour",t.hour()),e.imply("minute",t.minute()),e.imply("second",t.second()),e.imply("millisecond",t.millisecond())}const Ll={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Bl(e){return e==null?null:typeof e=="number"?e:Ll[e]??null}Xe.extend(Nl);class tf{constructor(t){t=t??new Date,t instanceof Date?this.instant=t:(this.instant=t.instant??new Date,this.timezoneOffset=Bl(t.timezone))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(t,n){(!t||t.getTime()<0)&&(t=new Date);const r=-t.getTimezoneOffset(),i=n??this.timezoneOffset??r;return r-i}}class Oe{constructor(t,n){if(this.reference=t,this.knownValues={},this.impliedValues={},n)for(const i in n)this.knownValues[i]=n[i];const r=Xe(t.instant);this.imply("day",r.date()),this.imply("month",r.month()+1),this.imply("year",r.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(t){return t in this.knownValues?this.knownValues[t]:t in this.impliedValues?this.impliedValues[t]:null}isCertain(t){return t in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(t,n){return t in this.knownValues?this:(this.impliedValues[t]=n,this)}assign(t,n){return this.knownValues[t]=n,delete this.impliedValues[t],this}delete(t){delete this.knownValues[t],delete this.impliedValues[t]}clone(){const t=new Oe(this.reference);t.knownValues={},t.impliedValues={};for(const n in this.knownValues)t.knownValues[n]=this.knownValues[n];for(const n in this.impliedValues)t.impliedValues[n]=this.impliedValues[n];return t}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const t=this.dateWithoutTimezoneAdjustment();return!(t.getFullYear()!==this.get("year")||t.getMonth()!==this.get("month")-1||t.getDate()!==this.get("day")||this.get("hour")!=null&&t.getHours()!=this.get("hour")||this.get("minute")!=null&&t.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Xe(this.date())}date(){const t=this.dateWithoutTimezoneAdjustment(),n=this.reference.getSystemTimezoneAdjustmentMinute(t,this.get("timezoneOffset"));return new Date(t.getTime()+n*6e4)}dateWithoutTimezoneAdjustment(){const t=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return t.setFullYear(this.get("year")),t}static createRelativeFromReference(t,n){let r=Xe(t.instant);for(const o in n)r=r.add(n[o],o);const i=new Oe(t);return n.hour||n.minute||n.second?(ef(i,r),tn(i,r),t.timezoneOffset!==null&&i.assign("timezoneOffset",-t.instant.getTimezoneOffset())):(ni(i,r),t.timezoneOffset!==null&&i.imply("timezoneOffset",-t.instant.getTimezoneOffset()),n.d?(i.assign("day",r.date()),i.assign("month",r.month()+1),i.assign("year",r.year())):(n.week&&i.imply("weekday",r.day()),i.imply("day",r.date()),n.month?(i.assign("month",r.month()+1),i.assign("year",r.year())):(i.imply("month",r.month()+1),n.year?i.assign("year",r.year()):i.imply("year",r.year())))),i}}class nr{constructor(t,n,r,i,o){this.reference=t,this.refDate=t.instant,this.index=n,this.text=r,this.start=i||new Oe(t),this.end=o}clone(){const t=new nr(this.reference,this.index,this.text);return t.start=this.start?this.start.clone():null,t.end=this.end?this.end.clone():null,t}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}}class Ze{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(t){const n=this.innerPattern(t);return n==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${n.source}`,n.flags),this.cachedInnerPattern=n,this.cachedPattern)}extract(t,n){const r=n[1]??"";n.index=n.index+r.length,n[0]=n[0].substring(r.length);for(let i=2;i<n.length;i++)n[i-1]=n[i];return this.innerExtract(t,n)}}const Ul=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${en})(?=\\W|$)`,"i"),ql=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${en})(?=\\W|$)`,"i");class Hl extends Ze{innerPattern(t){return t.option.forwardDate?ql:Ul}innerExtract(t,n){const r=tr(n[1]);return Oe.createRelativeFromReference(t.reference,r)}}const Gl=new RegExp(`(?:on\\s{0,3})?(${qr})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${qr}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${$t(Pt)})(?:(?:-|/|,?\\s{0,3})(${Uo}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Ka=1,Ya=2,zl=3,Qa=4;class Wl extends Ze{innerPattern(){return Gl}innerExtract(t,n){const r=t.createParsingResult(n.index,n[0]),i=Pt[n[zl].toLowerCase()],o=Hr(n[Ka]);if(o>31)return n.index=n.index+n[Ka].length,null;if(r.start.assign("month",i),r.start.assign("day",o),n[Qa]){const a=qo(n[Qa]);r.start.assign("year",a)}else{const a=ei(t.refDate,o,i);r.start.imply("year",a)}if(n[Ya]){const a=Hr(n[Ya]);r.end=r.start.clone(),r.end.assign("day",a)}return r}}const Kl=new RegExp(`(${$t(Pt)})(?:-|/|\\s*,?\\s*)(${qr})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${qr})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Uo}))?(?=\\W|$)(?!\\:\\d)`,"i"),Yl=1,Ql=2,Va=3,Ja=4;class Vl extends Ze{innerPattern(){return Kl}innerExtract(t,n){const r=Pt[n[Yl].toLowerCase()],i=Hr(n[Ql]);if(i>31)return null;const o=t.createParsingComponents({day:i,month:r});if(n[Ja]){const s=qo(n[Ja]);o.assign("year",s)}else{const s=ei(t.refDate,i,r);o.imply("year",s)}if(!n[Va])return o;const a=Hr(n[Va]),u=t.createParsingResult(n.index,n[0]);return u.start=o,u.end=o.clone(),u.end.assign("day",a),u}}const Jl=new RegExp(`((?:in)\\s*)?(${$t(Pt)})\\s*(?:[,-]?\\s*(${Uo})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),Zl=1,Xl=2,Za=3;class ed extends Ze{innerPattern(){return Jl}innerExtract(t,n){const r=n[Xl].toLowerCase();if(n[0].length<=3&&!Ju[r])return null;const i=t.createParsingResult(n.index+(n[Zl]||"").length,n.index+n[0].length);i.start.imply("day",1);const o=Pt[r];if(i.start.assign("month",o),n[Za]){const a=qo(n[Za]);i.start.assign("year",a)}else{const a=ei(t.refDate,1,o);i.start.imply("year",a)}return i}}const td=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${$t(Pt)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),nd=1,rd=2,Xa=3,id=4;class od extends Ze{innerPattern(){return td}innerExtract(t,n){const r=n[Xa]?parseInt(n[Xa]):Pt[n[rd].toLowerCase()];if(r<1||r>12)return null;const i=parseInt(n[nd]);return{day:parseInt(n[id]),month:r,year:i}}}const ad=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),sd=1,ud=2;class fd extends Ze{innerPattern(){return ad}innerExtract(t,n){const r=parseInt(n[ud]),i=parseInt(n[sd]);return t.createParsingComponents().imply("day",1).assign("month",i).assign("year",r)}}function cd(e,t,n,r){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${n}`,r)}function ld(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}const es=2,un=3,br=4,Tr=5,Pn=6;class dd{constructor(t=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=t}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(t){return this.getPrimaryTimePatternThroughCache()}extract(t,n){const r=this.extractPrimaryTimeComponents(t,n);if(!r)return n.index+=n[0].length,null;const i=n.index+n[1].length,o=n[0].substring(n[1].length),a=t.createParsingResult(i,o,r);n.index+=n[0].length;const u=t.text.substring(n.index),l=this.getFollowingTimePatternThroughCache().exec(u);return o.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(t,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(t,n,r=!1){const i=t.createParsingComponents();let o=0,a=null,u=parseInt(n[es]);if(u>100){if(this.strictMode||n[un]!=null)return null;o=u%100,u=Math.floor(u/100)}if(u>24)return null;if(n[un]!=null){if(n[un].length==1&&!n[Pn])return null;o=parseInt(n[un])}if(o>=60)return null;if(u>12&&(a=pe.PM),n[Pn]!=null){if(u>12)return null;const s=n[Pn][0].toLowerCase();s=="a"&&(a=pe.AM,u==12&&(u=0)),s=="p"&&(a=pe.PM,u!=12&&(u+=12))}if(i.assign("hour",u),i.assign("minute",o),a!==null?i.assign("meridiem",a):u<12?i.imply("meridiem",pe.AM):i.imply("meridiem",pe.PM),n[Tr]!=null){const s=parseInt(n[Tr].substring(0,3));if(s>=1e3)return null;i.assign("millisecond",s)}if(n[br]!=null){const s=parseInt(n[br]);if(s>=60)return null;i.assign("second",s)}return i}extractFollowingTimeComponents(t,n,r){const i=t.createParsingComponents();if(n[Tr]!=null){const s=parseInt(n[Tr].substring(0,3));if(s>=1e3)return null;i.assign("millisecond",s)}if(n[br]!=null){const s=parseInt(n[br]);if(s>=60)return null;i.assign("second",s)}let o=parseInt(n[es]),a=0,u=-1;if(n[un]!=null?a=parseInt(n[un]):o>100&&(a=o%100,o=Math.floor(o/100)),a>=60||o>24)return null;if(o>=12&&(u=pe.PM),n[Pn]!=null){if(o>12)return null;const s=n[Pn][0].toLowerCase();s=="a"&&(u=pe.AM,o==12&&(o=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),s=="p"&&(u=pe.PM,o!=12&&(o+=12)),r.start.isCertain("meridiem")||(u==pe.AM?(r.start.imply("meridiem",pe.AM),r.start.get("hour")==12&&r.start.assign("hour",0)):(r.start.imply("meridiem",pe.PM),r.start.get("hour")!=12&&r.start.assign("hour",r.start.get("hour")+12)))}return i.assign("hour",o),i.assign("minute",a),u>=0?i.assign("meridiem",u):r.start.isCertain("meridiem")&&r.start.get("hour")>12?r.start.get("hour")-12>o?i.imply("meridiem",pe.AM):o<=12&&(i.assign("hour",o+12),i.assign("meridiem",pe.PM)):o>12?i.imply("meridiem",pe.PM):o<=12&&i.imply("meridiem",pe.AM),i.date().getTime()<r.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(t){if(t.text.match(/^\d$/)||t.text.match(/^\d\d\d+$/)||t.text.match(/\d[apAP]$/))return null;const n=t.text.match(/[^\d:.](\d[\d.]+)$/);if(n){const r=n[1];if(this.strictMode||r.includes(".")&&!r.match(/\d(\.\d{2})+$/)||parseInt(r)>24)return null}return t}checkAndReturnWithFollowingPattern(t){if(t.text.match(/^\d+-\d+$/))return null;const n=t.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(n){if(this.strictMode)return null;const r=n[1],i=n[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;const o=parseInt(i),a=parseInt(r);if(o>24||a>24)return null}return t}getPrimaryTimePatternThroughCache(){const t=this.primaryPrefix(),n=this.primarySuffix();return this.cachedPrimaryPrefix===t&&this.cachedPrimarySuffix===n?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=cd(this.primaryPatternLeftBoundary(),t,n,this.patternFlags()),this.cachedPrimaryPrefix=t,this.cachedPrimarySuffix=n,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){const t=this.followingPhase(),n=this.followingSuffix();return this.cachedFollowingPhase===t&&this.cachedFollowingSuffix===n?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=ld(t,n),this.cachedFollowingPhase=t,this.cachedFollowingSuffix=n,this.cachedFollowingTimePatten)}}class hd extends dd{constructor(t){super(t)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(t,n){const r=super.extractPrimaryTimeComponents(t,n);if(r){if(n[0].endsWith("night")){const i=r.get("hour");i>=6&&i<12?(r.assign("hour",r.get("hour")+12),r.assign("meridiem",pe.PM)):i<6&&r.assign("meridiem",pe.AM)}if(n[0].endsWith("afternoon")){r.assign("meridiem",pe.PM);const i=r.get("hour");i>=0&&i<=6&&r.assign("hour",r.get("hour")+12)}n[0].endsWith("morning")&&(r.assign("meridiem",pe.AM),r.get("hour")<12&&r.assign("hour",r.get("hour")))}return r}}function Ho(e){const t={};for(const n in e)t[n]=-e[n];return t}function vd(e,t){const n=e.clone();let r=e.dayjs();for(const i in t)r=r.add(t[i],i);return("day"in t||"d"in t||"week"in t||"month"in t||"year"in t)&&(n.imply("day",r.date()),n.imply("month",r.month()+1),n.imply("year",r.year())),("second"in t||"minute"in t||"hour"in t)&&(n.imply("second",r.second()),n.imply("minute",r.minute()),n.imply("hour",r.hour())),n}const pd=new RegExp(`(${en})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),gd=new RegExp(`(${en})\\s{0,5}ago(?=(?:\\W|$))`,"i");class yd extends Ze{constructor(t){super(),this.strictMode=t}innerPattern(){return this.strictMode?gd:pd}innerExtract(t,n){const r=tr(n[1]),i=Ho(r);return Oe.createRelativeFromReference(t.reference,i)}}const _d=new RegExp(`(${en})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),md=new RegExp("("+en+")(later|from now)(?=(?:\\W|$))","i"),wd=1;class bd extends Ze{constructor(t){super(),this.strictMode=t}innerPattern(){return this.strictMode?md:_d}innerExtract(t,n){const r=tr(n[wd]);return Oe.createRelativeFromReference(t.reference,r)}}class Td{refine(t,n){return n.filter(r=>this.isValid(t,r))}}class ri{refine(t,n){if(n.length<2)return n;const r=[];let i=n[0],o=null;for(let a=1;a<n.length;a++){o=n[a];const u=t.text.substring(i.index+i.text.length,o.index);if(!this.shouldMergeResults(u,i,o,t))r.push(i),i=o;else{const s=i,l=o,p=this.mergeResults(u,s,l,t);t.debug(()=>{console.log(`${this.constructor.name} merged ${s} and ${l} into ${p}`)}),i=p}}return i!=null&&r.push(i),r}}class $d extends ri{shouldMergeResults(t,n,r){return!n.end&&!r.end&&t.match(this.patternBetween())!=null}mergeResults(t,n,r){if(!n.start.isOnlyWeekdayComponent()&&!r.start.isOnlyWeekdayComponent()&&(r.start.getCertainComponents().forEach(o=>{n.start.isCertain(o)||n.start.assign(o,r.start.get(o))}),n.start.getCertainComponents().forEach(o=>{r.start.isCertain(o)||r.start.assign(o,n.start.get(o))})),n.start.date().getTime()>r.start.date().getTime()){let o=n.start.dayjs(),a=r.start.dayjs();n.start.isOnlyWeekdayComponent()&&o.add(-7,"days").isBefore(a)?(o=o.add(-7,"days"),n.start.imply("day",o.date()),n.start.imply("month",o.month()+1),n.start.imply("year",o.year())):r.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(o)?(a=a.add(7,"days"),r.start.imply("day",a.date()),r.start.imply("month",a.month()+1),r.start.imply("year",a.year())):[r,n]=[n,r]}const i=n.clone();return i.start=n.start,i.end=r.start,i.index=Math.min(n.index,r.index),n.index<r.index?i.text=n.text+t+r.text:i.text=r.text+t+n.text,i}}class Ed extends $d{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function ts(e,t){const n=e.clone(),r=e.start,i=t.start;if(n.start=ns(r,i),e.end!=null||t.end!=null){const o=e.end==null?e.start:e.end,a=t.end==null?t.start:t.end,u=ns(o,a);if(e.end==null&&u.date().getTime()<n.start.date().getTime()){const s=u.dayjs().add(1,"day");u.isCertain("day")?tn(u,s):qn(u,s)}n.end=u}return n}function ns(e,t){const n=e.clone();return t.isCertain("hour")?(n.assign("hour",t.get("hour")),n.assign("minute",t.get("minute")),t.isCertain("second")?(n.assign("second",t.get("second")),t.isCertain("millisecond")?n.assign("millisecond",t.get("millisecond")):n.imply("millisecond",t.get("millisecond"))):(n.imply("second",t.get("second")),n.imply("millisecond",t.get("millisecond")))):(n.imply("hour",t.get("hour")),n.imply("minute",t.get("minute")),n.imply("second",t.get("second")),n.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&n.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?n.assign("meridiem",t.get("meridiem")):t.get("meridiem")!=null&&n.get("meridiem")==null&&n.imply("meridiem",t.get("meridiem")),n.get("meridiem")==pe.PM&&n.get("hour")<12&&(t.isCertain("hour")?n.assign("hour",n.get("hour")+12):n.imply("hour",n.get("hour")+12)),n}class Ad extends ri{shouldMergeResults(t,n,r){return(n.start.isOnlyDate()&&r.start.isOnlyTime()||r.start.isOnlyDate()&&n.start.isOnlyTime())&&t.match(this.patternBetween())!=null}mergeResults(t,n,r){const i=n.start.isOnlyDate()?ts(n,r):ts(r,n);return i.index=n.index,i.text=n.text+t+r.text,i}}class Sd extends Ad{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}}const Cd=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Od={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};class xd{constructor(t){this.timezone={...Od,...t}}refine(t,n){const r=t.option.timezones??{};return n.forEach(i=>{const o=t.text.substring(i.index+i.text.length),a=Cd.exec(o);if(!a)return;const u=a[1].toUpperCase(),s=r[u]??this.timezone[u]??null;if(s===null)return;t.debug(()=>{console.log(`Extracting timezone: '${u}' into: ${s} for: ${i.start}`)});const l=i.start.get("timezoneOffset");l!==null&&s!=l&&(i.start.isCertain("timezoneOffset")||u!=a[1])||i.start.isOnlyDate()&&u!=a[1]||(i.text+=a[0],i.start.isCertain("timezoneOffset")||i.start.assign("timezoneOffset",s),i.end!=null&&!i.end.isCertain("timezoneOffset")&&i.end.assign("timezoneOffset",s))}),n}}const kd=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Rd=1,jd=2,Pd=3;class Fd{refine(t,n){return n.forEach(function(r){if(r.start.isCertain("timezoneOffset"))return;const i=t.text.substring(r.index+r.text.length),o=kd.exec(i);if(!o)return;t.debug(()=>{console.log(`Extracting timezone: '${o[0]}' into : ${r}`)});const a=parseInt(o[jd]),u=parseInt(o[Pd]||"0");let s=a*60+u;s>14*60||(o[Rd]==="-"&&(s=-s),r.end!=null&&r.end.assign("timezoneOffset",s),r.start.assign("timezoneOffset",s),r.text+=o[0])}),n}}class rs{refine(t,n){if(n.length<2)return n;const r=[];let i=n[0];for(let o=1;o<n.length;o++){const a=n[o];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(r.push(i),i=a)}return i!=null&&r.push(i),r}}class Id{refine(t,n){return t.option.forwardDate&&n.forEach(function(r){let i=Xe(t.refDate);if(r.start.isOnlyTime()&&i.isAfter(r.start.dayjs())&&(i=i.add(1,"day"),qn(r.start,i),r.end&&r.end.isOnlyTime()&&(qn(r.end,i),r.start.dayjs().isAfter(r.end.dayjs())&&(i=i.add(1,"day"),qn(r.end,i)))),r.start.isOnlyDayMonthComponent()&&i.isAfter(r.start.dayjs()))for(let o=0;o<3&&i.isAfter(r.start.dayjs());o++)r.start.imply("year",r.start.get("year")+1),t.debug(()=>{console.log(`Forward yearly adjusted for ${r} (${r.start})`)}),r.end&&!r.end.isCertain("year")&&(r.end.imply("year",r.end.get("year")+1),t.debug(()=>{console.log(`Forward yearly adjusted for ${r} (${r.end})`)}));r.start.isOnlyWeekdayComponent()&&i.isAfter(r.start.dayjs())&&(i.day()>=r.start.get("weekday")?i=i.day(r.start.get("weekday")+7):i=i.day(r.start.get("weekday")),r.start.imply("day",i.date()),r.start.imply("month",i.month()+1),r.start.imply("year",i.year()),t.debug(()=>{console.log(`Forward weekly adjusted for ${r} (${r.start})`)}),r.end&&r.end.isOnlyWeekdayComponent()&&(i.day()>r.end.get("weekday")?i=i.day(r.end.get("weekday")+7):i=i.day(r.end.get("weekday")),r.end.imply("day",i.date()),r.end.imply("month",i.month()+1),r.end.imply("year",i.year()),t.debug(()=>{console.log(`Forward weekly adjusted for ${r} (${r.end})`)})))}),n}}class Dd extends Td{constructor(t){super(),this.strictMode=t}isValid(t,n){return n.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(t.debug(()=>{console.log(`Removing unlikely result '${n.text}'`)}),!1):n.start.isValidDate()?n.end&&!n.end.isValidDate()?(t.debug(()=>{console.log(`Removing invalid result: ${n} (${n.end})`)}),!1):this.strictMode?this.isStrictModeValid(t,n):!0:(t.debug(()=>{console.log(`Removing invalid result: ${n} (${n.start})`)}),!1)}isStrictModeValid(t,n){return n.start.isOnlyWeekdayComponent()?(t.debug(()=>{console.log(`(Strict) Removing weekday only component: ${n} (${n.end})`)}),!1):n.start.isOnlyTime()&&(!n.start.isCertain("hour")||!n.start.isCertain("minute"))?(t.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${n} (${n.end})`)}),!1):!0}}const Nd=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Md=1,Ld=2,Bd=3,is=4,Ud=5,os=6,as=7,ss=8,us=9;class qd extends Ze{innerPattern(){return Nd}innerExtract(t,n){const r={};if(r.year=parseInt(n[Md]),r.month=parseInt(n[Ld]),r.day=parseInt(n[Bd]),n[is]!=null)if(r.hour=parseInt(n[is]),r.minute=parseInt(n[Ud]),n[os]!=null&&(r.second=parseInt(n[os])),n[as]!=null&&(r.millisecond=parseInt(n[as])),n[ss]==null)r.timezoneOffset=0;else{const i=parseInt(n[ss]);let o=0;n[us]!=null&&(o=parseInt(n[us]));let a=i*60;a<0?a-=o:a+=o,r.timezoneOffset=a}return r}}class Hd extends ri{mergeResults(t,n,r){const i=r.clone();return i.index=n.index,i.text=n.text+t+i.text,i.start.assign("weekday",n.start.get("weekday")),i.end&&i.end.assign("weekday",n.start.get("weekday")),i}shouldMergeResults(t,n,r){return n.start.isOnlyWeekdayComponent()&&!n.start.isCertain("hour")&&r.start.isCertain("day")&&t.match(/^,?\s*$/)!=null}}function Gd(e,t=!1){return e.parsers.unshift(new qd),e.refiners.unshift(new Hd),e.refiners.unshift(new xd),e.refiners.unshift(new Fd),e.refiners.unshift(new rs),e.refiners.push(new rs),e.refiners.push(new Id),e.refiners.push(new Dd(t)),e}function zd(e){const t=Xe(e.instant),n=new Oe(e,{});return tn(n,t),ef(n,t),e.timezoneOffset!==null&&n.assign("timezoneOffset",t.utcOffset()),n}function Wd(e){const t=Xe(e.instant),n=new Oe(e,{});return tn(n,t),ni(n,t),n}function Kd(e){return Yd(e,1)}function Yd(e,t){return nf(e,-t)}function Qd(e){return nf(e,1)}function nf(e,t){let n=Xe(e.instant);const r=new Oe(e,{});return n=n.add(t,"day"),tn(r,n),ni(r,n),r}function Vd(e,t=22){const n=Xe(e.instant),r=new Oe(e,{});return r.imply("hour",t),r.imply("meridiem",pe.PM),tn(r,n),r}function Jd(e,t=20){const n=new Oe(e,{});return n.imply("meridiem",pe.PM),n.imply("hour",t),n}function Zd(e){const t=new Oe(e,{}),n=Xe(e.instant);return n.hour()>2&&Ml(t,n),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t}function Xd(e,t=6){const n=new Oe(e,{});return n.imply("meridiem",pe.AM),n.imply("hour",t),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n}function eh(e,t=15){const n=new Oe(e,{});return n.imply("meridiem",pe.PM),n.imply("hour",t),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n}function th(e){const t=new Oe(e,{});return t.imply("meridiem",pe.AM),t.imply("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t}const nh=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class rh extends Ze{innerPattern(t){return nh}innerExtract(t,n){let r=Xe(t.refDate);const i=n[0].toLowerCase(),o=t.createParsingComponents();switch(i){case"now":return zd(t.reference);case"today":return Wd(t.reference);case"yesterday":return Kd(t.reference);case"tomorrow":case"tmr":case"tmrw":return Qd(t.reference);case"tonight":return Vd(t.reference);default:i.match(/last\s*night/)&&(r.hour()>6&&(r=r.add(-1,"day")),tn(o,r),o.imply("hour",0));break}return o}}const ih=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class oh extends Ze{innerPattern(){return ih}innerExtract(t,n){switch(n[1].toLowerCase()){case"afternoon":return eh(t.reference);case"evening":case"night":return Jd(t.reference);case"midnight":return Zd(t.reference);case"morning":return Xd(t.reference);case"noon":case"midday":return th(t.reference)}return null}}function ah(e,t,n){const r=e.getDateWithAdjustedTimezone(),i=sh(r,t,n);let o=new Oe(e);return o=vd(o,{day:i}),o.assign("weekday",t),o}function sh(e,t,n){const r=e.getDay();switch(n){case"this":return kr(e,t);case"last":return rf(e,t);case"next":return r==Ct.SUNDAY?t==Ct.SUNDAY?7:t:r==Ct.SATURDAY?t==Ct.SATURDAY?7:t==Ct.SUNDAY?8:1+t:t<r&&t!=Ct.SUNDAY?kr(e,t):kr(e,t)+7}return uh(e,t)}function uh(e,t){const n=rf(e,t),r=kr(e,t);return r<-n?r:n}function kr(e,t){const n=e.getDay();let r=t-n;return r<0&&(r+=7),r}function rf(e,t){const n=e.getDay();let r=t-n;return r>=0&&(r-=7),r}const fh=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${$t(Vu)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),ch=1,lh=2,dh=3;class hh extends Ze{innerPattern(){return fh}innerExtract(t,n){const r=n[lh].toLowerCase(),i=Vu[r],o=n[ch],a=n[dh];let u=o||a;u=u||"",u=u.toLowerCase();let s=null;return u=="last"||u=="past"?s="last":u=="next"?s="next":u=="this"&&(s="this"),ah(t.reference,i,s)}}const vh=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${$t(ti)})(?=\\s*)(?=\\W|$)`,"i"),ph=1,gh=2;class yh extends Ze{innerPattern(){return vh}innerExtract(t,n){const r=n[ph].toLowerCase(),i=n[gh].toLowerCase(),o=ti[i];if(r=="next"||r.startsWith("after")){const s={};return s[o]=1,Oe.createRelativeFromReference(t.reference,s)}if(r=="last"||r=="past"){const s={};return s[o]=-1,Oe.createRelativeFromReference(t.reference,s)}const a=t.createParsingComponents();let u=Xe(t.reference.instant);return i.match(/week/i)?(u=u.add(-u.get("d"),"d"),a.imply("day",u.date()),a.imply("month",u.month()+1),a.imply("year",u.year())):i.match(/month/i)?(u=u.add(-u.date()+1,"d"),a.imply("day",u.date()),a.assign("year",u.year()),a.assign("month",u.month()+1)):i.match(/year/i)&&(u=u.add(-u.date()+1,"d"),u=u.add(-u.month(),"month"),a.imply("day",u.date()),a.imply("month",u.month()+1),a.assign("year",u.year())),a}}class bn{constructor(t){t=t||of(),this.parsers=[...t.parsers],this.refiners=[...t.refiners]}clone(){return new bn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(t,n,r){const i=this.parse(t,n,r);return i.length>0?i[0].start.date():null}parse(t,n,r){const i=new _h(t,n,r);let o=[];return this.parsers.forEach(a=>{const u=bn.executeParser(i,a);o=o.concat(u)}),o.sort((a,u)=>a.index-u.index),this.refiners.forEach(function(a){o=a.refine(i,o)}),o}static executeParser(t,n){const r=[],i=n.pattern(t),o=t.text;let a=t.text,u=i.exec(a);for(;u;){const s=u.index+o.length-a.length;u.index=s;const l=n.extract(t,u);if(!l){a=o.substring(u.index+1),u=i.exec(a);continue}let p=null;l instanceof nr?p=l:l instanceof Oe?(p=t.createParsingResult(u.index,u[0]),p.start=l):p=t.createParsingResult(u.index,u[0],l),t.debug(()=>console.log(`${n.constructor.name} extracted result ${p}`)),r.push(p),a=o.substring(s+p.text.length),u=i.exec(a)}return r}}class _h{constructor(t,n,r){this.text=t,this.reference=new tf(n),this.option=r??{},this.refDate=this.reference.instant}createParsingComponents(t){return t instanceof Oe?t:new Oe(this.reference,t)}createParsingResult(t,n,r,i){const o=typeof n=="string"?n:this.text.substring(t,n),a=r?this.createParsingComponents(r):null,u=i?this.createParsingComponents(i):null;return new nr(this.reference,t,o,a,u)}debug(t){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(t):this.option.debug.debug(t))}}const mh=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),$r=1,wh=5,fs=2,cs=3,Oi=4;class bh{constructor(t){this.groupNumberMonth=t?cs:fs,this.groupNumberDay=t?fs:cs}pattern(){return mh}extract(t,n){if(n[$r].length==0&&n.index>0&&n.index<t.text.length){const s=t.text[n.index-1];if(s>="0"&&s<="9")return}const r=n.index+n[$r].length,i=n[0].substr(n[$r].length,n[0].length-n[$r].length-n[wh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!n[Oi]&&n[0].indexOf("/")<0)return;const o=t.createParsingResult(r,i);let a=parseInt(n[this.groupNumberMonth]),u=parseInt(n[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(u>=1&&u<=12&&a<=31)[u,a]=[a,u];else return null;if(u<1||u>31)return null;if(o.start.assign("day",u),o.start.assign("month",a),n[Oi]){const s=parseInt(n[Oi]),l=Qu(s);o.start.assign("year",l)}else{const s=ei(t.refDate,u,a);o.start.imply("year",s)}return o}}const Th=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${en})(?=\\W|$)`,"i");class $h extends Ze{innerPattern(){return Th}innerExtract(t,n){const r=n[1].toLowerCase();let i=tr(n[2]);switch(r){case"last":case"past":case"-":i=Ho(i);break}return Oe.createRelativeFromReference(t.reference,i)}}function ls(e){return e.text.match(/\s+(before|from)$/i)!=null}function Eh(e){return e.text.match(/\s+(after|since)$/i)!=null}class Ah extends ri{patternBetween(){return/^\s*$/i}shouldMergeResults(t,n,r){return!t.match(this.patternBetween())||!ls(n)&&!Eh(n)?!1:!!r.start.get("day")&&!!r.start.get("month")&&!!r.start.get("year")}mergeResults(t,n,r){let i=tr(n.text);ls(n)&&(i=Ho(i));const o=Oe.createRelativeFromReference(new tf(r.start.date()),i);return new nr(r.reference,n.index,`${n.text}${t}${r.text}`,o)}}const Sh=new bn(of(!1));new bn(Go(!0,!1));new bn(Go(!1,!0));function of(e=!1){const t=Go(!1,e);return t.parsers.unshift(new rh),t.parsers.unshift(new oh),t.parsers.unshift(new ed),t.parsers.unshift(new yh),t.parsers.unshift(new $h),t}function Go(e=!0,t=!1){return Gd({parsers:[new bh(t),new Hl,new Wl,new Vl,new hh,new od,new fd,new hd(e),new yd(e),new bd(e)],refiners:[new Ah,new Sd,new Ed]},e)}var pe;(function(e){e[e.AM=0]="AM",e[e.PM=1]="PM"})(pe||(pe={}));var Ct;(function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"})(Ct||(Ct={}));const Ch=Sh;function Oh(e,t,n){return Ch.parseDate(e,t,n)}function xh(e,t){let n,r;[r,n]=e.length>t.length?[e,t]:[t,e];const i=Math.floor(r.length/2)-1,o=[],a=[];for(let f=0;f<n.length;f++){let d=n[f];const y=Math.max(0,f-i),m=Math.min(f+i+1,r.length);for(let $=y;$<m;$++)if(a[$]===void 0&&d===r[$]){o[f]=a[$]=d;break}}const u=o.join(""),s=a.join(""),l=u.length;let p=0;for(let f=0;f<u.length;f++)u[f]!==s[f]&&p++;return l>0?(l/n.length+l/r.length+(l-Math.floor(p/2))/l)/3:0}function kh(e,t,n=.2){const r=xh(e,t);let i=0;for(let o=0;o<e.length&&e[o]===t[o];o++)i++;return r+Math.min(i,4)*n*(1-r)}const Zi=["homework","test","worksheet","study","research","read","paper","presentation","lab","final","midterm","quiz","project"];function Rh(e,t){let n,r,i=0;const o=e.replaceAll(/[^\w]/g," ").trim().toLowerCase();for(const a of o.split(" "))for(const u of t){const s=kh(u,a);s>i&&(n=u,r=a,i=s)}return console.log(n,"==",r,i),[n,i]}function jh(e,t){return(e.match(t)||[]).length}const Ph={},Fh=Object.freeze(Object.defineProperty({__proto__:null,default:Ph},Symbol.toStringTag,{value:"Module"})),Ih=Bo(Fh);var zo={};zo.test=function(){return typeof ge.queueMicrotask=="function"};zo.install=function(e){return function(){ge.queueMicrotask(e)}};var Wo={},af=ge.MutationObserver||ge.WebKitMutationObserver;Wo.test=function(){return af};Wo.install=function(e){var t=0,n=new af(e),r=ge.document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}};var Ko={};Ko.test=function(){return ge.setImmediate?!1:typeof ge.MessageChannel<"u"};Ko.install=function(e){var t=new ge.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}};var Yo={};Yo.test=function(){return"document"in ge&&"onreadystatechange"in ge.document.createElement("script")};Yo.install=function(e){return function(){var t=ge.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},ge.document.documentElement.appendChild(t),e}};var Qo={};Qo.test=function(){return!0};Qo.install=function(e){return function(){setTimeout(e,0)}};var Mn=[Ih,zo,Wo,Ko,Yo,Qo],pn,Ut,Ln=-1,xt=[],Xi=!1;function Dh(){!pn||!Ut||(pn=!1,Ut.length?xt=Ut.concat(xt):Ln=-1,xt.length&&sf())}function sf(){if(!pn){Xi=!1,pn=!0;for(var e=xt.length,t=setTimeout(Dh);e;){for(Ut=xt,xt=[];Ut&&++Ln<e;)Ut[Ln].run();Ln=-1,e=xt.length}Ut=null,Ln=-1,pn=!1,clearTimeout(t)}}var uf,Fn=-1,Nh=Mn.length;for(;++Fn<Nh;)if(Mn[Fn]&&Mn[Fn].test&&Mn[Fn].test()){uf=Mn[Fn].install(sf);break}function ff(e,t){this.fun=e,this.array=t}ff.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}};var Mh=Lh;function Lh(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];xt.push(new ff(e,t)),!Xi&&!pn&&(Xi=!0,uf())}const Ge=at(Mh);var Er,Bh=new Uint8Array(16);function Uh(){if(!Er&&(Er=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Er))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Er(Bh)}const qh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Hh(e){return typeof e=="string"&&qh.test(e)}var Ue=[];for(var xi=0;xi<256;++xi)Ue.push((xi+256).toString(16).substr(1));function Gh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ue[e[t+0]]+Ue[e[t+1]]+Ue[e[t+2]]+Ue[e[t+3]]+"-"+Ue[e[t+4]]+Ue[e[t+5]]+"-"+Ue[e[t+6]]+Ue[e[t+7]]+"-"+Ue[e[t+8]]+Ue[e[t+9]]+"-"+Ue[e[t+10]]+Ue[e[t+11]]+Ue[e[t+12]]+Ue[e[t+13]]+Ue[e[t+14]]+Ue[e[t+15]]).toLowerCase();if(!Hh(n))throw TypeError("Stringified UUID is invalid");return n}function cf(e,t,n){e=e||{};var r=e.random||(e.rng||Uh)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Gh(r)}var lf={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(g,v){var c=g[0],h=g[1],_=g[2],b=g[3];c+=(h&_|~h&b)+v[0]-680876936|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&_)+v[1]-389564586|0,b=(b<<12|b>>>20)+c|0,_+=(b&c|~b&h)+v[2]+606105819|0,_=(_<<17|_>>>15)+b|0,h+=(_&b|~_&c)+v[3]-1044525330|0,h=(h<<22|h>>>10)+_|0,c+=(h&_|~h&b)+v[4]-176418897|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&_)+v[5]+1200080426|0,b=(b<<12|b>>>20)+c|0,_+=(b&c|~b&h)+v[6]-1473231341|0,_=(_<<17|_>>>15)+b|0,h+=(_&b|~_&c)+v[7]-45705983|0,h=(h<<22|h>>>10)+_|0,c+=(h&_|~h&b)+v[8]+1770035416|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&_)+v[9]-1958414417|0,b=(b<<12|b>>>20)+c|0,_+=(b&c|~b&h)+v[10]-42063|0,_=(_<<17|_>>>15)+b|0,h+=(_&b|~_&c)+v[11]-1990404162|0,h=(h<<22|h>>>10)+_|0,c+=(h&_|~h&b)+v[12]+1804603682|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&_)+v[13]-40341101|0,b=(b<<12|b>>>20)+c|0,_+=(b&c|~b&h)+v[14]-1502002290|0,_=(_<<17|_>>>15)+b|0,h+=(_&b|~_&c)+v[15]+1236535329|0,h=(h<<22|h>>>10)+_|0,c+=(h&b|_&~b)+v[1]-165796510|0,c=(c<<5|c>>>27)+h|0,b+=(c&_|h&~_)+v[6]-1069501632|0,b=(b<<9|b>>>23)+c|0,_+=(b&h|c&~h)+v[11]+643717713|0,_=(_<<14|_>>>18)+b|0,h+=(_&c|b&~c)+v[0]-373897302|0,h=(h<<20|h>>>12)+_|0,c+=(h&b|_&~b)+v[5]-701558691|0,c=(c<<5|c>>>27)+h|0,b+=(c&_|h&~_)+v[10]+38016083|0,b=(b<<9|b>>>23)+c|0,_+=(b&h|c&~h)+v[15]-660478335|0,_=(_<<14|_>>>18)+b|0,h+=(_&c|b&~c)+v[4]-405537848|0,h=(h<<20|h>>>12)+_|0,c+=(h&b|_&~b)+v[9]+568446438|0,c=(c<<5|c>>>27)+h|0,b+=(c&_|h&~_)+v[14]-1019803690|0,b=(b<<9|b>>>23)+c|0,_+=(b&h|c&~h)+v[3]-187363961|0,_=(_<<14|_>>>18)+b|0,h+=(_&c|b&~c)+v[8]+1163531501|0,h=(h<<20|h>>>12)+_|0,c+=(h&b|_&~b)+v[13]-1444681467|0,c=(c<<5|c>>>27)+h|0,b+=(c&_|h&~_)+v[2]-51403784|0,b=(b<<9|b>>>23)+c|0,_+=(b&h|c&~h)+v[7]+1735328473|0,_=(_<<14|_>>>18)+b|0,h+=(_&c|b&~c)+v[12]-1926607734|0,h=(h<<20|h>>>12)+_|0,c+=(h^_^b)+v[5]-378558|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^_)+v[8]-2022574463|0,b=(b<<11|b>>>21)+c|0,_+=(b^c^h)+v[11]+1839030562|0,_=(_<<16|_>>>16)+b|0,h+=(_^b^c)+v[14]-35309556|0,h=(h<<23|h>>>9)+_|0,c+=(h^_^b)+v[1]-1530992060|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^_)+v[4]+1272893353|0,b=(b<<11|b>>>21)+c|0,_+=(b^c^h)+v[7]-155497632|0,_=(_<<16|_>>>16)+b|0,h+=(_^b^c)+v[10]-1094730640|0,h=(h<<23|h>>>9)+_|0,c+=(h^_^b)+v[13]+681279174|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^_)+v[0]-358537222|0,b=(b<<11|b>>>21)+c|0,_+=(b^c^h)+v[3]-722521979|0,_=(_<<16|_>>>16)+b|0,h+=(_^b^c)+v[6]+76029189|0,h=(h<<23|h>>>9)+_|0,c+=(h^_^b)+v[9]-640364487|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^_)+v[12]-421815835|0,b=(b<<11|b>>>21)+c|0,_+=(b^c^h)+v[15]+530742520|0,_=(_<<16|_>>>16)+b|0,h+=(_^b^c)+v[2]-995338651|0,h=(h<<23|h>>>9)+_|0,c+=(_^(h|~b))+v[0]-198630844|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~_))+v[7]+1126891415|0,b=(b<<10|b>>>22)+c|0,_+=(c^(b|~h))+v[14]-1416354905|0,_=(_<<15|_>>>17)+b|0,h+=(b^(_|~c))+v[5]-57434055|0,h=(h<<21|h>>>11)+_|0,c+=(_^(h|~b))+v[12]+1700485571|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~_))+v[3]-1894986606|0,b=(b<<10|b>>>22)+c|0,_+=(c^(b|~h))+v[10]-1051523|0,_=(_<<15|_>>>17)+b|0,h+=(b^(_|~c))+v[1]-2054922799|0,h=(h<<21|h>>>11)+_|0,c+=(_^(h|~b))+v[8]+1873313359|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~_))+v[15]-30611744|0,b=(b<<10|b>>>22)+c|0,_+=(c^(b|~h))+v[6]-1560198380|0,_=(_<<15|_>>>17)+b|0,h+=(b^(_|~c))+v[13]+1309151649|0,h=(h<<21|h>>>11)+_|0,c+=(_^(h|~b))+v[4]-145523070|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~_))+v[11]-1120210379|0,b=(b<<10|b>>>22)+c|0,_+=(c^(b|~h))+v[2]+718787259|0,_=(_<<15|_>>>17)+b|0,h+=(b^(_|~c))+v[9]-343485551|0,h=(h<<21|h>>>11)+_|0,g[0]=c+g[0]|0,g[1]=h+g[1]|0,g[2]=_+g[2]|0,g[3]=b+g[3]|0}function o(g){var v=[],c;for(c=0;c<64;c+=4)v[c>>2]=g.charCodeAt(c)+(g.charCodeAt(c+1)<<8)+(g.charCodeAt(c+2)<<16)+(g.charCodeAt(c+3)<<24);return v}function a(g){var v=[],c;for(c=0;c<64;c+=4)v[c>>2]=g[c]+(g[c+1]<<8)+(g[c+2]<<16)+(g[c+3]<<24);return v}function u(g){var v=g.length,c=[1732584193,-271733879,-1732584194,271733878],h,_,b,x,j,P;for(h=64;h<=v;h+=64)i(c,o(g.substring(h-64,h)));for(g=g.substring(h-64),_=g.length,b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<_;h+=1)b[h>>2]|=g.charCodeAt(h)<<(h%4<<3);if(b[h>>2]|=128<<(h%4<<3),h>55)for(i(c,b),h=0;h<16;h+=1)b[h]=0;return x=v*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(x[2],16),P=parseInt(x[1],16)||0,b[14]=j,b[15]=P,i(c,b),c}function s(g){var v=g.length,c=[1732584193,-271733879,-1732584194,271733878],h,_,b,x,j,P;for(h=64;h<=v;h+=64)i(c,a(g.subarray(h-64,h)));for(g=h-64<v?g.subarray(h-64):new Uint8Array(0),_=g.length,b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<_;h+=1)b[h>>2]|=g[h]<<(h%4<<3);if(b[h>>2]|=128<<(h%4<<3),h>55)for(i(c,b),h=0;h<16;h+=1)b[h]=0;return x=v*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(x[2],16),P=parseInt(x[1],16)||0,b[14]=j,b[15]=P,i(c,b),c}function l(g){var v="",c;for(c=0;c<4;c+=1)v+=r[g>>c*8+4&15]+r[g>>c*8&15];return v}function p(g){var v;for(v=0;v<g.length;v+=1)g[v]=l(g[v]);return g.join("")}p(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function g(v,c){return v=v|0||0,v<0?Math.max(v+c,0):Math.min(v,c)}ArrayBuffer.prototype.slice=function(v,c){var h=this.byteLength,_=g(v,h),b=h,x,j,P,L;return c!==n&&(b=g(c,h)),_>b?new ArrayBuffer(0):(x=b-_,j=new ArrayBuffer(x),P=new Uint8Array(j),L=new Uint8Array(this,_,x),P.set(L),j)}}();function f(g){return/[\u0080-\uFFFF]/.test(g)&&(g=unescape(encodeURIComponent(g))),g}function d(g,v){var c=g.length,h=new ArrayBuffer(c),_=new Uint8Array(h),b;for(b=0;b<c;b+=1)_[b]=g.charCodeAt(b);return v?_:h}function y(g){return String.fromCharCode.apply(null,new Uint8Array(g))}function m(g,v,c){var h=new Uint8Array(g.byteLength+v.byteLength);return h.set(new Uint8Array(g)),h.set(new Uint8Array(v),g.byteLength),c?h:h.buffer}function $(g){var v=[],c=g.length,h;for(h=0;h<c-1;h+=2)v.push(parseInt(g.substr(h,2),16));return String.fromCharCode.apply(String,v)}function w(){this.reset()}return w.prototype.append=function(g){return this.appendBinary(f(g)),this},w.prototype.appendBinary=function(g){this._buff+=g,this._length+=g.length;var v=this._buff.length,c;for(c=64;c<=v;c+=64)i(this._hash,o(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},w.prototype.end=function(g){var v=this._buff,c=v.length,h,_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b;for(h=0;h<c;h+=1)_[h>>2]|=v.charCodeAt(h)<<(h%4<<3);return this._finish(_,c),b=p(this._hash),g&&(b=$(b)),this.reset(),b},w.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},w.prototype.setState=function(g){return this._buff=g.buff,this._length=g.length,this._hash=g.hash,this},w.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},w.prototype._finish=function(g,v){var c=v,h,_,b;if(g[c>>2]|=128<<(c%4<<3),c>55)for(i(this._hash,g),c=0;c<16;c+=1)g[c]=0;h=this._length*8,h=h.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(h[2],16),b=parseInt(h[1],16)||0,g[14]=_,g[15]=b,i(this._hash,g)},w.hash=function(g,v){return w.hashBinary(f(g),v)},w.hashBinary=function(g,v){var c=u(g),h=p(c);return v?$(h):h},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(g){var v=m(this._buff.buffer,g,!0),c=v.length,h;for(this._length+=g.byteLength,h=64;h<=c;h+=64)i(this._hash,a(v.subarray(h-64,h)));return this._buff=h-64<c?new Uint8Array(v.buffer.slice(h-64)):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(g){var v=this._buff,c=v.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_,b;for(_=0;_<c;_+=1)h[_>>2]|=v[_]<<(_%4<<3);return this._finish(h,c),b=p(this._hash),g&&(b=$(b)),this.reset(),b},w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.getState=function(){var g=w.prototype.getState.call(this);return g.buff=y(g.buff),g},w.ArrayBuffer.prototype.setState=function(g){return g.buff=d(g.buff,!0),w.prototype.setState.call(this,g)},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.hash=function(g,v){var c=s(new Uint8Array(g)),h=p(c);return v?$(h):h},w})})(lf);var zh=lf.exports;const Gr=at(zh);var ii={};ii.stringify=function(t){var n=[];n.push({obj:t});for(var r="",i,o,a,u,s,l,p,f,d,y,m;i=n.pop();)if(o=i.obj,a=i.prefix||"",u=i.val||"",r+=a,u)r+=u;else if(typeof o!="object")r+=typeof o>"u"?null:JSON.stringify(o);else if(o===null)r+="null";else if(Array.isArray(o)){for(n.push({val:"]"}),s=o.length-1;s>=0;s--)l=s===0?"":",",n.push({obj:o[s],prefix:l});n.push({val:"["})}else{p=[];for(f in o)o.hasOwnProperty(f)&&p.push(f);for(n.push({val:"}"}),s=p.length-1;s>=0;s--)d=p[s],y=o[d],m=s>0?",":"",m+=JSON.stringify(d)+":",n.push({obj:y,prefix:m});n.push({val:"{"})}return r};function fn(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(e);else if(o===t.length-2){var a=t.pop();i[a]=e}else t.push(e)}ii.parse=function(e){for(var t=[],n=[],r=0,i,o,a,u,s,l,p,f,d;;){if(i=e[r++],i==="}"||i==="]"||typeof i>"u"){if(t.length===1)return t.pop();fn(t.pop(),t,n);continue}switch(i){case" ":case"	":case`
`:case":":case",":break;case"n":r+=3,fn(null,t,n);break;case"t":r+=3,fn(!0,t,n);break;case"f":r+=4,fn(!1,t,n);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(o="",r--;;)if(a=e[r++],/[\d\.\-e\+]/.test(a))o+=a;else{r--;break}fn(parseFloat(o),t,n);break;case'"':for(u="",s=void 0,l=0;p=e[r++],p!=='"'||s==="\\"&&l%2===1;)u+=p,s=p,s==="\\"?l++:l=0;fn(JSON.parse('"'+u+'"'),t,n);break;case"[":f={element:[],index:t.length},t.push(f.element),n.push(f);break;case"{":d={element:{},index:t.length},t.push(d.element),n.push(d);break;default:throw new Error("unexpectedly reached end of input: "+i)}}};var Wh=Kh;function Kh(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}else return e.call(this,[])}}const Et=at(Wh);var eo={exports:{}};typeof Object.create=="function"?eo.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:eo.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var Yh=eo.exports;const ze=at(Yh);var Vo={exports:{}},gn=typeof Reflect=="object"?Reflect:null,ds=gn&&typeof gn.apply=="function"?gn.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Rr;gn&&typeof gn.ownKeys=="function"?Rr=gn.ownKeys:Object.getOwnPropertySymbols?Rr=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Rr=function(t){return Object.getOwnPropertyNames(t)};function Qh(e){console&&console.warn&&console.warn(e)}var df=Number.isNaN||function(t){return t!==t};function _e(){_e.init.call(this)}Vo.exports=_e;Vo.exports.once=Xh;_e.EventEmitter=_e;_e.prototype._events=void 0;_e.prototype._eventsCount=0;_e.prototype._maxListeners=void 0;var hs=10;function oi(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(_e,"defaultMaxListeners",{enumerable:!0,get:function(){return hs},set:function(e){if(typeof e!="number"||e<0||df(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");hs=e}});_e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_e.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||df(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function hf(e){return e._maxListeners===void 0?_e.defaultMaxListeners:e._maxListeners}_e.prototype.getMaxListeners=function(){return hf(this)};_e.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var s=o[t];if(s===void 0)return!1;if(typeof s=="function")ds(s,this,n);else for(var l=s.length,p=_f(s,l),r=0;r<l;++r)ds(p[r],this,n);return!0};function vf(e,t,n,r){var i,o,a;if(oi(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),a===void 0)a=o[t]=n,++e._eventsCount;else if(typeof a=="function"?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=hf(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,Qh(u)}return e}_e.prototype.addListener=function(t,n){return vf(this,t,n,!1)};_e.prototype.on=_e.prototype.addListener;_e.prototype.prependListener=function(t,n){return vf(this,t,n,!0)};function Vh(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pf(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Vh.bind(r);return i.listener=n,r.wrapFn=i,i}_e.prototype.once=function(t,n){return oi(n),this.on(t,pf(this,t,n)),this};_e.prototype.prependOnceListener=function(t,n){return oi(n),this.prependListener(t,pf(this,t,n)),this};_e.prototype.removeListener=function(t,n){var r,i,o,a,u;if(oi(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){u=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():Jh(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};_e.prototype.off=_e.prototype.removeListener;_e.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function gf(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Zh(i):_f(i,i.length)}_e.prototype.listeners=function(t){return gf(this,t,!0)};_e.prototype.rawListeners=function(t){return gf(this,t,!1)};_e.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):yf.call(e,t)};_e.prototype.listenerCount=yf;function yf(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}_e.prototype.eventNames=function(){return this._eventsCount>0?Rr(this._events):[]};function _f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Jh(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Zh(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Xh(e,t){return new Promise(function(n,r){function i(a){e.removeListener(t,o),r(a)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}mf(e,t,o,{once:!0}),t!=="error"&&ev(e,i,{once:!0})})}function ev(e,t,n){typeof e.on=="function"&&mf(e,"error",t,n)}function mf(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var rr=Vo.exports;const Le=at(rr);function ai(e){return"$"+e}function wf(e){return e.substring(1)}function At(){this._store={}}At.prototype.get=function(e){var t=ai(e);return this._store[t]};At.prototype.set=function(e,t){var n=ai(e);return this._store[n]=t,!0};At.prototype.has=function(e){var t=ai(e);return t in this._store};At.prototype.keys=function(){return Object.keys(this._store).map(e=>wf(e))};At.prototype.delete=function(e){var t=ai(e),n=t in this._store;return delete this._store[t],n};At.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],o=this._store[i];i=wf(i),e(o,i)}};Object.defineProperty(At.prototype,"size",{get:function(){return Object.keys(this._store).length}});function ir(e){if(this._store=new At,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}ir.prototype.add=function(e){return this._store.set(e,!0)};ir.prototype.has=function(e){return this._store.has(e)};ir.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(ir.prototype,"size",{get:function(){return this._store.size}});function tv(){if(typeof Symbol>"u"||typeof Map>"u"||typeof Set>"u")return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}var Tn,Qe;tv()?(Tn=Set,Qe=Map):(Tn=ir,Qe=At);function nv(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer||typeof Blob<"u"&&e instanceof Blob}function rv(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function iv(e){if(e instanceof ArrayBuffer)return rv(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var bf=Function.prototype.toString,ov=bf.call(Object);function av(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&bf.call(n)==ov}function Ne(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=Ne(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(nv(e))return iv(e);if(!av(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Ne(e[n]);typeof i<"u"&&(t[n]=i)}return t}function Tf(e){var t=!1;return Et(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function $f(e){return Et(function(t){t=Ne(t);var n=this,r=typeof t[t.length-1]=="function"?t.pop():!1,i=new Promise(function(o,a){var u;try{var s=Tf(function(l,p){l?a(l):o(p)});t.push(s),u=e.apply(n,t),u&&typeof u.then=="function"&&o(u)}catch(l){a(l)}});return r&&i.then(function(o){r(null,o)},r),i})}function sv(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var o=n[n.length-1];n[n.length-1]=function(a,u){var s=["api",e.name,t];s=s.concat(a?["error",a]:["success",u]),e.constructor.emit("debug",s),o(a,u)}}}function Ie(e,t){return $f(Et(function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return sv(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise(function(i,o){r.taskqueue.addTask(function(a){a?o(a):i(r[e].apply(r,n))})})}))}function or(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var uv=6;function vs(e){return e}function fv(e){return[{ok:e}]}function Ef(e,t,n){var r=t.docs,i=new Qe;r.forEach(function($){i.has($.id)?i.get($.id).push($):i.set($.id,[$])});var o=i.size,a=0,u=new Array(o);function s(){var $=[];u.forEach(function(w){w.docs.forEach(function(g){$.push({id:w.id,docs:[g]})})}),n(null,{results:$})}function l(){++a===o&&s()}function p($,w,g){u[$]={id:w,docs:g},l()}var f=[];i.forEach(function($,w){f.push(w)});var d=0;function y(){if(!(d>=f.length)){var $=Math.min(d+uv,f.length),w=f.slice(d,$);m(w,d),d+=w.length}}function m($,w){$.forEach(function(g,v){var c=w+v,h=i.get(g),_=or(h[0],["atts_since","attachments"]);_.open_revs=h.map(function(x){return x.rev}),_.open_revs=_.open_revs.filter(vs);var b=vs;_.open_revs.length===0&&(delete _.open_revs,b=fv),["revs","attachments","binary","ajax","latest"].forEach(function(x){x in t&&(_[x]=t[x])}),e.get(g,_,function(x,j){var P;x?P=[{error:x}]:P=b(j),p(c,g,P),y()})})}y()}var to;try{localStorage.setItem("_pouch_check_localstorage",1),to=!!localStorage.getItem("_pouch_check_localstorage")}catch{to=!1}function si(){return to}ze(On,Le);function cv(e){si()&&addEventListener("storage",function(t){e.emit(t.key)})}function On(){Le.call(this),this._listeners={},cv(this)}On.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,o=!1;function a(){if(!i._listeners[t])return;if(o){o="waiting";return}o=!0;var u=or(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function s(){o=!1}n.changes(u).on("change",function(l){l.seq>r.since&&!r.cancelled&&(r.since=l.seq,r.onChange(l))}).on("complete",function(){o==="waiting"&&Ge(a),o=!1}).on("error",s)}this._listeners[t]=a,this.on(e,a)};On.prototype.removeListener=function(e,t){t in this._listeners&&(Le.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};On.prototype.notifyLocalWindows=function(e){si()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};On.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};function rt(e){if(typeof console<"u"&&typeof console[e]=="function"){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function lv(e,t){var n=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||t<=e?t=(e||1)<<1:t=t+1,t>n&&(e=n>>1,t=n);var r=Math.random(),i=t-e;return~~(i*r+e)}function dv(e){var t=0;return e||(t=2e3),lv(e,t)}function no(e,t){rt("info","The above "+e+" is totally normal. "+t)}var ro;typeof Object.assign=="function"?ro=Object.assign:ro=function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var Kt=ro;ze(we,Error);function we(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}we.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new we(401,"unauthorized","Name or password is incorrect.");var hv=new we(400,"bad_request","Missing JSON list of 'docs'"),ct=new we(404,"not_found","missing"),$n=new we(409,"conflict","Document update conflict"),Af=new we(400,"bad_request","_id field must contain a string"),vv=new we(412,"missing_id","_id is required for puts"),pv=new we(400,"bad_request","Only reserved document ids may start with underscore.");new we(412,"precondition_failed","Database not open");var Sf=new we(500,"unknown_error","Database encountered an unknown error"),Cf=new we(500,"badarg","Some query argument is invalid");new we(400,"invalid_request","Request was invalid");var gv=new we(400,"query_parse_error","Some query parameter is invalid"),ps=new we(500,"doc_validation","Bad special document member"),ui=new we(400,"bad_request","Something wrong with the request"),Jo=new we(400,"bad_request","Document must be a JSON object");new we(404,"not_found","Database not found");var Zo=new we(500,"indexed_db_went_bad","unknown");new we(500,"web_sql_went_bad","unknown");new we(500,"levelDB_went_went_bad","unknown");new we(403,"forbidden","Forbidden by design doc validate_doc_update function");var Of=new we(400,"bad_request","Invalid rev format");new we(412,"file_exists","The database could not be created, the file already exists.");var yv=new we(412,"missing_stub","A pre-existing attachment stub wasn't found");new we(413,"invalid_url","Provided URL is invalid");function ce(e,t){function n(r){for(var i=Object.getOwnPropertyNames(e),o=0,a=i.length;o<a;o++)typeof e[i[o]]!="function"&&(this[i[o]]=e[i[o]]);this.stack===void 0&&(this.stack=new Error().stack),r!==void 0&&(this.reason=r)}return n.prototype=we.prototype,new n(t)}function En(e){if(typeof e!="object"){var t=e;e=Sf,e.data=t}return"error"in e&&e.error==="conflict"&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=new Error().stack),e}function _v(e,t,n){try{return!e(t,n)}catch(i){var r="Filter function threw: "+i.toString();return ce(ui,r)}}function Xo(e){var t={},n=e.filter&&typeof e.filter=="function";return t.query=e.query_params,function(i){i.doc||(i.doc={});var o=n&&_v(e.filter,i.doc,t);if(typeof o=="object")return o;if(o)return!1;if(!e.include_docs)delete i.doc;else if(!e.attachments)for(var a in i.doc._attachments)Object.prototype.hasOwnProperty.call(i.doc._attachments,a)&&(i.doc._attachments[a].stub=!0);return!0}}function zr(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function xf(e){var t;if(e?typeof e!="string"?t=ce(Af):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=ce(pv)):t=ce(vv),t)throw t}function gt(e){return typeof e._remote=="boolean"?e._remote:typeof e.type=="function"?(rt("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),e.type()==="http"):!1}function mv(e,t){return"listenerCount"in e?e.listenerCount(t):Le.listenerCount(e,t)}function io(e){if(!e)return null;var t=e.split("/");return t.length===2?t:t.length===1?[e,e]:null}function gs(e){var t=io(e);return t?t.join("/"):null}var ys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_s="queryKey",wv=/(?:^|&)([^&=]*)=?([^&]*)/g,bv=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function kf(e){for(var t=bv.exec(e),n={},r=14;r--;){var i=ys[r],o=t[r]||"",a=["user","password"].indexOf(i)!==-1;n[i]=a?decodeURIComponent(o):o}return n[_s]={},n[ys[12]].replace(wv,function(u,s,l){s&&(n[_s][s]=l)}),n}function ea(e,t){var n=[],r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function fi(e,t,n){return e.get(t).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,o=n(r);return o?(o._id=t,o._rev=i,Tv(e,o,n)):{updated:!1,rev:i}})}function Tv(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return fi(e,t._id,n)})}var ta=function(e){return atob(e)},ar=function(e){return btoa(e)};function na(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if(o.name!=="TypeError")throw o;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function $v(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function ra(e,t){return na([$v(e)],{type:t})}function ia(e,t){return ra(ta(e),t)}function Ev(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function Rf(e,t){var n=new FileReader,r=typeof n.readAsBinaryString=="function";n.onloadend=function(i){var o=i.target.result||"";if(r)return t(o);t(Ev(o))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function jf(e,t){Rf(e,function(n){t(n)})}function oa(e,t){jf(e,function(n){t(ar(n))})}function Av(e,t){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);t(i)},n.readAsArrayBuffer(e)}var Sv=self.setImmediate||self.setTimeout,Cv=32768;function Ov(e){return ar(e)}function xv(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}function kv(e,t,n,r,i){(n>0||r<t.size)&&(t=xv(t,n,r)),Av(t,function(o){e.append(o),i()})}function Rv(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function aa(e,t){var n=typeof e=="string",r=n?e.length:e.size,i=Math.min(Cv,r),o=Math.ceil(r/i),a=0,u=n?new Gr:new Gr.ArrayBuffer,s=n?Rv:kv;function l(){Sv(f)}function p(){var d=u.end(!0),y=Ov(d);t(y),u.destroy()}function f(){var d=a*i,y=d+i;a++,a<o?s(u,e,d,y,l):s(u,e,d,y,p)}f()}function Pf(e){return Gr.hash(e)}function Ff(e,t){if(!t)return cf().replace(/-/g,"").toLowerCase();var n=Kt({},e);return delete n._rev_tree,Pf(JSON.stringify(n))}var ci=cf;function Yt(e){for(var t,n,r,i=e.rev_tree.slice(),o;o=i.pop();){var a=o.ids,u=a[2],s=o.pos;if(u.length){for(var l=0,p=u.length;l<p;l++)i.push({pos:s+1,ids:u[l]});continue}var f=!!a[1].deleted,d=a[0];(!t||(r!==f?r:n!==s?n<s:t<d))&&(t=d,n=s,r=f)}return n+"-"+t}function nn(e,t){for(var n=e.slice(),r;r=n.pop();)for(var i=r.pos,o=r.ids,a=o[2],u=t(a.length===0,i,o[0],r.ctx,o[1]),s=0,l=a.length;s<l;s++)n.push({pos:i+1,ids:a[s],ctx:u})}function jv(e,t){return e.pos-t.pos}function sa(e){var t=[];nn(e,function(i,o,a,u,s){i&&t.push({rev:o+"-"+a,pos:o,opts:s})}),t.sort(jv).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function ua(e){for(var t=Yt(e),n=sa(e.rev_tree),r=[],i=0,o=n.length;i<o;i++){var a=n[i];a.rev!==t&&!a.opts.deleted&&r.push(a.rev)}return r}function Pv(e){var t=[];return nn(e.rev_tree,function(n,r,i,o,a){a.status==="available"&&!n&&(t.push(r+"-"+i),a.status="missing")}),t}function If(e){for(var t=[],n=e.slice(),r;r=n.pop();){var i=r.pos,o=r.ids,a=o[0],u=o[1],s=o[2],l=s.length===0,p=r.history?r.history.slice():[];p.push({id:a,opts:u}),l&&t.push({pos:i+1-p.length,ids:p});for(var f=0,d=s.length;f<d;f++)n.push({pos:i+1,ids:s[f],history:p})}return t.reverse()}function Fv(e,t){return e.pos-t.pos}function Iv(e,t,n){for(var r=0,i=e.length,o;r<i;)o=r+i>>>1,n(e[o],t)<0?r=o+1:i=o;return r}function Dv(e,t,n){var r=Iv(e,t,n);e.splice(r,0,t)}function ms(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var a=e[i],u=[a.id,a.opts,[]];r?(r[2].push(u),r=u):n=r=u}return n}function Nv(e,t){return e[0]<t[0]?-1:1}function ws(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,a=i.tree2;(o[1].status||a[1].status)&&(o[1].status=o[1].status==="available"||a[1].status==="available"?"available":"missing");for(var u=0;u<a[2].length;u++){if(!o[2][0]){r="new_leaf",o[2][0]=a[2][u];continue}for(var s=!1,l=0;l<o[2].length;l++)o[2][l][0]===a[2][u][0]&&(n.push({tree1:o[2][l],tree2:a[2][u]}),s=!0);s||(r="new_branch",Dv(o[2],a[2][u],Nv))}}return{conflicts:r,tree:e}}function Df(e,t,n){var r=[],i=!1,o=!1,a;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,s=e.length;u<s;u++){var l=e[u];if(l.pos===t.pos&&l.ids[0]===t.ids[0])a=ws(l.ids,t.ids),r.push({pos:l.pos,ids:a.tree}),i=i||a.conflicts,o=!0;else if(n!==!0){var p=l.pos<t.pos?l:t,f=l.pos<t.pos?t:l,d=f.pos-p.pos,y=[],m=[];for(m.push({ids:p.ids,diff:d,parent:null,parentIdx:null});m.length>0;){var $=m.pop();if($.diff===0){$.ids[0]===f.ids[0]&&y.push($);continue}for(var w=$.ids[2],g=0,v=w.length;g<v;g++)m.push({ids:w[g],diff:$.diff-1,parent:$.ids,parentIdx:g})}var c=y[0];c?(a=ws(c.ids,f.ids),c.parent[2][c.parentIdx]=a.tree,r.push({pos:p.pos,ids:p.ids}),i=i||a.conflicts,o=!0):r.push(l)}else r.push(l)}return o||r.push(t),r.sort(Fv),{tree:r,conflicts:i||"internal_node"}}function Mv(e,t){for(var n=If(e),r,i,o=0,a=n.length;o<a;o++){var u=n[o],s=u.ids,l;if(s.length>t){r||(r={});var p=s.length-t;l={pos:u.pos+p,ids:ms(s,p)};for(var f=0;f<p;f++){var d=u.pos+f+"-"+s[f].id;r[d]=!0}}else l={pos:u.pos,ids:ms(s,0)};i?i=Df(i,l,!0).tree:i=[l]}return r&&nn(i,function(y,m,$){delete r[m+"-"+$]}),{tree:i,revs:r?Object.keys(r):[]}}function Nf(e,t,n){var r=Df(e,t),i=Mv(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function Lv(e,t){for(var n=e.slice(),r=t.split("-"),i=parseInt(r[0],10),o=r[1],a;a=n.pop();){if(a.pos===i&&a.ids[0]===o)return!0;for(var u=a.ids[2],s=0,l=u.length;s<l;s++)n.push({pos:a.pos+1,ids:u[s]})}return!1}function Bv(e){return e.ids}function Tt(e,t){t||(t=Yt(e));for(var n=t.substring(t.indexOf("-")+1),r=e.rev_tree.map(Bv),i;i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function Qt(e){return/^_local/.test(e)}function Uv(e,t){for(var n=t.rev_tree.slice(),r;r=n.pop();){var i=r.pos,o=r.ids,a=o[0],u=o[1],s=o[2],l=s.length===0,p=r.history?r.history.slice():[];if(p.push({id:a,pos:i,opts:u}),l)for(var f=0,d=p.length;f<d;f++){var y=p[f],m=y.pos+"-"+y.id;if(m===e)return i+"-"+a}for(var $=0,w=s.length;$<w;$++)n.push({pos:i+1,ids:s[$],history:p})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}ze(sr,Le);function qv(e,t,n,r){try{e.emit("change",t,n,r)}catch(i){rt("error",'Error in .on("change", function):',i)}}function sr(e,t,n){Le.call(this);var r=this;this.db=e,t=t?Ne(t):{};var i=t.complete=Tf(function(u,s){u?mv(r,"error")>0&&r.emit("error",u):r.emit("complete",s),r.removeAllListeners(),e.removeListener("destroyed",o)});n&&(r.on("complete",function(u){n(null,u)}),r.on("error",n));function o(){r.cancel()}e.once("destroyed",o),t.onChange=function(u,s,l){r.isCancelled||qv(r,u,s,l)};var a=new Promise(function(u,s){t.complete=function(l,p){l?s(l):u(p)}});r.once("cancel",function(){e.removeListener("destroyed",o),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this.catch=a.catch.bind(a),this.then(function(u){i(null,u)},i),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask(function(u){u?t.complete(u):r.isCancelled?r.emit("cancel"):r.validateChanges(t)})}sr.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")};function Hv(e,t,n){var r=[{rev:e._rev}];n.style==="all_docs"&&(r=sa(t.rev_tree).map(function(o){return{rev:o.rev}}));var i={id:t.id,changes:r,doc:e};return Tt(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=ua(t),i.doc._conflicts.length||delete i.doc._conflicts),i}sr.prototype.validateChanges=function(e){var t=e.complete,n=this;ae._changesFilterPlugin?ae._changesFilterPlugin.validate(e,function(r){if(r)return t(r);n.doChanges(e)}):n.doChanges(e)};sr.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=Ne(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Hv,e.since==="latest"&&(e.since="now"),e.since||(e.since=0),e.since==="now"){this.db.info().then(function(o){if(t.isCancelled){n(null,{status:"cancelled"});return}e.since=o.update_seq,t.doChanges(e)},n);return}if(ae._changesFilterPlugin){if(ae._changesFilterPlugin.normalize(e),ae._changesFilterPlugin.shouldFilter(this,e))return ae._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(o){o in e&&rt("warn",'The "'+o+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=e.limit===0?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&typeof r.cancel=="function"){var i=t.cancel;t.cancel=Et(function(o){r.cancel(),i.apply(this,o)})}};function bs(e,t){return e<t?-1:e>t?1:0}function fa(e,t){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=t,e(n)):e(null,r.length?r[0]:r)}}function Gv(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=or(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}function zv(e,t){var n=bs(e._id,t._id);if(n!==0)return n;var r=e._revisions?e._revisions.start:0,i=t._revisions?t._revisions.start:0;return bs(r,i)}function Wv(e){var t={},n=[];return nn(e,function(r,i,o,a){var u=i+"-"+o;return r&&(t[u]=0),a!==void 0&&n.push({from:a,to:u}),u}),n.reverse(),n.forEach(function(r){t[r.from]===void 0?t[r.from]=1+t[r.to]:t[r.from]=Math.min(t[r.from],1+t[r.to])}),t}function Kv(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}function Mf(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),e._compact(n,function(o,a){o?r(o):r(null,a),Ge(function(){e._compactionQueue.shift(),e._compactionQueue.length&&Mf(e)})})})}function Yv(e){return e.charAt(0)==="_"?e+" is not a valid attachment name, attachment names cannot start with '_'":!1}ze(Se,Le);function Se(){Le.call(this);for(var e in Se.prototype)typeof this[e]=="function"&&(this[e]=this[e].bind(this))}Se.prototype.post=Ie("post",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="object"||Array.isArray(e))return n(ce(Jo));this.bulkDocs({docs:[e]},t,fa(n,e._id))});Se.prototype.put=Ie("put",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="object"||Array.isArray(e))return n(ce(Jo));if(xf(e._id),Qt(e._id)&&typeof this._putLocal=="function")return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var r=this;t.force&&e._rev?(i(),o(function(a){var u=a?null:{ok:!0,id:e._id,rev:e._rev};n(a,u)})):o(n);function i(){var a=e._rev.split("-"),u=a[1],s=parseInt(a[0],10),l=s+1,p=Ff();e._revisions={start:l,ids:[p,u]},e._rev=l+"-"+p,t.new_edits=!1}function o(a){typeof r._put=="function"&&t.new_edits!==!1?r._put(e,t,a):r.bulkDocs({docs:[e]},t,fa(a,e._id))}});Se.prototype.putAttachment=Ie("putAttachment",function(e,t,n,r,i){var o=this;typeof i=="function"&&(i=r,r=n,n=null),typeof i>"u"&&(i=r,r=n,n=null),i||rt("warn","Attachment",t,"on document",e,"is missing content_type");function a(u){var s="_rev"in u?parseInt(u._rev,10):0;return u._attachments=u._attachments||{},u._attachments[t]={content_type:i,data:r,revpos:++s},o.put(u)}return o.get(e).then(function(u){if(u._rev!==n)throw ce($n);return a(u)},function(u){if(u.reason===ct.message)return a({_id:e});throw u})});Se.prototype.removeAttachment=Ie("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(o,a){if(o){r(o);return}if(a._rev!==n){r(ce($n));return}if(!a._attachments)return r();delete a._attachments[t],Object.keys(a._attachments).length===0&&delete a._attachments,i.put(a,r)})});Se.prototype.remove=Ie("remove",function(e,t,n,r){var i;typeof t=="string"?(i={_id:e,_rev:t},typeof n=="function"&&(r=n,n={})):(i=e,typeof t=="function"?(r=t,n={}):(r=n,n=t)),n=n||{},n.was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev};if(o._deleted=!0,Qt(o._id)&&typeof this._removeLocal=="function")return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,fa(r,o._id))});Se.prototype.revsDiff=Ie("revsDiff",function(e,t,n){typeof t=="function"&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var i=0,o=new Qe;function a(s,l){o.has(s)||o.set(s,{missing:[]}),o.get(s).missing.push(l)}function u(s,l){var p=e[s].slice(0);nn(l,function(f,d,y,m,$){var w=d+"-"+y,g=p.indexOf(w);g!==-1&&(p.splice(g,1),$.status!=="available"&&a(s,w))}),p.forEach(function(f){a(s,f)})}r.map(function(s){this._getRevisionTree(s,function(l,p){if(l&&l.status===404&&l.message==="missing")o.set(s,{missing:e[s]});else{if(l)return n(l);u(s,p)}if(++i===r.length){var f={};return o.forEach(function(d,y){f[y]=d}),n(null,f)}})},this)});Se.prototype.bulkGet=Ie("bulkGet",function(e,t){Ef(this,e,t)});Se.prototype.compactDocument=Ie("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(i,o){if(i)return n(i);var a=Wv(o),u=[],s=[];Object.keys(a).forEach(function(l){a[l]>t&&u.push(l)}),nn(o,function(l,p,f,d,y){var m=p+"-"+f;y.status==="available"&&u.indexOf(m)!==-1&&s.push(m)}),r._doCompaction(e,s,n)})});Se.prototype.compact=Ie("compact",function(e,t){typeof e=="function"&&(t=e,e={});var n=this;e=e||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),n._compactionQueue.length===1&&Mf(n)});Se.prototype._compact=function(e,t){var n=this,r={return_docs:!1,last_seq:e.last_seq||0},i=[];function o(u){i.push(n.compactDocument(u.id,0))}function a(u){var s=u.last_seq;Promise.all(i).then(function(){return fi(n,"_local/compaction",function(p){return!p.last_seq||p.last_seq<s?(p.last_seq=s,p):!1})}).then(function(){t(null,{ok:!0})}).catch(t)}n.changes(r).on("change",o).on("complete",a).on("error",t)};Se.prototype.get=Ie("get",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="string")return n(ce(Af));if(Qt(e)&&typeof this._getLocal=="function")return this._getLocal(e,n);var r=[],i=this;function o(){var s=[],l=r.length;if(!l)return n(null,s);r.forEach(function(p){i.get(e,{rev:p,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(f,d){if(f)s.push({missing:p});else{for(var y,m=0,$=s.length;m<$;m++)if(s[m].ok&&s[m].ok._rev===d._rev){y=!0;break}y||s.push({ok:d})}l--,l||n(null,s)})})}if(t.open_revs){if(t.open_revs==="all")this._getRevisionTree(e,function(s,l){if(s)return n(s);r=sa(l).map(function(p){return p.rev}),o()});else if(Array.isArray(t.open_revs)){r=t.open_revs;for(var a=0;a<r.length;a++){var u=r[a];if(!(typeof u=="string"&&/^\d+-/.test(u)))return n(ce(Of))}o()}else return n(ce(Sf,"function_clause"));return}return this._get(e,t,function(s,l){if(s)return s.docId=e,n(s);var p=l.doc,f=l.metadata,d=l.ctx;if(t.conflicts){var y=ua(f);y.length&&(p._conflicts=y)}if(Tt(f,p._rev)&&(p._deleted=!0),t.revs||t.revs_info){for(var m=p._rev.split("-"),$=parseInt(m[0],10),w=m[1],g=If(f.rev_tree),v=null,c=0;c<g.length;c++){var h=g[c],_=h.ids.map(function(K){return K.id}).indexOf(w),b=_===$-1;(b||!v&&_!==-1)&&(v=h)}if(!v)return s=new Error("invalid rev tree"),s.docId=e,n(s);var x=v.ids.map(function(K){return K.id}).indexOf(p._rev.split("-")[1])+1,j=v.ids.length-x;if(v.ids.splice(x,j),v.ids.reverse(),t.revs&&(p._revisions={start:v.pos+v.ids.length-1,ids:v.ids.map(function(K){return K.id})}),t.revs_info){var P=v.pos+v.ids.length;p._revs_info=v.ids.map(function(K){return P--,{rev:P+"-"+K.id,status:K.opts.status}})}}if(t.attachments&&p._attachments){var L=p._attachments,V=Object.keys(L).length;if(V===0)return n(null,p);Object.keys(L).forEach(function(K){this._getAttachment(p._id,K,L[K],{rev:p._rev,binary:t.binary,ctx:d},function(D,F){var U=p._attachments[K];U.data=F,delete U.stub,delete U.length,--V||n(null,p)})},i)}else{if(p._attachments)for(var J in p._attachments)Object.prototype.hasOwnProperty.call(p._attachments,J)&&(p._attachments[J].stub=!0);n(null,p)}})});Se.prototype.getAttachment=Ie("getAttachment",function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,function(o,a){if(o)return r(o);if(a.doc._attachments&&a.doc._attachments[t])n.ctx=a.ctx,n.binary=!0,i._getAttachment(e,t,a.doc._attachments[t],n,r);else return r(ce(ct))})});Se.prototype.allDocs=Ie("allDocs",function(e,t){if(typeof e=="function"&&(t=e,e={}),e.skip=typeof e.skip<"u"?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(r){return r in e})[0];if(n){t(ce(gv,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!gt(this)&&(Kv(e),e.keys.length===0))return this._allDocs({limit:0},t)}return this._allDocs(e,t)});Se.prototype.changes=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},e.return_docs="return_docs"in e?e.return_docs:!e.live,new sr(this,e,t)};Se.prototype.close=Ie("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)});Se.prototype.info=Ie("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!!(t.auto_compaction&&!gt(t)),r.adapter=t.adapter,e(null,r)})});Se.prototype.id=Ie("id",function(e){return this._id(e)});Se.prototype.type=function(){return typeof this._type=="function"?this._type():this.adapter};Se.prototype.bulkDocs=Ie("bulkDocs",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(ce(hv));for(var r=0;r<e.docs.length;++r)if(typeof e.docs[r]!="object"||Array.isArray(e.docs[r]))return n(ce(Jo));var i;if(e.docs.forEach(function(u){u._attachments&&Object.keys(u._attachments).forEach(function(s){i=i||Yv(s),u._attachments[s].content_type||rt("warn","Attachment",s,"on document",u._id,"is missing content_type")})}),i)return n(ce(ui,i));"new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0);var o=this;!t.new_edits&&!gt(o)&&e.docs.sort(zv),Gv(e.docs);var a=e.docs.map(function(u){return u._id});return this._bulkDocs(e,t,function(u,s){if(u)return n(u);if(t.new_edits||(s=s.filter(function(f){return f.error})),!gt(o))for(var l=0,p=s.length;l<p;l++)s[l].id=s[l].id||a[l];n(null,s)})});Se.prototype.registerDependentDatabase=Ie("registerDependentDatabase",function(e,t){var n=Ne(this.__opts);this.__opts.view_adapter&&(n.adapter=this.__opts.view_adapter);var r=new this.constructor(e,n);function i(o){return o.dependentDbs=o.dependentDbs||{},o.dependentDbs[e]?!1:(o.dependentDbs[e]=!0,o)}fi(this,"_local/_pouch_dependentDbs",i).then(function(){t(null,{db:r})}).catch(t)});Se.prototype.destroy=Ie("destroy",function(e,t){typeof e=="function"&&(t=e,e={});var n=this,r="use_prefix"in n?n.use_prefix:!0;function i(){n._destroy(e,function(o,a){if(o)return t(o);n._destroyed=!0,n.emit("destroyed"),t(null,a||{ok:!0})})}if(gt(n))return i();n.get("_local/_pouch_dependentDbs",function(o,a){if(o)return o.status!==404?t(o):i();var u=a.dependentDbs,s=n.constructor,l=Object.keys(u).map(function(p){var f=r?p.replace(new RegExp("^"+s.prefix),""):p;return new s(f,n.__opts).destroy()});Promise.all(l).then(i,t)})});function ur(){this.isReady=!1,this.failed=!1,this.queue=[]}ur.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()};ur.prototype.fail=function(e){this.failed=e,this.execute()};ur.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()};ur.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()};function Qv(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=ae.adapters,i=ae.preferredAdapters,o=ae.prefix,a=t.adapter;if(!a)for(var u=0;u<i.length;++u){if(a=i[u],a==="idb"&&"websql"in r&&si()&&localStorage["_pouch__websqldb_"+o+e]){rt("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}var s=r[a],l=s&&"use_prefix"in s?s.use_prefix:!0;return{name:l?o+e:e,adapter:a}}function Vv(e){function t(r){e.removeListener("closed",n),r||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}ze(ae,Se);function ae(e,t){if(!(this instanceof ae))return new ae(e,t);var n=this;if(t=t||{},e&&typeof e=="object"&&(t=e,e=t.name,delete t.name),t.deterministic_revs===void 0&&(t.deterministic_revs=!0),this.__opts=t=Ne(t),n.auto_compaction=t.auto_compaction,n.prefix=ae.prefix,typeof e!="string")throw new Error("Missing/invalid DB name");var r=(t.prefix||"")+e,i=Qv(r,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,n.name=e,n._adapter=t.adapter,ae.emit("debug",["adapter","Picked adapter: ",t.adapter]),!ae.adapters[t.adapter]||!ae.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);if(t.view_adapter&&(!ae.adapters[t.view_adapter]||!ae.adapters[t.view_adapter].valid()))throw new Error("Invalid View Adapter: "+t.view_adapter);Se.call(n),n.taskqueue=new ur,n.adapter=t.adapter,ae.adapters[t.adapter].call(n,t,function(o){if(o)return n.taskqueue.fail(o);Vv(n),n.emit("created",n),ae.emit("created",n.name),n.taskqueue.ready(n)})}var Jv=typeof AbortController<"u"?AbortController:function(){return{abort:function(){}}},Lf=fetch,yn=Headers;ae.adapters={};ae.preferredAdapters=[];ae.prefix="_pouch_";var Ts=new Le;function Zv(e){Object.keys(Le.prototype).forEach(function(n){typeof Le.prototype[n]=="function"&&(e[n]=Ts[n].bind(Ts))});var t=e._destructionListeners=new Qe;e.on("ref",function(r){t.has(r.name)||t.set(r.name,[]),t.get(r.name).push(r)}),e.on("unref",function(r){if(t.has(r.name)){var i=t.get(r.name),o=i.indexOf(r);o<0||(i.splice(o,1),i.length>1?t.set(r.name,i):t.delete(r.name))}}),e.on("destroyed",function(r){if(t.has(r)){var i=t.get(r);t.delete(r),i.forEach(function(o){o.emit("destroyed",!0)})}})}Zv(ae);ae.adapter=function(e,t,n){t.valid()&&(ae.adapters[e]=t,n&&ae.preferredAdapters.push(e))};ae.plugin=function(e){if(typeof e=="function")e(ae);else{if(typeof e!="object"||Object.keys(e).length===0)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){ae.prototype[t]=e[t]})}return this.__defaults&&(ae.__defaults=Kt({},this.__defaults)),ae};ae.defaults=function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);r=r||{},n&&typeof n=="object"&&(r=n,n=r.name,delete r.name),r=Kt({},t.__defaults,r),ae.call(this,n,r)}return ze(t,ae),t.preferredAdapters=ae.preferredAdapters.slice(),Object.keys(ae).forEach(function(n){n in t||(t[n]=ae[n])}),t.__defaults=Kt({},this.__defaults,e),t};ae.fetch=function(e,t){return Lf(e,t)};var Xv="7.3.1";function ca(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function ep(e,t){return e<t?-1:e>t?1:0}function la(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];r>0&&e[r-1]==="\\"&&(o==="$"||o===".")?n=n.substring(0,n.length-1)+o:o==="."?(t.push(n),n=""):n+=o}return t.push(n),t}var tp=["$or","$nor","$not"];function Bf(e){return tp.indexOf(e)>-1}function Uf(e){return Object.keys(e)[0]}function np(e){return e[Uf(e)]}function Kn(e){var t={},n={$or:!0,$nor:!0};return e.forEach(function(r){Object.keys(r).forEach(function(i){var o=r[i];if(typeof o!="object"&&(o={$eq:o}),Bf(i))if(o instanceof Array){if(n[i]){n[i]=!1,t[i]=o;return}var a=[];t[i].forEach(function(s){Object.keys(o).forEach(function(l){var p=o[l],f=Math.max(Object.keys(s).length,Object.keys(p).length),d=Kn([s,p]);Object.keys(d).length<=f||a.push(d)})}),t[i]=a}else t[i]=Kn([o]);else{var u=t[i]=t[i]||{};Object.keys(o).forEach(function(s){var l=o[s];if(s==="$gt"||s==="$gte")return rp(s,l,u);if(s==="$lt"||s==="$lte")return ip(s,l,u);if(s==="$ne")return op(l,u);if(s==="$eq")return ap(l,u);if(s==="$regex")return sp(l,u);u[s]=l})}})}),t}function rp(e,t,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt<"u"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function ip(e,t,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt<"u"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function op(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function ap(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function sp(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}function qf(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=Kn(e[n].$and));var r=e[t];typeof r=="object"&&qf(r)}return e}function Hf(e,t){for(var n in e){n==="$and"&&(t=!0);var r=e[n];typeof r=="object"&&(t=Hf(r,t))}return t}function up(e){var t=Ne(e),n=!1;Hf(t,!1)&&(t=qf(t),"$and"in t&&(t=Kn(t.$and)),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(s){for(var l=Object.keys(s),p=0;p<l.length;p++){var f=l[p],d=s[f];(typeof d!="object"||d===null)&&(s[f]={$eq:d})}})}),"$not"in t&&(t.$not=Kn([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];typeof a!="object"||a===null?a={$eq:a}:n||("$ne"in a&&(a.$ne=[a.$ne]),"$regex"in a&&(a.$regex=[a.$regex])),t[o]=a}return t}function fp(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function cp(e,t,n){var r=fp(e,t,n);return r+e}var Gf=-324,oo=3,ao="";function Re(e,t){if(e===t)return 0;e=Vt(e),t=Vt(t);var n=so(e),r=so(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return gp(e,t)}return Array.isArray(e)?pp(e,t):yp(e,t)}function Vt(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Vt(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];typeof o<"u"&&(e[i]=Vt(o))}}}}return e}function lp(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return _p(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=st(n[r]);else for(;++r<i;){var a=n[r];o+=st(a)+st(e[a])}return o}return""}function st(e){var t="\0";return e=Vt(e),so(e)+ao+lp(e)+t}function dp(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var o=e[t]==="0";t++;var a="",u=e.substring(t,t+oo),s=parseInt(u,10)+Gf;for(o&&(s=-s),t+=oo;;){var l=e[t];if(l==="\0")break;a+=l,t++}a=a.split("."),a.length===1?r=parseInt(a,10):r=parseFloat(a[0]+"."+a[1]),o&&(r=r-10),s!==0&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}function hp(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){var a=e.pop();i[a]=n}else e.push(n)}}function vp(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();hp(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var o=dp(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var u=e[r];if(u==="\0")break;a+=u,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var s={element:[],index:t.length};t.push(s.element),n.push(s);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function pp(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=Re(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function gp(e,t){return e===t?0:e>t?1:-1}function yp(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=Re(n[o],r[o]);if(a!==0||(a=Re(e[n[o]],t[r[o]]),a!==0))return a}return n.length===r.length?0:n.length>r.length?1:-1}function so(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function _p(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(r?-n:n)-Gf,a=cp(o.toString(),"0",oo);i+=ao+a;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var s=u.toFixed(20);return s=s.replace(/\.?0+$/,""),i+=ao+s,i}function mp(e){function t(n){return e.map(function(r){var i=Uf(r),o=la(i),a=ca(n,o);return a})}return function(n,r){var i=t(n.doc),o=t(r.doc),a=Re(i,o);return a!==0?a:ep(n.doc._id,r.doc._id)}}function wp(e,t,n){if(e=e.filter(function(a){return _n(a.doc,t.selector,n)}),t.sort){var r=mp(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&np(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function _n(e,t,n){return n.every(function(r){var i=t[r],o=la(r),a=ca(e,o);return Bf(r)?bp(r,i,e):Wr(i,e,o,a)})}function Wr(e,t,n,r){return e?typeof e=="object"?Object.keys(e).every(function(i){var o=e[i];if(i.indexOf("$")===0)return $s(i,t,o,n,r);var a=la(i);if(r===void 0&&typeof o!="object"&&a.length>0)return!1;var u=ca(r,a);return typeof o=="object"?Wr(o,t,n,u):$s("$eq",t,o,a,u)}):e===r:!0}function bp(e,t,n){return e==="$or"?t.some(function(r){return _n(n,r,Object.keys(r))}):e==="$not"?!_n(n,t,Object.keys(t)):!t.find(function(r){return _n(n,r,Object.keys(r))})}function $s(e,t,n,r,i){if(!As[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return As[e](t,n,r,i)}function In(e){return typeof e<"u"&&e!==null}function It(e){return typeof e<"u"}function Tp(e,t){if(typeof e!="number"||parseInt(e,10)!==e)return!1;var n=t[0],r=t[1];return e%n===r}function Es(e,t){return t.some(function(n){return e instanceof Array?e.some(function(r){return Re(n,r)===0}):Re(n,e)===0})}function $p(e,t){return t.every(function(n){return e.some(function(r){return Re(n,r)===0})})}function Ep(e,t){return e.length===t}function Ap(e,t){var n=new RegExp(t);return n.test(e)}function Sp(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}}var As={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.some(function(i){return _n(i,t,Object.keys(t))}):r.some(function(i){return Wr(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.every(function(i){return _n(i,t,Object.keys(t))}):r.every(function(i){return Wr(t,e,n,i)})},$eq:function(e,t,n,r){return It(r)&&Re(r,t)===0},$gte:function(e,t,n,r){return It(r)&&Re(r,t)>=0},$gt:function(e,t,n,r){return It(r)&&Re(r,t)>0},$lte:function(e,t,n,r){return It(r)&&Re(r,t)<=0},$lt:function(e,t,n,r){return It(r)&&Re(r,t)<0},$exists:function(e,t,n,r){return t?It(r):!It(r)},$mod:function(e,t,n,r){return In(r)&&Tp(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return Re(r,i)!==0})},$in:function(e,t,n,r){return In(r)&&Es(r,t)},$nin:function(e,t,n,r){return In(r)&&!Es(r,t)},$size:function(e,t,n,r){return In(r)&&Array.isArray(r)&&Ep(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&$p(r,t)},$regex:function(e,t,n,r){return In(r)&&typeof r=="string"&&t.every(function(i){return Ap(r,i)})},$type:function(e,t,n,r){return Sp(r,t)}};function Cp(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=up(t);var n={doc:e},r=wp([n],{selector:t},Object.keys(t));return r&&r.length===1}function Op(e){return ea(`"use strict";
return `+e+";",{})}function xp(e){var t=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join(`
`);return ea(t,{})}function kp(e,t){if(e.selector&&e.filter&&e.filter!=="_selector"){var n=typeof e.filter=="string"?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function Rp(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&typeof e.filter=="string"&&(e.filter==="_view"?e.view=gs(e.view):e.filter=gs(e.filter))}function jp(e,t){return t.filter&&typeof t.filter=="string"&&!t.doc_ids&&!gt(e.db)}function Pp(e,t){var n=t.complete;if(t.filter==="_view"){if(!t.view||typeof t.view!="string"){var r=ce(ui,"`view` filter parameter not found or invalid.");return n(r)}var i=io(t.view);e.db.get("_design/"+i[0],function(a,u){if(e.isCancelled)return n(null,{status:"cancelled"});if(a)return n(En(a));var s=u&&u.views&&u.views[i[1]]&&u.views[i[1]].map;if(!s)return n(ce(ct,u.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=xp(s),e.doChanges(t)})}else if(t.selector)t.filter=function(a){return Cp(a,t.selector)},e.doChanges(t);else{var o=io(t.filter);e.db.get("_design/"+o[0],function(a,u){if(e.isCancelled)return n(null,{status:"cancelled"});if(a)return n(En(a));var s=u&&u.filters&&u.filters[o[1]];if(!s)return n(ce(ct,u&&u.filters?"missing json key: "+o[1]:"missing json key: filters"));t.filter=Op(s),e.doChanges(t)})}}function Fp(e){e._changesFilterPlugin={validate:kp,normalize:Rp,shouldFilter:jp,filter:Pp}}ae.plugin(Fp);ae.version=Xv;function zf(e){return e.reduce(function(t,n){return t[n]=!0,t},{})}var Ip=zf(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Dp=zf(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Ss(e){if(!/^\d+-/.test(e))return ce(Of);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Np(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,a=r.length;o<a;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}function Wf(e,t,n){n||(n={deterministic_revs:!0});var r,i,o,a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=ci()),i=Ff(e,n.deterministic_revs),e._rev){if(o=Ss(e._rev),o.error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[i,a,[]]]]}],r=o.prefix+1}else e._rev_tree=[{pos:1,ids:[i,a,[]]}],r=1;else if(e._revisions&&(e._rev_tree=Np(e._revisions,a),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if(o=Ss(e._rev),o.error)return o;r=o.prefix,i=o.id,e._rev_tree=[{pos:r,ids:[i,a,[]]}]}xf(e._id),e._rev=r+"-"+i;var u={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=s[0]==="_";if(l&&!Ip[s]){var p=ce(ps,s);throw p.message=ps.message+": "+s,p}else l&&!Dp[s]?u.metadata[s.slice(1)]=e[s]:u.data[s]=e[s]}return u}function Mp(e){try{return ta(e)}catch{var t=ce(Cf,"Attachment is not a valid base64 string");return{error:t}}}function Lp(e,t,n){var r=Mp(e.data);if(r.error)return n(r.error);e.length=r.length,t==="blob"?e.data=ra(r,e.content_type):t==="base64"?e.data=ar(r):e.data=r,aa(r,function(i){e.digest="md5-"+i,n()})}function Bp(e,t,n){aa(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,t==="binary"?jf(e.data,function(i){e.data=i,n()}):t==="base64"?oa(e.data,function(i){e.data=i,n()}):n()})}function Up(e,t,n){if(e.stub)return n();typeof e.data=="string"?Lp(e,t,n):Bp(e,t,n)}function qp(e,t,n){if(!e.length)return n();var r=0,i;e.forEach(function(a){var u=a.data&&a.data._attachments?Object.keys(a.data._attachments):[],s=0;if(!u.length)return o();function l(f){i=f,s++,s===u.length&&o()}for(var p in a.data._attachments)Object.prototype.hasOwnProperty.call(a.data._attachments,p)&&Up(a.data._attachments[p],t,l)});function o(){r++,e.length===r&&(i?n(i):n())}}function Hp(e,t,n,r,i,o,a,u){if(Lv(t.rev_tree,n.metadata.rev)&&!u)return r[i]=n,o();var s=t.winningRev||Yt(t),l="deleted"in t?t.deleted:Tt(t,s),p="deleted"in n.metadata?n.metadata.deleted:Tt(n.metadata),f=/^1-/.test(n.metadata.rev);if(l&&!p&&u&&f){var d=n.data;d._rev=s,d._id=n.metadata.id,n=Wf(d,u)}var y=Nf(t.rev_tree,n.metadata.rev_tree[0],e),m=u&&(l&&p&&y.conflicts!=="new_leaf"||!l&&y.conflicts!=="new_leaf"||l&&!p&&y.conflicts==="new_branch");if(m){var $=ce($n);return r[i]=$,o()}var w=n.metadata.rev;n.metadata.rev_tree=y.tree,n.stemmedRevs=y.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var g=Yt(n.metadata),v=Tt(n.metadata,g),c=l===v?0:l<v?-1:1,h;w===g?h=v:h=Tt(n.metadata,w),a(n,g,v,h,!0,c,i,o)}function Gp(e){return e.metadata.rev_tree[0].ids[1].status==="missing"}function zp(e,t,n,r,i,o,a,u,s){e=e||1e3;function l($,w,g){var v=Yt($.metadata),c=Tt($.metadata,v);if("was_delete"in u&&c)return o[w]=ce(ct,"deleted"),g();var h=p&&Gp($);if(h){var _=ce($n);return o[w]=_,g()}var b=c?0:1;a($,v,c,c,!1,b,w,g)}var p=u.new_edits,f=new Qe,d=0,y=t.length;function m(){++d===y&&s&&s()}t.forEach(function($,w){if($._id&&Qt($._id)){var g=$._deleted?"_removeLocal":"_putLocal";n[g]($,{ctx:i},function(c,h){o[w]=c||h,m()});return}var v=$.metadata.id;f.has(v)?(y--,f.get(v).push([$,w])):f.set(v,[[$,w]])}),f.forEach(function($,w){var g=0;function v(){++g<$.length?c():m()}function c(){var h=$[g],_=h[0],b=h[1];if(r.has(w))Hp(e,r.get(w),_,o,b,v,a,p);else{var x=Nf([],_.metadata.rev_tree[0],e);_.metadata.rev_tree=x.tree,_.stemmedRevs=x.stemmedRevs||[],l(_,b,v)}}c()})}var Wp=5,Pe="document-store",qe="by-sequence",tt="attach-store",qt="attach-seq-store",We="meta-store",ht="local-store",uo="detect-blob-support";function Kp(e){try{return JSON.parse(e)}catch{return ii.parse(e)}}function Yp(e){try{return JSON.stringify(e)}catch{return ii.stringify(e)}}function pt(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(ce(Zo,n,t.type))}}function fo(e,t,n){return{data:Yp(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function Ht(e){if(!e)return null;var t=Kp(e.data);return t.winningRev=e.winningRev,t.deleted=e.deletedOrLocal==="1",t.seq=e.seq,t}function Kr(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Kf(e,t,n,r){n?r(e?typeof e!="string"?e:ia(e,t):na([""],{type:t})):e?typeof e!="string"?Rf(e,function(i){r(ar(i))}):r(e):r("")}function Yf(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var o=0;function a(){++o===i.length&&r&&r()}function u(s,l){var p=s._attachments[l],f=p.digest,d=n.objectStore(tt).get(f);d.onsuccess=function(y){p.body=y.target.result.body,a()}}i.forEach(function(s){t.attachments&&t.include_docs?u(e,s):(e._attachments[s].stub=!0,a())})}function co(e,t){return Promise.all(e.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var o=n.doc._attachments[i];if("body"in o){var a=o.body,u=o.content_type;return new Promise(function(s){Kf(a,u,t,function(l){n.doc._attachments[i]=Kt(or(o,["digest","content_type"]),{data:l}),s()})})}}))}}))}function Qf(e,t,n){var r=[],i=n.objectStore(qe),o=n.objectStore(tt),a=n.objectStore(qt),u=e.length;function s(){u--,u||l()}function l(){r.length&&r.forEach(function(p){var f=a.index("digestSeq").count(IDBKeyRange.bound(p+"::",p+"::￿",!1,!1));f.onsuccess=function(d){var y=d.target.result;y||o.delete(p)}})}e.forEach(function(p){var f=i.index("_doc_id_rev"),d=t+"::"+p;f.getKey(d).onsuccess=function(y){var m=y.target.result;if(typeof m!="number")return s();i.delete(m);var $=a.index("seq").openCursor(IDBKeyRange.only(m));$.onsuccess=function(w){var g=w.target.result;if(g){var v=g.value.digestSeq.split("::")[0];r.push(v),a.delete(g.primaryKey),g.continue()}else s()}}})}function ut(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}var Hn=new On;function Qp(e,t,n,r,i,o){for(var a=t.docs,u,s,l,p,f,d,y,m,$=0,w=a.length;$<w;$++){var g=a[$];g._id&&Qt(g._id)||(g=a[$]=Wf(g,n.new_edits,e),g.error&&!y&&(y=g))}if(y)return o(y);var v=!1,c=0,h=new Array(a.length),_=new Qe,b=!1,x=r._meta.blobSupport?"blob":"base64";qp(a,x,function(I){if(I)return o(I);j()});function j(){var I=[Pe,qe,tt,ht,qt,We],B=ut(i,I,"readwrite");if(B.error)return o(B.error);u=B.txn,u.onabort=pt(o),u.ontimeout=pt(o),u.oncomplete=K,s=u.objectStore(Pe),l=u.objectStore(qe),p=u.objectStore(tt),f=u.objectStore(qt),d=u.objectStore(We),d.get(We).onsuccess=function(A){m=A.target.result,V()},F(function(A){if(A)return b=!0,o(A);J()})}function P(){v=!0,V()}function L(){zp(e.revs_limit,a,r,_,u,h,U,n,P)}function V(){!m||!v||(m.docCount+=c,d.put(m))}function J(){if(!a.length)return;var I=0;function B(){++I===a.length&&L()}function A(T){var R=Ht(T.target.result);R&&_.set(R.id,R),B()}for(var M=0,H=a.length;M<H;M++){var W=a[M];if(W._id&&Qt(W._id)){B();continue}var O=s.get(W.metadata.id);O.onsuccess=A}}function K(){b||(Hn.notify(r._meta.name),o(null,h))}function D(I,B){var A=p.get(I);A.onsuccess=function(M){if(M.target.result)B();else{var H=ce(yv,"unknown stub attachment with digest "+I);H.status=412,B(H)}}}function F(I){var B=[];if(a.forEach(function(W){W.data&&W.data._attachments&&Object.keys(W.data._attachments).forEach(function(O){var T=W.data._attachments[O];T.stub&&B.push(T.digest)})}),!B.length)return I();var A=0,M;function H(){++A===B.length&&I(M)}B.forEach(function(W){D(W,function(O){O&&!M&&(M=O),H()})})}function U(I,B,A,M,H,W,O,T){I.metadata.winningRev=B,I.metadata.deleted=A;var R=I.data;R._id=I.metadata.id,R._rev=I.metadata.rev,M&&(R._deleted=!0);var N=R._attachments&&Object.keys(R._attachments).length;if(N)return S(I,B,A,H,O,T);c+=W,V(),E(I,B,A,H,O,T)}function E(I,B,A,M,H,W){var O=I.data,T=I.metadata;O._doc_id_rev=T.id+"::"+T.rev,delete O._id,delete O._rev;function R(Q){var ee=I.stemmedRevs||[];M&&r.auto_compaction&&(ee=ee.concat(Pv(I.metadata))),ee&&ee.length&&Qf(ee,I.metadata.id,u),T.seq=Q.target.result;var te=fo(T,B,A),se=s.put(te);se.onsuccess=Y}function N(Q){Q.preventDefault(),Q.stopPropagation();var ee=l.index("_doc_id_rev"),te=ee.getKey(O._doc_id_rev);te.onsuccess=function(se){var ie=l.put(O,se.target.result);ie.onsuccess=R}}function Y(){h[H]={ok:!0,id:T.id,rev:T.rev},_.set(I.metadata.id,I.metadata),C(I,T.seq,W)}var G=l.put(O);G.onsuccess=R,G.onerror=N}function S(I,B,A,M,H,W){var O=I.data,T=0,R=Object.keys(O._attachments);function N(){T===R.length&&E(I,B,A,M,H,W)}function Y(){T++,N()}R.forEach(function(G){var Q=I.data._attachments[G];if(Q.stub)T++,N();else{var ee=Q.data;delete Q.data,Q.revpos=parseInt(B,10);var te=Q.digest;k(te,ee,Y)}})}function C(I,B,A){var M=0,H=Object.keys(I.data._attachments||{});if(!H.length)return A();function W(){++M===H.length&&A()}function O(R){var N=I.data._attachments[R].digest,Y=f.put({seq:B,digestSeq:N+"::"+B});Y.onsuccess=W,Y.onerror=function(G){G.preventDefault(),G.stopPropagation(),W()}}for(var T=0;T<H.length;T++)O(H[T])}function k(I,B,A){var M=p.count(I);M.onsuccess=function(H){var W=H.target.result;if(W)return A();var O={digest:I,body:B},T=p.put(O);T.onsuccess=A}}}function Vf(e,t,n,r,i){r===-1&&(r=1e3);var o=typeof e.getAll=="function"&&typeof e.getAllKeys=="function"&&r>1&&!n,a,u,s;function l(y){u=y.target.result,a&&i(a,u,s)}function p(y){a=y.target.result,u&&i(a,u,s)}function f(){if(!a.length)return i();var y=a[a.length-1],m;if(t&&t.upper)try{m=IDBKeyRange.bound(y,t.upper,!0,t.upperOpen)}catch($){if($.name==="DataError"&&$.code===0)return i()}else m=IDBKeyRange.lowerBound(y,!0);t=m,a=null,u=null,e.getAll(t,r).onsuccess=l,e.getAllKeys(t,r).onsuccess=p}function d(y){var m=y.target.result;if(!m)return i();i([m.key],[m.value],m)}o?(s={continue:f},e.getAll(t,r).onsuccess=l,e.getAllKeys(t,r).onsuccess=p):n?e.openCursor(t,"prev").onsuccess=d:e.openCursor(t).onsuccess=d}function Vp(e,t,n){if(typeof e.getAll=="function"){e.getAll(t).onsuccess=n;return}var r=[];function i(o){var a=o.target.result;a?(r.push(a.value),a.continue()):n({target:{result:r}})}e.openCursor(t).onsuccess=i}function Jp(e,t,n){var r=new Array(e.length),i=0;e.forEach(function(o,a){t.get(o).onsuccess=function(u){u.target.result?r[a]=u.target.result:r[a]={key:o,error:"not_found"},i++,i===e.length&&n(e,r,{})}})}function Zp(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(o){return{error:o}}return null}function Xp(e,t,n){var r="startkey"in e?e.startkey:!1,i="endkey"in e?e.endkey:!1,o="key"in e?e.key:!1,a="keys"in e?e.keys:!1,u=e.skip||0,s=typeof e.limit=="number"?e.limit:-1,l=e.inclusive_end!==!1,p,f;if(!a&&(p=Zp(r,i,l,o,e.descending),f=p&&p.error,f&&!(f.name==="DataError"&&f.code===0)))return n(ce(Zo,f.name,f.message));var d=[Pe,qe,We];e.attachments&&d.push(tt);var y=ut(t,d,"readonly");if(y.error)return n(y.error);var m=y.txn;m.oncomplete=K,m.onabort=pt(n);var $=m.objectStore(Pe),w=m.objectStore(qe),g=m.objectStore(We),v=w.index("_doc_id_rev"),c=[],h,_;g.get(We).onsuccess=function(D){h=D.target.result.docCount},e.update_seq&&b(w,function(D){D.target.result&&D.target.result.length>0&&(_=D.target.result[0])});function b(D,F){function U(E){var S=E.target.result,C=void 0;return S&&S.key&&(C=S.key),F({target:{result:[C]}})}D.openCursor(null,"prev").onsuccess=U}function x(D,F,U){var E=D.id+"::"+U;v.get(E).onsuccess=function(C){if(F.doc=Kr(C.target.result)||{},e.conflicts){var k=ua(D);k.length&&(F.doc._conflicts=k)}Yf(F.doc,e,m)}}function j(D,F){var U={id:F.id,key:F.id,value:{rev:D}},E=F.deleted;E?a&&(c.push(U),U.value.deleted=!0,U.doc=null):u--<=0&&(c.push(U),e.include_docs&&x(F,U,D))}function P(D){for(var F=0,U=D.length;F<U&&c.length!==s;F++){var E=D[F];if(E.error&&a){c.push(E);continue}var S=Ht(E),C=S.winningRev;j(C,S)}}function L(D,F,U){U&&(P(F),c.length<s&&U.continue())}function V(D){var F=D.target.result;e.descending&&(F=F.reverse()),P(F)}function J(){var D={total_rows:h,offset:e.skip,rows:c};e.update_seq&&_!==void 0&&(D.update_seq=_),n(null,D)}function K(){e.attachments?co(c,e.binary).then(J):J()}if(!(f||s===0)){if(a)return Jp(e.keys,$,L);if(s===-1)return Vp($,p,V);Vf($,p,e.descending,s+u,L)}}function eg(e){return new Promise(function(t){var n=na([""]),r=e.objectStore(uo).put(n,"key");r.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);t(o||!i||parseInt(i[1],10)>=43)},r.onerror=e.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)}}).catch(function(){return!1})}function tg(e,t){var n=e.objectStore(Pe).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(r){t(r.target.result)}}var lo=!1,ho=[];function ng(e,t,n,r){try{e(t,n)}catch(i){r.emit("error",i)}}function Cs(){lo||!ho.length||(lo=!0,ho.shift()())}function rg(e,t,n){ho.push(function(){e(function(o,a){ng(t,o,a,n),lo=!1,Ge(function(){Cs()})})}),Cs()}function ig(e,t,n,r){if(e=Ne(e),e.continuous){var i=n+":"+ci();return Hn.addListener(n,i,t,e),Hn.notify(n),{cancel:function(){Hn.removeListener(n,i)}}}var o=e.doc_ids&&new Tn(e.doc_ids);e.since=e.since||0;var a=e.since,u="limit"in e?e.limit:-1;u===0&&(u=1);var s=[],l=0,p=Xo(e),f=new Qe,d,y,m,$;function w(j,P,L){if(!L||!j.length)return;var V=new Array(j.length),J=new Array(j.length);function K(U,E){var S=e.processChange(E,U,e);a=S.seq=U.seq;var C=p(S);return typeof C=="object"?Promise.reject(C):C?(l++,e.return_docs&&s.push(S),e.attachments&&e.include_docs?new Promise(function(k){Yf(E,e,d,function(){co([S],e.binary).then(function(){k(S)})})}):Promise.resolve(S)):Promise.resolve()}function D(){for(var U=[],E=0,S=V.length;E<S&&l!==u;E++){var C=V[E];if(C){var k=J[E];U.push(K(k,C))}}Promise.all(U).then(function(I){for(var B=0,A=I.length;B<A;B++)I[B]&&e.onChange(I[B])}).catch(e.complete),l!==u&&L.continue()}var F=0;P.forEach(function(U,E){var S=Kr(U),C=j[E];v(S,C,function(k,I){J[E]=k,V[E]=I,++F===j.length&&D()})})}function g(j,P,L,V){if(L.seq!==P)return V();if(L.winningRev===j._rev)return V(L,j);var J=j._id+"::"+L.winningRev,K=$.get(J);K.onsuccess=function(D){V(L,Kr(D.target.result))}}function v(j,P,L){if(o&&!o.has(j._id))return L();var V=f.get(j._id);if(V)return g(j,P,V,L);m.get(j._id).onsuccess=function(J){V=Ht(J.target.result),f.set(j._id,V),g(j,P,V,L)}}function c(){e.complete(null,{results:s,last_seq:a})}function h(){!e.continuous&&e.attachments?co(s).then(c):c()}var _=[Pe,qe];e.attachments&&_.push(tt);var b=ut(r,_,"readonly");if(b.error)return e.complete(b.error);d=b.txn,d.onabort=pt(e.complete),d.oncomplete=h,y=d.objectStore(qe),m=d.objectStore(Pe),$=y.index("_doc_id_rev");var x=e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null;Vf(y,x,e.descending,u,w)}var cn=new Qe,ki,Ri=new Qe;function Jf(e,t){var n=this;rg(function(r){og(n,e,r)},t,n.constructor)}function og(e,t,n){var r=t.name,i=null,o=null;e._meta=null;function a(w){return function(g,v){g&&g instanceof Error&&!g.reason&&o&&(g.reason=o),w(g,v)}}function u(w){var g=w.createObjectStore(Pe,{keyPath:"id"});w.createObjectStore(qe,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),w.createObjectStore(tt,{keyPath:"digest"}),w.createObjectStore(We,{keyPath:"id",autoIncrement:!1}),w.createObjectStore(uo),g.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),w.createObjectStore(ht,{keyPath:"_id"});var v=w.createObjectStore(qt,{autoIncrement:!0});v.createIndex("seq","seq"),v.createIndex("digestSeq","digestSeq",{unique:!0})}function s(w,g){var v=w.objectStore(Pe);v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),v.openCursor().onsuccess=function(c){var h=c.target.result;if(h){var _=h.value,b=Tt(_);_.deletedOrLocal=b?"1":"0",v.put(_),h.continue()}else g()}}function l(w){w.createObjectStore(ht,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function p(w,g){var v=w.objectStore(ht),c=w.objectStore(Pe),h=w.objectStore(qe),_=c.openCursor();_.onsuccess=function(b){var x=b.target.result;if(x){var j=x.value,P=j.id,L=Qt(P),V=Yt(j);if(L){var J=P+"::"+V,K=P+"::",D=P+"::~",F=h.index("_doc_id_rev"),U=IDBKeyRange.bound(K,D,!1,!1),E=F.openCursor(U);E.onsuccess=function(S){if(E=S.target.result,!E)c.delete(x.primaryKey),x.continue();else{var C=E.value;C._doc_id_rev===J&&v.put(C),h.delete(E.primaryKey),E.continue()}}}else x.continue()}else g&&g()}}function f(w){var g=w.createObjectStore(qt,{autoIncrement:!0});g.createIndex("seq","seq"),g.createIndex("digestSeq","digestSeq",{unique:!0})}function d(w,g){var v=w.objectStore(qe),c=w.objectStore(tt),h=w.objectStore(qt),_=c.count();_.onsuccess=function(b){var x=b.target.result;if(!x)return g();v.openCursor().onsuccess=function(j){var P=j.target.result;if(!P)return g();for(var L=P.value,V=P.primaryKey,J=Object.keys(L._attachments||{}),K={},D=0;D<J.length;D++){var F=L._attachments[J[D]];K[F.digest]=!0}var U=Object.keys(K);for(D=0;D<U.length;D++){var E=U[D];h.put({seq:V,digestSeq:E+"::"+V})}P.continue()}}}function y(w){function g(_){return _.data?Ht(_):(_.deleted=_.deletedOrLocal==="1",_)}var v=w.objectStore(qe),c=w.objectStore(Pe),h=c.openCursor();h.onsuccess=function(_){var b=_.target.result;if(!b)return;var x=g(b.value);x.winningRev=x.winningRev||Yt(x);function j(){var L=x.id+"::",V=x.id+"::￿",J=v.index("_doc_id_rev").openCursor(IDBKeyRange.bound(L,V)),K=0;J.onsuccess=function(D){var F=D.target.result;if(!F)return x.seq=K,P();var U=F.primaryKey;U>K&&(K=U),F.continue()}}function P(){var L=fo(x,x.winningRev,x.deleted),V=c.put(L);V.onsuccess=function(){b.continue()}}if(x.seq)return P();j()}}e._remote=!1,e.type=function(){return"idb"},e._id=$f(function(w){w(null,e._meta.instanceId)}),e._bulkDocs=function(g,v,c){Qp(t,g,v,e,i,a(c))},e._get=function(g,v,c){var h,_,b,x=v.ctx;if(!x){var j=ut(i,[Pe,qe,tt],"readonly");if(j.error)return c(j.error);x=j.txn}function P(){c(b,{doc:h,metadata:_,ctx:x})}x.objectStore(Pe).get(g).onsuccess=function(L){if(_=Ht(L.target.result),!_)return b=ce(ct,"missing"),P();var V;if(v.rev)V=v.latest?Uv(v.rev,_):v.rev;else{V=_.winningRev;var J=Tt(_);if(J)return b=ce(ct,"deleted"),P()}var K=x.objectStore(qe),D=_.id+"::"+V;K.index("_doc_id_rev").get(D).onsuccess=function(F){if(h=F.target.result,h&&(h=Kr(h)),!h)return b=ce(ct,"missing"),P();P()}}},e._getAttachment=function(w,g,v,c,h){var _;if(c.ctx)_=c.ctx;else{var b=ut(i,[Pe,qe,tt],"readonly");if(b.error)return h(b.error);_=b.txn}var x=v.digest,j=v.content_type;_.objectStore(tt).get(x).onsuccess=function(P){var L=P.target.result.body;Kf(L,j,c.binary,function(V){h(null,V)})}},e._info=function(g){var v,c,h=ut(i,[We,qe],"readonly");if(h.error)return g(h.error);var _=h.txn;_.objectStore(We).get(We).onsuccess=function(b){c=b.target.result.docCount},_.objectStore(qe).openCursor(null,"prev").onsuccess=function(b){var x=b.target.result;v=x?x.key:0},_.oncomplete=function(){g(null,{doc_count:c,update_seq:v,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(g,v){Xp(g,i,a(v))},e._changes=function(g){return ig(g,e,r,i)},e._close=function(w){i.close(),cn.delete(r),w()},e._getRevisionTree=function(w,g){var v=ut(i,[Pe],"readonly");if(v.error)return g(v.error);var c=v.txn,h=c.objectStore(Pe).get(w);h.onsuccess=function(_){var b=Ht(_.target.result);b?g(null,b.rev_tree):g(ce(ct))}},e._doCompaction=function(w,g,v){var c=[Pe,qe,tt,qt],h=ut(i,c,"readwrite");if(h.error)return v(h.error);var _=h.txn,b=_.objectStore(Pe);b.get(w).onsuccess=function(x){var j=Ht(x.target.result);nn(j.rev_tree,function(V,J,K,D,F){var U=J+"-"+K;g.indexOf(U)!==-1&&(F.status="missing")}),Qf(g,w,_);var P=j.winningRev,L=j.deleted;_.objectStore(Pe).put(fo(j,P,L))},_.onabort=pt(v),_.oncomplete=function(){v()}},e._getLocal=function(w,g){var v=ut(i,[ht],"readonly");if(v.error)return g(v.error);var c=v.txn,h=c.objectStore(ht).get(w);h.onerror=pt(g),h.onsuccess=function(_){var b=_.target.result;b?(delete b._doc_id_rev,g(null,b)):g(ce(ct))}},e._putLocal=function(w,g,v){typeof g=="function"&&(v=g,g={}),delete w._revisions;var c=w._rev,h=w._id;c?w._rev="0-"+(parseInt(c.split("-")[1],10)+1):w._rev="0-1";var _=g.ctx,b;if(!_){var x=ut(i,[ht],"readwrite");if(x.error)return v(x.error);_=x.txn,_.onerror=pt(v),_.oncomplete=function(){b&&v(null,b)}}var j=_.objectStore(ht),P;c?(P=j.get(h),P.onsuccess=function(L){var V=L.target.result;if(!V||V._rev!==c)v(ce($n));else{var J=j.put(w);J.onsuccess=function(){b={ok:!0,id:w._id,rev:w._rev},g.ctx&&v(null,b)}}}):(P=j.add(w),P.onerror=function(L){v(ce($n)),L.preventDefault(),L.stopPropagation()},P.onsuccess=function(){b={ok:!0,id:w._id,rev:w._rev},g.ctx&&v(null,b)})},e._removeLocal=function(w,g,v){typeof g=="function"&&(v=g,g={});var c=g.ctx;if(!c){var h=ut(i,[ht],"readwrite");if(h.error)return v(h.error);c=h.txn,c.oncomplete=function(){_&&v(null,_)}}var _,b=w._id,x=c.objectStore(ht),j=x.get(b);j.onerror=pt(v),j.onsuccess=function(P){var L=P.target.result;!L||L._rev!==w._rev?v(ce(ct)):(x.delete(b),_={ok:!0,id:b,rev:"0-0"},g.ctx&&v(null,_))}},e._destroy=function(w,g){Hn.removeAllListeners(r);var v=Ri.get(r);v&&v.result&&(v.result.close(),cn.delete(r));var c=indexedDB.deleteDatabase(r);c.onsuccess=function(){Ri.delete(r),si()&&r in localStorage&&delete localStorage[r],g(null,{ok:!0})},c.onerror=pt(g)};var m=cn.get(r);if(m)return i=m.idb,e._meta=m.global,Ge(function(){n(null,e)});var $=indexedDB.open(r,Wp);Ri.set(r,$),$.onupgradeneeded=function(w){var g=w.target.result;if(w.oldVersion<1)return u(g);var v=w.currentTarget.transaction;w.oldVersion<3&&l(g),w.oldVersion<4&&f(g);var c=[s,p,d,y],h=w.oldVersion;function _(){var b=c[h-1];h++,b&&b(v,_)}_()},$.onsuccess=function(w){i=w.target.result,i.onversionchange=function(){i.close(),cn.delete(r)},i.onabort=function(P){rt("error","Database has a global failure",P.target.error),o=P.target.error,i.close(),cn.delete(r)};var g=i.transaction([We,uo,Pe],"readwrite"),v=!1,c,h,_,b;function x(){typeof _>"u"||!v||(e._meta={name:r,instanceId:b,blobSupport:_},cn.set(r,{idb:i,global:e._meta}),n(null,e))}function j(){if(!(typeof h>"u"||typeof c>"u")){var P=r+"_id";P in c?b=c[P]:c[P]=b=ci(),c.docCount=h,g.objectStore(We).put(c)}}g.objectStore(We).get(We).onsuccess=function(P){c=P.target.result||{id:We},j()},tg(g,function(P){h=P,j()}),ki||(ki=eg(g)),ki.then(function(P){_=P,x()}),g.oncomplete=function(){v=!0,x()},g.onabort=pt(n)},$.onerror=function(w){var g=w.target.error&&w.target.error.message;g?g.indexOf("stored database is a higher version")!==-1&&(g=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):g="Failed to open indexedDB, are you in private browsing mode?",rt("error",g),n(ce(Zo,g))}}Jf.valid=function(){try{return typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}};function ag(e){e.adapter("idb",Jf,!0)}function sg(e,t){return new Promise(function(n,r){var i=0,o=0,a=0,u=e.length,s;function l(){i++,e[o++]().then(f,d)}function p(){++a===u?s?r(s):n():y()}function f(){i--,p()}function d(m){i--,s=s||m,p()}function y(){for(;i<t&&o<u;)l()}y()})}var ug=25,fg=50,Ar=5e3,cg=1e4,ji={};function Pi(e){var t=e.doc||e.ok,n=t&&t._attachments;n&&Object.keys(n).forEach(function(r){var i=n[r];i.data=ia(i.data,i.content_type)})}function Dt(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function Os(e){return!e._attachments||!Object.keys(e._attachments)?Promise.resolve():Promise.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&typeof n.data!="string")return new Promise(function(r){oa(n.data,r)}).then(function(r){n.data=r})}))}function lg(e){if(!e.prefix)return!1;var t=kf(e.prefix).protocol;return t==="http"||t==="https"}function dg(e,t){if(lg(t)){var n=t.name.substr(t.prefix.length),r=t.prefix.replace(/\/?$/,"/");e=r+encodeURIComponent(n)}var i=kf(e);(i.user||i.password)&&(i.auth={username:i.user,password:i.password});var o=i.path.replace(/(^\/|\/$)/g,"").split("/");return i.db=o.pop(),i.db.indexOf("%")===-1&&(i.db=encodeURIComponent(i.db)),i.path=o.join("/"),i}function De(e,t){return jr(e,e.db+"/"+t)}function jr(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function Sr(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function hg(e){var t=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=t.indexOf("msie")!==-1,r=t.indexOf("trident")!==-1,i=t.indexOf("edge")!==-1,o=!("method"in e)||e.method==="GET";return(n||r||i)&&o}function vo(e,t){var n=this,r=dg(e.name,e),i=De(r,"");e=Ne(e);var o=function(f,d){if(d=d||{},d.headers=d.headers||new yn,d.credentials="include",e.auth||r.auth){var y=e.auth||r.auth,m=y.username+":"+y.password,$=ar(unescape(encodeURIComponent(m)));d.headers.set("Authorization","Basic "+$)}var w=e.headers||{};Object.keys(w).forEach(function(v){d.headers.append(v,w[v])}),hg(d)&&(f+=(f.indexOf("?")===-1?"?":"&")+"_nonce="+Date.now());var g=e.fetch||Lf;return g(f,d)};function a(f,d){return Ie(f,Et(function(y){l().then(function(){return d.apply(this,y)}).catch(function(m){var $=y.pop();$(m)})})).bind(n)}function u(f,d,y){var m={};return d=d||{},d.headers=d.headers||new yn,d.headers.get("Content-Type")||d.headers.set("Content-Type","application/json"),d.headers.get("Accept")||d.headers.set("Accept","application/json"),o(f,d).then(function($){return m.ok=$.ok,m.status=$.status,$.json()}).then(function($){if(m.data=$,!m.ok){m.data.status=m.status;var w=En(m.data);if(y)return y(w);throw w}if(Array.isArray(m.data)&&(m.data=m.data.map(function(g){return g.error||g.missing?En(g):g})),y)y(null,m.data);else return m})}var s;function l(){return e.skip_setup?Promise.resolve():s||(s=u(i).catch(function(f){return f&&f.status&&f.status===404?(no(404,"PouchDB is just detecting if the remote exists."),u(i,{method:"PUT"})):Promise.reject(f)}).catch(function(f){return f&&f.status&&f.status===412?!0:Promise.reject(f)}),s.catch(function(){s=null}),s)}Ge(function(){t(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=a("id",function(f){o(jr(r,"")).then(function(d){return d.json()}).catch(function(){return{}}).then(function(d){var y=d&&d.uuid?d.uuid+r.db:De(r,"");f(null,y)})}),n.compact=a("compact",function(f,d){typeof f=="function"&&(d=f,f={}),f=Ne(f),u(De(r,"_compact"),{method:"POST"}).then(function(){function y(){n.info(function(m,$){$&&!$.compact_running?d(null,{ok:!0}):setTimeout(y,f.interval||200)})}y()})}),n.bulkGet=Ie("bulkGet",function(f,d){var y=this;function m(v){var c={};f.revs&&(c.revs=!0),f.attachments&&(c.attachments=!0),f.latest&&(c.latest=!0),u(De(r,"_bulk_get"+Sr(c)),{method:"POST",body:JSON.stringify({docs:f.docs})}).then(function(h){f.attachments&&f.binary&&h.data.results.forEach(function(_){_.docs.forEach(Pi)}),v(null,h.data)}).catch(v)}function $(){var v=fg,c=Math.ceil(f.docs.length/v),h=0,_=new Array(c);function b(P){return function(L,V){_[P]=V.results,++h===c&&d(null,{results:zr(_)})}}for(var x=0;x<c;x++){var j=or(f,["revs","attachments","binary","latest"]);j.docs=f.docs.slice(x*v,Math.min(f.docs.length,(x+1)*v)),Ef(y,j,b(x))}}var w=jr(r,""),g=ji[w];typeof g!="boolean"?m(function(v,c){v?(ji[w]=!1,no(v.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),$()):(ji[w]=!0,d(null,c))}):g?m(d):$()}),n._info=function(f){l().then(function(){return o(De(r,""))}).then(function(d){return d.json()}).then(function(d){d.host=De(r,""),f(null,d)}).catch(f)},n.fetch=function(f,d){return l().then(function(){var y=f.substring(0,1)==="/"?jr(r,f.substring(1)):De(r,f);return o(y,d)})},n.get=a("get",function(f,d,y){typeof d=="function"&&(y=d,d={}),d=Ne(d);var m={};d.revs&&(m.revs=!0),d.revs_info&&(m.revs_info=!0),d.latest&&(m.latest=!0),d.open_revs&&(d.open_revs!=="all"&&(d.open_revs=JSON.stringify(d.open_revs)),m.open_revs=d.open_revs),d.rev&&(m.rev=d.rev),d.conflicts&&(m.conflicts=d.conflicts),d.update_seq&&(m.update_seq=d.update_seq),f=Dt(f);function $(v){var c=v._attachments,h=c&&Object.keys(c);if(!c||!h.length)return;function _(x){var j=c[x],P=Dt(v._id)+"/"+p(x)+"?rev="+v._rev;return o(De(r,P)).then(function(L){return"buffer"in L?L.buffer():L.blob()}).then(function(L){if(d.binary){var V=Object.getOwnPropertyDescriptor(L.__proto__,"type");return(!V||V.set)&&(L.type=j.content_type),L}return new Promise(function(J){oa(L,J)})}).then(function(L){delete j.stub,delete j.length,j.data=L})}var b=h.map(function(x){return function(){return _(x)}});return sg(b,5)}function w(v){return Array.isArray(v)?Promise.all(v.map(function(c){if(c.ok)return $(c.ok)})):$(v)}var g=De(r,f+Sr(m));u(g).then(function(v){return Promise.resolve().then(function(){if(d.attachments)return w(v.data)}).then(function(){y(null,v.data)})}).catch(function(v){v.docId=f,y(v)})}),n.remove=a("remove",function(f,d,y,m){var $;typeof d=="string"?($={_id:f,_rev:d},typeof y=="function"&&(m=y,y={})):($=f,typeof d=="function"?(m=d,y={}):(m=y,y=d));var w=$._rev||y.rev,g=De(r,Dt($._id))+"?rev="+w;u(g,{method:"DELETE"},m).catch(m)});function p(f){return f.split("/").map(encodeURIComponent).join("/")}n.getAttachment=a("getAttachment",function(f,d,y,m){typeof y=="function"&&(m=y,y={});var $=y.rev?"?rev="+y.rev:"",w=De(r,Dt(f))+"/"+p(d)+$,g;o(w,{method:"GET"}).then(function(v){if(g=v.headers.get("content-type"),v.ok)return typeof process<"u"&&!process.browser&&typeof v.buffer=="function"?v.buffer():v.blob();throw v}).then(function(v){if(typeof process<"u"&&!process.browser){var c=Object.getOwnPropertyDescriptor(v.__proto__,"type");(!c||c.set)&&(v.type=g)}m(null,v)}).catch(function(v){m(v)})}),n.removeAttachment=a("removeAttachment",function(f,d,y,m){var $=De(r,Dt(f)+"/"+p(d))+"?rev="+y;u($,{method:"DELETE"},m).catch(m)}),n.putAttachment=a("putAttachment",function(f,d,y,m,$,w){typeof $=="function"&&(w=$,$=m,m=y,y=null);var g=Dt(f)+"/"+p(d),v=De(r,g);if(y&&(v+="?rev="+y),typeof m=="string"){var c;try{c=ta(m)}catch{return w(ce(Cf,"Attachment is not a valid base64 string"))}m=c?ra(c,$):""}u(v,{headers:new yn({"Content-Type":$}),method:"PUT",body:m},w).catch(w)}),n._bulkDocs=function(f,d,y){f.new_edits=d.new_edits,l().then(function(){return Promise.all(f.docs.map(Os))}).then(function(){return u(De(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(f)},y)}).catch(y)},n._put=function(f,d,y){l().then(function(){return Os(f)}).then(function(){return u(De(r,Dt(f._id)),{method:"PUT",body:JSON.stringify(f)})}).then(function(m){y(null,m.data)}).catch(function(m){m.docId=f&&f._id,y(m)})},n.allDocs=a("allDocs",function(f,d){typeof f=="function"&&(d=f,f={}),f=Ne(f);var y={},m,$="GET";f.conflicts&&(y.conflicts=!0),f.update_seq&&(y.update_seq=!0),f.descending&&(y.descending=!0),f.include_docs&&(y.include_docs=!0),f.attachments&&(y.attachments=!0),f.key&&(y.key=JSON.stringify(f.key)),f.start_key&&(f.startkey=f.start_key),f.startkey&&(y.startkey=JSON.stringify(f.startkey)),f.end_key&&(f.endkey=f.end_key),f.endkey&&(y.endkey=JSON.stringify(f.endkey)),typeof f.inclusive_end<"u"&&(y.inclusive_end=!!f.inclusive_end),typeof f.limit<"u"&&(y.limit=f.limit),typeof f.skip<"u"&&(y.skip=f.skip);var w=Sr(y);typeof f.keys<"u"&&($="POST",m={keys:f.keys}),u(De(r,"_all_docs"+w),{method:$,body:JSON.stringify(m)}).then(function(g){f.include_docs&&f.attachments&&f.binary&&g.data.rows.forEach(Pi),d(null,g.data)}).catch(d)}),n._changes=function(f){var d="batch_size"in f?f.batch_size:ug;f=Ne(f),f.continuous&&!("heartbeat"in f)&&(f.heartbeat=cg);var y="timeout"in f?f.timeout:30*1e3;"timeout"in f&&f.timeout&&y-f.timeout<Ar&&(y=f.timeout+Ar),"heartbeat"in f&&f.heartbeat&&y-f.heartbeat<Ar&&(y=f.heartbeat+Ar);var m={};"timeout"in f&&f.timeout&&(m.timeout=f.timeout);var $=typeof f.limit<"u"?f.limit:!1,w=$;if(f.style&&(m.style=f.style),(f.include_docs||f.filter&&typeof f.filter=="function")&&(m.include_docs=!0),f.attachments&&(m.attachments=!0),f.continuous&&(m.feed="longpoll"),f.seq_interval&&(m.seq_interval=f.seq_interval),f.conflicts&&(m.conflicts=!0),f.descending&&(m.descending=!0),f.update_seq&&(m.update_seq=!0),"heartbeat"in f&&f.heartbeat&&(m.heartbeat=f.heartbeat),f.filter&&typeof f.filter=="string"&&(m.filter=f.filter),f.view&&typeof f.view=="string"&&(m.filter="_view",m.view=f.view),f.query_params&&typeof f.query_params=="object")for(var g in f.query_params)Object.prototype.hasOwnProperty.call(f.query_params,g)&&(m[g]=f.query_params[g]);var v="GET",c;f.doc_ids?(m.filter="_doc_ids",v="POST",c={doc_ids:f.doc_ids}):f.selector&&(m.filter="_selector",v="POST",c={selector:f.selector});var h=new Jv,_,b=function(P,L){if(!f.aborted){m.since=P,typeof m.since=="object"&&(m.since=JSON.stringify(m.since)),f.descending?$&&(m.limit=w):m.limit=!$||w>d?d:w;var V=De(r,"_changes"+Sr(m)),J={signal:h.signal,method:v,body:JSON.stringify(c)};_=P,!f.aborted&&l().then(function(){return u(V,J,L)}).catch(L)}},x={results:[]},j=function(P,L){if(!f.aborted){var V=0;if(L&&L.results){V=L.results.length,x.last_seq=L.last_seq;var J=null,K=null;typeof L.pending=="number"&&(J=L.pending),(typeof x.last_seq=="string"||typeof x.last_seq=="number")&&(K=x.last_seq);var D={};D.query=f.query_params,L.results=L.results.filter(function(U){w--;var E=Xo(f)(U);return E&&(f.include_docs&&f.attachments&&f.binary&&Pi(U),f.return_docs&&x.results.push(U),f.onChange(U,J,K)),E})}else if(P){f.aborted=!0,f.complete(P);return}L&&L.last_seq&&(_=L.last_seq);var F=$&&w<=0||L&&V<d||f.descending;f.continuous&&!($&&w<=0)||!F?Ge(function(){b(_,j)}):f.complete(null,x)}};return b(f.since||0,j),{cancel:function(){f.aborted=!0,h.abort()}}},n.revsDiff=a("revsDiff",function(f,d,y){typeof d=="function"&&(y=d,d={}),u(De(r,"_revs_diff"),{method:"POST",body:JSON.stringify(f)},y).catch(y)}),n._close=function(f){f()},n._destroy=function(f,d){u(De(r,""),{method:"DELETE"}).then(function(y){d(null,y)}).catch(function(y){y.status===404?d(null,{ok:!0}):d(y)})}}vo.valid=function(){return!0};function vg(e){e.adapter("http",vo,!1),e.adapter("https",vo,!1)}function Lt(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Lt)}catch{}}ze(Lt,Error);function li(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,li)}catch{}}ze(li,Error);function di(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,di)}catch{}}ze(di,Error);function Zf(e,t){return t&&e.then(function(n){Ge(function(){t(null,n)})},function(n){Ge(function(){t(n)})}),e}function pg(e){return Et(function(t){var n=t.pop(),r=e.apply(this,t);return typeof n=="function"&&Zf(r,n),r})}function gg(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}function Fi(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function xs(e){var t=new Tn(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function Ii(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function ks(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new di(t)}function po(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if(typeof i!="number")if(Array.isArray(i)){t=typeof t=="number"?[t]:t;for(var o=0,a=i.length;o<a;o++){var u=i[o];if(typeof u!="number")throw ks("_sum");typeof t[o]>"u"?t.push(u):t[o]+=u}}else throw ks("_sum");else typeof t=="number"?t+=i:t[0]+=i}return t}var yg=rt.bind(null,"log"),_g=Array.isArray,mg=JSON.parse;function Xf(e,t){return ea("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:po,log:yg,isArray:_g,toJSON:mg})}function Yn(){this.promise=new Promise(function(e){e()})}Yn.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise};Yn.prototype.finish=function(){return this.promise};function Rs(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function wg(e,t){return Rs(e)+Rs(t)+"undefined"}function js(e,t,n,r,i,o){var a=wg(n,r),u;if(!i&&(u=e._cachedViews=e._cachedViews||{},u[a]))return u[a];var s=e.info().then(function(l){var p=l.db_name+"-mrview-"+(i?"temp":Pf(a));function f(d){d.views=d.views||{};var y=t;y.indexOf("/")===-1&&(y=t+"/"+t);var m=d.views[y]=d.views[y]||{};if(!m[p])return m[p]=!0,d}return fi(e,"_local/"+o,f).then(function(){return e.registerDependentDatabase(p).then(function(d){var y=d.db;y.auto_compaction=!0;var m={name:p,db:y,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return m.db.get("_local/lastSeq").catch(function($){if($.status!==404)throw $}).then(function($){return m.seq=$?$.seq:0,u&&m.db.once("destroyed",function(){delete u[a]}),m})})})});return u&&(u[a]=s),s}var Ps={},Fs=new Yn,bg=50;function Di(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function Tg(e){return e.length===1&&/^1-/.test(e[0].rev)}function Is(e,t,n){try{e.emit("error",t)}catch{rt("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),rt("error",t,n)}}function $g(e,t,n,r){function i(E,S,C){try{S(C)}catch(k){Is(E,k,{fun:S,doc:C})}}function o(E,S,C,k,I){try{return{output:S(C,k,I)}}catch(B){return Is(E,B,{fun:S,keys:C,values:k,rereduce:I}),{error:B}}}function a(E,S){var C=Re(E.key,S.key);return C!==0?C:Re(E.value,S.value)}function u(E,S,C){return C=C||0,typeof S=="number"?E.slice(C,S+C):C>0?E.slice(C):E}function s(E){var S=E.value,C=S&&typeof S=="object"&&S._id||E.id;return C}function l(E){E.rows.forEach(function(S){var C=S.doc&&S.doc._attachments;C&&Object.keys(C).forEach(function(k){var I=C[k];C[k].data=ia(I.data,I.content_type)})})}function p(E){return function(S){return E.include_docs&&E.attachments&&E.binary&&l(S),S}}function f(E,S,C,k){var I=S[E];typeof I<"u"&&(k&&(I=encodeURIComponent(JSON.stringify(I))),C.push(E+"="+I))}function d(E){if(typeof E<"u"){var S=Number(E);return!isNaN(S)&&S===parseInt(E,10)?S:E}}function y(E){return E.group_level=d(E.group_level),E.limit=d(E.limit),E.skip=d(E.skip),E}function m(E){if(E){if(typeof E!="number")return new Lt('Invalid value for integer: "'+E+'"');if(E<0)return new Lt('Invalid value for positive integer: "'+E+'"')}}function $(E,S){var C=E.descending?"endkey":"startkey",k=E.descending?"startkey":"endkey";if(typeof E[C]<"u"&&typeof E[k]<"u"&&Re(E[C],E[k])>0)throw new Lt("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(S.reduce&&E.reduce!==!1){if(E.include_docs)throw new Lt("{include_docs:true} is invalid for reduce");if(E.keys&&E.keys.length>1&&!E.group&&!E.group_level)throw new Lt("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(I){var B=m(E[I]);if(B)throw B})}function w(E,S,C){var k=[],I,B="GET",A,M;if(f("reduce",C,k),f("include_docs",C,k),f("attachments",C,k),f("limit",C,k),f("descending",C,k),f("group",C,k),f("group_level",C,k),f("skip",C,k),f("stale",C,k),f("conflicts",C,k),f("startkey",C,k,!0),f("start_key",C,k,!0),f("endkey",C,k,!0),f("end_key",C,k,!0),f("inclusive_end",C,k),f("key",C,k,!0),f("update_seq",C,k),k=k.join("&"),k=k===""?"":"?"+k,typeof C.keys<"u"){var H=2e3,W="keys="+encodeURIComponent(JSON.stringify(C.keys));W.length+k.length+1<=H?k+=(k[0]==="?"?"&":"?")+W:(B="POST",typeof S=="string"?I={keys:C.keys}:S.keys=C.keys)}if(typeof S=="string"){var O=Di(S);return E.fetch("_design/"+O[0]+"/_view/"+O[1]+k,{headers:new yn({"Content-Type":"application/json"}),method:B,body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,En(T);return T.rows.forEach(function(R){if(R.value&&R.value.error&&R.value.error==="builtin_reduce_error")throw new Error(R.reason)}),T}).then(p(C))}return I=I||{},Object.keys(S).forEach(function(T){Array.isArray(S[T])?I[T]=S[T]:I[T]=S[T].toString()}),E.fetch("_temp_view"+k,{headers:new yn({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,En(T);return T}).then(p(C))}function g(E,S,C){return new Promise(function(k,I){E._query(S,C,function(B,A){if(B)return I(B);k(A)})})}function v(E){return new Promise(function(S,C){E._viewCleanup(function(k,I){if(k)return C(k);S(I)})})}function c(E){return function(S){if(S.status===404)return E;throw S}}function h(E,S,C){var k="_local/doc_"+E,I={_id:k,keys:[]},B=C.get(E),A=B[0],M=B[1];function H(){return Tg(M)?Promise.resolve(I):S.db.get(k).catch(c(I))}function W(T){return T.keys.length?S.db.allDocs({keys:T.keys,include_docs:!0}):Promise.resolve({rows:[]})}function O(T,R){for(var N=[],Y=new Tn,G=0,Q=R.rows.length;G<Q;G++){var ee=R.rows[G],te=ee.doc;if(te&&(N.push(te),Y.add(te._id),te._deleted=!A.has(te._id),!te._deleted)){var se=A.get(te._id);"value"in se&&(te.value=se.value)}}var ie=Ii(A);return ie.forEach(function(he){if(!Y.has(he)){var Be={_id:he},yt=A.get(he);"value"in yt&&(Be.value=yt.value),N.push(Be)}}),T.keys=xs(ie.concat(T.keys)),N.push(T),N}return H().then(function(T){return W(T).then(function(R){return O(T,R)})})}function _(E,S,C){var k="_local/lastSeq";return E.db.get(k).catch(c({_id:k,seq:0})).then(function(I){var B=Ii(S);return Promise.all(B.map(function(A){return h(A,E,S)})).then(function(A){var M=zr(A);return I.seq=C,M.push(I),E.db.bulkDocs({docs:M})})})}function b(E){var S=typeof E=="string"?E:E.name,C=Ps[S];return C||(C=Ps[S]=new Yn),C}function x(E,S){return Fi(b(E),function(){return j(E,S)})()}function j(E,S){var C,k;function I(G,Q){var ee={id:k._id,key:Vt(G)};typeof Q<"u"&&Q!==null&&(ee.value=Vt(Q)),C.push(ee)}var B=t(E.mapFun,I),A=E.seq||0;function M(G,Q){return function(){return _(E,G,Q)}}let H=0,W={view:E.name,indexed_docs:H};E.sourceDB.emit("indexing",W);var O=new Yn;function T(){return E.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:A,limit:S.changes_batch_size}).then(R)}function R(G){var Q=G.results;if(!Q.length)return;var ee=N(Q);O.add(M(ee,A)),H=H+Q.length;let te={view:E.name,last_seq:G.last_seq,results_count:Q.length,indexed_docs:H};if(E.sourceDB.emit("indexing",te),!(Q.length<S.changes_batch_size))return T()}function N(G){for(var Q=new Qe,ee=0,te=G.length;ee<te;ee++){var se=G[ee];if(se.doc._id[0]!=="_"){C=[],k=se.doc,k._deleted||i(E.sourceDB,B,k),C.sort(a);var ie=Y(C);Q.set(se.doc._id,[ie,se.changes])}A=se.seq}return Q}function Y(G){for(var Q=new Qe,ee,te=0,se=G.length;te<se;te++){var ie=G[te],he=[ie.key,ie.id];te>0&&Re(ie.key,ee)===0&&he.push(te),Q.set(st(he),ie),ee=ie.key}return Q}return T().then(function(){return O.finish()}).then(function(){E.seq=A})}function P(E,S,C){C.group_level===0&&delete C.group_level;var k=C.group||C.group_level,I=n(E.reduceFun),B=[],A=isNaN(C.group_level)?Number.POSITIVE_INFINITY:C.group_level;S.forEach(function(T){var R=B[B.length-1],N=k?T.key:null;if(k&&Array.isArray(N)&&(N=N.slice(0,A)),R&&Re(R.groupKey,N)===0){R.keys.push([T.key,T.id]),R.values.push(T.value);return}B.push({keys:[[T.key,T.id]],values:[T.value],groupKey:N})}),S=[];for(var M=0,H=B.length;M<H;M++){var W=B[M],O=o(E.sourceDB,I,W.keys,W.values,!1);if(O.error&&O.error instanceof di)throw O.error;S.push({value:O.error?null:O.output,key:W.groupKey})}return{rows:u(S,C.limit,C.skip)}}function L(E,S){return Fi(b(E),function(){return V(E,S)})()}function V(E,S){var C,k=E.reduceFun&&S.reduce!==!1,I=S.skip||0;typeof S.keys<"u"&&!S.keys.length&&(S.limit=0,delete S.keys);function B(G){return G.include_docs=!0,E.db.allDocs(G).then(function(Q){return C=Q.total_rows,Q.rows.map(function(ee){if("value"in ee.doc&&typeof ee.doc.value=="object"&&ee.doc.value!==null){var te=Object.keys(ee.doc.value).sort(),se=["id","key","value"];if(!(te<se||te>se))return ee.doc.value}var ie=vp(ee.doc._id);return{key:ie[0],id:ie[1],value:"value"in ee.doc?ee.doc.value:null}})})}function A(G){var Q;if(k?Q=P(E,G,S):typeof S.keys>"u"?Q={total_rows:C,offset:I,rows:G}:Q={total_rows:C,offset:I,rows:u(G,S.limit,S.skip)},S.update_seq&&(Q.update_seq=E.seq),S.include_docs){var ee=xs(G.map(s));return E.sourceDB.allDocs({keys:ee,include_docs:!0,conflicts:S.conflicts,attachments:S.attachments,binary:S.binary}).then(function(te){var se=new Qe;return te.rows.forEach(function(ie){se.set(ie.id,ie.doc)}),G.forEach(function(ie){var he=s(ie),Be=se.get(he);Be&&(ie.doc=Be)}),Q})}else return Q}if(typeof S.keys<"u"){var M=S.keys,H=M.map(function(G){var Q={startkey:st([G]),endkey:st([G,{}])};return S.update_seq&&(Q.update_seq=!0),B(Q)});return Promise.all(H).then(zr).then(A)}else{var W={descending:S.descending};S.update_seq&&(W.update_seq=!0);var O,T;if("start_key"in S&&(O=S.start_key),"startkey"in S&&(O=S.startkey),"end_key"in S&&(T=S.end_key),"endkey"in S&&(T=S.endkey),typeof O<"u"&&(W.startkey=S.descending?st([O,{}]):st([O])),typeof T<"u"){var R=S.inclusive_end!==!1;S.descending&&(R=!R),W.endkey=st(R?[T,{}]:[T])}if(typeof S.key<"u"){var N=st([S.key]),Y=st([S.key,{}]);W.descending?(W.endkey=N,W.startkey=Y):(W.startkey=N,W.endkey=Y)}return k||(typeof S.limit=="number"&&(W.limit=S.limit),W.skip=I),B(W).then(A)}}function J(E){return E.fetch("_view_cleanup",{headers:new yn({"Content-Type":"application/json"}),method:"POST"}).then(function(S){return S.json()})}function K(E){return E.get("_local/"+e).then(function(S){var C=new Qe;Object.keys(S.views).forEach(function(I){var B=Di(I),A="_design/"+B[0],M=B[1],H=C.get(A);H||(H=new Tn,C.set(A,H)),H.add(M)});var k={keys:Ii(C),include_docs:!0};return E.allDocs(k).then(function(I){var B={};I.rows.forEach(function(H){var W=H.key.substring(8);C.get(H.key).forEach(function(O){var T=W+"/"+O;S.views[T]||(T=O);var R=Object.keys(S.views[T]),N=H.doc&&H.doc.views&&H.doc.views[O];R.forEach(function(Y){B[Y]=B[Y]||N})})});var A=Object.keys(B).filter(function(H){return!B[H]}),M=A.map(function(H){return Fi(b(H),function(){return new E.constructor(H,E.__opts).destroy()})()});return Promise.all(M).then(function(){return{ok:!0}})})},c({ok:!0}))}function D(E,S,C){if(typeof E._query=="function")return g(E,S,C);if(gt(E))return w(E,S,C);var k={changes_batch_size:E.__opts.view_update_changes_batch_size||bg};if(typeof S!="string")return $(C,S),Fs.add(function(){var H=js(E,"temp_view/temp_view",S.map,S.reduce,!0,e);return H.then(function(W){return gg(x(W,k).then(function(){return L(W,C)}),function(){return W.db.destroy()})})}),Fs.finish();var I=S,B=Di(I),A=B[0],M=B[1];return E.get("_design/"+A).then(function(H){var W=H.views&&H.views[M];if(!W)throw new li("ddoc "+H._id+" has no view named "+M);r(H,M),$(C,W);var O=js(E,I,W.map,W.reduce,!1,e);return O.then(function(T){return C.stale==="ok"||C.stale==="update_after"?(C.stale==="update_after"&&Ge(function(){x(T,k)}),L(T,C)):x(T,k).then(function(){return L(T,C)})})})}function F(E,S,C){var k=this;typeof S=="function"&&(C=S,S={}),S=S?y(S):{},typeof E=="function"&&(E={map:E});var I=Promise.resolve().then(function(){return D(k,E,S)});return Zf(I,C),I}var U=pg(function(){var E=this;return typeof E._viewCleanup=="function"?v(E):gt(E)?J(E):K(E)});return{query:F,viewCleanup:U}}var Ni={_sum:function(e,t){return po(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(r){for(var i=0,o=0,a=r.length;o<a;o++){var u=r[o];i+=u*u}return i}return{sum:po(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}};function Eg(e){if(/^_sum/.test(e))return Ni._sum;if(/^_count/.test(e))return Ni._count;if(/^_stats/.test(e))return Ni._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}function Ag(e,t){if(typeof e=="function"&&e.length===2){var n=e;return function(r){return n(r,t)}}else return Xf(e.toString(),t)}function Sg(e){var t=e.toString(),n=Eg(t);return n||Xf(t)}function Cg(e,t){var n=e.views&&e.views[t];if(typeof n.map!="string")throw new li("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}var Og="mrviews",ec=$g(Og,Ag,Sg,Cg);function xg(e,t,n){return ec.query.call(this,e,t,n)}function kg(e){return ec.viewCleanup.call(this,e)}var Rg={query:xg,viewCleanup:kg};function Ds(e){return/^1-/.test(e)}function jg(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}function Ns(e,t){var n=Object.keys(t._attachments);return Promise.all(n.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function Pg(e,t,n){var r=gt(t)&&!gt(e),i=Object.keys(n._attachments);return r?e.get(n._id).then(function(o){return Promise.all(i.map(function(a){return jg(o,n,a)?t.getAttachment(n._id,a):e.getAttachment(o._id,a)}))}).catch(function(o){if(o.status!==404)throw o;return Ns(t,n)}):Ns(t,n)}function Fg(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n].missing;r.forEach(function(i){t.push({id:n,rev:i})})}),{docs:t,revs:!0,latest:!0}}function Ig(e,t,n,r){n=Ne(n);var i=[],o=!0;function a(){var d=Fg(n);if(d.docs.length)return e.bulkGet(d).then(function(y){if(r.cancelled)throw new Error("cancelled");return Promise.all(y.results.map(function(m){return Promise.all(m.docs.map(function($){var w=$.ok;return $.error&&(o=!1),!w||!w._attachments?w:Pg(t,e,w).then(function(g){var v=Object.keys(w._attachments);return g.forEach(function(c,h){var _=w._attachments[v[h]];delete _.stub,delete _.length,_.data=c}),w})}))})).then(function(m){i=i.concat(zr(m).filter(Boolean))})})}function u(d){return d._attachments&&Object.keys(d._attachments).length>0}function s(d){return d._conflicts&&d._conflicts.length>0}function l(d){return e.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(y){if(r.cancelled)throw new Error("cancelled");y.rows.forEach(function(m){m.deleted||!m.doc||!Ds(m.value.rev)||u(m.doc)||s(m.doc)||(m.doc._conflicts&&delete m.doc._conflicts,i.push(m.doc),delete n[m.id])})})}function p(){var d=Object.keys(n).filter(function(y){var m=n[y].missing;return m.length===1&&Ds(m[0])});if(d.length>0)return l(d)}function f(){return{ok:o,docs:i}}return Promise.resolve().then(p).then(a).then(f)}var Ms=1,Ls="pouchdb",Dg=5,vt=0;function da(e,t,n,r,i){return e.get(t).catch(function(o){if(o.status===404)return(e.adapter==="http"||e.adapter==="https")&&no(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:Ls,version:Ms};throw o}).then(function(o){if(!i.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter(function(a){return a.session_id!==r}),o.history.unshift({last_seq:n,session_id:r}),o.history=o.history.slice(0,Dg),o.version=Ms,o.replicator=Ls,o.session_id=r,o.last_seq=n,e.put(o).catch(function(a){if(a.status===409)return da(e,t,n,r,i);throw a})})}function fr(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i||{}}fr.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})};fr.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?da(this.target,this.id,e,t,this.returnValue):Promise.resolve(!0)};fr.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return da(this.src,this.id,e,t,this.returnValue).catch(function(r){if(nc(r))return n.opts.writeSourceCheckpoint=!1,!0;throw r})}else return Promise.resolve(!0)};var Bs={undefined:function(e,t){return Re(e.last_seq,t.last_seq)===0?t.last_seq:0},1:function(e,t){return Ng(t,e).last_seq}};fr.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(t){return t.last_seq||vt}).catch(function(t){if(t.status!==404)throw t;return vt}):e.target.get(e.id).then(function(t){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?t.last_seq||vt:e.src.get(e.id).then(function(n){if(t.version!==n.version)return vt;var r;return t.version?r=t.version.toString():r="undefined",r in Bs?Bs[r](t,n):vt},function(n){if(n.status===404&&t.last_seq)return e.src.put({_id:e.id,last_seq:vt}).then(function(){return vt},function(r){return nc(r)?(e.opts.writeSourceCheckpoint=!1,t.last_seq):vt});throw n})}).catch(function(t){if(t.status!==404)throw t;return vt})};function Ng(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:tc(e.history,t.history)}function tc(e,t){var n=e[0],r=e.slice(1),i=t[0],o=t.slice(1);if(!n||t.length===0)return{last_seq:vt,history:[]};var a=n.session_id;if(go(a,t))return{last_seq:n.last_seq,history:e};var u=i.session_id;return go(u,r)?{last_seq:i.last_seq,history:o}:tc(r,o)}function go(e,t){var n=t[0],r=t.slice(1);return!e||t.length===0?!1:e===n.session_id?!0:go(e,r)}function nc(e){return typeof e.status=="number"&&Math.floor(e.status/100)===4}var Us=0;function Mg(e,t,n,r){if(e.retry===!1){t.emit("error",n),t.removeAllListeners();return}if(typeof e.back_off_function!="function"&&(e.back_off_function=dv),t.emit("requestError",n),t.state==="active"||t.state==="pending"){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=Us},o=function(){t.removeListener("active",i)};t.once("paused",o),t.once("active",i)}e.current_back_off=e.current_back_off||Us,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}function Lg(e){return Object.keys(e).sort(Re).reduce(function(t,n){return t[n]=e[n],t},{})}function Bg(e,t,n){var r=n.doc_ids?n.doc_ids.sort(Re):"",i=n.filter?n.filter.toString():"",o="",a="",u="";return n.selector&&(u=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(Lg(n.query_params))),n.filter&&n.filter==="_view"&&(a=n.view.toString()),Promise.all([e.id(),t.id()]).then(function(s){var l=s[0]+s[1]+i+a+o+r+u;return new Promise(function(p){aa(l,p)})}).then(function(s){return s=s.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+s})}function rc(e,t,n,r,i){var o=[],a,u={seq:0,changes:[],docs:[]},s=!1,l=!1,p=!1,f=0,d=n.continuous||n.live||!1,y=n.batch_size||100,m=n.batches_limit||10,$=n.style||"all_docs",w=!1,g=n.doc_ids,v=n.selector,c,h,_=[],b=ci();i=i||{ok:!0,start_time:new Date().toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var x={};r.ready(e,t);function j(){return h?Promise.resolve():Bg(e,t,n).then(function(A){c=A;var M={};n.checkpoint===!1?M={writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:n.checkpoint==="source"?M={writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:n.checkpoint==="target"?M={writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:M={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},h=new fr(e,t,c,r,M)})}function P(){if(_=[],a.docs.length!==0){var A=a.docs,M={timeout:n.timeout};return t.bulkDocs({docs:A,new_edits:!1},M).then(function(H){if(r.cancelled)throw U(),new Error("cancelled");var W=Object.create(null);H.forEach(function(T){T.error&&(W[T.id]=T)});var O=Object.keys(W).length;i.doc_write_failures+=O,i.docs_written+=A.length-O,A.forEach(function(T){var R=W[T._id];if(R){i.errors.push(R);var N=(R.name||"").toLowerCase();if(N==="unauthorized"||N==="forbidden")r.emit("denied",Ne(R));else throw R}else _.push(T)})},function(H){throw i.doc_write_failures+=A.length,H})}}function L(){if(a.error)throw new Error("There was a problem getting docs.");i.last_seq=f=a.seq;var A=Ne(i);return _.length&&(A.docs=_,typeof a.pending=="number"&&(A.pending=a.pending,delete a.pending),r.emit("change",A)),s=!0,h.writeCheckpoint(a.seq,b).then(function(){if(r.emit("checkpoint",{checkpoint:a.seq}),s=!1,r.cancelled)throw U(),new Error("cancelled");a=void 0,k()}).catch(function(M){throw B(M),M})}function V(){var A={};return a.changes.forEach(function(M){r.emit("checkpoint",{revs_diff:M}),M.id!=="_user/"&&(A[M.id]=M.changes.map(function(H){return H.rev}))}),t.revsDiff(A).then(function(M){if(r.cancelled)throw U(),new Error("cancelled");a.diffs=M})}function J(){return Ig(e,t,a.diffs,r).then(function(A){a.error=!A.ok,A.docs.forEach(function(M){delete a.diffs[M._id],i.docs_read++,a.docs.push(M)})})}function K(){if(!(r.cancelled||a)){if(o.length===0){D(!0);return}a=o.shift(),r.emit("checkpoint",{start_next_batch:a.seq}),V().then(J).then(P).then(L).then(K).catch(function(A){F("batch processing terminated with error",A)})}}function D(A){if(u.changes.length===0){o.length===0&&!a&&((d&&x.live||l)&&(r.state="pending",r.emit("paused")),l&&U());return}(A||l||u.changes.length>=y)&&(o.push(u),u={seq:0,changes:[],docs:[]},(r.state==="pending"||r.state==="stopped")&&(r.state="active",r.emit("active")),K())}function F(A,M){p||(M.message||(M.message=A),i.ok=!1,i.status="aborting",o=[],u={seq:0,changes:[],docs:[]},U(M))}function U(A){if(!p&&!(r.cancelled&&(i.status="cancelled",s)))if(i.status=i.status||"complete",i.end_time=new Date().toISOString(),i.last_seq=f,p=!0,A){A=ce(A),A.result=i;var M=(A.name||"").toLowerCase();M==="unauthorized"||M==="forbidden"?(r.emit("error",A),r.removeAllListeners()):Mg(n,r,A,function(){rc(e,t,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function E(A,M,H){if(r.cancelled)return U();typeof M=="number"&&(u.pending=M);var W=Xo(n)(A);W&&(u.seq=A.seq||H,u.changes.push(A),r.emit("checkpoint",{pending_batch:u.seq}),Ge(function(){D(o.length===0&&x.live)}))}function S(A){if(w=!1,r.cancelled)return U();if(A.results.length>0)x.since=A.results[A.results.length-1].seq,k(),D(!0);else{var M=function(){d?(x.live=!0,k()):l=!0,D(!0)};!a&&A.results.length===0?(s=!0,h.writeCheckpoint(A.last_seq,b).then(function(){s=!1,i.last_seq=f=A.last_seq,M()}).catch(B)):M()}}function C(A){if(w=!1,r.cancelled)return U();F("changes rejected",A)}function k(){if(!(!w&&!l&&o.length<m))return;w=!0;function A(){H.cancel()}function M(){r.removeListener("cancel",A)}r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",A);var H=e.changes(x).on("change",E);H.then(M,M),H.then(S).catch(C),n.retry&&(r._changes=H,r._abortChanges=A)}function I(){j().then(function(){if(r.cancelled){U();return}return h.getCheckpoint().then(function(A){f=A,x={since:f,limit:y,batch_size:y,style:$,doc_ids:g,selector:v,return_docs:!0},n.filter&&(typeof n.filter!="string"?x.include_docs=!0:x.filter=n.filter),"heartbeat"in n&&(x.heartbeat=n.heartbeat),"timeout"in n&&(x.timeout=n.timeout),n.query_params&&(x.query_params=n.query_params),n.view&&(x.view=n.view),k()})}).catch(function(A){F("getCheckpoint rejected with ",A)})}function B(A){s=!1,F("writeCheckpoint completed with error",A)}if(r.cancelled){U();return}r._addedListeners||(r.once("cancel",U),typeof n.complete=="function"&&(r.once("error",n.complete),r.once("complete",function(A){n.complete(null,A)})),r._addedListeners=!0),typeof n.since>"u"?I():j().then(function(){return s=!0,h.writeCheckpoint(n.since,b)}).then(function(){if(s=!1,r.cancelled){U();return}f=n.since,I()}).catch(B)}ze(hi,Le);function hi(){Le.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new Promise(function(n,r){e.once("complete",n),e.once("error",r)});e.then=function(n,r){return t.then(n,r)},e.catch=function(n){return t.catch(n)},e.catch(function(){})}hi.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")};hi.prototype.ready=function(e,t){var n=this;if(n._readyCalled)return;n._readyCalled=!0;function r(){n.cancel()}e.once("destroyed",r),t.once("destroyed",r);function i(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}n.once("complete",i),n.once("error",i)};function Yr(e,t){var n=t.PouchConstructor;return typeof e=="string"?new n(e,t):e}function yo(e,t,n,r){if(typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw ce(ui,"`doc_ids` filter parameter is not a list.");n.complete=r,n=Ne(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:!1,n.PouchConstructor=n.PouchConstructor||this;var i=new hi,o=Yr(e,n),a=Yr(t,n);return rc(o,a,n,i),i}ze(ha,Le);function Ug(e,t,n,r){return typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n=Ne(n),n.PouchConstructor=n.PouchConstructor||this,e=Yr(e,n),t=Yr(t,n),new ha(e,t,n,r)}function ha(e,t,n,r){var i=this;this.canceled=!1;var o=n.push?Kt({},n,n.push):n,a=n.pull?Kt({},n,n.pull):n;this.push=yo(e,t,o),this.pull=yo(t,e,a),this.pushPaused=!0,this.pullPaused=!0;function u(c){i.emit("change",{direction:"pull",change:c})}function s(c){i.emit("change",{direction:"push",change:c})}function l(c){i.emit("denied",{direction:"push",doc:c})}function p(c){i.emit("denied",{direction:"pull",doc:c})}function f(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function d(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function y(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function m(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}var $={};function w(c){return function(h,_){var b=h==="change"&&(_===u||_===s),x=h==="denied"&&(_===p||_===l),j=h==="paused"&&(_===d||_===f),P=h==="active"&&(_===m||_===y);(b||x||j||P)&&(h in $||($[h]={}),$[h][c]=!0,Object.keys($[h]).length===2&&i.removeAllListeners(h))}}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push)));function g(c,h,_){c.listeners(h).indexOf(_)==-1&&c.on(h,_)}this.on("newListener",function(c){c==="change"?(g(i.pull,"change",u),g(i.push,"change",s)):c==="denied"?(g(i.pull,"denied",p),g(i.push,"denied",l)):c==="active"?(g(i.pull,"active",m),g(i.push,"active",y)):c==="paused"&&(g(i.pull,"paused",d),g(i.push,"paused",f))}),this.on("removeListener",function(c){c==="change"?(i.pull.removeListener("change",u),i.push.removeListener("change",s)):c==="denied"?(i.pull.removeListener("denied",p),i.push.removeListener("denied",l)):c==="active"?(i.pull.removeListener("active",m),i.push.removeListener("active",y)):c==="paused"&&(i.pull.removeListener("paused",d),i.push.removeListener("paused",f))}),this.pull.on("removeListener",w("pull")),this.push.on("removeListener",w("push"));var v=Promise.all([this.push,this.pull]).then(function(c){var h={push:c[0],pull:c[1]};return i.emit("complete",h),r&&r(null,h),i.removeAllListeners(),h},function(c){if(i.cancel(),r?r(c):i.emit("error",c),i.removeAllListeners(),r)throw c});this.then=function(c,h){return v.then(c,h)},this.catch=function(c){return v.catch(c)}}ha.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};function qg(e){e.replicate=yo,e.sync=Ug,Object.defineProperty(e.prototype,"replicate",{get:function(){var t=this;return typeof this.replicateMethods>"u"&&(this.replicateMethods={from:function(n,r,i){return t.constructor.replicate(n,t,r,i)},to:function(n,r,i){return t.constructor.replicate(t,n,r,i)}}),this.replicateMethods}}),e.prototype.sync=function(t,n,r){return this.constructor.sync(this,t,n,r)}}ae.plugin(ag).plugin(vg).plugin(Rg).plugin(qg);var ic={exports:{}};/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2018 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function a(l,p){if(!i[l]){if(!r[l]){var f=typeof _dereq_=="function"&&_dereq_;if(!p&&f)return f(l,!0);if(u)return u(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var y=i[l]={exports:{}};r[l][0].call(y.exports,function(m){var $=r[l][1][m];return a($||m)},y,y.exports,n,r,i,o)}return i[l].exports}for(var u=typeof _dereq_=="function"&&_dereq_,s=0;s<o.length;s++)a(o[s]);return a}({1:[function(n,r,i){r.exports=function(o){var a=o._SomePromiseArray;function u(s){var l=new a(s),p=l.promise();return l.setHowMany(1),l.setUnwrap(),l.init(),p}o.any=function(s){return u(s)},o.prototype.any=function(){return u(this)}}},{}],2:[function(n,r,i){var o;try{throw new Error}catch(m){o=m}var a=n("./schedule"),u=n("./queue");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1;var m=this;this.drainQueues=function(){m._drainQueues()},this._schedule=a}s.prototype.setScheduler=function(m){var $=this._schedule;return this._schedule=m,this._customScheduler=!0,$},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(m,$){$?(process.stderr.write("Fatal "+(m instanceof Error?m.stack:m)+`
`),process.exit(2)):this.throwLater(m)},s.prototype.throwLater=function(m,$){if(arguments.length===1&&($=m,m=function(){throw $}),typeof setTimeout<"u")setTimeout(function(){m($)},0);else try{this._schedule(function(){m($)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function l(m,$,w){this._lateQueue.push(m,$,w),this._queueTick()}function p(m,$,w){this._normalQueue.push(m,$,w),this._queueTick()}function f(m){this._normalQueue._pushOne(m),this._queueTick()}s.prototype.invokeLater=l,s.prototype.invoke=p,s.prototype.settlePromises=f;function d(m){for(;m.length()>0;)y(m)}function y(m){var $=m.shift();if(typeof $!="function")$._settlePromises();else{var w=m.shift(),g=m.shift();$.call(w,g)}}s.prototype._drainQueues=function(){d(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,d(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},r.exports=s,r.exports.firstLineError=o},{"./queue":26,"./schedule":29}],3:[function(n,r,i){r.exports=function(o,a,u,s){var l=!1,p=function(m,$){this._reject($)},f=function(m,$){$.promiseRejectionQueued=!0,$.bindingPromise._then(p,p,null,this,m)},d=function(m,$){this._bitField&50397184||this._resolveCallback($.target)},y=function(m,$){$.promiseRejectionQueued||this._reject(m)};o.prototype.bind=function(m){l||(l=!0,o.prototype._propagateFrom=s.propagateFromFunction(),o.prototype._boundValue=s.boundValueFunction());var $=u(m),w=new o(a);w._propagateFrom(this,1);var g=this._target();if(w._setBoundTo($),$ instanceof o){var v={promiseRejectionQueued:!1,promise:w,target:g,bindingPromise:$};g._then(a,f,void 0,w,v),$._then(d,y,void 0,w,v),w._setOnCancel($)}else w._resolveCallback(g);return w},o.prototype._setBoundTo=function(m){m!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=m):this._bitField=this._bitField&-2097153},o.prototype._isBound=function(){return(this._bitField&2097152)===2097152},o.bind=function(m,$){return o.resolve($).bind(m)}}},{}],4:[function(n,r,i){var o;typeof Promise<"u"&&(o=Promise);function a(){try{Promise===u&&(Promise=o)}catch{}return u}var u=n("./promise")();u.noConflict=a,r.exports=u},{"./promise":22}],5:[function(n,r,i){var o=Object.create;if(o){var a=o(null),u=o(null);a[" size"]=u[" size"]=0}r.exports=function(s){var l=n("./util"),p=l.canEvaluate;l.isIdentifier;var f;function d(w,g){var v;if(w!=null&&(v=w[g]),typeof v!="function"){var c="Object "+l.classString(w)+" has no method '"+l.toString(g)+"'";throw new s.TypeError(c)}return v}function y(w){var g=this.pop(),v=d(w,g);return v.apply(w,this)}s.prototype.call=function(w){var g=[].slice.call(arguments,1);return g.push(w),this._then(y,void 0,void 0,g,void 0)};function m(w){return w[this]}function $(w){var g=+this;return g<0&&(g=Math.max(0,g+w.length)),w[g]}s.prototype.get=function(w){var g=typeof w=="number",v;if(g)v=$;else if(p){var c=f(w);v=c!==null?c:m}else v=m;return this._then(v,void 0,void 0,w,void 0)}}},{"./util":36}],6:[function(n,r,i){r.exports=function(o,a,u,s){var l=n("./util"),p=l.tryCatch,f=l.errorObj,d=o._async;o.prototype.break=o.prototype.cancel=function(){if(!s.cancellation())return this._warn("cancellation is disabled");for(var y=this,m=y;y._isCancellable();){if(!y._cancelBy(m)){m._isFollowing()?m._followee().cancel():m._cancelBranched();break}var $=y._cancellationParent;if($==null||!$._isCancellable()){y._isFollowing()?y._followee().cancel():y._cancelBranched();break}else y._isFollowing()&&y._followee().cancel(),y._setWillBeCancelled(),m=y,y=$}},o.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},o.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},o.prototype._cancelBy=function(y){return y===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},o.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},o.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),d.invoke(this._cancelPromises,this,void 0))},o.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},o.prototype._unsetOnCancel=function(){this._onCancelField=void 0},o.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},o.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},o.prototype._doInvokeOnCancel=function(y,m){if(l.isArray(y))for(var $=0;$<y.length;++$)this._doInvokeOnCancel(y[$],m);else if(y!==void 0)if(typeof y=="function"){if(!m){var w=p(y).call(this._boundValue());w===f&&(this._attachExtraTrace(w.e),d.throwLater(w.e))}}else y._resultCancelled(this)},o.prototype._invokeOnCancel=function(){var y=this._onCancel();this._unsetOnCancel(),d.invoke(this._doInvokeOnCancel,this,y)},o.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},o.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(n,r,i){r.exports=function(o){var a=n("./util"),u=n("./es5").keys,s=a.tryCatch,l=a.errorObj;function p(f,d,y){return function(m){var $=y._boundValue();e:for(var w=0;w<f.length;++w){var g=f[w];if(g===Error||g!=null&&g.prototype instanceof Error){if(m instanceof g)return s(d).call($,m)}else if(typeof g=="function"){var v=s(g).call($,m);if(v===l)return v;if(v)return s(d).call($,m)}else if(a.isObject(m)){for(var c=u(g),h=0;h<c.length;++h){var _=c[h];if(g[_]!=m[_])continue e}return s(d).call($,m)}}return o}}return p}},{"./es5":13,"./util":36}],8:[function(n,r,i){r.exports=function(o){var a=!1,u=[];o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){};function s(){this._trace=new s.CapturedTrace(p())}s.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,u.push(this._trace))},s.prototype._popContext=function(){if(this._trace!==void 0){var f=u.pop(),d=f._promiseCreated;return f._promiseCreated=null,d}return null};function l(){if(a)return new s}function p(){var f=u.length-1;if(f>=0)return u[f]}return s.CapturedTrace=null,s.create=l,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var f=o.prototype._pushContext,d=o.prototype._popContext,y=o._peekContext,m=o.prototype._peekContext,$=o.prototype._promiseCreated;s.deactivateLongStackTraces=function(){o.prototype._pushContext=f,o.prototype._popContext=d,o._peekContext=y,o.prototype._peekContext=m,o.prototype._promiseCreated=$,a=!1},a=!0,o.prototype._pushContext=s.prototype._pushContext,o.prototype._popContext=s.prototype._popContext,o._peekContext=o.prototype._peekContext=p,o.prototype._promiseCreated=function(){var w=this._peekContext();w&&w._promiseCreated==null&&(w._promiseCreated=this)}},s}},{}],9:[function(n,r,i){r.exports=function(o,a,u,s){var l=o._async,p=n("./errors").Warning,f=n("./util"),d=n("./es5"),y=f.canAttachTrace,m,$,w=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,v=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,c=null,h=null,_=!1,b,x=f.env("BLUEBIRD_DEBUG")!=0,j=!!(f.env("BLUEBIRD_WARNINGS")!=0&&(x||f.env("BLUEBIRD_WARNINGS"))),P=!!(f.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(x||f.env("BLUEBIRD_LONG_STACK_TRACES"))),L=f.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(j||!!f.env("BLUEBIRD_W_FORGOTTEN_RETURN")),V;(function(){var q=[];function z(){for(var Z=0;Z<q.length;++Z)q[Z]._notifyUnhandledRejection();X()}function X(){q.length=0}V=function(Z){q.push(Z),setTimeout(z,1)},d.defineProperty(o,"_unhandledRejectionCheck",{value:z}),d.defineProperty(o,"_unhandledRejectionClear",{value:X})})(),o.prototype.suppressUnhandledRejections=function(){var q=this._target();q._bitField=q._bitField&-1048577|524288},o.prototype._ensurePossibleRejectionHandled=function(){this._bitField&524288||(this._setRejectionIsUnhandled(),V(this))},o.prototype._notifyUnhandledRejectionIsHandled=function(){Pa("rejectionHandled",m,void 0,this)},o.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},o.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},o.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var q=this._settledValue();this._setUnhandledRejectionIsNotified(),Pa("unhandledRejection",$,q,this)}},o.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},o.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},o.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},o.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},o.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},o.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},o.prototype._warn=function(q,z,X){return ee(q,z,X||this)},o.onPossiblyUnhandledRejection=function(q){var z=o._getContext();$=f.contextBind(z,q)},o.onUnhandledRejectionHandled=function(q){var z=o._getContext();m=f.contextBind(z,q)};var J=function(){};o.longStackTraces=function(){if(l.haveItemsQueued()&&!xe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!xe.longStackTraces&&Ti()){var q=o.prototype._captureStackTrace,z=o.prototype._attachExtraTrace,X=o.prototype._dereferenceTrace;xe.longStackTraces=!0,J=function(){if(l.haveItemsQueued()&&!xe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);o.prototype._captureStackTrace=q,o.prototype._attachExtraTrace=z,o.prototype._dereferenceTrace=X,a.deactivateLongStackTraces(),xe.longStackTraces=!1},o.prototype._captureStackTrace=R,o.prototype._attachExtraTrace=N,o.prototype._dereferenceTrace=Y,a.activateLongStackTraces()}},o.hasLongStackTraces=function(){return xe.longStackTraces&&Ti()};var K={unhandledrejection:{before:function(){var q=f.global.onunhandledrejection;return f.global.onunhandledrejection=null,q},after:function(q){f.global.onunhandledrejection=q}},rejectionhandled:{before:function(){var q=f.global.onrejectionhandled;return f.global.onrejectionhandled=null,q},after:function(q){f.global.onrejectionhandled=q}}},D=function(){var q=function(X,Z){if(X){var re;try{return re=X.before(),!f.global.dispatchEvent(Z)}finally{X.after(re)}}else return!f.global.dispatchEvent(Z)};try{if(typeof CustomEvent=="function"){var z=new CustomEvent("CustomEvent");return f.global.dispatchEvent(z),function(X,Z){X=X.toLowerCase();var re={detail:Z,cancelable:!0},le=new CustomEvent(X,re);return d.defineProperty(le,"promise",{value:Z.promise}),d.defineProperty(le,"reason",{value:Z.reason}),q(K[X],le)}}else if(typeof Event=="function"){var z=new Event("CustomEvent");return f.global.dispatchEvent(z),function(Z,re){Z=Z.toLowerCase();var le=new Event(Z,{cancelable:!0});return le.detail=re,d.defineProperty(le,"promise",{value:re.promise}),d.defineProperty(le,"reason",{value:re.reason}),q(K[Z],le)}}else{var z=document.createEvent("CustomEvent");return z.initCustomEvent("testingtheevent",!1,!0,{}),f.global.dispatchEvent(z),function(Z,re){Z=Z.toLowerCase();var le=document.createEvent("CustomEvent");return le.initCustomEvent(Z,!1,!0,re),q(K[Z],le)}}}catch{}return function(){return!1}}(),F=function(){return f.isNode?function(){return process.emit.apply(process,arguments)}:f.global?function(q){var z="on"+q.toLowerCase(),X=f.global[z];return X?(X.apply(f.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function U(q,z){return{promise:z}}var E={promiseCreated:U,promiseFulfilled:U,promiseRejected:U,promiseResolved:U,promiseCancelled:U,promiseChained:function(q,z,X){return{promise:z,child:X}},warning:function(q,z){return{warning:z}},unhandledRejection:function(q,z,X){return{reason:z,promise:X}},rejectionHandled:U},S=function(q){var z=!1;try{z=F.apply(null,arguments)}catch(Z){l.throwLater(Z),z=!0}var X=!1;try{X=D(q,E[q].apply(null,arguments))}catch(Z){l.throwLater(Z),X=!0}return X||z};o.config=function(q){if(q=Object(q),"longStackTraces"in q&&(q.longStackTraces?o.longStackTraces():!q.longStackTraces&&o.hasLongStackTraces()&&J()),"warnings"in q){var z=q.warnings;xe.warnings=!!z,L=xe.warnings,f.isObject(z)&&"wForgottenReturn"in z&&(L=!!z.wForgottenReturn)}if("cancellation"in q&&q.cancellation&&!xe.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");o.prototype._clearCancellationData=M,o.prototype._propagateFrom=H,o.prototype._onCancel=B,o.prototype._setOnCancel=A,o.prototype._attachCancellationCallback=I,o.prototype._execute=k,O=H,xe.cancellation=!0}if("monitoring"in q&&(q.monitoring&&!xe.monitoring?(xe.monitoring=!0,o.prototype._fireEvent=S):!q.monitoring&&xe.monitoring&&(xe.monitoring=!1,o.prototype._fireEvent=C)),"asyncHooks"in q&&f.nodeSupportsAsyncResource){var X=xe.asyncHooks,Z=!!q.asyncHooks;X!==Z&&(xe.asyncHooks=Z,Z?u():s())}return o};function C(){return!1}o.prototype._fireEvent=C,o.prototype._execute=function(q,z,X){try{q(z,X)}catch(Z){return Z}},o.prototype._onCancel=function(){},o.prototype._setOnCancel=function(q){},o.prototype._attachCancellationCallback=function(q){},o.prototype._captureStackTrace=function(){},o.prototype._attachExtraTrace=function(){},o.prototype._dereferenceTrace=function(){},o.prototype._clearCancellationData=function(){},o.prototype._propagateFrom=function(q,z){};function k(q,z,X){var Z=this;try{q(z,X,function(re){if(typeof re!="function")throw new TypeError("onCancel must be a function, got: "+f.toString(re));Z._attachCancellationCallback(re)})}catch(re){return re}}function I(q){if(!this._isCancellable())return this;var z=this._onCancel();z!==void 0?f.isArray(z)?z.push(q):this._setOnCancel([z,q]):this._setOnCancel(q)}function B(){return this._onCancelField}function A(q){this._onCancelField=q}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function H(q,z){if(z&1){this._cancellationParent=q;var X=q._branchesRemainingToCancel;X===void 0&&(X=0),q._branchesRemainingToCancel=X+1}z&2&&q._isBound()&&this._setBoundTo(q._boundTo)}function W(q,z){z&2&&q._isBound()&&this._setBoundTo(q._boundTo)}var O=W;function T(){var q=this._boundTo;return q!==void 0&&q instanceof o?q.isFulfilled()?q.value():void 0:q}function R(){this._trace=new Ft(this._peekContext())}function N(q,z){if(y(q)){var X=this._trace;if(X!==void 0&&z&&(X=X._parent),X!==void 0)X.attachExtraTrace(q);else if(!q.__stackCleaned__){var Z=yt(q);f.notEnumerableProp(q,"stack",Z.message+`
`+Z.stack.join(`
`)),f.notEnumerableProp(q,"__stackCleaned__",!0)}}}function Y(){this._trace=void 0}function G(q,z,X,Z,re){if(q===void 0&&z!==null&&L){if(re!==void 0&&re._returnedNonUndefined()||!(Z._bitField&65535))return;X&&(X=X+" ");var le="",be="";if(z._trace){for(var ue=z._trace.stack.split(`
`),Ce=he(ue),je=Ce.length-1;je>=0;--je){var _t=Ce[je];if(!g.test(_t)){var mt=_t.match(v);mt&&(le="at "+mt[1]+":"+mt[2]+":"+mt[3]+" ");break}}if(Ce.length>0){for(var Vc=Ce[0],je=0;je<ue.length;++je)if(ue[je]===Vc){je>0&&(be=`
`+ue[je-1]);break}}}var Jc="a promise was created in a "+X+"handler "+le+"but was not returned from it, see http://goo.gl/rRqMUw"+be;Z._warn(Jc,!0,z)}}function Q(q,z){var X=q+" is deprecated and will be removed in a future version.";return z&&(X+=" Use "+z+" instead."),ee(X)}function ee(q,z,X){if(xe.warnings){var Z=new p(q),re;if(z)X._attachExtraTrace(Z);else if(xe.longStackTraces&&(re=o._peekContext()))re.attachExtraTrace(Z);else{var le=yt(Z);Z.stack=le.message+`
`+le.stack.join(`
`)}S("warning",Z)||ja(Z,"",!0)}}function te(q,z){for(var X=0;X<z.length-1;++X)z[X].push("From previous event:"),z[X]=z[X].join(`
`);return X<z.length&&(z[X]=z[X].join(`
`)),q+`
`+z.join(`
`)}function se(q){for(var z=0;z<q.length;++z)(q[z].length===0||z+1<q.length&&q[z][0]===q[z+1][0])&&(q.splice(z,1),z--)}function ie(q){for(var z=q[0],X=1;X<q.length;++X){for(var Z=q[X],re=z.length-1,le=z[re],be=-1,ue=Z.length-1;ue>=0;--ue)if(Z[ue]===le){be=ue;break}for(var ue=be;ue>=0;--ue){var Ce=Z[ue];if(z[re]===Ce)z.pop(),re--;else break}z=Z}}function he(q){for(var z=[],X=0;X<q.length;++X){var Z=q[X],re=Z==="    (No stack trace)"||c.test(Z),le=re&&$i(Z);re&&!le&&(_&&Z.charAt(0)!==" "&&(Z="    "+Z),z.push(Z))}return z}function Be(q){for(var z=q.stack.replace(/\s+$/g,"").split(`
`),X=0;X<z.length;++X){var Z=z[X];if(Z==="    (No stack trace)"||c.test(Z))break}return X>0&&q.name!="SyntaxError"&&(z=z.slice(X)),z}function yt(q){var z=q.stack,X=q.toString();return z=typeof z=="string"&&z.length>0?Be(q):["    (No stack trace)"],{message:X,stack:q.name=="SyntaxError"?z:he(z)}}function ja(q,z,X){if(typeof console<"u"){var Z;if(f.isObject(q)){var re=q.stack;Z=z+h(re,q)}else Z=z+String(q);typeof b=="function"?b(Z,X):(typeof console.log=="function"||typeof console.log=="object")&&console.log(Z)}}function Pa(q,z,X,Z){var re=!1;try{typeof z=="function"&&(re=!0,q==="rejectionHandled"?z(Z):z(X,Z))}catch(le){l.throwLater(le)}q==="unhandledRejection"?!S(q,X,Z)&&!re&&ja(X,"Unhandled rejection "):S(q,Z)}function Fa(q){var z;if(typeof q=="function")z="[function "+(q.name||"anonymous")+"]";else{z=q&&typeof q.toString=="function"?q.toString():f.toString(q);var X=/\[object [a-zA-Z0-9$_]+\]/;if(X.test(z))try{var Z=JSON.stringify(q);z=Z}catch{}z.length===0&&(z="(empty array)")}return"(<"+Kc(z)+">, no stack trace)"}function Kc(q){var z=41;return q.length<z?q:q.substr(0,z-3)+"..."}function Ti(){return typeof Ia=="function"}var $i=function(){return!1},Yc=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Ei(q){var z=q.match(Yc);if(z)return{fileName:z[1],line:parseInt(z[2],10)}}function Qc(q,z){if(Ti()){for(var X=(q.stack||"").split(`
`),Z=(z.stack||"").split(`
`),re=-1,le=-1,be,ue,Ce=0;Ce<X.length;++Ce){var je=Ei(X[Ce]);if(je){be=je.fileName,re=je.line;break}}for(var Ce=0;Ce<Z.length;++Ce){var je=Ei(Z[Ce]);if(je){ue=je.fileName,le=je.line;break}}re<0||le<0||!be||!ue||be!==ue||re>=le||($i=function(_t){if(w.test(_t))return!0;var mt=Ei(_t);return!!(mt&&mt.fileName===be&&re<=mt.line&&mt.line<=le)})}}function Ft(q){this._parent=q,this._promisesCreated=0;var z=this._length=1+(q===void 0?0:q._length);Ia(this,Ft),z>32&&this.uncycle()}f.inherits(Ft,Error),a.CapturedTrace=Ft,Ft.prototype.uncycle=function(){var q=this._length;if(!(q<2)){for(var z=[],X={},Z=0,re=this;re!==void 0;++Z)z.push(re),re=re._parent;q=this._length=Z;for(var Z=q-1;Z>=0;--Z){var le=z[Z].stack;X[le]===void 0&&(X[le]=Z)}for(var Z=0;Z<q;++Z){var be=z[Z].stack,ue=X[be];if(ue!==void 0&&ue!==Z){ue>0&&(z[ue-1]._parent=void 0,z[ue-1]._length=1),z[Z]._parent=void 0,z[Z]._length=1;var Ce=Z>0?z[Z-1]:this;ue<q-1?(Ce._parent=z[ue+1],Ce._parent.uncycle(),Ce._length=Ce._parent._length+1):(Ce._parent=void 0,Ce._length=1);for(var je=Ce._length+1,_t=Z-2;_t>=0;--_t)z[_t]._length=je,je++;return}}}},Ft.prototype.attachExtraTrace=function(q){if(!q.__stackCleaned__){this.uncycle();for(var z=yt(q),X=z.message,Z=[z.stack],re=this;re!==void 0;)Z.push(he(re.stack.split(`
`))),re=re._parent;ie(Z),se(Z),f.notEnumerableProp(q,"stack",te(X,Z)),f.notEnumerableProp(q,"__stackCleaned__",!0)}};var Ia=function(){var z=/^\s*at\s*/,X=function(be,ue){return typeof be=="string"?be:ue.name!==void 0&&ue.message!==void 0?ue.toString():Fa(ue)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,c=z,h=X;var Z=Error.captureStackTrace;return $i=function(be){return w.test(be)},function(be,ue){Error.stackTraceLimit+=6,Z(be,ue),Error.stackTraceLimit-=6}}var re=new Error;if(typeof re.stack=="string"&&re.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return c=/@/,h=X,_=!0,function(ue){ue.stack=new Error().stack};var le;try{throw new Error}catch(be){le="stack"in be}return!("stack"in re)&&le&&typeof Error.stackTraceLimit=="number"?(c=z,h=X,function(ue){Error.stackTraceLimit+=6;try{throw new Error}catch(Ce){ue.stack=Ce.stack}Error.stackTraceLimit-=6}):(h=function(be,ue){return typeof be=="string"?be:(typeof ue=="object"||typeof ue=="function")&&ue.name!==void 0&&ue.message!==void 0?ue.toString():Fa(ue)},null)}();typeof console<"u"&&typeof console.warn<"u"&&(b=function(q){console.warn(q)},f.isNode&&process.stderr.isTTY?b=function(q,z){var X=z?"\x1B[33m":"\x1B[31m";console.warn(X+q+`\x1B[0m
`)}:!f.isNode&&typeof new Error().stack=="string"&&(b=function(q,z){console.warn("%c"+q,z?"color: darkorange":"color: red")}));var xe={warnings:j,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return P&&o.longStackTraces(),{asyncHooks:function(){return xe.asyncHooks},longStackTraces:function(){return xe.longStackTraces},warnings:function(){return xe.warnings},cancellation:function(){return xe.cancellation},monitoring:function(){return xe.monitoring},propagateFromFunction:function(){return O},boundValueFunction:function(){return T},checkForgottenReturns:G,setBounds:Qc,warn:ee,deprecated:Q,CapturedTrace:Ft,fireDomEvent:D,fireGlobalEvent:F}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(n,r,i){r.exports=function(o){function a(){return this.value}function u(){throw this.reason}o.prototype.return=o.prototype.thenReturn=function(s){return s instanceof o&&s.suppressUnhandledRejections(),this._then(a,void 0,void 0,{value:s},void 0)},o.prototype.throw=o.prototype.thenThrow=function(s){return this._then(u,void 0,void 0,{reason:s},void 0)},o.prototype.catchThrow=function(s){if(arguments.length<=1)return this._then(void 0,u,void 0,{reason:s},void 0);var l=arguments[1],p=function(){throw l};return this.caught(s,p)},o.prototype.catchReturn=function(s){if(arguments.length<=1)return s instanceof o&&s.suppressUnhandledRejections(),this._then(void 0,a,void 0,{value:s},void 0);var l=arguments[1];l instanceof o&&l.suppressUnhandledRejections();var p=function(){return l};return this.caught(s,p)}}},{}],11:[function(n,r,i){r.exports=function(o,a){var u=o.reduce,s=o.all;function l(){return s(this)}function p(f,d){return u(f,d,a,a)}o.prototype.each=function(f){return u(this,f,a,0)._then(l,void 0,void 0,this,void 0)},o.prototype.mapSeries=function(f){return u(this,f,a,a)},o.each=function(f,d){return u(f,d,a,0)._then(l,void 0,void 0,f,void 0)},o.mapSeries=p}},{}],12:[function(n,r,i){var o=n("./es5"),a=o.freeze,u=n("./util"),s=u.inherits,l=u.notEnumerableProp;function p(b,x){function j(P){if(!(this instanceof j))return new j(P);l(this,"message",typeof P=="string"?P:x),l(this,"name",b),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return s(j,Error),j}var f,d,y=p("Warning","warning"),m=p("CancellationError","cancellation error"),$=p("TimeoutError","timeout error"),w=p("AggregateError","aggregate error");try{f=TypeError,d=RangeError}catch{f=p("TypeError","type error"),d=p("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<g.length;++v)typeof Array.prototype[g[v]]=="function"&&(w.prototype[g[v]]=Array.prototype[g[v]]);o.defineProperty(w.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),w.prototype.isOperational=!0;var c=0;w.prototype.toString=function(){var b=Array(c*4+1).join(" "),x=`
`+b+`AggregateError of:
`;c++,b=Array(c*4+1).join(" ");for(var j=0;j<this.length;++j){for(var P=this[j]===this?"[Circular AggregateError]":this[j]+"",L=P.split(`
`),V=0;V<L.length;++V)L[V]=b+L[V];P=L.join(`
`),x+=P+`
`}return c--,x};function h(b){if(!(this instanceof h))return new h(b);l(this,"name","OperationalError"),l(this,"message",b),this.cause=b,this.isOperational=!0,b instanceof Error?(l(this,"message",b.message),l(this,"stack",b.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}s(h,Error);var _=Error.__BluebirdErrorTypes__;_||(_=a({CancellationError:m,TimeoutError:$,OperationalError:h,RejectionError:h,AggregateError:w}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),r.exports={Error,TypeError:f,RangeError:d,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:y}},{"./es5":13,"./util":36}],13:[function(n,r,i){var o=function(){return this===void 0}();if(o)r.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:o,propertyIsWritable:function($,w){var g=Object.getOwnPropertyDescriptor($,w);return!!(!g||g.writable||g.set)}};else{var a={}.hasOwnProperty,u={}.toString,s={}.constructor.prototype,l=function($){var w=[];for(var g in $)a.call($,g)&&w.push(g);return w},p=function($,w){return{value:$[w]}},f=function($,w,g){return $[w]=g.value,$},d=function($){return $},y=function($){try{return Object($).constructor.prototype}catch{return s}},m=function($){try{return u.call($)==="[object Array]"}catch{return!1}};r.exports={isArray:m,keys:l,names:l,defineProperty:f,getDescriptor:p,freeze:d,getPrototypeOf:y,isES5:o,propertyIsWritable:function(){return!0}}}},{}],14:[function(n,r,i){r.exports=function(o,a){var u=o.map;o.prototype.filter=function(s,l){return u(this,s,l,a)},o.filter=function(s,l,p){return u(s,l,p,a)}}},{}],15:[function(n,r,i){r.exports=function(o,a,u){var s=n("./util"),l=o.CancellationError,p=s.errorObj,f=n("./catch_filter")(u);function d(v,c,h){this.promise=v,this.type=c,this.handler=h,this.called=!1,this.cancelPromise=null}d.prototype.isFinallyHandler=function(){return this.type===0};function y(v){this.finallyHandler=v}y.prototype._resultCancelled=function(){m(this.finallyHandler)};function m(v,c){return v.cancelPromise!=null?(arguments.length>1?v.cancelPromise._reject(c):v.cancelPromise._cancel(),v.cancelPromise=null,!0):!1}function $(){return g.call(this,this.promise._target()._settledValue())}function w(v){if(!m(this,v))return p.e=v,p}function g(v){var c=this.promise,h=this.handler;if(!this.called){this.called=!0;var _=this.isFinallyHandler()?h.call(c._boundValue()):h.call(c._boundValue(),v);if(_===u)return _;if(_!==void 0){c._setReturnedNonUndefined();var b=a(_,c);if(b instanceof o){if(this.cancelPromise!=null)if(b._isCancelled()){var x=new l("late cancellation observer");return c._attachExtraTrace(x),p.e=x,p}else b.isPending()&&b._attachCancellationCallback(new y(this));return b._then($,w,void 0,this,void 0)}}}return c.isRejected()?(m(this),p.e=v,p):(m(this),v)}return o.prototype._passThrough=function(v,c,h,_){return typeof v!="function"?this.then():this._then(h,_,void 0,new d(this,c,v),void 0)},o.prototype.lastly=o.prototype.finally=function(v){return this._passThrough(v,0,g,g)},o.prototype.tap=function(v){return this._passThrough(v,1,g)},o.prototype.tapCatch=function(v){var c=arguments.length;if(c===1)return this._passThrough(v,1,void 0,g);var h=new Array(c-1),_=0,b;for(b=0;b<c-1;++b){var x=arguments[b];if(s.isObject(x))h[_++]=x;else return o.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+s.classString(x)))}h.length=_;var j=arguments[b];return this._passThrough(f(h,j,this),1,void 0,g)},d}},{"./catch_filter":7,"./util":36}],16:[function(n,r,i){r.exports=function(o,a,u,s,l,p){var f=n("./errors"),d=f.TypeError,y=n("./util"),m=y.errorObj,$=y.tryCatch,w=[];function g(c,h,_){for(var b=0;b<h.length;++b){_._pushContext();var x=$(h[b])(c);if(_._popContext(),x===m){_._pushContext();var j=o.reject(m.e);return _._popContext(),j}var P=s(x,_);if(P instanceof o)return P}return null}function v(c,h,_,b){if(p.cancellation()){var x=new o(u),j=this._finallyPromise=new o(u);this._promise=x.lastly(function(){return j}),x._captureStackTrace(),x._setOnCancel(this)}else{var P=this._promise=new o(u);P._captureStackTrace()}this._stack=b,this._generatorFunction=c,this._receiver=h,this._generator=void 0,this._yieldHandlers=typeof _=="function"?[_].concat(w):w,this._yieldedPromise=null,this._cancellationPhase=!1}y.inherits(v,l),v.prototype._isResolved=function(){return this._promise===null},v.prototype._cleanup=function(){this._promise=this._generator=null,p.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},v.prototype._promiseCancelled=function(){if(!this._isResolved()){var c=typeof this._generator.return<"u",h;if(c)this._promise._pushContext(),h=$(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var _=new o.CancellationError("generator .return() sentinel");o.coroutine.returnSentinel=_,this._promise._attachExtraTrace(_),this._promise._pushContext(),h=$(this._generator.throw).call(this._generator,_),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(h)}},v.prototype._promiseFulfilled=function(c){this._yieldedPromise=null,this._promise._pushContext();var h=$(this._generator.next).call(this._generator,c);this._promise._popContext(),this._continue(h)},v.prototype._promiseRejected=function(c){this._yieldedPromise=null,this._promise._attachExtraTrace(c),this._promise._pushContext();var h=$(this._generator.throw).call(this._generator,c);this._promise._popContext(),this._continue(h)},v.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof o){var c=this._yieldedPromise;this._yieldedPromise=null,c.cancel()}},v.prototype.promise=function(){return this._promise},v.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},v.prototype._continue=function(c){var h=this._promise;if(c===m)return this._cleanup(),this._cancellationPhase?h.cancel():h._rejectCallback(c.e,!1);var _=c.value;if(c.done===!0)return this._cleanup(),this._cancellationPhase?h.cancel():h._resolveCallback(_);var b=s(_,this._promise);if(!(b instanceof o)&&(b=g(b,this._yieldHandlers,this._promise),b===null)){this._promiseRejected(new d(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(_))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}b=b._target();var x=b._bitField;x&50397184?x&33554432?o._async.invoke(this._promiseFulfilled,this,b._value()):x&16777216?o._async.invoke(this._promiseRejected,this,b._reason()):this._promiseCancelled():(this._yieldedPromise=b,b._proxy(this,null))},o.coroutine=function(c,h){if(typeof c!="function")throw new d(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var _=Object(h).yieldHandler,b=v,x=new Error().stack;return function(){var j=c.apply(this,arguments),P=new b(void 0,void 0,_,x),L=P.promise();return P._generator=j,P._promiseFulfilled(void 0),L}},o.coroutine.addYieldHandler=function(c){if(typeof c!="function")throw new d("expecting a function but got "+y.classString(c));w.push(c)},o.spawn=function(c){if(p.deprecated("Promise.spawn()","Promise.coroutine()"),typeof c!="function")return a(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var h=new v(c,this),_=h.promise();return h._run(o.spawn),_}}},{"./errors":12,"./util":36}],17:[function(n,r,i){r.exports=function(o,a,u,s,l){var p=n("./util");p.canEvaluate,p.tryCatch,p.errorObj,o.join=function(){var f=arguments.length-1,d;if(f>0&&typeof arguments[f]=="function"){d=arguments[f];var m}var y=[].slice.call(arguments);d&&y.pop();var m=new a(y).promise();return d!==void 0?m.spread(d):m}}},{"./util":36}],18:[function(n,r,i){r.exports=function(o,a,u,s,l,p){var f=n("./util"),d=f.tryCatch,y=f.errorObj,m=o._async;function $(g,v,c,h){this.constructor$(g),this._promise._captureStackTrace();var _=o._getContext();if(this._callback=f.contextBind(_,v),this._preservedValues=h===l?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],m.invoke(this._asyncInit,this,void 0),f.isArray(g))for(var b=0;b<g.length;++b){var x=g[b];x instanceof o&&x.suppressUnhandledRejections()}}f.inherits($,a),$.prototype._asyncInit=function(){this._init$(void 0,-2)},$.prototype._init=function(){},$.prototype._promiseFulfilled=function(g,v){var c=this._values,h=this.length(),_=this._preservedValues,b=this._limit;if(v<0){if(v=v*-1-1,c[v]=g,b>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(b>=1&&this._inFlight>=b)return c[v]=g,this._queue.push(v),!1;_!==null&&(_[v]=g);var x=this._promise,j=this._callback,P=x._boundValue();x._pushContext();var L=d(j).call(P,g,v,h),V=x._popContext();if(p.checkForgottenReturns(L,V,_!==null?"Promise.filter":"Promise.map",x),L===y)return this._reject(L.e),!0;var J=s(L,this._promise);if(J instanceof o){J=J._target();var K=J._bitField;if(K&50397184)if(K&33554432)L=J._value();else return K&16777216?(this._reject(J._reason()),!0):(this._cancel(),!0);else return b>=1&&this._inFlight++,c[v]=J,J._proxy(this,(v+1)*-1),!1}c[v]=L}var D=++this._totalResolved;return D>=h?(_!==null?this._filter(c,_):this._resolve(c),!0):!1},$.prototype._drainQueue=function(){for(var g=this._queue,v=this._limit,c=this._values;g.length>0&&this._inFlight<v;){if(this._isResolved())return;var h=g.pop();this._promiseFulfilled(c[h],h)}},$.prototype._filter=function(g,v){for(var c=v.length,h=new Array(c),_=0,b=0;b<c;++b)g[b]&&(h[_++]=v[b]);h.length=_,this._resolve(h)},$.prototype.preservedValues=function(){return this._preservedValues};function w(g,v,c,h){if(typeof v!="function")return u("expecting a function but got "+f.classString(v));var _=0;if(c!==void 0)if(typeof c=="object"&&c!==null){if(typeof c.concurrency!="number")return o.reject(new TypeError("'concurrency' must be a number but it is "+f.classString(c.concurrency)));_=c.concurrency}else return o.reject(new TypeError("options argument must be an object but it is "+f.classString(c)));return _=typeof _=="number"&&isFinite(_)&&_>=1?_:0,new $(g,v,_,h).promise()}o.prototype.map=function(g,v){return w(this,g,v,null)},o.map=function(g,v,c,h){return w(g,v,c,h)}}},{"./util":36}],19:[function(n,r,i){r.exports=function(o,a,u,s,l){var p=n("./util"),f=p.tryCatch;o.method=function(d){if(typeof d!="function")throw new o.TypeError("expecting a function but got "+p.classString(d));return function(){var y=new o(a);y._captureStackTrace(),y._pushContext();var m=f(d).apply(this,arguments),$=y._popContext();return l.checkForgottenReturns(m,$,"Promise.method",y),y._resolveFromSyncValue(m),y}},o.attempt=o.try=function(d){if(typeof d!="function")return s("expecting a function but got "+p.classString(d));var y=new o(a);y._captureStackTrace(),y._pushContext();var m;if(arguments.length>1){l.deprecated("calling Promise.try with more than 1 argument");var $=arguments[1],w=arguments[2];m=p.isArray($)?f(d).apply(w,$):f(d).call(w,$)}else m=f(d)();var g=y._popContext();return l.checkForgottenReturns(m,g,"Promise.try",y),y._resolveFromSyncValue(m),y},o.prototype._resolveFromSyncValue=function(d){d===p.errorObj?this._rejectCallback(d.e,!1):this._resolveCallback(d,!0)}}},{"./util":36}],20:[function(n,r,i){var o=n("./util"),a=o.maybeWrapAsError,u=n("./errors"),s=u.OperationalError,l=n("./es5");function p(m){return m instanceof Error&&l.getPrototypeOf(m)===Error.prototype}var f=/^(?:name|message|stack|cause)$/;function d(m){var $;if(p(m)){$=new s(m),$.name=m.name,$.message=m.message,$.stack=m.stack;for(var w=l.keys(m),g=0;g<w.length;++g){var v=w[g];f.test(v)||($[v]=m[v])}return $}return o.markAsOriginatingFromRejection(m),m}function y(m,$){return function(w,g){if(m!==null){if(w){var v=d(a(w));m._attachExtraTrace(v),m._reject(v)}else if(!$)m._fulfill(g);else{var c=[].slice.call(arguments,1);m._fulfill(c)}m=null}}}r.exports=y},{"./errors":12,"./es5":13,"./util":36}],21:[function(n,r,i){r.exports=function(o){var a=n("./util"),u=o._async,s=a.tryCatch,l=a.errorObj;function p(y,m){var $=this;if(!a.isArray(y))return f.call($,y,m);var w=s(m).apply($._boundValue(),[null].concat(y));w===l&&u.throwLater(w.e)}function f(y,m){var $=this,w=$._boundValue(),g=y===void 0?s(m).call(w,null):s(m).call(w,null,y);g===l&&u.throwLater(g.e)}function d(y,m){var $=this;if(!y){var w=new Error(y+"");w.cause=y,y=w}var g=s(m).call($._boundValue(),y);g===l&&u.throwLater(g.e)}o.prototype.asCallback=o.prototype.nodeify=function(y,m){if(typeof y=="function"){var $=f;m!==void 0&&Object(m).spread&&($=p),this._then($,d,void 0,this,y)}return this}}},{"./util":36}],22:[function(n,r,i){r.exports=function(){var o=function(){return new x(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},a=function(){return new A.PromiseInspection(this._target())},u=function(O){return A.reject(new x(O))};function s(){}var l={},p=n("./util");p.setReflectHandler(a);var f=function(){var O=process.domain;return O===void 0?null:O},d=function(){return null},y=function(){return{domain:f(),async:null}},m=p.isNode&&p.nodeSupportsAsyncResource?n("async_hooks").AsyncResource:null,$=function(){return{domain:f(),async:new m("Bluebird::Promise")}},w=p.isNode?y:d;p.notEnumerableProp(A,"_getContext",w);var g=function(){w=$,p.notEnumerableProp(A,"_getContext",$)},v=function(){w=y,p.notEnumerableProp(A,"_getContext",y)},c=n("./es5"),h=n("./async"),_=new h;c.defineProperty(A,"_async",{value:_});var b=n("./errors"),x=A.TypeError=b.TypeError;A.RangeError=b.RangeError;var j=A.CancellationError=b.CancellationError;A.TimeoutError=b.TimeoutError,A.OperationalError=b.OperationalError,A.RejectionError=b.OperationalError,A.AggregateError=b.AggregateError;var P=function(){},L={},V={},J=n("./thenables")(A,P),K=n("./promise_array")(A,P,J,u,s),D=n("./context")(A),F=D.create,U=n("./debuggability")(A,D,g,v);U.CapturedTrace;var E=n("./finally")(A,J,V),S=n("./catch_filter")(V),C=n("./nodeback"),k=p.errorObj,I=p.tryCatch;function B(O,T){if(O==null||O.constructor!==A)throw new x(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof T!="function")throw new x("expecting a function but got "+p.classString(T))}function A(O){O!==P&&B(this,O),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(O),this._promiseCreated(),this._fireEvent("promiseCreated",this)}A.prototype.toString=function(){return"[object Promise]"},A.prototype.caught=A.prototype.catch=function(O){var T=arguments.length;if(T>1){var R=new Array(T-1),N=0,Y;for(Y=0;Y<T-1;++Y){var G=arguments[Y];if(p.isObject(G))R[N++]=G;else return u("Catch statement predicate: expecting an object but got "+p.classString(G))}if(R.length=N,O=arguments[Y],typeof O!="function")throw new x("The last argument to .catch() must be a function, got "+p.toString(O));return this.then(void 0,S(R,O,this))}return this.then(void 0,O)},A.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},A.prototype.then=function(O,T){if(U.warnings()&&arguments.length>0&&typeof O!="function"&&typeof T!="function"){var R=".then() only accepts functions but was passed: "+p.classString(O);arguments.length>1&&(R+=", "+p.classString(T)),this._warn(R)}return this._then(O,T,void 0,void 0,void 0)},A.prototype.done=function(O,T){var R=this._then(O,T,void 0,void 0,void 0);R._setIsFinal()},A.prototype.spread=function(O){return typeof O!="function"?u("expecting a function but got "+p.classString(O)):this.all()._then(O,void 0,void 0,L,void 0)},A.prototype.toJSON=function(){var O={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(O.fulfillmentValue=this.value(),O.isFulfilled=!0):this.isRejected()&&(O.rejectionReason=this.reason(),O.isRejected=!0),O},A.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new K(this).promise()},A.prototype.error=function(O){return this.caught(p.originatesFromRejection,O)},A.getNewLibraryCopy=r.exports,A.is=function(O){return O instanceof A},A.fromNode=A.fromCallback=function(O){var T=new A(P);T._captureStackTrace();var R=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,N=I(O)(C(T,R));return N===k&&T._rejectCallback(N.e,!0),T._isFateSealed()||T._setAsyncGuaranteed(),T},A.all=function(O){return new K(O).promise()},A.cast=function(O){var T=J(O);return T instanceof A||(T=new A(P),T._captureStackTrace(),T._setFulfilled(),T._rejectionHandler0=O),T},A.resolve=A.fulfilled=A.cast,A.reject=A.rejected=function(O){var T=new A(P);return T._captureStackTrace(),T._rejectCallback(O,!0),T},A.setScheduler=function(O){if(typeof O!="function")throw new x("expecting a function but got "+p.classString(O));return _.setScheduler(O)},A.prototype._then=function(O,T,R,N,Y){var G=Y!==void 0,Q=G?Y:new A(P),ee=this._target(),te=ee._bitField;G||(Q._propagateFrom(this,3),Q._captureStackTrace(),N===void 0&&this._bitField&2097152&&(te&50397184?N=this._boundValue():N=ee===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Q));var se=w();if(te&50397184){var ie,he,Be=ee._settlePromiseCtx;te&33554432?(he=ee._rejectionHandler0,ie=O):te&16777216?(he=ee._fulfillmentHandler0,ie=T,ee._unsetRejectionIsUnhandled()):(Be=ee._settlePromiseLateCancellationObserver,he=new j("late cancellation observer"),ee._attachExtraTrace(he),ie=T),_.invoke(Be,ee,{handler:p.contextBind(se,ie),promise:Q,receiver:N,value:he})}else ee._addCallbacks(O,T,Q,N,se);return Q},A.prototype._length=function(){return this._bitField&65535},A.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},A.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},A.prototype._setLength=function(O){this._bitField=this._bitField&-65536|O&65535},A.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},A.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},A.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},A.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},A.prototype._isFinal=function(){return(this._bitField&4194304)>0},A.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},A.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},A.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},A.prototype._setAsyncGuaranteed=function(){if(!_.hasCustomScheduler()){var O=this._bitField;this._bitField=O|(O&536870912)>>2^134217728}},A.prototype._setNoAsyncGuarantee=function(){this._bitField=(this._bitField|536870912)&-134217729},A.prototype._receiverAt=function(O){var T=O===0?this._receiver0:this[O*4-4+3];if(T!==l)return T===void 0&&this._isBound()?this._boundValue():T},A.prototype._promiseAt=function(O){return this[O*4-4+2]},A.prototype._fulfillmentHandlerAt=function(O){return this[O*4-4+0]},A.prototype._rejectionHandlerAt=function(O){return this[O*4-4+1]},A.prototype._boundValue=function(){},A.prototype._migrateCallback0=function(O){O._bitField;var T=O._fulfillmentHandler0,R=O._rejectionHandler0,N=O._promise0,Y=O._receiverAt(0);Y===void 0&&(Y=l),this._addCallbacks(T,R,N,Y,null)},A.prototype._migrateCallbackAt=function(O,T){var R=O._fulfillmentHandlerAt(T),N=O._rejectionHandlerAt(T),Y=O._promiseAt(T),G=O._receiverAt(T);G===void 0&&(G=l),this._addCallbacks(R,N,Y,G,null)},A.prototype._addCallbacks=function(O,T,R,N,Y){var G=this._length();if(G>=65535-4&&(G=0,this._setLength(0)),G===0)this._promise0=R,this._receiver0=N,typeof O=="function"&&(this._fulfillmentHandler0=p.contextBind(Y,O)),typeof T=="function"&&(this._rejectionHandler0=p.contextBind(Y,T));else{var Q=G*4-4;this[Q+2]=R,this[Q+3]=N,typeof O=="function"&&(this[Q+0]=p.contextBind(Y,O)),typeof T=="function"&&(this[Q+1]=p.contextBind(Y,T))}return this._setLength(G+1),G},A.prototype._proxy=function(O,T){this._addCallbacks(void 0,void 0,T,O,null)},A.prototype._resolveCallback=function(O,T){if(!(this._bitField&117506048)){if(O===this)return this._rejectCallback(o(),!1);var R=J(O,this);if(!(R instanceof A))return this._fulfill(O);T&&this._propagateFrom(R,2);var N=R._target();if(N===this){this._reject(o());return}var Y=N._bitField;if(Y&50397184)if(Y&33554432)this._fulfill(N._value());else if(Y&16777216)this._reject(N._reason());else{var ee=new j("late cancellation observer");N._attachExtraTrace(ee),this._reject(ee)}else{var G=this._length();G>0&&N._migrateCallback0(this);for(var Q=1;Q<G;++Q)N._migrateCallbackAt(this,Q);this._setFollowing(),this._setLength(0),this._setFollowee(R)}}},A.prototype._rejectCallback=function(O,T,R){var N=p.ensureErrorObject(O),Y=N===O;if(!Y&&!R&&U.warnings()){var G="a promise was rejected with a non-error: "+p.classString(O);this._warn(G,!0)}this._attachExtraTrace(N,T?Y:!1),this._reject(O)},A.prototype._resolveFromExecutor=function(O){if(O!==P){var T=this;this._captureStackTrace(),this._pushContext();var R=!0,N=this._execute(O,function(Y){T._resolveCallback(Y)},function(Y){T._rejectCallback(Y,R)});R=!1,this._popContext(),N!==void 0&&T._rejectCallback(N,!0)}},A.prototype._settlePromiseFromHandler=function(O,T,R,N){var Y=N._bitField;if(!(Y&65536)){N._pushContext();var G;T===L?!R||typeof R.length!="number"?(G=k,G.e=new x("cannot .spread() a non-array: "+p.classString(R))):G=I(O).apply(this._boundValue(),R):G=I(O).call(T,R);var Q=N._popContext();Y=N._bitField,!(Y&65536)&&(G===V?N._reject(R):G===k?N._rejectCallback(G.e,!1):(U.checkForgottenReturns(G,Q,"",N,this),N._resolveCallback(G)))}},A.prototype._target=function(){for(var O=this;O._isFollowing();)O=O._followee();return O},A.prototype._followee=function(){return this._rejectionHandler0},A.prototype._setFollowee=function(O){this._rejectionHandler0=O},A.prototype._settlePromise=function(O,T,R,N){var Y=O instanceof A,G=this._bitField,Q=(G&134217728)!==0;G&65536?(Y&&O._invokeInternalOnCancel(),R instanceof E&&R.isFinallyHandler()?(R.cancelPromise=O,I(T).call(R,N)===k&&O._reject(k.e)):T===a?O._fulfill(a.call(R)):R instanceof s?R._promiseCancelled(O):Y||O instanceof K?O._cancel():R.cancel()):typeof T=="function"?Y?(Q&&O._setAsyncGuaranteed(),this._settlePromiseFromHandler(T,R,N,O)):T.call(R,N,O):R instanceof s?R._isResolved()||(G&33554432?R._promiseFulfilled(N,O):R._promiseRejected(N,O)):Y&&(Q&&O._setAsyncGuaranteed(),G&33554432?O._fulfill(N):O._reject(N))},A.prototype._settlePromiseLateCancellationObserver=function(O){var T=O.handler,R=O.promise,N=O.receiver,Y=O.value;typeof T=="function"?R instanceof A?this._settlePromiseFromHandler(T,N,Y,R):T.call(N,Y,R):R instanceof A&&R._reject(Y)},A.prototype._settlePromiseCtx=function(O){this._settlePromise(O.promise,O.handler,O.receiver,O.value)},A.prototype._settlePromise0=function(O,T,R){var N=this._promise0,Y=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(N,O,Y,T)},A.prototype._clearCallbackDataAtIndex=function(O){var T=O*4-4;this[T+2]=this[T+3]=this[T+0]=this[T+1]=void 0},A.prototype._fulfill=function(O){var T=this._bitField;if(!((T&117506048)>>>16)){if(O===this){var R=o();return this._attachExtraTrace(R),this._reject(R)}this._setFulfilled(),this._rejectionHandler0=O,(T&65535)>0&&(T&134217728?this._settlePromises():_.settlePromises(this),this._dereferenceTrace())}},A.prototype._reject=function(O){var T=this._bitField;if(!((T&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=O,this._isFinal())return _.fatalError(O,p.isNode);(T&65535)>0?_.settlePromises(this):this._ensurePossibleRejectionHandled()}},A.prototype._fulfillPromises=function(O,T){for(var R=1;R<O;R++){var N=this._fulfillmentHandlerAt(R),Y=this._promiseAt(R),G=this._receiverAt(R);this._clearCallbackDataAtIndex(R),this._settlePromise(Y,N,G,T)}},A.prototype._rejectPromises=function(O,T){for(var R=1;R<O;R++){var N=this._rejectionHandlerAt(R),Y=this._promiseAt(R),G=this._receiverAt(R);this._clearCallbackDataAtIndex(R),this._settlePromise(Y,N,G,T)}},A.prototype._settlePromises=function(){var O=this._bitField,T=O&65535;if(T>0){if(O&16842752){var R=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,R,O),this._rejectPromises(T,R)}else{var N=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,N,O),this._fulfillPromises(T,N)}this._setLength(0)}this._clearCancellationData()},A.prototype._settledValue=function(){var O=this._bitField;if(O&33554432)return this._rejectionHandler0;if(O&16777216)return this._fulfillmentHandler0},typeof Symbol<"u"&&Symbol.toStringTag&&c.defineProperty(A.prototype,Symbol.toStringTag,{get:function(){return"Object"}});function M(O){this.promise._resolveCallback(O)}function H(O){this.promise._rejectCallback(O,!1)}A.defer=A.pending=function(){U.deprecated("Promise.defer","new Promise");var O=new A(P);return{promise:O,resolve:M,reject:H}},p.notEnumerableProp(A,"_makeSelfResolutionError",o),n("./method")(A,P,J,u,U),n("./bind")(A,P,J,U),n("./cancel")(A,K,u,U),n("./direct_resolve")(A),n("./synchronous_inspection")(A),n("./join")(A,K,J,P,_),A.Promise=A,A.version="3.7.2",n("./call_get.js")(A),n("./generators.js")(A,u,P,J,s,U),n("./map.js")(A,K,u,J,P,U),n("./nodeify.js")(A),n("./promisify.js")(A,P),n("./props.js")(A,K,J,u),n("./race.js")(A,P,J,u),n("./reduce.js")(A,K,u,J,P,U),n("./settle.js")(A,K,U),n("./some.js")(A,K,u),n("./timers.js")(A,P,U),n("./using.js")(A,u,J,F,P,U),n("./any.js")(A),n("./each.js")(A,P),n("./filter.js")(A,P),p.toFastProperties(A),p.toFastProperties(A.prototype);function W(O){var T=new A(P);T._fulfillmentHandler0=O,T._rejectionHandler0=O,T._promise0=O,T._receiver0=O}return W({a:1}),W({b:2}),W({c:3}),W(1),W(function(){}),W(void 0),W(!1),W(new A(P)),U.setBounds(h.firstLineError,p.lastLineError),A}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(n,r,i){r.exports=function(o,a,u,s,l){var p=n("./util");p.isArray;function f(y){switch(y){case-2:return[];case-3:return{};case-6:return new Map}}function d(y){var m=this._promise=new o(a);y instanceof o&&(m._propagateFrom(y,3),y.suppressUnhandledRejections()),m._setOnCancel(this),this._values=y,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return p.inherits(d,l),d.prototype.length=function(){return this._length},d.prototype.promise=function(){return this._promise},d.prototype._init=function y(m,$){var w=u(this._values,this._promise);if(w instanceof o){w=w._target();var g=w._bitField;if(this._values=w,g&50397184)if(g&33554432)w=w._value();else return g&16777216?this._reject(w._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),w._then(y,this._reject,void 0,this,$)}if(w=p.asArray(w),w===null){var v=s("expecting an array or an iterable object but got "+p.classString(w)).reason();this._promise._rejectCallback(v,!1);return}if(w.length===0){$===-5?this._resolveEmptyArray():this._resolve(f($));return}this._iterate(w)},d.prototype._iterate=function(y){var m=this.getActualLength(y.length);this._length=m,this._values=this.shouldCopyValues()?new Array(m):this._values;for(var $=this._promise,w=!1,g=null,v=0;v<m;++v){var c=u(y[v],$);c instanceof o?(c=c._target(),g=c._bitField):g=null,w?g!==null&&c.suppressUnhandledRejections():g!==null?g&50397184?g&33554432?w=this._promiseFulfilled(c._value(),v):g&16777216?w=this._promiseRejected(c._reason(),v):w=this._promiseCancelled(v):(c._proxy(this,v),this._values[v]=c):w=this._promiseFulfilled(c,v)}w||$._setAsyncGuaranteed()},d.prototype._isResolved=function(){return this._values===null},d.prototype._resolve=function(y){this._values=null,this._promise._fulfill(y)},d.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},d.prototype._reject=function(y){this._values=null,this._promise._rejectCallback(y,!1)},d.prototype._promiseFulfilled=function(y,m){this._values[m]=y;var $=++this._totalResolved;return $>=this._length?(this._resolve(this._values),!0):!1},d.prototype._promiseCancelled=function(){return this._cancel(),!0},d.prototype._promiseRejected=function(y){return this._totalResolved++,this._reject(y),!0},d.prototype._resultCancelled=function(){if(!this._isResolved()){var y=this._values;if(this._cancel(),y instanceof o)y.cancel();else for(var m=0;m<y.length;++m)y[m]instanceof o&&y[m].cancel()}},d.prototype.shouldCopyValues=function(){return!0},d.prototype.getActualLength=function(y){return y},d}},{"./util":36}],24:[function(n,r,i){r.exports=function(o,a){var u={},s=n("./util"),l=n("./nodeback"),p=s.withAppended,f=s.maybeWrapAsError,d=s.canEvaluate,y=n("./errors").TypeError,m="Async",$={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],g=new RegExp("^(?:"+w.join("|")+")$"),v=function(D){return s.isIdentifier(D)&&D.charAt(0)!=="_"&&D!=="constructor"};function c(D){return!g.test(D)}function h(D){try{return D.__isPromisified__===!0}catch{return!1}}function _(D,F,U){var E=s.getDataPropertyOrDefault(D,F+U,$);return E?h(E):!1}function b(D,F,U){for(var E=0;E<D.length;E+=2){var S=D[E];if(U.test(S)){for(var C=S.replace(U,""),k=0;k<D.length;k+=2)if(D[k]===C)throw new y(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",F))}}}function x(D,F,U,E){for(var S=s.inheritedDataKeys(D),C=[],k=0;k<S.length;++k){var I=S[k],B=D[I],A=E===v?!0:v(I);typeof B=="function"&&!h(B)&&!_(D,I,F)&&E(I,B,D,A)&&C.push(I,B)}return b(C,F,U),C}var j=function(D){return D.replace(/([$])/,"\\$")},P;function L(D,F,U,E,S,C){var k=function(){return this}(),I=D;typeof I=="string"&&(D=E);function B(){var A=F;F===u&&(A=this);var M=new o(a);M._captureStackTrace();var H=typeof I=="string"&&this!==k?this[I]:D,W=l(M,C);try{H.apply(A,p(arguments,W))}catch(O){M._rejectCallback(f(O),!0,!0)}return M._isFateSealed()||M._setAsyncGuaranteed(),M}return s.notEnumerableProp(B,"__isPromisified__",!0),B}var V=d?P:L;function J(D,F,U,E,S){for(var C=new RegExp(j(F)+"$"),k=x(D,F,C,U),I=0,B=k.length;I<B;I+=2){var A=k[I],M=k[I+1],H=A+F;if(E===V)D[H]=V(A,u,A,M,F,S);else{var W=E(M,function(){return V(A,u,A,M,F,S)});s.notEnumerableProp(W,"__isPromisified__",!0),D[H]=W}}return s.toFastProperties(D),D}function K(D,F,U){return V(D,F,void 0,D,null,U)}o.promisify=function(D,F){if(typeof D!="function")throw new y("expecting a function but got "+s.classString(D));if(h(D))return D;F=Object(F);var U=F.context===void 0?u:F.context,E=!!F.multiArgs,S=K(D,U,E);return s.copyDescriptors(D,S,c),S},o.promisifyAll=function(D,F){if(typeof D!="function"&&typeof D!="object")throw new y(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);F=Object(F);var U=!!F.multiArgs,E=F.suffix;typeof E!="string"&&(E=m);var S=F.filter;typeof S!="function"&&(S=v);var C=F.promisifier;if(typeof C!="function"&&(C=V),!s.isIdentifier(E))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var k=s.inheritedDataKeys(D),I=0;I<k.length;++I){var B=D[k[I]];k[I]!=="constructor"&&s.isClass(B)&&(J(B.prototype,E,S,C,U),J(B,E,S,C,U))}return J(D,E,S,C,U)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(n,r,i){r.exports=function(o,a,u,s){var l=n("./util"),p=l.isObject,f=n("./es5"),d;typeof Map=="function"&&(d=Map);var y=function(){var g=0,v=0;function c(h,_){this[g]=h,this[g+v]=_,g++}return function(_){v=_.size,g=0;var b=new Array(_.size*2);return _.forEach(c,b),b}}(),m=function(g){for(var v=new d,c=g.length/2|0,h=0;h<c;++h){var _=g[c+h],b=g[h];v.set(_,b)}return v};function $(g){var v=!1,c;if(d!==void 0&&g instanceof d)c=y(g),v=!0;else{var h=f.keys(g),_=h.length;c=new Array(_*2);for(var b=0;b<_;++b){var x=h[b];c[b]=g[x],c[b+_]=x}}this.constructor$(c),this._isMap=v,this._init$(void 0,v?-6:-3)}l.inherits($,a),$.prototype._init=function(){},$.prototype._promiseFulfilled=function(g,v){this._values[v]=g;var c=++this._totalResolved;if(c>=this._length){var h;if(this._isMap)h=m(this._values);else{h={};for(var _=this.length(),b=0,x=this.length();b<x;++b)h[this._values[b+_]]=this._values[b]}return this._resolve(h),!0}return!1},$.prototype.shouldCopyValues=function(){return!1},$.prototype.getActualLength=function(g){return g>>1};function w(g){var v,c=u(g);if(p(c))c instanceof o?v=c._then(o.props,void 0,void 0,void 0,void 0):v=new $(c).promise();else return s(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return c instanceof o&&v._propagateFrom(c,2),v}o.prototype.props=function(){return w(this)},o.props=function(g){return w(g)}}},{"./es5":13,"./util":36}],26:[function(n,r,i){function o(u,s,l,p,f){for(var d=0;d<f;++d)l[d+p]=u[d+s],u[d+s]=void 0}function a(u){this._capacity=u,this._length=0,this._front=0}a.prototype._willBeOverCapacity=function(u){return this._capacity<u},a.prototype._pushOne=function(u){var s=this.length();this._checkCapacity(s+1);var l=this._front+s&this._capacity-1;this[l]=u,this._length=s+1},a.prototype.push=function(u,s,l){var p=this.length()+3;if(this._willBeOverCapacity(p)){this._pushOne(u),this._pushOne(s),this._pushOne(l);return}var f=this._front+p-3;this._checkCapacity(p);var d=this._capacity-1;this[f+0&d]=u,this[f+1&d]=s,this[f+2&d]=l,this._length=p},a.prototype.shift=function(){var u=this._front,s=this[u];return this[u]=void 0,this._front=u+1&this._capacity-1,this._length--,s},a.prototype.length=function(){return this._length},a.prototype._checkCapacity=function(u){this._capacity<u&&this._resizeTo(this._capacity<<1)},a.prototype._resizeTo=function(u){var s=this._capacity;this._capacity=u;var l=this._front,p=this._length,f=l+p&s-1;o(this,0,this,s,f)},r.exports=a},{}],27:[function(n,r,i){r.exports=function(o,a,u,s){var l=n("./util"),p=function(d){return d.then(function(y){return f(y,d)})};function f(d,y){var m=u(d);if(m instanceof o)return p(m);if(d=l.asArray(d),d===null)return s("expecting an array or an iterable object but got "+l.classString(d));var $=new o(a);y!==void 0&&$._propagateFrom(y,3);for(var w=$._fulfill,g=$._reject,v=0,c=d.length;v<c;++v){var h=d[v];h===void 0&&!(v in d)||o.cast(h)._then(w,g,void 0,$,null)}return $}o.race=function(d){return f(d,void 0)},o.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(n,r,i){r.exports=function(o,a,u,s,l,p){var f=n("./util"),d=f.tryCatch;function y(v,c,h,_){this.constructor$(v);var b=o._getContext();this._fn=f.contextBind(b,c),h!==void 0&&(h=o.resolve(h),h._attachCancellationCallback(this)),this._initialValue=h,this._currentCancellable=null,_===l?this._eachValues=Array(this._length):_===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}f.inherits(y,a),y.prototype._gotAccum=function(v){this._eachValues!==void 0&&this._eachValues!==null&&v!==l&&this._eachValues.push(v)},y.prototype._eachComplete=function(v){return this._eachValues!==null&&this._eachValues.push(v),this._eachValues},y.prototype._init=function(){},y.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},y.prototype.shouldCopyValues=function(){return!1},y.prototype._resolve=function(v){this._promise._resolveCallback(v),this._values=null},y.prototype._resultCancelled=function(v){if(v===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof o&&this._currentCancellable.cancel(),this._initialValue instanceof o&&this._initialValue.cancel())},y.prototype._iterate=function(v){this._values=v;var c,h,_=v.length;this._initialValue!==void 0?(c=this._initialValue,h=0):(c=o.resolve(v[0]),h=1),this._currentCancellable=c;for(var b=h;b<_;++b){var x=v[b];x instanceof o&&x.suppressUnhandledRejections()}if(!c.isRejected())for(;h<_;++h){var j={accum:null,value:v[h],index:h,length:_,array:this};c=c._then(w,void 0,void 0,j,void 0),h&127||c._setNoAsyncGuarantee()}this._eachValues!==void 0&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(m,m,void 0,c,this)},o.prototype.reduce=function(v,c){return $(this,v,c,null)},o.reduce=function(v,c,h,_){return $(v,c,h,_)};function m(v,c){this.isFulfilled()?c._resolve(v):c._reject(v)}function $(v,c,h,_){if(typeof c!="function")return u("expecting a function but got "+f.classString(c));var b=new y(v,c,h,_);return b.promise()}function w(v){this.accum=v,this.array._gotAccum(v);var c=s(this.value,this.array._promise);return c instanceof o?(this.array._currentCancellable=c,c._then(g,void 0,void 0,this,void 0)):g.call(this,c)}function g(v){var c=this.array,h=c._promise,_=d(c._fn);h._pushContext();var b;c._eachValues!==void 0?b=_.call(h._boundValue(),v,this.index,this.length):b=_.call(h._boundValue(),this.accum,v,this.index,this.length),b instanceof o&&(c._currentCancellable=b);var x=h._popContext();return p.checkForgottenReturns(b,x,c._eachValues!==void 0?"Promise.each":"Promise.reduce",h),b}}},{"./util":36}],29:[function(n,r,i){var o=n("./util"),a,u=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},s=o.getNativePromise();if(o.isNode&&typeof MutationObserver>"u"){var l=ge.setImmediate,p=process.nextTick;a=o.isRecentNode?function(d){l.call(ge,d)}:function(d){p.call(process,d)}}else if(typeof s=="function"&&typeof s.resolve=="function"){var f=s.resolve();a=function(d){f.then(d)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))&&"classList"in document.documentElement?a=function(){var d=document.createElement("div"),y={attributes:!0},m=!1,$=document.createElement("div"),w=new MutationObserver(function(){d.classList.toggle("foo"),m=!1});w.observe($,y);var g=function(){m||(m=!0,$.classList.toggle("foo"))};return function(c){var h=new MutationObserver(function(){h.disconnect(),c()});h.observe(d,y),g()}}():typeof setImmediate<"u"?a=function(d){setImmediate(d)}:typeof setTimeout<"u"?a=function(d){setTimeout(d,0)}:a=u;r.exports=a},{"./util":36}],30:[function(n,r,i){r.exports=function(o,a,u){var s=o.PromiseInspection,l=n("./util");function p(f){this.constructor$(f)}l.inherits(p,a),p.prototype._promiseResolved=function(f,d){this._values[f]=d;var y=++this._totalResolved;return y>=this._length?(this._resolve(this._values),!0):!1},p.prototype._promiseFulfilled=function(f,d){var y=new s;return y._bitField=33554432,y._settledValueField=f,this._promiseResolved(d,y)},p.prototype._promiseRejected=function(f,d){var y=new s;return y._bitField=16777216,y._settledValueField=f,this._promiseResolved(d,y)},o.settle=function(f){return u.deprecated(".settle()",".reflect()"),new p(f).promise()},o.allSettled=function(f){return new p(f).promise()},o.prototype.settle=function(){return o.settle(this)}}},{"./util":36}],31:[function(n,r,i){r.exports=function(o,a,u){var s=n("./util"),l=n("./errors").RangeError,p=n("./errors").AggregateError,f=s.isArray,d={};function y($){this.constructor$($),this._howMany=0,this._unwrap=!1,this._initialized=!1}s.inherits(y,a),y.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var $=f(this._values);!this._isResolved()&&$&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},y.prototype.init=function(){this._initialized=!0,this._init()},y.prototype.setUnwrap=function(){this._unwrap=!0},y.prototype.howMany=function(){return this._howMany},y.prototype.setHowMany=function($){this._howMany=$},y.prototype._promiseFulfilled=function($){return this._addFulfilled($),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},y.prototype._promiseRejected=function($){return this._addRejected($),this._checkOutcome()},y.prototype._promiseCancelled=function(){return this._values instanceof o||this._values==null?this._cancel():(this._addRejected(d),this._checkOutcome())},y.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var $=new p,w=this.length();w<this._values.length;++w)this._values[w]!==d&&$.push(this._values[w]);return $.length>0?this._reject($):this._cancel(),!0}return!1},y.prototype._fulfilled=function(){return this._totalResolved},y.prototype._rejected=function(){return this._values.length-this.length()},y.prototype._addRejected=function($){this._values.push($)},y.prototype._addFulfilled=function($){this._values[this._totalResolved++]=$},y.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},y.prototype._getRangeError=function($){var w="Input array must contain at least "+this._howMany+" items but contains only "+$+" items";return new l(w)},y.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function m($,w){if((w|0)!==w||w<0)return u(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var g=new y($),v=g.promise();return g.setHowMany(w),g.init(),v}o.some=function($,w){return m($,w)},o.prototype.some=function($){return m(this,$)},o._SomePromiseArray=y}},{"./errors":12,"./util":36}],32:[function(n,r,i){r.exports=function(o){function a(y){y!==void 0?(y=y._target(),this._bitField=y._bitField,this._settledValueField=y._isFateSealed()?y._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}a.prototype._settledValue=function(){return this._settledValueField};var u=a.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},s=a.prototype.error=a.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},l=a.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},p=a.prototype.isRejected=function(){return(this._bitField&16777216)!==0},f=a.prototype.isPending=function(){return(this._bitField&50397184)===0},d=a.prototype.isResolved=function(){return(this._bitField&50331648)!==0};a.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},o.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},o.prototype._isCancelled=function(){return this._target().__isCancelled()},o.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},o.prototype.isPending=function(){return f.call(this._target())},o.prototype.isRejected=function(){return p.call(this._target())},o.prototype.isFulfilled=function(){return l.call(this._target())},o.prototype.isResolved=function(){return d.call(this._target())},o.prototype.value=function(){return u.call(this._target())},o.prototype.reason=function(){var y=this._target();return y._unsetRejectionIsUnhandled(),s.call(y)},o.prototype._value=function(){return this._settledValue()},o.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},o.PromiseInspection=a}},{}],33:[function(n,r,i){r.exports=function(o,a){var u=n("./util"),s=u.errorObj,l=u.isObject;function p(w,g){if(l(w)){if(w instanceof o)return w;var v=d(w);if(v===s){g&&g._pushContext();var c=o.reject(v.e);return g&&g._popContext(),c}else if(typeof v=="function"){if(m(w)){var c=new o(a);return w._then(c._fulfill,c._reject,void 0,c,null),c}return $(w,v,g)}}return w}function f(w){return w.then}function d(w){try{return f(w)}catch(g){return s.e=g,s}}var y={}.hasOwnProperty;function m(w){try{return y.call(w,"_promise0")}catch{return!1}}function $(w,g,v){var c=new o(a),h=c;v&&v._pushContext(),c._captureStackTrace(),v&&v._popContext();var _=!0,b=u.tryCatch(g).call(w,x,j);_=!1,c&&b===s&&(c._rejectCallback(b.e,!0,!0),c=null);function x(P){c&&(c._resolveCallback(P),c=null)}function j(P){c&&(c._rejectCallback(P,_,!0),c=null)}return h}return p}},{"./util":36}],34:[function(n,r,i){r.exports=function(o,a,u){var s=n("./util"),l=o.TimeoutError;function p(w){this.handle=w}p.prototype._resultCancelled=function(){clearTimeout(this.handle)};var f=function(w){return d(+this).thenReturn(w)},d=o.delay=function(w,g){var v,c;return g!==void 0?(v=o.resolve(g)._then(f,null,null,w,void 0),u.cancellation()&&g instanceof o&&v._setOnCancel(g)):(v=new o(a),c=setTimeout(function(){v._fulfill()},+w),u.cancellation()&&v._setOnCancel(new p(c)),v._captureStackTrace()),v._setAsyncGuaranteed(),v};o.prototype.delay=function(w){return d(w,this)};var y=function(w,g,v){var c;typeof g!="string"?g instanceof Error?c=g:c=new l("operation timed out"):c=new l(g),s.markAsOriginatingFromRejection(c),w._attachExtraTrace(c),w._reject(c),v!=null&&v.cancel()};function m(w){return clearTimeout(this.handle),w}function $(w){throw clearTimeout(this.handle),w}o.prototype.timeout=function(w,g){w=+w;var v,c,h=new p(setTimeout(function(){v.isPending()&&y(v,g,c)},w));return u.cancellation()?(c=this.then(),v=c._then(m,$,void 0,h,void 0),v._setOnCancel(h)):v=this._then(m,$,void 0,h,void 0),v}}},{"./util":36}],35:[function(n,r,i){r.exports=function(o,a,u,s,l,p){var f=n("./util"),d=n("./errors").TypeError,y=n("./util").inherits,m=f.errorObj,$=f.tryCatch,w={};function g(j){setTimeout(function(){throw j},0)}function v(j){var P=u(j);return P!==j&&typeof j._isDisposable=="function"&&typeof j._getDisposer=="function"&&j._isDisposable()&&P._setDisposable(j._getDisposer()),P}function c(j,P){var L=0,V=j.length,J=new o(l);function K(){if(L>=V)return J._fulfill();var D=v(j[L++]);if(D instanceof o&&D._isDisposable()){try{D=u(D._getDisposer().tryDispose(P),j.promise)}catch(F){return g(F)}if(D instanceof o)return D._then(K,g,null,null,null)}K()}return K(),J}function h(j,P,L){this._data=j,this._promise=P,this._context=L}h.prototype.data=function(){return this._data},h.prototype.promise=function(){return this._promise},h.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():w},h.prototype.tryDispose=function(j){var P=this.resource(),L=this._context;L!==void 0&&L._pushContext();var V=P!==w?this.doDispose(P,j):null;return L!==void 0&&L._popContext(),this._promise._unsetDisposable(),this._data=null,V},h.isDisposer=function(j){return j!=null&&typeof j.resource=="function"&&typeof j.tryDispose=="function"};function _(j,P,L){this.constructor$(j,P,L)}y(_,h),_.prototype.doDispose=function(j,P){var L=this.data();return L.call(j,j,P)};function b(j){return h.isDisposer(j)?(this.resources[this.index]._setDisposable(j),j.promise()):j}function x(j){this.length=j,this.promise=null,this[j-1]=null}x.prototype._resultCancelled=function(){for(var j=this.length,P=0;P<j;++P){var L=this[P];L instanceof o&&L.cancel()}},o.using=function(){var j=arguments.length;if(j<2)return a("you must pass at least 2 arguments to Promise.using");var P=arguments[j-1];if(typeof P!="function")return a("expecting a function but got "+f.classString(P));var L,V=!0;j===2&&Array.isArray(arguments[0])?(L=arguments[0],j=L.length,V=!1):(L=arguments,j--);for(var J=new x(j),K=0;K<j;++K){var D=L[K];if(h.isDisposer(D)){var F=D;D=D.promise(),D._setDisposable(F)}else{var U=u(D);U instanceof o&&(D=U._then(b,null,null,{resources:J,index:K},void 0))}J[K]=D}for(var E=new Array(J.length),K=0;K<E.length;++K)E[K]=o.resolve(J[K]).reflect();var S=o.all(E).then(function(k){for(var I=0;I<k.length;++I){var B=k[I];if(B.isRejected())return m.e=B.error(),m;if(!B.isFulfilled()){S.cancel();return}k[I]=B.value()}C._pushContext(),P=$(P);var A=V?P.apply(void 0,k):P(k),M=C._popContext();return p.checkForgottenReturns(A,M,"Promise.using",C),A}),C=S.lastly(function(){var k=new o.PromiseInspection(S);return c(J,k)});return J.promise=C,C._setOnCancel(J),C},o.prototype._setDisposable=function(j){this._bitField=this._bitField|131072,this._disposer=j},o.prototype._isDisposable=function(){return(this._bitField&131072)>0},o.prototype._getDisposer=function(){return this._disposer},o.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},o.prototype.disposer=function(j){if(typeof j=="function")return new _(j,this,s());throw new d}}},{"./errors":12,"./util":36}],36:[function(n,r,i){var o=n("./es5"),a=typeof navigator>"u",u={e:{}},s,l=typeof self<"u"?self:typeof window<"u"?window:typeof ge<"u"?ge:this!==void 0?this:null;function p(){try{var T=s;return s=null,T.apply(this,arguments)}catch(R){return u.e=R,u}}function f(T){return s=T,p}var d=function(T,R){var N={}.hasOwnProperty;function Y(){this.constructor=T,this.constructor$=R;for(var G in R.prototype)N.call(R.prototype,G)&&G.charAt(G.length-1)!=="$"&&(this[G+"$"]=R.prototype[G])}return Y.prototype=R.prototype,T.prototype=new Y,T.prototype};function y(T){return T==null||T===!0||T===!1||typeof T=="string"||typeof T=="number"}function m(T){return typeof T=="function"||typeof T=="object"&&T!==null}function $(T){return y(T)?new Error(V(T)):T}function w(T,R){var N=T.length,Y=new Array(N+1),G;for(G=0;G<N;++G)Y[G]=T[G];return Y[G]=R,Y}function g(T,R,N){if(o.isES5){var Y=Object.getOwnPropertyDescriptor(T,R);if(Y!=null)return Y.get==null&&Y.set==null?Y.value:N}else return{}.hasOwnProperty.call(T,R)?T[R]:void 0}function v(T,R,N){if(y(T))return T;var Y={value:N,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(T,R,Y),T}function c(T){throw T}var h=function(){var T=[Array.prototype,Object.prototype,Function.prototype],R=function(G){for(var Q=0;Q<T.length;++Q)if(T[Q]===G)return!0;return!1};if(o.isES5){var N=Object.getOwnPropertyNames;return function(G){for(var Q=[],ee=Object.create(null);G!=null&&!R(G);){var te;try{te=N(G)}catch{return Q}for(var se=0;se<te.length;++se){var ie=te[se];if(!ee[ie]){ee[ie]=!0;var he=Object.getOwnPropertyDescriptor(G,ie);he!=null&&he.get==null&&he.set==null&&Q.push(ie)}}G=o.getPrototypeOf(G)}return Q}}else{var Y={}.hasOwnProperty;return function(G){if(R(G))return[];var Q=[];e:for(var ee in G)if(Y.call(G,ee))Q.push(ee);else{for(var te=0;te<T.length;++te)if(Y.call(T[te],ee))continue e;Q.push(ee)}return Q}}}(),_=/this\s*\.\s*\S+\s*=/;function b(T){try{if(typeof T=="function"){var R=o.names(T.prototype),N=o.isES5&&R.length>1,Y=R.length>0&&!(R.length===1&&R[0]==="constructor"),G=_.test(T+"")&&o.names(T).length>0;if(N||Y||G)return!0}return!1}catch{return!1}}function x(T){function R(){}R.prototype=T;var N=new R;function Y(){return typeof N.foo}return Y(),Y(),T}var j=/^[a-z$_][a-z$_0-9]*$/i;function P(T){return j.test(T)}function L(T,R,N){for(var Y=new Array(T),G=0;G<T;++G)Y[G]=R+G+N;return Y}function V(T){try{return T+""}catch{return"[no string representation]"}}function J(T){return T instanceof Error||T!==null&&typeof T=="object"&&typeof T.message=="string"&&typeof T.name=="string"}function K(T){try{v(T,"isOperational",!0)}catch{}}function D(T){return T==null?!1:T instanceof Error.__BluebirdErrorTypes__.OperationalError||T.isOperational===!0}function F(T){return J(T)&&o.propertyIsWritable(T,"stack")}var U=function(){return"stack"in new Error?function(T){return F(T)?T:new Error(V(T))}:function(T){if(F(T))return T;try{throw new Error(V(T))}catch(R){return R}}}();function E(T){return{}.toString.call(T)}function S(T,R,N){for(var Y=o.names(T),G=0;G<Y.length;++G){var Q=Y[G];if(N(Q))try{o.defineProperty(R,Q,o.getDescriptor(T,Q))}catch{}}}var C=function(T){return o.isArray(T)?T:null};if(typeof Symbol<"u"&&Symbol.iterator){var k=typeof Array.from=="function"?function(T){return Array.from(T)}:function(T){for(var R=[],N=T[Symbol.iterator](),Y;!(Y=N.next()).done;)R.push(Y.value);return R};C=function(T){return o.isArray(T)?T:T!=null&&typeof T[Symbol.iterator]=="function"?k(T):null}}var I=typeof process<"u"&&E(process).toLowerCase()==="[object process]",B=typeof process<"u"&&typeof process.env<"u";function A(T){return B?process.env[T]:void 0}function M(){if(typeof Promise=="function")try{var T=new Promise(function(){});if(E(T)==="[object Promise]")return Promise}catch{}}var H;function W(T,R){if(T===null||typeof R!="function"||R===H)return R;T.domain!==null&&(R=T.domain.bind(R));var N=T.async;if(N!==null){var Y=R;R=function(){var G=new Array(2).concat([].slice.call(arguments));return G[0]=Y,G[1]=this,N.runInAsyncScope.apply(N,G)}}return R}var O={setReflectHandler:function(T){H=T},isClass:b,isIdentifier:P,inheritedDataKeys:h,getDataPropertyOrDefault:g,thrower:c,isArray:o.isArray,asArray:C,notEnumerableProp:v,isPrimitive:y,isObject:m,isError:J,canEvaluate:a,errorObj:u,tryCatch:f,inherits:d,withAppended:w,maybeWrapAsError:$,toFastProperties:x,filledRange:L,toString:V,canAttachTrace:F,ensureErrorObject:U,originatesFromRejection:D,markAsOriginatingFromRejection:K,classString:E,copyDescriptors:S,isNode:I,hasEnvVariables:B,env:A,global:l,getNativePromise:M,contextBind:W};O.isRecentNode=O.isNode&&function(){var T;return process.versions&&process.versions.node?T=process.versions.node.split(".").map(Number):process.version&&(T=process.version.split(".").map(Number)),T[0]===0&&T[1]>10||T[0]>0}(),O.nodeSupportsAsyncResource=O.isNode&&function(){var T=!1;try{var R=n("async_hooks").AsyncResource;T=typeof R.prototype.runInAsyncScope=="function"}catch{T=!1}return T}(),O.isNode&&O.toFastProperties(process);try{throw new Error}catch(T){O.lastLineError=T}r.exports=O},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&window!==null?window.P=window.Promise:typeof self<"u"&&self!==null&&(self.P=self.Promise)})(ic);var Hg=ic.exports;const vi=at(Hg),me={};function Gg(e){for(var t in e)return!1;return!0}function zg(e){return typeof e=="string"||e instanceof String}function Wg(e){return!isNaN(e)}function Kg(e){return typeof e>"u"}me.delta=new Le.EventEmitter;me.deltaInit=function(){this.on("destroyed",function(){Qg(this)})};me.clone=function(e){return JSON.parse(JSON.stringify(e))};me.merge=function(e,t){var n={};for(var r in e)n[r]=e[r];for(r in t)n[r]=t[r];return n};me.mergeAll=function(e){var t={},n={};return e.forEach(function(r){r.doc.$id||(r.doc.$id=r.doc._id),r.doc.$deleted?(delete t[r.doc.$id],n[r.doc.$id]=!0):n[r.doc.$id]||(t[r.doc.$id]?t[r.doc.$id].doc=me.merge(t[r.doc.$id].doc,r.doc):t[r.doc.$id]=r)}),Object.values(t)};function oc(e,t){return delete t._rev,t.$createdAt=new Date().toJSON(),t.$id?(t._id=t.$id+"_"+t.$createdAt,e.put(t).then(function(n){return n.$id=t.$id,qs(e,n),n}).catch(function(n){if(n.status!==409)throw n})):e.post(t).then(function(n){return n.$id=n.id,qs(e,{id:n.id}),n})}me.save=function(e){return oc(this,e)};me.delete=function(e){var t=zg(e)||Wg(e)?e:e.$id;if(Kg(t))throw new Error("missing $id");return oc(this,{$id:t,$deleted:!0})};function Yg(e,t,n){var r=this;return new vi(function(i,o){e.call(r,me.merge(t,{include_docs:!0}),function(a,u){a?o(a):(u.rows=me.mergeAll(u.rows),i(u)),typeof n=="function"&&n(a,u)})})}me.all=function(){var e=this;return e.allDocs({include_docs:!0}).then(function(t){var n={};return t.rows.forEach(function(r){n[r.doc.$id]=r.doc}),n})};var ac={};me.wasDeleted=function(e){return!!ac[e]};me.markDeletion=function(e){ac[e]=!0};function qs(e,t){e.get(t.id).then(function(n){var r=n.$id?n.$id:n._id;me.wasDeleted(r)||(n.$deleted?(me.markDeletion(r),me.delta.emit("delete",r)):n.$id?me.delta.emit("update",n):(n.$id=r,me.delta.emit("create",n)))})}function Qg(e){e.delta.removeAllListeners()}function Vg(e,t){var n={},r=!1;for(var i in t)e[i]!==t[i]&&(r=!0,n[i]=t[i]);return r?n:null}me.saveChanges=function(e,t){var n=this,r=Vg(e,t);return r!==null?(r.$id=e.$id,n.save(r).then(function(){return r})):vi.resolve()};function sc(e,t){return e.get(t).then(function(n){return e.remove(n)}).catch(function(n){if(n.status!==404)throw n})}me.getAndRemove=function(e){return sc(this,e)};function Jg(e,t,n){var r=[];return t.rows.forEach(function(i){n[i.doc.$id]&&r.push(sc(e,i.id))}),vi.all(r)}function Zg(e,t,n,r){return e.get(t.doc._id).then(function(i){if(t.doc.$id||(t.doc.$id=t.doc._id),t.doc.$deleted||r[t.doc.$id])return r[t.doc.$id]=!0,e.remove(i);if(n[t.doc.$id]){var o=!1;for(var a in t.doc)if(typeof n[t.doc.$id][a]>"u"){o=!0;break}if(o)n[t.doc.$id]=me.merge(n[t.doc.$id],t.doc);else return e.remove(i)}else n[t.doc.$id]=t.doc})}var Xg=function(e,t,n,r){return function(){return Zg(e,t,n,r)}};me.cleanup=function(){var e=this;return e.allDocs({include_docs:!0}).then(function(t){var n={},r={},i=vi.resolve();return t.rows.forEach(function(o){i=i.then(Xg(e,o,n,r))}),i.then(function(){if(!Gg(r))return Jg(e,t,r)})})};typeof window<"u"&&window.PouchDB&&window.PouchDB.plugin(me);me.default=function(e){var t=e.prototype.allDocs;for(var n in me)e.prototype[n]=me[n];e.prototype.allDocs=function(r,i){return Yg.call(this,t,r,i)}};const ey=me.default;var va={};function ty(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function ny(e,t,n){var r=ty(e,t,n);return r+e}var uc=-324,_o=3,mo="";function lt(e,t){if(e===t)return 0;e=An(e),t=An(t);var n=wo(e),r=wo(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return uy(e,t)}return Array.isArray(e)?sy(e,t):fy(e,t)}function An(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=An(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];typeof o<"u"&&(e[i]=An(o))}}}}return e}function ry(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return cy(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=Pr(n[r]);else for(;++r<i;){var a=n[r];o+=Pr(a)+Pr(e[a])}return o}return""}function Pr(e){var t="\0";return e=An(e),wo(e)+mo+ry(e)+t}function iy(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var o=e[t]==="0";t++;var a="",u=e.substring(t,t+_o),s=parseInt(u,10)+uc;for(o&&(s=-s),t+=_o;;){var l=e[t];if(l==="\0")break;a+=l,t++}a=a.split("."),a.length===1?r=parseInt(a,10):r=parseFloat(a[0]+"."+a[1]),o&&(r=r-10),s!==0&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}function oy(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){var a=e.pop();i[a]=n}else e.push(n)}}function ay(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();oy(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var o=iy(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var u=e[r];if(u==="\0")break;a+=u,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var s={element:[],index:t.length};t.push(s.element),n.push(s);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function sy(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=lt(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function uy(e,t){return e===t?0:e>t?1:-1}function fy(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=lt(n[o],r[o]);if(a!==0||(a=lt(e[n[o]],t[r[o]]),a!==0))return a}return n.length===r.length?0:n.length>r.length?1:-1}function wo(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function cy(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(r?-n:n)-uc,a=ny(o.toString(),"0",_o);i+=mo+a;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var s=u.toFixed(20);return s=s.replace(/\.?0+$/,""),i+=mo+s,i}const ly=Object.freeze(Object.defineProperty({__proto__:null,collate:lt,normalizeKey:An,parseIndexableString:ay,toIndexableString:Pr},Symbol.toStringTag,{value:"Module"})),fc=Bo(ly);var Hs=ge.MutationObserver||ge.WebKitMutationObserver,Bn;if(Hs){var Gs=0,dy=new Hs(Cr),zs=ge.document.createTextNode("");dy.observe(zs,{characterData:!0}),Bn=function(){zs.data=Gs=++Gs%2}}else if(!ge.setImmediate&&typeof ge.MessageChannel<"u"){var Ws=new ge.MessageChannel;Ws.port1.onmessage=Cr,Bn=function(){Ws.port2.postMessage(0)}}else"document"in ge&&"onreadystatechange"in ge.document.createElement("script")?Bn=function(){var e=ge.document.createElement("script");e.onreadystatechange=function(){Cr(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},ge.document.documentElement.appendChild(e)}:Bn=function(){setTimeout(Cr,0)};var bo,Un=[];function Cr(){bo=!0;for(var e,t,n=Un.length;n;){for(t=Un,Un=[],e=-1;++e<n;)t[e]();n=Un.length}bo=!1}var cc=hy;function hy(e){Un.push(e)===1&&!bo&&Bn()}const vy=at(cc);var py=cc;function xn(){}var He={},lc=["REJECTED"],To=["FULFILLED"],dc=["PENDING"];function kn(e){if(typeof e!="function")throw new TypeError("resolver must be a function");this.state=dc,this.queue=[],this.outcome=void 0,e!==xn&&hc(this,e)}kn.prototype.catch=function(e){return this.then(null,e)};kn.prototype.then=function(e,t){if(typeof e!="function"&&this.state===To||typeof t!="function"&&this.state===lc)return this;var n=new this.constructor(xn);if(this.state!==dc){var r=this.state===To?e:t;pa(n,r,this.outcome)}else this.queue.push(new cr(n,e,t));return n};function cr(e,t,n){this.promise=e,typeof t=="function"&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),typeof n=="function"&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}cr.prototype.callFulfilled=function(e){He.resolve(this.promise,e)};cr.prototype.otherCallFulfilled=function(e){pa(this.promise,this.onFulfilled,e)};cr.prototype.callRejected=function(e){He.reject(this.promise,e)};cr.prototype.otherCallRejected=function(e){pa(this.promise,this.onRejected,e)};function pa(e,t,n){py(function(){var r;try{r=t(n)}catch(i){return He.reject(e,i)}r===e?He.reject(e,new TypeError("Cannot resolve promise with itself")):He.resolve(e,r)})}He.resolve=function(e,t){var n=vc(gy,t);if(n.status==="error")return He.reject(e,n.value);var r=n.value;if(r)hc(e,r);else{e.state=To,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e};He.reject=function(e,t){e.state=lc,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e};function gy(e){var t=e&&e.then;if(e&&(typeof e=="object"||typeof e=="function")&&typeof t=="function")return function(){t.apply(e,arguments)}}function hc(e,t){var n=!1;function r(u){n||(n=!0,He.reject(e,u))}function i(u){n||(n=!0,He.resolve(e,u))}function o(){t(i,r)}var a=vc(o);a.status==="error"&&r(a.value)}function vc(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}kn.resolve=yy;function yy(e){return e instanceof this?e:He.resolve(new this(xn),e)}kn.reject=_y;function _y(e){var t=new this(xn);return He.reject(t,e)}kn.all=my;function my(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),o=0,a=-1,u=new this(xn);++a<n;)s(e[a],a);return u;function s(l,p){t.resolve(l).then(f,function(d){r||(r=!0,He.reject(u,d))});function f(d){i[p]=d,++o===n&&!r&&(r=!0,He.resolve(u,i))}}}kn.race=wy;function wy(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,o=new this(xn);++i<n;)a(e[i]);return o;function a(u){t.resolve(u).then(function(s){r||(r=!0,He.resolve(o,s))},function(s){r||(r=!0,He.reject(o,s))})}}function pi(e){return"$"+e}function by(e){return e.substring(1)}function rn(){this._store={}}rn.prototype.get=function(e){var t=pi(e);return this._store[t]};rn.prototype.set=function(e,t){var n=pi(e);return this._store[n]=t,!0};rn.prototype.has=function(e){var t=pi(e);return t in this._store};rn.prototype.delete=function(e){var t=pi(e),n=t in this._store;return delete this._store[t],n};rn.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],o=this._store[i];i=by(i),e(o,i)}};Object.defineProperty(rn.prototype,"size",{get:function(){return Object.keys(this._store).length}});function gi(e){if(this._store=new rn,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}gi.prototype.add=function(e){return this._store.set(e,!0)};gi.prototype.has=function(e){return this._store.has(e)};gi.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(gi.prototype,"size",{get:function(){return this._store.size}});var $o={exports:{}};typeof Object.create=="function"?$o.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:$o.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t};var Ty=$o.exports;const pc=at(Ty);pc(Ee,Error);function Ee(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}Ee.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new Ee(401,"unauthorized","Name or password is incorrect.");new Ee(400,"bad_request","Missing JSON list of 'docs'");new Ee(404,"not_found","missing");new Ee(409,"conflict","Document update conflict");new Ee(400,"bad_request","_id field must contain a string");new Ee(412,"missing_id","_id is required for puts");new Ee(400,"bad_request","Only reserved document ids may start with underscore.");new Ee(412,"precondition_failed","Database not open");new Ee(500,"unknown_error","Database encountered an unknown error");new Ee(500,"badarg","Some query argument is invalid");new Ee(400,"invalid_request","Request was invalid");new Ee(400,"query_parse_error","Some query parameter is invalid");new Ee(500,"doc_validation","Bad special document member");new Ee(400,"bad_request","Something wrong with the request");new Ee(400,"bad_request","Document must be a JSON object");new Ee(404,"not_found","Database not found");new Ee(500,"indexed_db_went_bad","unknown");new Ee(500,"web_sql_went_bad","unknown");new Ee(500,"levelDB_went_went_bad","unknown");new Ee(403,"forbidden","Forbidden by design doc validate_doc_update function");new Ee(400,"bad_request","Invalid rev format");new Ee(412,"file_exists","The database could not be created, the file already exists.");new Ee(412,"missing_stub","A pre-existing attachment stub wasn't found");new Ee(413,"invalid_url","Provided URL is invalid");var Eo={exports:{}},Ks=typeof crypto<"u"&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&msCrypto.getRandomValues.bind(msCrypto);if(Ks){var Ys=new Uint8Array(16);Eo.exports=function(){return Ks(Ys),Ys}}else{var Qs=new Array(16);Eo.exports=function(){for(var t=0,n;t<16;t++)t&3||(n=Math.random()*4294967296),Qs[t]=n>>>((t&3)<<3)&255;return Qs}}var gc=Eo.exports,yc=[];for(var Or=0;Or<256;++Or)yc[Or]=(Or+256).toString(16).substr(1);function $y(e,t){var n=t||0,r=yc;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}var _c=$y,Ey=gc,Ay=_c,Vs,Mi,Li=0,Bi=0;function Sy(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var o=e.node||Vs,a=e.clockseq!==void 0?e.clockseq:Mi;if(o==null||a==null){var u=Ey();o==null&&(o=Vs=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=Mi=(u[6]<<8|u[7])&16383)}var s=e.msecs!==void 0?e.msecs:new Date().getTime(),l=e.nsecs!==void 0?e.nsecs:Bi+1,p=s-Li+(l-Bi)/1e4;if(p<0&&e.clockseq===void 0&&(a=a+1&16383),(p<0||s>Li)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Li=s,Bi=l,Mi=a,s+=122192928e5;var f=((s&268435455)*1e4+l)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var d=s/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(var y=0;y<6;++y)i[r+y]=o[y];return t||Ay(i)}var Cy=Sy,Oy=gc,xy=_c;function ky(e,t,n){var r=t&&n||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||Oy)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||xy(i)}var Ry=ky,jy=Cy,mc=Ry,ga=mc;ga.v1=jy;ga.v4=mc;var Py=ga;const Fy=at(Py);function Iy(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer||typeof Blob<"u"&&e instanceof Blob}function Dy(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function Ny(e){if(e instanceof ArrayBuffer)return Dy(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var wc=Function.prototype.toString,My=wc.call(Object);function Ly(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&wc.call(n)==My}function Ao(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=Ao(e[n]);return t}if(e instanceof Date)return e.toISOString();if(Iy(e))return Ny(e);if(!Ly(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Ao(e[n]);typeof i<"u"&&(t[n]=i)}return t}function By(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}function ya(){return typeof chrome<"u"&&typeof chrome.storage<"u"&&typeof chrome.storage.local<"u"}var Fr;if(ya())Fr=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),Fr=!!localStorage.getItem("_pouch_check_localstorage")}catch{Fr=!1}function bc(){return Fr}pc(lr,rr.EventEmitter);function Uy(e){ya()?chrome.storage.onChanged.addListener(function(t){t.db_name!=null&&e.emit(t.dbName.newValue)}):bc()&&(typeof addEventListener<"u"?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function lr(){rr.EventEmitter.call(this),this._listeners={},Uy(this)}lr.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,o=!1;function a(){if(!i._listeners[t])return;if(o){o="waiting";return}o=!0;var u=By(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);function s(){o=!1}n.changes(u).on("change",function(l){l.seq>r.since&&!r.cancelled&&(r.since=l.seq,r.onChange(l))}).on("complete",function(){o==="waiting"&&vy(a),o=!1}).on("error",s)}this._listeners[t]=a,this.on(e,a)};lr.prototype.removeListener=function(e,t){t in this._listeners&&(rr.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};lr.prototype.notifyLocalWindows=function(e){ya()?chrome.storage.local.set({dbName:e}):bc()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};lr.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};Fy.v4;function _a(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function qy(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var o=t[r];e=e[o]={}}e[t[i-1]]=n}function Tc(e,t){return e<t?-1:e>t?1:0}function ma(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];o==="."?r>0&&e[r-1]==="\\"?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=o}return t.push(n),t}var Hy=["$or","$nor","$not"];function wa(e){return Hy.indexOf(e)>-1}function ba(e){return Object.keys(e)[0]}function $c(e){return e[ba(e)]}function Qr(e){var t={};return e.forEach(function(n){Object.keys(n).forEach(function(r){var i=n[r];if(typeof i!="object"&&(i={$eq:i}),wa(r))i instanceof Array?t[r]=i.map(function(a){return Qr([a])}):t[r]=Qr([i]);else{var o=t[r]=t[r]||{};Object.keys(i).forEach(function(a){var u=i[a];if(a==="$gt"||a==="$gte")return Gy(a,u,o);if(a==="$lt"||a==="$lte")return zy(a,u,o);if(a==="$ne")return Wy(u,o);if(a==="$eq")return Ky(u,o);o[a]=u})}})}),t}function Gy(e,t,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt<"u"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function zy(e,t,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt<"u"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function Wy(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function Ky(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function Ec(e){var t=Ao(e),n=!1;"$and"in t&&(t=Qr(t.$and),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(s){for(var l=Object.keys(s),p=0;p<l.length;p++){var f=l[p],d=s[f];(typeof d!="object"||d===null)&&(s[f]={$eq:d})}})}),"$not"in t&&(t.$not=Qr([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];typeof a!="object"||a===null?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),t[o]=a}return t}function Ac(e){function t(n){return e.map(function(r){var i=ba(r),o=ma(i),a=_a(n,o);return a})}return function(n,r){var i=t(n.doc),o=t(r.doc),a=lt(i,o);return a!==0?a:Tc(n.doc._id,r.doc._id)}}function Sc(e,t,n){if(e=e.filter(function(a){return Gt(a.doc,t.selector,n)}),t.sort){var r=Ac(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&$c(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function Gt(e,t,n){return n.every(function(r){var i=t[r],o=ma(r),a=_a(e,o);return wa(r)?Yy(r,i,e):So(i,e,o,a)})}function So(e,t,n,r){return e?Object.keys(e).every(function(i){var o=e[i];return Qy(i,t,o,n,r)}):!0}function Yy(e,t,n){return e==="$or"?t.some(function(r){return Gt(n,r,Object.keys(r))}):e==="$not"?!Gt(n,t,Object.keys(t)):!t.find(function(r){return Gt(n,r,Object.keys(r))})}function Qy(e,t,n,r,i){if(!Zs[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Zs[e](t,n,r,i)}function Dn(e){return typeof e<"u"&&e!==null}function Nt(e){return typeof e<"u"}function Vy(e,t){var n=t[0],r=t[1];if(n===0)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)!==e?!1:e%n===r}function Js(e,t){return t.some(function(n){return e instanceof Array?e.indexOf(n)>-1:e===n})}function Jy(e,t){return t.every(function(n){return e.indexOf(n)>-1})}function Zy(e,t){return e.length===t}function Xy(e,t){var n=new RegExp(t);return n.test(e)}function e_(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}var Zs={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.some(function(i){return Gt(i,t,Object.keys(t))}):r.some(function(i){return So(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.every(function(i){return Gt(i,t,Object.keys(t))}):r.every(function(i){return So(t,e,n,i)})},$eq:function(e,t,n,r){return Nt(r)&&lt(r,t)===0},$gte:function(e,t,n,r){return Nt(r)&&lt(r,t)>=0},$gt:function(e,t,n,r){return Nt(r)&&lt(r,t)>0},$lte:function(e,t,n,r){return Nt(r)&&lt(r,t)<=0},$lt:function(e,t,n,r){return Nt(r)&&lt(r,t)<0},$exists:function(e,t,n,r){return t?Nt(r):!Nt(r)},$mod:function(e,t,n,r){return Dn(r)&&Vy(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return lt(r,i)!==0})},$in:function(e,t,n,r){return Dn(r)&&Js(r,t)},$nin:function(e,t,n,r){return Dn(r)&&!Js(r,t)},$size:function(e,t,n,r){return Dn(r)&&Zy(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&Jy(r,t)},$regex:function(e,t,n,r){return Dn(r)&&Xy(r,t)},$type:function(e,t,n,r){return e_(r,t)}};function t_(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=Ec(t);var n={doc:e},r=Sc([n],{selector:t},Object.keys(t));return r&&r.length===1}const n_=Object.freeze(Object.defineProperty({__proto__:null,compare:Tc,createFieldSorter:Ac,filterInMemoryFields:Sc,getFieldFromDoc:_a,getKey:ba,getValue:$c,isCombinationalField:wa,massageSelector:Ec,matchesSelector:t_,parseField:ma,rowFilter:Gt,setFieldInDoc:qy},Symbol.toStringTag,{value:"Module"})),Ta=Bo(n_);var dr={},yi=Ta,Xs=yi.getKey,r_=yi.getFieldFromDoc,i_=yi.setFieldInDoc,o_=yi.parseField;dr.getUserFields=function(e,t){var n=Object.keys(e),r=t?t.map(Xs):[],i;return n.length>=r.length?i=n:i=r,r.length===0?{fields:i}:(i=i.sort(function(o,a){var u=r.indexOf(o);u===-1&&(u=Number.MAX_VALUE);var s=r.indexOf(a);return s===-1&&(s=Number.MAX_VALUE),u<s?-1:u>s?1:0}),{fields:i,sortOrder:t.map(Xs)})};dr.massageSort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}else return t})};dr.pick=function(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=o_(t[r]),a=r_(e,o);typeof a<"u"&&i_(n,o,a)}return n};var a_=fc.collate,hr=Ta,s_=hr.filterInMemoryFields,u_=dr,f_=hr.compare,c_=u_.getUserFields,l_=hr.getKey,d_=hr.getValue,h_=hr.parseField,v_=va.memoryFilter=function(e,t){var n=c_(t.selector,t.sort),r=n.fields,i=e.map(function(o){return{doc:o}});return s_(i,t,r).map(function(o){return o.doc})},p_=va.createFieldSorter=function(e){function t(r){return e.map(function(i){var o=l_(i),a=h_(o),u=g_(r,a);return u})}var n=e.map(function(r){return typeof r!="string"&&d_(r)==="desc"?-1:1});return function(r,i){for(var o=t(r),a=t(i),u=0,s=n.length;u<s;u++){var l=a_(o[u],a[u]);if(l!==0)return l*n[u]}return f_(r._id,i._id)*n[0]}};function g_(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function _i(e){return"$"+e}function Cc(e){return e.substring(1)}function St(){this._store={}}St.prototype.get=function(e){var t=_i(e);return this._store[t]};St.prototype.set=function(e,t){var n=_i(e);return this._store[n]=t,!0};St.prototype.has=function(e){var t=_i(e);return t in this._store};St.prototype.keys=function(){return Object.keys(this._store).map(e=>Cc(e))};St.prototype.delete=function(e){var t=_i(e),n=t in this._store;return delete this._store[t],n};St.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],o=this._store[i];i=Cc(i),e(o,i)}};Object.defineProperty(St.prototype,"size",{get:function(){return Object.keys(this._store).length}});function vr(e){if(this._store=new St,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}vr.prototype.add=function(e){return this._store.set(e,!0)};vr.prototype.has=function(e){return this._store.has(e)};vr.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(vr.prototype,"size",{get:function(){return this._store.size}});function y_(){if(typeof Symbol>"u"||typeof Map>"u"||typeof Set>"u")return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}var Qn,dn;y_()?(Qn=Set,dn=Map):(Qn=vr,dn=St);ze(Ae,Error);function Ae(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}Ae.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new Ae(401,"unauthorized","Name or password is incorrect.");new Ae(400,"bad_request","Missing JSON list of 'docs'");new Ae(404,"not_found","missing");new Ae(409,"conflict","Document update conflict");new Ae(400,"bad_request","_id field must contain a string");new Ae(412,"missing_id","_id is required for puts");new Ae(400,"bad_request","Only reserved document ids may start with underscore.");new Ae(412,"precondition_failed","Database not open");var __=new Ae(500,"unknown_error","Database encountered an unknown error");new Ae(500,"badarg","Some query argument is invalid");new Ae(400,"invalid_request","Request was invalid");new Ae(400,"query_parse_error","Some query parameter is invalid");new Ae(500,"doc_validation","Bad special document member");new Ae(400,"bad_request","Something wrong with the request");new Ae(400,"bad_request","Document must be a JSON object");new Ae(404,"not_found","Database not found");new Ae(500,"indexed_db_went_bad","unknown");new Ae(500,"web_sql_went_bad","unknown");new Ae(500,"levelDB_went_went_bad","unknown");new Ae(403,"forbidden","Forbidden by design doc validate_doc_update function");new Ae(400,"bad_request","Invalid rev format");new Ae(412,"file_exists","The database could not be created, the file already exists.");new Ae(412,"missing_stub","A pre-existing attachment stub wasn't found");new Ae(413,"invalid_url","Provided URL is invalid");function Co(e){if(typeof e!="object"){var t=e;e=__,e.data=t}return"error"in e&&e.error==="conflict"&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=new Error().stack),e}var m_=function(e){return atob(e)};function w_(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if(o.name!=="TypeError")throw o;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function b_(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function T_(e,t){return w_([b_(e)],{type:t})}function $_(e,t){return T_(m_(e),t)}function Oc(e){return Gr.hash(e)}function E_(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer||typeof Blob<"u"&&e instanceof Blob}function A_(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function S_(e){if(e instanceof ArrayBuffer)return A_(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var xc=Function.prototype.toString,C_=xc.call(Object);function O_(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&xc.call(n)==C_}function Rt(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=Rt(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(E_(e))return S_(e);if(!O_(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Rt(e[n]);typeof i<"u"&&(t[n]=i)}return t}function x_(e){var t=!1;return Et(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function pr(e){return Et(function(t){t=Rt(t);var n=this,r=typeof t[t.length-1]=="function"?t.pop():!1,i=new Promise(function(o,a){var u;try{var s=x_(function(l,p){l?a(l):o(p)});t.push(s),u=e.apply(n,t),u&&typeof u.then=="function"&&o(u)}catch(l){a(l)}});return r&&i.then(function(o){r(null,o)},r),i})}function k_(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var Oo;try{localStorage.setItem("_pouch_check_localstorage",1),Oo=!!localStorage.getItem("_pouch_check_localstorage")}catch{Oo=!1}function kc(){return Oo}ze(gr,Le);function R_(e){kc()&&addEventListener("storage",function(t){e.emit(t.key)})}function gr(){Le.call(this),this._listeners={},R_(this)}gr.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,o=!1;function a(){if(!i._listeners[t])return;if(o){o="waiting";return}o=!0;var u=k_(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function s(){o=!1}n.changes(u).on("change",function(l){l.seq>r.since&&!r.cancelled&&(r.since=l.seq,r.onChange(l))}).on("complete",function(){o==="waiting"&&Ge(a),o=!1}).on("error",s)}this._listeners[t]=a,this.on(e,a)};gr.prototype.removeListener=function(e,t){t in this._listeners&&(Le.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};gr.prototype.notifyLocalWindows=function(e){kc()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};gr.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};function xo(e){if(typeof console<"u"&&typeof console[e]=="function"){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}var ko;typeof Object.assign=="function"?ko=Object.assign:ko=function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var $a=ko;function eu(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function Jt(e){return typeof e._remote=="boolean"?e._remote:typeof e.type=="function"?(xo("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),e.type()==="http"):!1}function mi(e,t,n){return e.get(t).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,o=n(r);return o?(o._id=t,o._rev=i,j_(e,o,n)):{updated:!1,rev:i}})}function j_(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return mi(e,t._id,n)})}function P_(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function F_(e,t,n){var r=P_(e,t,n);return r+e}var Rc=-324,Ro=3,jo="";function Fe(e,t){if(e===t)return 0;e=Zt(e),t=Zt(t);var n=Po(e),r=Po(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return B_(e,t)}return Array.isArray(e)?L_(e,t):U_(e,t)}function Zt(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Zt(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];typeof o<"u"&&(e[i]=Zt(o))}}}}return e}function I_(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return q_(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=ft(n[r]);else for(;++r<i;){var a=n[r];o+=ft(a)+ft(e[a])}return o}return""}function ft(e){var t="\0";return e=Zt(e),Po(e)+jo+I_(e)+t}function D_(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var o=e[t]==="0";t++;var a="",u=e.substring(t,t+Ro),s=parseInt(u,10)+Rc;for(o&&(s=-s),t+=Ro;;){var l=e[t];if(l==="\0")break;a+=l,t++}a=a.split("."),a.length===1?r=parseInt(a,10):r=parseFloat(a[0]+"."+a[1]),o&&(r=r-10),s!==0&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}function N_(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){var a=e.pop();i[a]=n}else e.push(n)}}function M_(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();N_(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var o=D_(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var u=e[r];if(u==="\0")break;a+=u,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var s={element:[],index:t.length};t.push(s.element),n.push(s);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function L_(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=Fe(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function B_(e,t){return e===t?0:e>t?1:-1}function U_(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=Fe(n[o],r[o]);if(a!==0||(a=Fe(e[n[o]],t[r[o]]),a!==0))return a}return n.length===r.length?0:n.length>r.length?1:-1}function Po(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function q_(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(r?-n:n)-Rc,a=F_(o.toString(),"0",Ro);i+=jo+a;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var s=u.toFixed(20);return s=s.replace(/\.?0+$/,""),i+=jo+s,i}function yr(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function jc(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var o=t[r];e=e[o]=e[o]||{}}e[t[i-1]]=n}function wi(e,t){return e<t?-1:e>t?1:0}function on(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];r>0&&e[r-1]==="\\"&&(o==="$"||o===".")?n=n.substring(0,n.length-1)+o:o==="."?(t.push(n),n=""):n+=o}return t.push(n),t}var H_=["$or","$nor","$not"];function Ea(e){return H_.indexOf(e)>-1}function Je(e){return Object.keys(e)[0]}function bi(e){return e[Je(e)]}function Vn(e){var t={},n={$or:!0,$nor:!0};return e.forEach(function(r){Object.keys(r).forEach(function(i){var o=r[i];if(typeof o!="object"&&(o={$eq:o}),Ea(i))if(o instanceof Array){if(n[i]){n[i]=!1,t[i]=o;return}var a=[];t[i].forEach(function(s){Object.keys(o).forEach(function(l){var p=o[l],f=Math.max(Object.keys(s).length,Object.keys(p).length),d=Vn([s,p]);Object.keys(d).length<=f||a.push(d)})}),t[i]=a}else t[i]=Vn([o]);else{var u=t[i]=t[i]||{};Object.keys(o).forEach(function(s){var l=o[s];if(s==="$gt"||s==="$gte")return G_(s,l,u);if(s==="$lt"||s==="$lte")return z_(s,l,u);if(s==="$ne")return W_(l,u);if(s==="$eq")return K_(l,u);if(s==="$regex")return Y_(l,u);u[s]=l})}})}),t}function G_(e,t,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt<"u"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function z_(e,t,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt<"u"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function W_(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function K_(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function Y_(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}function Pc(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=Vn(e[n].$and));var r=e[t];typeof r=="object"&&Pc(r)}return e}function Fc(e,t){for(var n in e){n==="$and"&&(t=!0);var r=e[n];typeof r=="object"&&(t=Fc(r,t))}return t}function Aa(e){var t=Rt(e),n=!1;Fc(t,!1)&&(t=Pc(t),"$and"in t&&(t=Vn(t.$and)),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(s){for(var l=Object.keys(s),p=0;p<l.length;p++){var f=l[p],d=s[f];(typeof d!="object"||d===null)&&(s[f]={$eq:d})}})}),"$not"in t&&(t.$not=Vn([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];typeof a!="object"||a===null?a={$eq:a}:n||("$ne"in a&&(a.$ne=[a.$ne]),"$regex"in a&&(a.$regex=[a.$regex])),t[o]=a}return t}function Ic(e){function t(n){return e.map(function(r){var i=Je(r),o=on(i),a=yr(n,o);return a})}return function(n,r){var i=t(n.doc),o=t(r.doc),a=Fe(i,o);return a!==0?a:wi(n.doc._id,r.doc._id)}}function Sa(e,t,n){if(e=e.filter(function(a){return zt(a.doc,t.selector,n)}),t.sort){var r=Ic(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&bi(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function zt(e,t,n){return n.every(function(r){var i=t[r],o=on(r),a=yr(e,o);return Ea(r)?Q_(r,i,e):Vr(i,e,o,a)})}function Vr(e,t,n,r){return e?typeof e=="object"?Object.keys(e).every(function(i){var o=e[i];if(i.indexOf("$")===0)return tu(i,t,o,n,r);var a=on(i);if(r===void 0&&typeof o!="object"&&a.length>0)return!1;var u=yr(r,a);return typeof o=="object"?Vr(o,t,n,u):tu("$eq",t,o,a,u)}):e===r:!0}function Q_(e,t,n){return e==="$or"?t.some(function(r){return zt(n,r,Object.keys(r))}):e==="$not"?!zt(n,t,Object.keys(t)):!t.find(function(r){return zt(n,r,Object.keys(r))})}function tu(e,t,n,r,i){if(!ru[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return ru[e](t,n,r,i)}function Nn(e){return typeof e<"u"&&e!==null}function Mt(e){return typeof e<"u"}function V_(e,t){if(typeof e!="number"||parseInt(e,10)!==e)return!1;var n=t[0],r=t[1];return e%n===r}function nu(e,t){return t.some(function(n){return e instanceof Array?e.some(function(r){return Fe(n,r)===0}):Fe(n,e)===0})}function J_(e,t){return t.every(function(n){return e.some(function(r){return Fe(n,r)===0})})}function Z_(e,t){return e.length===t}function X_(e,t){var n=new RegExp(t);return n.test(e)}function e0(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}}var ru={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.some(function(i){return zt(i,t,Object.keys(t))}):r.some(function(i){return Vr(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.every(function(i){return zt(i,t,Object.keys(t))}):r.every(function(i){return Vr(t,e,n,i)})},$eq:function(e,t,n,r){return Mt(r)&&Fe(r,t)===0},$gte:function(e,t,n,r){return Mt(r)&&Fe(r,t)>=0},$gt:function(e,t,n,r){return Mt(r)&&Fe(r,t)>0},$lte:function(e,t,n,r){return Mt(r)&&Fe(r,t)<=0},$lt:function(e,t,n,r){return Mt(r)&&Fe(r,t)<0},$exists:function(e,t,n,r){return t?Mt(r):!Mt(r)},$mod:function(e,t,n,r){return Nn(r)&&V_(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return Fe(r,i)!==0})},$in:function(e,t,n,r){return Nn(r)&&nu(r,t)},$nin:function(e,t,n,r){return Nn(r)&&!nu(r,t)},$size:function(e,t,n,r){return Nn(r)&&Array.isArray(r)&&Z_(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&J_(r,t)},$regex:function(e,t,n,r){return Nn(r)&&typeof r=="string"&&t.every(function(i){return X_(r,i)})},$type:function(e,t,n,r){return e0(r,t)}};function _r(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=Aa(t);var n={doc:e},r=Sa([n],{selector:t},Object.keys(t));return r&&r.length===1}const t0=Object.freeze(Object.defineProperty({__proto__:null,compare:wi,createFieldSorter:Ic,filterInMemoryFields:Sa,getFieldFromDoc:yr,getKey:Je,getValue:bi,isCombinationalField:Ea,massageSelector:Aa,matchesSelector:_r,parseField:on,rowFilter:zt,setFieldInDoc:jc},Symbol.toStringTag,{value:"Module"})),{massageSelector:n0,massageSort:h1}=t0;function r0(e){e.prototype.asSvelteStore=function(t){const n=this;let r;const i=Xr([],s=>{s||n.close()});n.deltaInit(),n.delta.on("create",s=>{o(s)&&(r[s.$id]=s,a())}).on("update",s=>{const l={...r[s.$id],...s};o(l)?r[s.$id]=l:delete r[s.$id],a()}).on("delete",s=>{delete r[s],a()});function o(s){return t==null?!0:v_([s],t).length>0}function a(){console.log(r);const s=Object.values(r);t.sortFn&&s.sort(t.sortFn),i.set(s)}async function u(s){if(s){t=s?{...t??{},...s}:t,t.selector&&(t.selector=n0(t.selector)),t.sort&&(t.sortFn=p_(t.sort)),r={};const{docs:l,warning:p}=await n.find(t);p&&console.warn(p),l.forEach(f=>r[f.$id]=f)}else r=await n.all();a()}return u(t),{subscribe:i.subscribe,updateSearch:u}}}var Ir=Headers;function Bt(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Bt)}catch{}}ze(Bt,Error);function Ca(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Ca)}catch{}}ze(Ca,Error);function Oa(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Oa)}catch{}}ze(Oa,Error);function Dc(e,t){return t&&e.then(function(n){Ge(function(){t(null,n)})},function(n){Ge(function(){t(n)})}),e}function i0(e){return Et(function(t){var n=t.pop(),r=e.apply(this,t);return typeof n=="function"&&Dc(r,n),r})}function o0(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}function Ui(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function iu(e){var t=new Qn(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function qi(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function Jn(){this.promise=new Promise(function(e){e()})}Jn.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise};Jn.prototype.finish=function(){return this.promise};function ou(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function a0(e,t){return ou(e)+ou(t)+"undefined"}function au(e,t,n,r,i,o){var a=a0(n,r),u;if(!i&&(u=e._cachedViews=e._cachedViews||{},u[a]))return u[a];var s=e.info().then(function(l){var p=l.db_name+"-mrview-"+(i?"temp":Oc(a));function f(d){d.views=d.views||{};var y=t;y.indexOf("/")===-1&&(y=t+"/"+t);var m=d.views[y]=d.views[y]||{};if(!m[p])return m[p]=!0,d}return mi(e,"_local/"+o,f).then(function(){return e.registerDependentDatabase(p).then(function(d){var y=d.db;y.auto_compaction=!0;var m={name:p,db:y,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return m.db.get("_local/lastSeq").catch(function($){if($.status!==404)throw $}).then(function($){return m.seq=$?$.seq:0,u&&m.db.once("destroyed",function(){delete u[a]}),m})})})});return u&&(u[a]=s),s}var su={},uu=new Jn,s0=50;function Hi(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function u0(e){return e.length===1&&/^1-/.test(e[0].rev)}function fu(e,t,n){try{e.emit("error",t)}catch{xo("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),xo("error",t,n)}}function f0(e,t,n,r){function i(E,S,C){try{S(C)}catch(k){fu(E,k,{fun:S,doc:C})}}function o(E,S,C,k,I){try{return{output:S(C,k,I)}}catch(B){return fu(E,B,{fun:S,keys:C,values:k,rereduce:I}),{error:B}}}function a(E,S){var C=Fe(E.key,S.key);return C!==0?C:Fe(E.value,S.value)}function u(E,S,C){return C=C||0,typeof S=="number"?E.slice(C,S+C):C>0?E.slice(C):E}function s(E){var S=E.value,C=S&&typeof S=="object"&&S._id||E.id;return C}function l(E){E.rows.forEach(function(S){var C=S.doc&&S.doc._attachments;C&&Object.keys(C).forEach(function(k){var I=C[k];C[k].data=$_(I.data,I.content_type)})})}function p(E){return function(S){return E.include_docs&&E.attachments&&E.binary&&l(S),S}}function f(E,S,C,k){var I=S[E];typeof I<"u"&&(k&&(I=encodeURIComponent(JSON.stringify(I))),C.push(E+"="+I))}function d(E){if(typeof E<"u"){var S=Number(E);return!isNaN(S)&&S===parseInt(E,10)?S:E}}function y(E){return E.group_level=d(E.group_level),E.limit=d(E.limit),E.skip=d(E.skip),E}function m(E){if(E){if(typeof E!="number")return new Bt('Invalid value for integer: "'+E+'"');if(E<0)return new Bt('Invalid value for positive integer: "'+E+'"')}}function $(E,S){var C=E.descending?"endkey":"startkey",k=E.descending?"startkey":"endkey";if(typeof E[C]<"u"&&typeof E[k]<"u"&&Fe(E[C],E[k])>0)throw new Bt("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(S.reduce&&E.reduce!==!1){if(E.include_docs)throw new Bt("{include_docs:true} is invalid for reduce");if(E.keys&&E.keys.length>1&&!E.group&&!E.group_level)throw new Bt("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(I){var B=m(E[I]);if(B)throw B})}function w(E,S,C){var k=[],I,B="GET",A,M;if(f("reduce",C,k),f("include_docs",C,k),f("attachments",C,k),f("limit",C,k),f("descending",C,k),f("group",C,k),f("group_level",C,k),f("skip",C,k),f("stale",C,k),f("conflicts",C,k),f("startkey",C,k,!0),f("start_key",C,k,!0),f("endkey",C,k,!0),f("end_key",C,k,!0),f("inclusive_end",C,k),f("key",C,k,!0),f("update_seq",C,k),k=k.join("&"),k=k===""?"":"?"+k,typeof C.keys<"u"){var H=2e3,W="keys="+encodeURIComponent(JSON.stringify(C.keys));W.length+k.length+1<=H?k+=(k[0]==="?"?"&":"?")+W:(B="POST",typeof S=="string"?I={keys:C.keys}:S.keys=C.keys)}if(typeof S=="string"){var O=Hi(S);return E.fetch("_design/"+O[0]+"/_view/"+O[1]+k,{headers:new Ir({"Content-Type":"application/json"}),method:B,body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,Co(T);return T.rows.forEach(function(R){if(R.value&&R.value.error&&R.value.error==="builtin_reduce_error")throw new Error(R.reason)}),T}).then(p(C))}return I=I||{},Object.keys(S).forEach(function(T){Array.isArray(S[T])?I[T]=S[T]:I[T]=S[T].toString()}),E.fetch("_temp_view"+k,{headers:new Ir({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,Co(T);return T}).then(p(C))}function g(E,S,C){return new Promise(function(k,I){E._query(S,C,function(B,A){if(B)return I(B);k(A)})})}function v(E){return new Promise(function(S,C){E._viewCleanup(function(k,I){if(k)return C(k);S(I)})})}function c(E){return function(S){if(S.status===404)return E;throw S}}function h(E,S,C){var k="_local/doc_"+E,I={_id:k,keys:[]},B=C.get(E),A=B[0],M=B[1];function H(){return u0(M)?Promise.resolve(I):S.db.get(k).catch(c(I))}function W(T){return T.keys.length?S.db.allDocs({keys:T.keys,include_docs:!0}):Promise.resolve({rows:[]})}function O(T,R){for(var N=[],Y=new Qn,G=0,Q=R.rows.length;G<Q;G++){var ee=R.rows[G],te=ee.doc;if(te&&(N.push(te),Y.add(te._id),te._deleted=!A.has(te._id),!te._deleted)){var se=A.get(te._id);"value"in se&&(te.value=se.value)}}var ie=qi(A);return ie.forEach(function(he){if(!Y.has(he)){var Be={_id:he},yt=A.get(he);"value"in yt&&(Be.value=yt.value),N.push(Be)}}),T.keys=iu(ie.concat(T.keys)),N.push(T),N}return H().then(function(T){return W(T).then(function(R){return O(T,R)})})}function _(E,S,C){var k="_local/lastSeq";return E.db.get(k).catch(c({_id:k,seq:0})).then(function(I){var B=qi(S);return Promise.all(B.map(function(A){return h(A,E,S)})).then(function(A){var M=eu(A);return I.seq=C,M.push(I),E.db.bulkDocs({docs:M})})})}function b(E){var S=typeof E=="string"?E:E.name,C=su[S];return C||(C=su[S]=new Jn),C}function x(E,S){return Ui(b(E),function(){return j(E,S)})()}function j(E,S){var C,k;function I(G,Q){var ee={id:k._id,key:Zt(G)};typeof Q<"u"&&Q!==null&&(ee.value=Zt(Q)),C.push(ee)}var B=t(E.mapFun,I),A=E.seq||0;function M(G,Q){return function(){return _(E,G,Q)}}let H=0,W={view:E.name,indexed_docs:H};E.sourceDB.emit("indexing",W);var O=new Jn;function T(){return E.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:A,limit:S.changes_batch_size}).then(R)}function R(G){var Q=G.results;if(!Q.length)return;var ee=N(Q);O.add(M(ee,A)),H=H+Q.length;let te={view:E.name,last_seq:G.last_seq,results_count:Q.length,indexed_docs:H};if(E.sourceDB.emit("indexing",te),!(Q.length<S.changes_batch_size))return T()}function N(G){for(var Q=new dn,ee=0,te=G.length;ee<te;ee++){var se=G[ee];if(se.doc._id[0]!=="_"){C=[],k=se.doc,k._deleted||i(E.sourceDB,B,k),C.sort(a);var ie=Y(C);Q.set(se.doc._id,[ie,se.changes])}A=se.seq}return Q}function Y(G){for(var Q=new dn,ee,te=0,se=G.length;te<se;te++){var ie=G[te],he=[ie.key,ie.id];te>0&&Fe(ie.key,ee)===0&&he.push(te),Q.set(ft(he),ie),ee=ie.key}return Q}return T().then(function(){return O.finish()}).then(function(){E.seq=A})}function P(E,S,C){C.group_level===0&&delete C.group_level;var k=C.group||C.group_level,I=n(E.reduceFun),B=[],A=isNaN(C.group_level)?Number.POSITIVE_INFINITY:C.group_level;S.forEach(function(T){var R=B[B.length-1],N=k?T.key:null;if(k&&Array.isArray(N)&&(N=N.slice(0,A)),R&&Fe(R.groupKey,N)===0){R.keys.push([T.key,T.id]),R.values.push(T.value);return}B.push({keys:[[T.key,T.id]],values:[T.value],groupKey:N})}),S=[];for(var M=0,H=B.length;M<H;M++){var W=B[M],O=o(E.sourceDB,I,W.keys,W.values,!1);if(O.error&&O.error instanceof Oa)throw O.error;S.push({value:O.error?null:O.output,key:W.groupKey})}return{rows:u(S,C.limit,C.skip)}}function L(E,S){return Ui(b(E),function(){return V(E,S)})()}function V(E,S){var C,k=E.reduceFun&&S.reduce!==!1,I=S.skip||0;typeof S.keys<"u"&&!S.keys.length&&(S.limit=0,delete S.keys);function B(G){return G.include_docs=!0,E.db.allDocs(G).then(function(Q){return C=Q.total_rows,Q.rows.map(function(ee){if("value"in ee.doc&&typeof ee.doc.value=="object"&&ee.doc.value!==null){var te=Object.keys(ee.doc.value).sort(),se=["id","key","value"];if(!(te<se||te>se))return ee.doc.value}var ie=M_(ee.doc._id);return{key:ie[0],id:ie[1],value:"value"in ee.doc?ee.doc.value:null}})})}function A(G){var Q;if(k?Q=P(E,G,S):typeof S.keys>"u"?Q={total_rows:C,offset:I,rows:G}:Q={total_rows:C,offset:I,rows:u(G,S.limit,S.skip)},S.update_seq&&(Q.update_seq=E.seq),S.include_docs){var ee=iu(G.map(s));return E.sourceDB.allDocs({keys:ee,include_docs:!0,conflicts:S.conflicts,attachments:S.attachments,binary:S.binary}).then(function(te){var se=new dn;return te.rows.forEach(function(ie){se.set(ie.id,ie.doc)}),G.forEach(function(ie){var he=s(ie),Be=se.get(he);Be&&(ie.doc=Be)}),Q})}else return Q}if(typeof S.keys<"u"){var M=S.keys,H=M.map(function(G){var Q={startkey:ft([G]),endkey:ft([G,{}])};return S.update_seq&&(Q.update_seq=!0),B(Q)});return Promise.all(H).then(eu).then(A)}else{var W={descending:S.descending};S.update_seq&&(W.update_seq=!0);var O,T;if("start_key"in S&&(O=S.start_key),"startkey"in S&&(O=S.startkey),"end_key"in S&&(T=S.end_key),"endkey"in S&&(T=S.endkey),typeof O<"u"&&(W.startkey=S.descending?ft([O,{}]):ft([O])),typeof T<"u"){var R=S.inclusive_end!==!1;S.descending&&(R=!R),W.endkey=ft(R?[T,{}]:[T])}if(typeof S.key<"u"){var N=ft([S.key]),Y=ft([S.key,{}]);W.descending?(W.endkey=N,W.startkey=Y):(W.startkey=N,W.endkey=Y)}return k||(typeof S.limit=="number"&&(W.limit=S.limit),W.skip=I),B(W).then(A)}}function J(E){return E.fetch("_view_cleanup",{headers:new Ir({"Content-Type":"application/json"}),method:"POST"}).then(function(S){return S.json()})}function K(E){return E.get("_local/"+e).then(function(S){var C=new dn;Object.keys(S.views).forEach(function(I){var B=Hi(I),A="_design/"+B[0],M=B[1],H=C.get(A);H||(H=new Qn,C.set(A,H)),H.add(M)});var k={keys:qi(C),include_docs:!0};return E.allDocs(k).then(function(I){var B={};I.rows.forEach(function(H){var W=H.key.substring(8);C.get(H.key).forEach(function(O){var T=W+"/"+O;S.views[T]||(T=O);var R=Object.keys(S.views[T]),N=H.doc&&H.doc.views&&H.doc.views[O];R.forEach(function(Y){B[Y]=B[Y]||N})})});var A=Object.keys(B).filter(function(H){return!B[H]}),M=A.map(function(H){return Ui(b(H),function(){return new E.constructor(H,E.__opts).destroy()})()});return Promise.all(M).then(function(){return{ok:!0}})})},c({ok:!0}))}function D(E,S,C){if(typeof E._query=="function")return g(E,S,C);if(Jt(E))return w(E,S,C);var k={changes_batch_size:E.__opts.view_update_changes_batch_size||s0};if(typeof S!="string")return $(C,S),uu.add(function(){var H=au(E,"temp_view/temp_view",S.map,S.reduce,!0,e);return H.then(function(W){return o0(x(W,k).then(function(){return L(W,C)}),function(){return W.db.destroy()})})}),uu.finish();var I=S,B=Hi(I),A=B[0],M=B[1];return E.get("_design/"+A).then(function(H){var W=H.views&&H.views[M];if(!W)throw new Ca("ddoc "+H._id+" has no view named "+M);r(H,M),$(C,W);var O=au(E,I,W.map,W.reduce,!1,e);return O.then(function(T){return C.stale==="ok"||C.stale==="update_after"?(C.stale==="update_after"&&Ge(function(){x(T,k)}),L(T,C)):x(T,k).then(function(){return L(T,C)})})})}function F(E,S,C){var k=this;typeof S=="function"&&(C=S,S={}),S=S?y(S):{},typeof E=="function"&&(E={map:E});var I=Promise.resolve().then(function(){return D(k,E,S)});return Dc(I,C),I}var U=i0(function(){var E=this;return typeof E._viewCleanup=="function"?v(E):Jt(E)?J(E):K(E)});return{query:F,viewCleanup:U}}function Nc(e){return e=Rt(e),e.index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function c0(e,t,n){var r="",i=t,o=!0;if(["$in","$nin","$or","$and","$mod","$nor","$all"].indexOf(e)!==-1&&(Array.isArray(t)||(r="Query operator "+e+" must be an array.")),["$not","$elemMatch","$allMatch"].indexOf(e)!==-1&&(!Array.isArray(t)&&typeof t=="object"&&t!==null||(r="Query operator "+e+" must be an object.")),e==="$mod"&&Array.isArray(t))if(t.length!==2)r="Query operator $mod must be in the format [divisor, remainder], where divisor and remainder are both integers.";else{var a=t[0],u=t[1];a===0&&(r="Query operator $mod's divisor cannot be 0, cannot divide by zero.",o=!1),(typeof a!="number"||parseInt(a,10)!==a)&&(r="Query operator $mod's divisor is not an integer.",i=a),parseInt(u,10)!==u&&(r="Query operator $mod's remainder is not an integer.",i=u)}if(e==="$exists"&&typeof t!="boolean"&&(r="Query operator $exists must be a boolean."),e==="$type"){var s=["null","boolean","number","string","array","object"],l='"'+s.slice(0,s.length-1).join('", "')+'", or "'+s[s.length-1]+'"';(typeof t!="string"||s.indexOf(t)==-1)&&(r="Query operator $type must be a string. Supported values: "+l+".")}if(e==="$size"&&parseInt(t,10)!==t&&(r="Query operator $size must be a integer."),e==="$regex"&&typeof t!="string"&&(console.log("here",n),n?r="Query operator $regex must be a string.":t instanceof RegExp||(r="Query operator $regex must be a string or an instance of a javascript regular expression.")),r){if(o){var p=i===null?" ":Array.isArray(i)?" array":" "+typeof i,f=typeof i=="object"&&i!==null?JSON.stringify(i,null,"	"):i;r+=" Received"+p+": "+f}throw new Error(r)}}var l0=["$all","$allMatch","$and","$elemMatch","$exists","$in","$mod","$nin","$nor","$not","$or","$regex","$size","$type"],d0=["$in","$nin","$mod","$all"],h0=["$eq","$gt","$gte","$lt","$lte"];function Jr(e,t){if(Array.isArray(e))for(var n of e)typeof n=="object"&&a!==null&&Jr(n,t);else for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=e[o];l0.indexOf(o)!==-1&&c0(o,a,t),h0.indexOf(o)===-1&&d0.indexOf(o)===-1&&typeof a=="object"&&a!==null&&Jr(a,t)}}function mr(e,t,n,r){var i,o;n.headers=new Ir({"Content-type":"application/json"}),e.fetch(t,n).then(function(a){return i=a.status,o=a.ok,a.json()}).then(function(a){if(o)r(null,a);else{a.status=i;var u=Co(a);r(u)}}).catch(r)}function v0(e,t,n){t=Nc(t),mr(e,"_index",{method:"POST",body:JSON.stringify(t)},n)}function p0(e,t,n){Jr(t.selector,!0),mr(e,"_find",{method:"POST",body:JSON.stringify(t)},n)}function g0(e,t,n){mr(e,"_explain",{method:"POST",body:JSON.stringify(t)},n)}function y0(e,t){mr(e,"_index",{method:"GET"},t)}function _0(e,t,n){var r=t.ddoc,i=t.type||"json",o=t.name;if(!r)return n(new Error("you must provide an index's ddoc"));if(!o)return n(new Error("you must provide an index's name"));var a="_index/"+[r,i,o].map(encodeURIComponent).join("/");mr(e,a,{method:"DELETE"},n)}function Mc(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}}function wr(e){return Mc(function(t){var n=t.pop(),r=e.apply(this,t);return m0(r,n),r})}function m0(e,t){return e.then(function(n){Ge(function(){t(null,n)})},function(n){Ge(function(){t(n)})}),e}var xa=Mc(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?t=t.concat(xa.apply(null,i)):t.push(i)}return t});function ka(e){for(var t={},n=0,r=e.length;n<r;n++)t=$a(t,e[n]);return t}function w0(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=on(t[r]),a=yr(e,o);typeof a<"u"&&jc(n,o,a)}return n}function Lc(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r;n++)if(e[n]!==t[n])return!1;return!0}function b0(e,t){return e.length>t.length?!1:Lc(e,t)}function T0(e,t){e=e.slice();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(!e.length)break;var o=e.indexOf(i);if(o===-1)return!1;e.splice(o,1)}return!0}function $0(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function E0(e,t){for(var n=null,r=-1,i=0,o=e.length;i<o;i++){var a=e[i],u=t(a);u>r&&(r=u,n=a)}return n}function cu(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function A0(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map(function(r){return r.substring(1)})}function S0(e,t,n){return function(r){if(!(n&&!_r(r,n))){for(var i=[],o=0,a=e.length;o<a;o++){for(var u=on(e[o]),s=r,l=0,p=u.length;l<p;l++){var f=u[l];if(s=s[f],typeof s>"u")return}i.push(s)}t(i)}}}function C0(e,t,n){var r=on(e);return function(i){if(!(n&&!_r(i,n))){for(var o=i,a=0,u=r.length;a<u;a++){var s=r[a];if(o=o[s],typeof o>"u")return}t(o)}}}function O0(e,t,n){return function(r){n&&!_r(r,n)||t(r[e])}}function x0(e,t,n){return function(r){if(!(n&&!_r(r,n))){for(var i=[],o=0,a=e.length;o<a;o++)i.push(r[e[o]]);t(i)}}}function k0(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.indexOf(".")!==-1)return!1}return!0}function R0(e,t,n){var r=k0(e),i=e.length===1;return r?i?O0(e[0],t,n):x0(e,t,n):i?C0(e[0],t,n):S0(e,t,n)}function j0(e,t){const n=Object.keys(e.fields),r=e.partial_filter_selector;return R0(n,t,r)}function P0(){throw new Error("reduce not supported")}function F0(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}var I0=f0("indexes",j0,P0,F0);function Ra(e){return e._customFindAbstractMapper||I0}function D0(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}else return t})}function N0(e){var t=[];return typeof e=="string"?t.push(e):t=e,t.map(function(n){return n.replace("_design/","")})}function Bc(e){return e.fields=e.fields.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}return t}),e}function M0(e,t){for(var n=[],r=0;r<t.def.fields.length;r++){var i=Je(t.def.fields[r]);n.push(e[i])}return n}function L0(e,t,n){for(var r=n.def.fields,i=0,o=e.length;i<o;i++){var a=e[i],u=M0(a.doc,n);if(r.length===1)u=u[0];else for(;u.length>t.length;)u.pop();if(Math.abs(Fe(u,t))>0)break}return i>0?e.slice(i):e}function B0(e){var t=Rt(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}function U0(e){var t=e.fields.filter(function(n){return bi(n)==="asc"});if(t.length!==0&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}function q0(e,t){if(t.defaultUsed&&e.sort){var n=e.sort.filter(function(r){return Object.keys(r)[0]!=="_id"}).map(function(r){return Object.keys(r)[0]});if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}t.defaultUsed}function H0(e){if(typeof e.selector!="object")throw new Error("you must provide a selector when you find()")}function G0(e,t){var n=Object.keys(e),r=t?t.map(Je):[],i;return n.length>=r.length?i=n:i=r,r.length===0?{fields:i}:(i=i.sort(function(o,a){var u=r.indexOf(o);u===-1&&(u=Number.MAX_VALUE);var s=r.indexOf(a);return s===-1&&(s=Number.MAX_VALUE),u<s?-1:u>s?1:0}),{fields:i,sortOrder:t.map(Je)})}function z0(e,t){t=Nc(t);var n=Rt(t.index);t.index=Bc(t.index),U0(t.index);var r;function i(){return r||(r=Oc(JSON.stringify(t)))}var o=t.name||"idx-"+i(),a=t.ddoc||"idx-"+i(),u="_design/"+a,s=!1,l=!1;function p(f){return f._rev&&f.language!=="query"&&(s=!0),f.language="query",f.views=f.views||{},l=!!f.views[o],l?!1:(f.views[o]={map:{fields:ka(t.index.fields)},reduce:"_count",options:{def:n}},f)}return e.constructor.emit("debug",["find","creating index",u]),mi(e,u,p).then(function(){if(s)throw new Error('invalid language for ddoc with id "'+u+'" (should be "query")')}).then(function(){var f=a+"/"+o;return Ra(e).query.call(e,f,{limit:0,reduce:!1}).then(function(){return{id:u,name:o,result:l?"exists":"created"}})})}function Uc(e){return e.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(t){var n={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return n.indexes=xa(n.indexes,t.rows.filter(function(r){return r.doc.language==="query"}).map(function(r){var i=r.doc.views!==void 0?Object.keys(r.doc.views):[];return i.map(function(o){var a=r.doc.views[o];return{ddoc:r.id,name:o,type:"json",def:Bc(a.options.def)}})})),n.indexes.sort(function(r,i){return wi(r.name,i.name)}),n.total_rows=n.indexes.length,n})}var Zr=null,Fo={"￿":{}};const W0={queryOpts:{limit:0,startkey:Fo,endkey:Zr},inMemoryFields:[]};function K0(e,t){for(var n=e.def.fields.map(Je),r=0,i=n.length;r<i;r++){var o=n[r];if(t===o)return!0}return!1}function Y0(e,t){var n=e[t],r=Je(n);return r!=="$eq"}function qc(e,t){var n=t.def.fields.map(Je);return e.slice().sort(function(r,i){var o=n.indexOf(r),a=n.indexOf(i);return o===-1&&(o=Number.MAX_VALUE),a===-1&&(a=Number.MAX_VALUE),wi(o,a)})}function Q0(e,t,n){n=qc(n,e);for(var r=!1,i=0,o=n.length;i<o;i++){var a=n[i];if(r||!K0(e,a))return n.slice(i);i<o-1&&Y0(t,a)&&(r=!0)}return[]}function V0(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n];Object.keys(r).forEach(function(i){i==="$ne"&&t.push(n)})}),t}function J0(e,t,n,r){var i=xa(e,Q0(t,n,r),V0(n));return qc(A0(i),t)}function Z0(e,t,n){if(t){var r=b0(t,e),i=Lc(n,e);return r&&i}return T0(n,e)}var X0=["$eq","$gt","$gte","$lt","$lte"];function Hc(e){return X0.indexOf(e)===-1}function em(e,t){var n=e[0],r=t[n];if(typeof r>"u")return!0;var i=Object.keys(r).length===1&&Je(r)==="$ne";return!i}function tm(e,t,n,r){var i=e.def.fields.map(Je),o=Z0(i,t,n);return o?em(i,r):!1}function nm(e,t,n,r){return r.filter(function(i){return tm(i,n,t,e)})}function rm(e,t,n,r,i){var o=nm(e,t,n,r);if(o.length===0){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var a=r[0];return a.defaultUsed=!0,a}if(o.length===1&&!i)return o[0];var u=$0(t);function s(d){for(var y=d.def.fields.map(Je),m=0,$=0,w=y.length;$<w;$++){var g=y[$];u[g]&&m++}return m}if(i){var l="_design/"+i[0],p=i.length===2?i[1]:!1,f=o.find(function(d){return!!(p&&d.ddoc===l&&p===d.name||d.ddoc===l)});if(!f)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return f}return E0(o,s)}function im(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:Zr}}function om(e,t){var n=Je(t.def.fields[0]),r=e[n]||{},i=[],o=Object.keys(r),a;return o.forEach(function(u){Hc(u)&&i.push(n);var s=r[u],l=im(u,s);a?a=ka([a,l]):a=l}),{queryOpts:a,inMemoryFields:i}}function am(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function sm(e,t){var n=t.def.fields.map(Je),r=[],i=[],o=[],a,u;function s(P){a!==!1&&i.push(Zr),u!==!1&&o.push(Fo),r=n.slice(P)}for(var l=0,p=n.length;l<p;l++){var f=n[l],d=e[f];if(!d||!Object.keys(d).length){s(l);break}else if(Object.keys(d).some(Hc)){s(l);break}else if(l>0){var y="$gt"in d||"$gte"in d||"$lt"in d||"$lte"in d,m=Object.keys(e[n[l-1]]),$=cu(m,["$eq"]),w=cu(m,Object.keys(d)),g=y&&!$&&!w;if(g){s(l);break}}for(var v=Object.keys(d),c=null,h=0;h<v.length;h++){var _=v[h],b=d[_],x=am(_,b);c?c=ka([c,x]):c=x}i.push("startkey"in c?c.startkey:Zr),o.push("endkey"in c?c.endkey:Fo),"inclusive_start"in c&&(a=c.inclusive_start),"inclusive_end"in c&&(u=c.inclusive_end)}var j={startkey:i,endkey:o};return typeof a<"u"&&(j.inclusive_start=a),typeof u<"u"&&(j.inclusive_end=u),{queryOpts:j,inMemoryFields:r}}function um(e){return Object.keys(e).map(function(n){return e[n]}).some(function(n){return typeof n=="object"&&Object.keys(n).length===0})}function fm(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}function cm(e,t){return t.defaultUsed?fm(e):t.def.fields.length===1?om(e,t):sm(e,t)}function lm(e,t){var n=e.selector,r=e.sort;if(um(n))return $a({},W0,{index:t[0]});var i=G0(n,r),o=i.fields,a=i.sortOrder,u=rm(n,o,a,t,e.use_index),s=cm(n,u),l=s.queryOpts,p=s.inMemoryFields,f=J0(p,u,n,o),d={queryOpts:l,index:u,inMemoryFields:f};return d}function dm(e){return e.ddoc.substring(8)+"/"+e.name}function hm(e,t){var n=Rt(t);return n.descending?("endkey"in n&&typeof n.endkey!="string"&&(n.endkey=""),"startkey"in n&&typeof n.startkey!="string"&&(n.limit=0)):("startkey"in n&&typeof n.startkey!="string"&&(n.startkey=""),"endkey"in n&&typeof n.endkey!="string"&&(n.limit=0)),"key"in n&&typeof n.key!="string"&&(n.limit=0),n.limit>0&&n.indexes_count&&(n.original_limit=n.limit,n.limit+=n.indexes_count),e.allDocs(n).then(function(r){return r.rows=r.rows.filter(function(i){return!/^_design\//.test(i.id)}),n.original_limit&&(n.limit=n.original_limit),r.rows=r.rows.slice(0,n.limit),r})}function Gc(e,t,n){return t.selector&&(Jr(t.selector,!1),t.selector=Aa(t.selector)),t.sort&&(t.sort=D0(t.sort)),t.use_index&&(t.use_index=N0(t.use_index)),H0(t),Uc(e).then(function(r){e.constructor.emit("debug",["find","planning query",t]);var i=lm(t,r.indexes);e.constructor.emit("debug",["find","query plan",i]);var o=i.index;q0(t,o);var a=$a({include_docs:!0,reduce:!1,indexes_count:r.total_rows},i.queryOpts);if("startkey"in a&&"endkey"in a&&Fe(a.startkey,a.endkey)>0)return{docs:[]};var u=t.sort&&typeof t.sort[0]!="string"&&bi(t.sort[0])==="desc";return u&&(a.descending=!0,a=B0(a)),i.inMemoryFields.length||("limit"in t&&(a.limit=t.limit),"skip"in t&&(a.skip=t.skip)),n?Promise.resolve(i,a):Promise.resolve().then(function(){if(o.name==="_all_docs")return hm(e,a);var s=dm(o);return Ra(e).query.call(e,s,a)}).then(function(s){a.inclusive_start===!1&&(s.rows=L0(s.rows,a.startkey,o)),i.inMemoryFields.length&&(s.rows=Sa(s.rows,t,i.inMemoryFields));var l={docs:s.rows.map(function(p){var f=p.doc;return t.fields?w0(f,t.fields):f})};return o.defaultUsed&&(l.warning="No matching index found, create an index to optimize query time."),l})})}function vm(e,t){return Gc(e,t,!0).then(function(n){return{dbname:e.name,index:n.index,selector:t.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}})}function pm(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,r=t.name;function i(o){return Object.keys(o.views).length===1&&o.views[r]?{_id:n,_deleted:!0}:(delete o.views[r],o)}return mi(e,n,i).then(function(){return Ra(e).viewCleanup.apply(e)}).then(function(){return{ok:!0}})}var gm=wr(z0),ym=wr(Gc),_m=wr(vm),mm=wr(Uc),wm=wr(pm),Rn={};Rn.createIndex=pr(function(e,t){if(typeof e!="object")return t(new Error("you must provide an index to create"));var n=Jt(this)?v0:gm;n(this,e,t)});Rn.find=pr(function(e,t){if(typeof t>"u"&&(t=e,e=void 0),typeof e!="object")return t(new Error("you must provide search parameters to find()"));var n=Jt(this)?p0:ym;n(this,e,t)});Rn.explain=pr(function(e,t){if(typeof t>"u"&&(t=e,e=void 0),typeof e!="object")return t(new Error("you must provide search parameters to explain()"));var n=Jt(this)?g0:_m;n(this,e,t)});Rn.getIndexes=pr(function(e){var t=Jt(this)?y0:mm;t(this,e)});Rn.deleteIndex=pr(function(e,t){if(typeof e!="object")return t(new Error("you must provide an index to delete"));var n=Jt(this)?_0:wm;n(this,e,t)});var zc={};(function(e){var t=rr,n=va;fc.collate;var r=Ta,i=dr;r.getValue;var o=r.massageSelector,a=i.massageSort;function u(s){if(typeof this.find!="function")throw new Error("ERROR: PouchDB Find is a requirement for LiveFind and must be loaded first.");var l=this,p=!1,f={},d=new t,y=[],m=s.aggregate||!1,$=s.fields,w=!1,g=!1;$&&($.indexOf("_id")===-1&&($.unshift("_id"),w=!0),$.indexOf("_rev")===-1&&($.push("_rev"),g=!0));var v;s.selector&&(v=o(s.selector));var c,h;s.sort&&(c=a(s.sort),h=n.createFieldSorter(c));var _=parseInt(s.skip,10)||0,b=parseInt(s.limit,10)||0,x={selector:v,fields:$},j=l.find(x).then(function(A){A.docs.forEach(function(M){F(M)}),d.emit("ready")}).catch(function(A){throw d.emit("error",A),V(),A});l._changeListener||J(),l._activeQueries?l._activeQueries++:l._activeQueries=1,l._changeListener.on("change",P).on("error",L),d.cancel=V,d.then=j.then.bind(j),d.catch=j.catch.bind(j),d.sort=function(A){return c?k(A):A},d.paginate=B;function P(A){j.then(function(){A.doc&&U(A.doc)})}function L(A){d.emit("error",A)}function V(){p||(l._activeQueries--,l._activeQueries?(l._changeListener.removeListener("change",P),l._changeListener.removeListener("error",L)):(l._changeListener.cancel(),delete l._changeListener),d.emit("cancelled"),d.removeAllListeners(),p=!0)}function J(){l._changeListener=l.changes({live:!0,retry:!0,include_docs:!0,since:"now"})}function K(A){var M=n.memoryFilter([A],{selector:v});return M.length?M[0]:null}function D(A){if($){var M=i.pick(A,$);return w&&delete M._id,g&&delete M._rev,M}return A}function F(A){f[A._id]=A._rev;var M=A._id,H=A._rev;return w&&delete A._id,g&&delete A._rev,S(A,M,H)}function U(A){if(f[A._id]!==A._rev){var M=A._id,H=A._rev;if(A._deleted&&f[M])return f[M]=null,E({_id:M,_rev:H,deleted:!0},M,H);var W=K(A);if(!W&&f[M])return f[M]=null,E({_id:M,_rev:H},M,H);if(W&&!f[M])return f[M]=H,S(D(W),M,H);if(W&&f[M])return f[M]=H,C(D(W),M,H)}}function E(A,M,H){var W;m&&(y=y.filter(function(O){return O._id!==A._id}),W=I(y)),d.emit("update",{action:"REMOVE",id:M,rev:H,doc:A},W)}function S(A,M,H){var W;m&&(y=y.concat(A),W=I(y)),d.emit("update",{action:"ADD",id:M,rev:H,doc:A},W)}function C(A,M,H){var W;m&&(y=y.map(function(O){return O._id===A._id?A:O}),W=I(y)),d.emit("update",{action:"UPDATE",id:M,rev:H,doc:A},W)}function k(A){return A.sort(h)}function I(A){return c&&(A=k(A)),(_||b)&&(b?A=A.slice(_,_+b):A=A.slice(_)),A}function B(A){if(!(!m||!A||typeof A!="object"))return A.skip!=null&&(_=parseInt(A.skip,10)||0),A.limit!=null&&(b=parseInt(A.limit,10)||0),A.sort&&A.sort instanceof Array&&(c=a(A.sort),h=n.createFieldSorter(c)),I(y)}return d}e.liveFind=u,typeof window<"u"&&window.PouchDB&&window.PouchDB.plugin(e)})(zc);const bm=at(zc);ae.plugin(ey);ae.plugin(Rn);ae.plugin(bm);ae.plugin(r0);var Wt=(e=>(e[e.PROJECT=0]="PROJECT",e[e.TIMER=1]="TIMER",e[e.TASK=2]="TASK",e))(Wt||{});const mn=new ae("timeman");function Tm(e){let t,n,r,i,o,a,u,s,l,p,f,d;return{c(){t=oe("div"),n=oe("button"),n.textContent="1",r=ve(),i=oe("button"),i.textContent="2",o=ve(),a=oe("button"),a.textContent="3",u=ve(),s=oe("button"),s.textContent="4",l=ve(),p=oe("button"),p.textContent="5"},m(y,m){$e(y,t,m),ne(t,n),ne(t,r),ne(t,i),ne(t,o),ne(t,a),ne(t,u),ne(t,s),ne(t,l),ne(t,p),f||(d=[Me(n,"click",e[0](1)),Me(i,"click",e[0](2)),Me(a,"click",e[0](3)),Me(s,"click",e[0](4)),Me(p,"click",e[0](5))],f=!0)},p:de,i:de,o:de,d(y){y&&ye(t),f=!1,dt(d)}}}function $m(e,t,n){let{value:r=0}=t;const i=o=>()=>n(1,r=o);return e.$$set=o=>{"value"in o&&n(1,r=o.value)},[i,r]}class Em extends ot{constructor(t){super(),it(this,t,$m,Tm,et,{value:1})}}function lu(e,t,n){const r=e.slice();return r[4]=t[n],r}function Am(e){return{c:de,m:de,p:de,d:de}}function Sm(e){let t,n,r,i=e[2],o=[];for(let a=0;a<i.length;a+=1)o[a]=du(lu(e,i,a));return{c(){t=oe("select");for(let a=0;a<o.length;a+=1)o[a].c();e[0]===void 0&&kt(()=>e[3].call(t))},m(a,u){$e(a,t,u);for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(t,null);Nr(t,e[0],!0),n||(r=Me(t,"change",e[3]),n=!0)},p(a,u){if(u&2){i=a[2];let s;for(s=0;s<i.length;s+=1){const l=lu(a,i,s);o[s]?o[s].p(l,u):(o[s]=du(l),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=i.length}u&3&&Nr(t,a[0])},d(a){a&&ye(t),wn(o,a),n=!1,r()}}}function du(e){let t,n=e[4].name+"",r,i;return{c(){t=oe("option"),r=jt(n),t.__value=i=e[4].id,t.value=t.__value},m(o,a){$e(o,t,a),ne(t,r)},p(o,a){a&2&&n!==(n=o[4].name+"")&&Xn(r,n),a&2&&i!==(i=o[4].id)&&(t.__value=i,t.value=t.__value)},d(o){o&&ye(t)}}}function Cm(e){return{c:de,m:de,p:de,d:de}}function Om(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:Cm,then:Sm,catch:Am,value:2};return Ua(n=e[1],r),{c(){t=Zn(),r.block.c()},m(i,o){$e(i,t,o),r.block.m(i,r.anchor=o),r.mount=()=>t.parentNode,r.anchor=t},p(i,[o]){e=i,r.ctx=e,o&2&&n!==(n=e[1])&&Ua(n,r)||ml(r,e,o)},i:de,o:de,d(i){i&&ye(t),r.block.d(i),r.token=null,r=null}}}function xm(e,t,n){let r;const i=mn.asSvelteStore({selector:{table:Wt.PROJECT}});Dr(e,i,u=>n(1,r=u));let{value:o}=t;function a(){o=Iu(this),n(0,o)}return e.$$set=u=>{"value"in u&&n(0,o=u.value)},[o,r,i,a]}class km extends ot{constructor(t){super(),it(this,t,xm,Om,et,{value:0})}}function hu(e,t,n){const r=e.slice();return r[11]=t[n],r}function Rm(e){let t,n,r,i,o,a,u;return{c(){t=oe("input"),n=ve(),r=oe("a"),i=oe("button"),i.textContent="Go",fe(t,"type","checkbox"),fe(r,"href",o="/timer/"+e[0].id)},m(s,l){$e(s,t,l),$e(s,n,l),$e(s,r,l),ne(r,i),a||(u=Io(Lo.call(null,r)),a=!0)},p(s,l){l&1&&o!==(o="/timer/"+s[0].id)&&fe(r,"href",o)},d(s){s&&ye(t),s&&ye(n),s&&ye(r),a=!1,u()}}}function jm(e){let t;return{c(){t=oe("div"),t.textContent="+"},m(n,r){$e(n,t,r)},p:de,d(n){n&&ye(t)}}}function vu(e){let t,n=e[11]+"",r;return{c(){t=oe("option"),r=jt(n),t.__value=e[11],t.value=t.__value,fe(t,"class","svelte-6fx54s")},m(i,o){$e(i,t,o),ne(t,r)},p:de,d(i){i&&ye(t)}}}function Pm(e){let t,n,r,i,o,a,u,s,l,p,f,d,y,m,$,w,g,v,c,h,_;function b(F,U){return F[1]?jm:Rm}let x=b(e),j=x(e);function P(F){e[6](F)}let L={};e[0].predictedTime!==void 0&&(L.value=e[0].predictedTime),s=new Em({props:L}),Wn.push(()=>Qi(s,"value",P));let V=Zi,J=[];for(let F=0;F<V.length;F+=1)J[F]=vu(hu(e,V,F));function K(F){e[8](F)}let D={};return e[0].projectId!==void 0&&(D.value=e[0].projectId),m=new km({props:D}),Wn.push(()=>Qi(m,"value",K)),{c(){t=oe("div"),n=oe("div"),j.c(),r=ve(),i=oe("input"),u=ve(),Ve(s.$$.fragment),p=ve(),f=oe("div"),d=oe("select");for(let F=0;F<J.length;F+=1)J[F].c();y=ve(),Ve(m.$$.fragment),w=ve(),g=oe("input"),nt(i,"flex-grow","99"),fe(i,"type","text"),i.value=o=e[0].title,fe(i,"placeholder",a=e[1]?"New task":"Task title"),fe(n,"class","flex svelte-6fx54s"),fe(d,"class","svelte-6fx54s"),e[0].category===void 0&&kt(()=>e[7].call(d)),fe(g,"type","date"),nt(g,"height","1em"),fe(f,"class","flex svelte-6fx54s"),nt(f,"gap","0.25em"),fe(t,"id","task"),fe(t,"class","reset svelte-6fx54s"),fe(t,"hasfocus",v=e[2]||e[1])},m(F,U){$e(F,t,U),ne(t,n),j.m(n,null),ne(n,r),ne(n,i),ne(n,u),Ke(s,n,null),ne(t,p),ne(t,f),ne(f,d);for(let E=0;E<J.length;E+=1)J[E]&&J[E].m(d,null);Nr(d,e[0].category,!0),ne(f,y),Ke(m,f,null),ne(f,w),ne(f,g),Ma(g,e[0].due),c=!0,h||(_=[Me(i,"input",e[3]),Me(d,"change",e[7]),Me(g,"input",e[9]),Me(t,"focusin",e[5]),Me(t,"focusout",e[4])],h=!0)},p(F,[U]){x===(x=b(F))&&j?j.p(F,U):(j.d(1),j=x(F),j&&(j.c(),j.m(n,r))),(!c||U&1&&o!==(o=F[0].title)&&i.value!==o)&&(i.value=o),(!c||U&2&&a!==(a=F[1]?"New task":"Task title"))&&fe(i,"placeholder",a);const E={};if(!l&&U&1&&(l=!0,E.value=F[0].predictedTime,Yi(()=>l=!1)),s.$set(E),U&0){V=Zi;let C;for(C=0;C<V.length;C+=1){const k=hu(F,V,C);J[C]?J[C].p(k,U):(J[C]=vu(k),J[C].c(),J[C].m(d,null))}for(;C<J.length;C+=1)J[C].d(1);J.length=V.length}U&1&&Nr(d,F[0].category);const S={};!$&&U&1&&($=!0,S.value=F[0].projectId,Yi(()=>$=!1)),m.$set(S),U&1&&Ma(g,F[0].due),(!c||U&6&&v!==(v=F[2]||F[1]))&&fe(t,"hasfocus",v)},i(F){c||(Te(s.$$.fragment,F),Te(m.$$.fragment,F),c=!0)},o(F){ke(s.$$.fragment,F),ke(m.$$.fragment,F),c=!1},d(F){F&&ye(t),j.d(),Ye(s),wn(J,F),Ye(m),h=!1,dt(_)}}}function Fm(e,t,n){let{isNew:r=!1}=t,i=r,{taskData:o={}}=t;o={table:Wt.TASK,description:"",predictedTime:0,title:"",category:"homework",...o};function a(m){const $=m.target.value;n(0,o.title=$,o);let[w,g]=Rh($,Zi);w==="worksheet"&&(w="homework"),w==="research"&&(w="read"),g>.7&&(console.log(w),n(0,o.category=w,o),console.log("priority:",Math.min(jh($,/!/g),3)));let v=Oh($,new Date);if(v){const c=v.getTimezoneOffset();v=new Date(v.getTime()-c*60*1e3),n(0,o.due=v.toISOString().split("T")[0],o)}}function u(m){n(2,i=i&&m.currentTarget.contains(m.relatedTarget)),i||l()}function s(m){n(2,i=i||m.target instanceof HTMLSelectElement||m.target instanceof HTMLInputElement&&m.target.getAttribute("type")==="text")}function l(){r?mn.save(o):console.error("Editing tasks not implemented yet!")}function p(m){e.$$.not_equal(o.predictedTime,m)&&(o.predictedTime=m,n(0,o))}function f(){o.category=Iu(this),n(0,o)}function d(m){e.$$.not_equal(o.projectId,m)&&(o.projectId=m,n(0,o))}function y(){o.due=this.value,n(0,o)}return e.$$set=m=>{"isNew"in m&&n(1,r=m.isNew),"taskData"in m&&n(0,o=m.taskData)},[o,r,i,a,u,s,p,f,d,y]}class Wc extends ot{constructor(t){super(),it(this,t,Fm,Pm,et,{isNew:1,taskData:0})}}var wt=(e=>(e[e.Overdue=0]="Overdue",e[e.Today=1]="Today",e[e.Tomorrow=2]="Tomorrow",e[e.Week=3]="Week",e[e.Later=4]="Later",e))(wt||{});function pu(e,t,n){const r=e.slice();return r[2]=t[n],r}function gu(e){let t,n;return t=new Wc({props:{taskData:e[2]}}),{c(){Ve(t.$$.fragment)},m(r,i){Ke(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.taskData=r[2]),t.$set(o)},i(r){n||(Te(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ye(t,r)}}}function Im(e){let t,n=wt[e[0]]+"",r,i,o,a,u=e[1],s=[];for(let p=0;p<u.length;p+=1)s[p]=gu(pu(e,u,p));const l=p=>ke(s[p],1,1,()=>{s[p]=null});return{c(){t=oe("div"),r=jt(n),i=ve();for(let p=0;p<s.length;p+=1)s[p].c();o=Zn(),nt(t,"background-color","#82c5d1"),nt(t,"padding","5px"),nt(t,"border-radius","12px"),nt(t,"margin","5px")},m(p,f){$e(p,t,f),ne(t,r),$e(p,i,f);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(p,f);$e(p,o,f),a=!0},p(p,[f]){if((!a||f&1)&&n!==(n=wt[p[0]]+"")&&Xn(r,n),f&2){u=p[1];let d;for(d=0;d<u.length;d+=1){const y=pu(p,u,d);s[d]?(s[d].p(y,f),Te(s[d],1)):(s[d]=gu(y),s[d].c(),Te(s[d],1),s[d].m(o.parentNode,o))}for(Sn(),d=u.length;d<s.length;d+=1)l(d);Cn()}},i(p){if(!a){for(let f=0;f<u.length;f+=1)Te(s[f]);a=!0}},o(p){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)ke(s[f]);a=!1},d(p){p&&ye(t),p&&ye(i),wn(s,p),p&&ye(o)}}}function Dm(e,t,n){let{due:r}=t,{tasks:i}=t;return e.$$set=o=>{"due"in o&&n(0,r=o.due),"tasks"in o&&n(1,i=o.tasks)},[r,i]}class Nm extends ot{constructor(t){super(),it(this,t,Dm,Im,et,{due:0,tasks:1})}}const yu=.001,Mm=60,Lm=60*Mm,Gi=24*Lm;function _u(e,t,n){const r=e.slice();return r[2]=t[n],r[6]=n,r}function mu(e){let t,n;return t=new Nm({props:{due:e[6],tasks:e[0]==-1?e[2]:e[2].filter(e[4])}}),{c(){Ve(t.$$.fragment)},m(r,i){Ke(t,r,i),n=!0},p(r,i){const o={};i&3&&(o.tasks=r[0]==-1?r[2]:r[2].filter(r[4])),t.$set(o)},i(r){n||(Te(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ye(t,r)}}}function Bm(e){let t,n,r,i;n=new Wc({props:{isNew:!0}});let o=e[1],a=[];for(let s=0;s<o.length;s+=1)a[s]=mu(_u(e,o,s));const u=s=>ke(a[s],1,1,()=>{a[s]=null});return{c(){t=oe("div"),Ve(n.$$.fragment),r=ve();for(let s=0;s<a.length;s+=1)a[s].c();nt(t,"padding-bottom","78px")},m(s,l){$e(s,t,l),Ke(n,t,null),ne(t,r);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(t,null);i=!0},p(s,[l]){if(l&3){o=s[1];let p;for(p=0;p<o.length;p+=1){const f=_u(s,o,p);a[p]?(a[p].p(f,l),Te(a[p],1)):(a[p]=mu(f),a[p].c(),Te(a[p],1),a[p].m(t,null))}for(Sn(),p=o.length;p<a.length;p+=1)u(p);Cn()}},i(s){if(!i){Te(n.$$.fragment,s);for(let l=0;l<o.length;l+=1)Te(a[l]);i=!0}},o(s){ke(n.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)ke(a[l]);i=!1},d(s){s&&ye(t),Ye(n),wn(a,s)}}}function Um(e,t,n){let r,{currentTab:i=-1}=t,o=mn.asSvelteStore({selector:{table:Wt.TASK}});Dr(e,o,s=>n(3,r=s));let a;const u=s=>s.projectId==i;return e.$$set=s=>{"currentTab"in s&&n(0,i=s.currentTab)},e.$$.update=()=>{if(e.$$.dirty&10){n(1,a=[...Array(Object.keys(wt).length/2)].map(()=>[]));for(const s of r){const l=new Date().setHours(0,0,0,0)*yu,p=s.due*yu;p<l?a[wt.Overdue].push(s):p<l+Gi?a[wt.Today].push(s):p<l+2*Gi||p<l+7*Gi?a[wt.Tomorrow].push(s):a[wt.Later].push(s)}}},[i,a,o,r,u]}class qm extends ot{constructor(t){super(),it(this,t,Um,Bm,et,{currentTab:0})}}const Hm=e=>({currentTab:e&1}),wu=e=>({currentTab:e[0]});function bu(e,t,n){const r=e.slice();return r[12]=t[n],r}function Tu(e,t,n){const r=e.slice();return r[15]=t[n],r}function $u(e){let t,n,r,i,o=e[15].name+"",a,u,s;function l(){return e[10](e[15])}return{c(){t=oe("li"),n=oe("button"),r=oe("i"),i=ve(),a=jt(o),fe(r,"class","fa fa-book"),fe(n,"class","courseProjectButton svelte-mcobzd")},m(p,f){$e(p,t,f),ne(t,n),ne(n,r),ne(n,i),ne(n,a),u||(s=Me(n,"click",l),u=!0)},p(p,f){e=p,f&2&&o!==(o=e[15].name+"")&&Xn(a,o)},d(p){p&&ye(t),u=!1,s()}}}function Eu(e){let t,n,r=e[12].name+"",i,o,a;function u(){return e[11](e[12])}return{c(){t=oe("li"),n=oe("button"),i=jt(r),fe(n,"class","courseProjectButton svelte-mcobzd")},m(s,l){$e(s,t,l),ne(t,n),ne(n,i),o||(a=Me(n,"click",u),o=!0)},p(s,l){e=s,l&4&&r!==(r=e[12].name+"")&&Xn(i,r)},d(s){s&&ye(t),o=!1,a()}}}function Gm(e){let t,n,r,i,o,a,u,s,l,p,f,d,y,m,$,w,g,v,c,h,_,b,x,j,P,L,V,J,K,D,F,U,E,S,C,k,I,B=e[1],A=[];for(let T=0;T<B.length;T+=1)A[T]=$u(Tu(e,B,T));let M=e[2],H=[];for(let T=0;T<M.length;T+=1)H[T]=Eu(bu(e,M,T));const W=e[8].default,O=nl(W,e,e[7],wu);return{c(){t=oe("link"),n=ve(),r=oe("div"),i=oe("div"),o=oe("h1"),o.textContent="Sidebar",a=ve(),u=oe("br"),s=ve(),l=oe("button"),l.textContent="All",p=ve(),f=oe("br"),d=oe("br"),y=ve(),m=oe("h3"),m.textContent="Classes",$=ve(),w=oe("ul");for(let T=0;T<A.length;T+=1)A[T].c();g=ve(),v=oe("li"),c=oe("button"),c.innerHTML='<i class="fa fa-plus"></i> New Class',h=ve(),_=oe("hr"),b=ve(),x=oe("br"),j=ve(),P=oe("h3"),P.textContent="Projects",L=ve(),V=oe("ul");for(let T=0;T<H.length;T+=1)H[T].c();J=ve(),K=oe("li"),D=oe("button"),D.textContent="Add Project",F=ve(),U=oe("a"),U.innerHTML='<button class="courseProjectButton svelte-mcobzd">Login</button>',E=ve(),S=oe("div"),O&&O.c(),fe(t,"rel","stylesheet"),fe(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),fe(c,"class","courseProjectButton svelte-mcobzd"),fe(w,"class","courseProjectList svelte-mcobzd"),fe(_,"class","svelte-mcobzd"),fe(D,"class","courseProjectButton svelte-mcobzd"),fe(V,"class","courseProjectList svelte-mcobzd"),fe(U,"href","/login"),fe(i,"class","sidebar svelte-mcobzd"),fe(S,"class","other svelte-mcobzd"),fe(r,"class","container svelte-mcobzd")},m(T,R){$e(T,t,R),$e(T,n,R),$e(T,r,R),ne(r,i),ne(i,o),ne(i,a),ne(i,u),ne(i,s),ne(i,l),ne(i,p),ne(i,f),ne(i,d),ne(i,y),ne(i,m),ne(i,$),ne(i,w);for(let N=0;N<A.length;N+=1)A[N]&&A[N].m(w,null);ne(w,g),ne(w,v),ne(v,c),ne(i,h),ne(i,_),ne(i,b),ne(i,x),ne(i,j),ne(i,P),ne(i,L),ne(i,V);for(let N=0;N<H.length;N+=1)H[N]&&H[N].m(V,null);ne(V,J),ne(V,K),ne(K,D),ne(i,F),ne(i,U),ne(r,E),ne(r,S),O&&O.m(S,null),C=!0,k||(I=[Me(l,"click",e[9]),Me(c,"click",e[6]),Me(D,"click",e[5]),Io(Lo.call(null,U))],k=!0)},p(T,[R]){if(R&3){B=T[1];let N;for(N=0;N<B.length;N+=1){const Y=Tu(T,B,N);A[N]?A[N].p(Y,R):(A[N]=$u(Y),A[N].c(),A[N].m(w,g))}for(;N<A.length;N+=1)A[N].d(1);A.length=B.length}if(R&5){M=T[2];let N;for(N=0;N<M.length;N+=1){const Y=bu(T,M,N);H[N]?H[N].p(Y,R):(H[N]=Eu(Y),H[N].c(),H[N].m(V,J))}for(;N<H.length;N+=1)H[N].d(1);H.length=M.length}O&&O.p&&(!C||R&129)&&il(O,W,T,T[7],C?rl(W,T[7],R,Hm):ol(T[7]),wu)},i(T){C||(Te(O,T),C=!0)},o(T){ke(O,T),C=!1},d(T){T&&ye(t),T&&ye(n),T&&ye(r),wn(A,T),wn(H,T),O&&O.d(T),k=!1,dt(I)}}}function zm(e,t,n){let r,i,{$$slots:o={},$$scope:a}=t,u;const s=mn.asSvelteStore({selector:{table:Wt.PROJECT}});Dr(e,s,$=>n(2,i=$));const l=s;Dr(e,l,$=>n(1,r=$));function p(){mn.save({table:Wt.PROJECT,name:prompt("Name your project"),owner:1})}function f(){mn.save({table:Wt.PROJECT,name:prompt("Name your class"),owner:1})}const d=()=>n(0,u=-1),y=$=>n(0,u=$.id),m=$=>n(0,u=$.id);return e.$$set=$=>{"$$scope"in $&&n(7,a=$.$$scope)},[u,r,i,s,l,p,f,a,o,d,y,m]}class Wm extends ot{constructor(t){super(),it(this,t,zm,Gm,et,{})}}function Km(e){let t,n=e[0]?"▶️":"⏸️",r,i,o;return{c(){t=oe("button"),r=jt(n),fe(t,"class","reset")},m(a,u){$e(a,t,u),ne(t,r),i||(o=Me(t,"click",e[1]),i=!0)},p(a,[u]){u&1&&n!==(n=a[0]?"▶️":"⏸️")&&Xn(r,n)},i:de,o:de,d(a){a&&ye(t),i=!1,o()}}}function Ym(e,t,n){let{isPaused:r=!0}=t;const i=Lu();function o(a){a.stopPropagation(),a.preventDefault(),n(0,r=!r),i("click",a)}return e.$$set=a=>{"isPaused"in a&&n(0,r=a.isPaused)},[r,o]}class Qm extends ot{constructor(t){super(),it(this,t,Ym,Km,et,{isPaused:0})}}function Vm(e){const t=e-1;return t*t*t+1}function Jm(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Zm(e){var{fallback:t}=e,n=Jm(e,["fallback"]);const r=new Map,i=new Map;function o(u,s,l){const{delay:p=0,duration:f=x=>Math.sqrt(x)*30,easing:d=Vm}=Gn(Gn({},n),l),y=u.getBoundingClientRect(),m=s.getBoundingClientRect(),$=y.left-m.left,w=y.top-m.top,g=y.width/m.width,v=y.height/m.height,c=Math.sqrt($*$+w*w),h=getComputedStyle(s),_=h.transform==="none"?"":h.transform,b=+h.opacity;return{delay:p,duration:Xt(f)?f(c):f,easing:d,css:(x,j)=>`
				opacity: ${x*b};
				transform-origin: top left;
				transform: ${_} translate(${j*$}px,${j*w}px) scale(${x+(1-x)*g}, ${x+(1-x)*v});
			`}}function a(u,s,l){return(p,f)=>(u.set(f.key,p),()=>{if(s.has(f.key)){const d=s.get(f.key);return s.delete(f.key),o(d,p,f)}return u.delete(f.key),t&&t(p,f,l)})}return[a(i,r,!1),a(r,i,!0)]}const Xm=Zm({});function Au(e){let t,n,r;return{c(){t=oe("button"),t.textContent="⏹️",fe(t,"class","reset")},m(i,o){$e(i,t,o),n||(r=Me(t,"click",e[6]),n=!0)},p:de,d(i){i&&ye(t),n=!1,r()}}}function e1(e){let t,n,r,i,o,a,u,s,l,p,f,d;function y(w){e[7](w)}let m={};e[1]!==void 0&&(m.isPaused=e[1]),o=new Qm({props:m}),Wn.push(()=>Qi(o,"isPaused",y));let $=e[1]&&e[0]>0&&Au(e);return{c(){t=oe("a"),n=oe("div"),r=oe("div"),i=ve(),Ve(o.$$.fragment),u=ve(),$&&$.c(),fe(r,"role","progressbar"),fe(r,"aria-valuenow",e[0]),fe(r,"aria-valuemin",0),fe(r,"aria-valuemax",e[3]),nt(r,"--value",e[0]),nt(r,"--totalTime",e[3]),fe(r,"class","svelte-84lsos"),La(r,"indeterminate",e[2]),fe(n,"id","minitimer"),fe(n,"class","svelte-84lsos"),fe(t,"href","/timer")},m(w,g){$e(w,t,g),ne(t,n),ne(n,r),ne(n,i),Ke(o,n,null),ne(n,u),$&&$.m(n,null),p=!0,f||(d=Io(Lo.call(null,t)),f=!0)},p(w,[g]){(!p||g&1)&&fe(r,"aria-valuenow",w[0]),(!p||g&8)&&fe(r,"aria-valuemax",w[3]),(!p||g&1)&&nt(r,"--value",w[0]),(!p||g&8)&&nt(r,"--totalTime",w[3]),(!p||g&4)&&La(r,"indeterminate",w[2]);const v={};!a&&g&2&&(a=!0,v.isPaused=w[1],Yi(()=>a=!1)),o.$set(v),w[1]&&w[0]>0?$?$.p(w,g):($=Au(w),$.c(),$.m(n,null)):$&&($.d(1),$=null)},i(w){p||(Te(o.$$.fragment,w),kt(()=>{p&&(l&&l.end(1),s=yl(n,e[5],{key:"timer"}),s.start())}),p=!0)},o(w){ke(o.$$.fragment,w),s&&s.invalidate(),l=_l(n,e[4],{key:"timer"}),p=!1},d(w){w&&ye(t),Ye(o),$&&$.d(),w&&l&&l.end(),f=!1,d()}}}function t1(e,t,n){let{progress:r=0}=t,{totalTime:i=100}=t,{isPaused:o=!0}=t,{indeterminate:a=!1}=t,u;const[s,l]=Xm;function p(d){d.stopPropagation(),d.preventDefault(),n(0,r=0),n(2,a=!1)}Mu(()=>clearInterval(u));function f(d){o=d,n(1,o)}return e.$$set=d=>{"progress"in d&&n(0,r=d.progress),"totalTime"in d&&n(3,i=d.totalTime),"isPaused"in d&&n(1,o=d.isPaused),"indeterminate"in d&&n(2,a=d.indeterminate)},[r,o,a,i,s,l,p,f]}class n1 extends ot{constructor(t){super(),it(this,t,t1,e1,et,{progress:0,totalTime:3,isPaused:1,indeterminate:2})}}function r1(e){let t,n;return t=new qm({props:{currentTab:e[0]}}),{c(){Ve(t.$$.fragment)},m(r,i){Ke(t,r,i),n=!0},p(r,i){const o={};i&1&&(o.currentTab=r[0]),t.$set(o)},i(r){n||(Te(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ye(t,r)}}}function i1(e){let t,n,r,i;return t=new Wm({props:{$$slots:{default:[r1,({currentTab:o})=>({0:o}),({currentTab:o})=>o?1:0]},$$scope:{ctx:e}}}),r=new n1({}),{c(){Ve(t.$$.fragment),n=ve(),Ve(r.$$.fragment)},m(o,a){Ke(t,o,a),$e(o,n,a),Ke(r,o,a),i=!0},p(o,[a]){const u={};a&3&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)},i(o){i||(Te(t.$$.fragment,o),Te(r.$$.fragment,o),i=!0)},o(o){ke(t.$$.fragment,o),ke(r.$$.fragment,o),i=!1},d(o){Ye(t,o),o&&ye(n),Ye(r,o)}}}class o1 extends ot{constructor(t){super(),it(this,t,null,i1,et,{})}}class a1 extends ot{constructor(t){super(),it(this,t,null,null,et,{})}}function s1(e){let t,n;return t=new xl({props:{routes:e[0]}}),{c(){Ve(t.$$.fragment)},m(r,i){Ke(t,r,i),n=!0},p:de,i(r){n||(Te(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ye(t,r)}}}function u1(e){return hl("timer",Xr({})),[{"/":o1,"/timer/:task?":Ci({asyncComponent:()=>Ai(()=>import("./Timer-897c1461.js"),["assets/Timer-897c1461.js","assets/Timer-ef2a245c.css"])}),"/login":Ci({asyncComponent:()=>Ai(()=>import("./Login-db980c92.js"),["assets/Login-db980c92.js","assets/Login-0178d0e2.css"])}),"/test":Ci({asyncComponent:()=>Ai(()=>import("./DbTest-42a4374c.js"),[])}),"*":a1}]}class f1 extends ot{constructor(t){super(),it(this,t,u1,s1,et,{})}}new f1({target:document.getElementById("app")});export{Xt as A,Xm as B,km as C,Io as D,jt as E,d1 as F,ey as G,Rn as H,bm as I,r0 as J,Wu as K,Xn as L,l1 as M,Ou as N,ae as P,ot as S,ve as a,fe as b,$e as c,ne as d,oe as e,ye as f,Lu as g,Wn as h,it as i,Ve as j,nt as k,Me as l,Ke as m,de as n,Mu as o,Ma as p,c1 as q,dt as r,et as s,Te as t,kt as u,yl as v,ke as w,_l as x,Ye as y,mn as z};
