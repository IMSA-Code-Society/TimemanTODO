(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Qf="modulepreload",Vf=function(e){return"/TimemanTODO/"+e},Da={},$i=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Vf(o),o in Da)return;Da[o]=!0;const a=o.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!r)for(let g=i.length-1;g>=0;g--){const f=i[g];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Qf,a||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),a)return new Promise((g,f)=>{l.addEventListener("load",g),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function de(){}const Au=e=>e;function qn(e,t){for(const n in t)e[n]=t[n];return e}function Jf(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Su(e){return e()}function Na(){return Object.create(null)}function lt(e){e.forEach(Su)}function Jt(e){return typeof e=="function"}function Xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Zf(e){return Object.keys(e).length===0}function Cu(e,...t){if(e==null)return de;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Pr(e,t,n){e.$$.on_destroy.push(Cu(t,n))}function Xf(e,t,n,r){if(e){const i=Ou(e,t,n,r);return e[0](i)}}function Ou(e,t,n,r){return e[1]&&r?qn(n.ctx.slice(),e[1](r(t))):n.ctx}function el(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(t.dirty.length,i.length);for(let u=0;u<a;u+=1)o[u]=t.dirty[u]|i[u];return o}return t.dirty|i}return t.dirty}function tl(e,t,n,r,i,o){if(i){const a=Ou(t,n,r,o);e.p(a,i)}}function nl(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Po(e){return e&&Jt(e.destroy)?e.destroy:de}const ku=typeof window<"u";let xu=ku?()=>window.performance.now():()=>Date.now(),Fo=ku?e=>requestAnimationFrame(e):de;const ln=new Set;function ju(e){ln.forEach(t=>{t.c(e)||(ln.delete(t),t.f())}),ln.size!==0&&Fo(ju)}function Ru(e){let t;return ln.size===0&&Fo(ju),{promise:new Promise(n=>{ln.add(t={c:e,f:n})}),abort(){ln.delete(t)}}}function ne(e,t){e.appendChild(t)}function Pu(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function rl(e){const t=oe("style");return il(Pu(e),t),t.sheet}function il(e,t){return ne(e.head||e,t),t.sheet}function Te(e,t,n){e.insertBefore(t,n||null)}function ye(e){e.parentNode&&e.parentNode.removeChild(e)}function yn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function oe(e){return document.createElement(e)}function jt(e){return document.createTextNode(e)}function ve(){return jt(" ")}function Vn(){return jt("")}function Ne(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function n1(e){return function(t){return t.preventDefault(),e.call(this,t)}}function ce(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ol(e){return Array.from(e.childNodes)}function Jn(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ma(e,t){e.value=t??""}function tt(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Fr(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Fu(e){const t=e.querySelector(":checked");return t&&t.__value}function La(e,t,n){e.classList[n?"add":"remove"](t)}function Iu(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}function Ir(e,t){return new e(t)}const Dr=new Map;let Nr=0;function al(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function sl(e,t){const n={stylesheet:rl(t),rules:{}};return Dr.set(e,n),n}function Du(e,t,n,r,i,o,a,u=0){const s=16.666/r;let l=`{
`;for(let w=0;w<=1;w+=s){const v=t+(n-t)*o(w);l+=w*100+`%{${a(v,1-v)}}
`}const g=l+`100% {${a(n,1-n)}}
}`,f=`__svelte_${al(g)}_${u}`,p=Pu(e),{stylesheet:_,rules:m}=Dr.get(p)||sl(p,e);m[f]||(m[f]=!0,_.insertRule(`@keyframes ${f} ${g}`,_.cssRules.length));const $=e.style.animation||"";return e.style.animation=`${$?`${$}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Nr+=1,f}function Hi(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Nr-=i,Nr||ul())}function ul(){Fo(()=>{Nr||(Dr.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&ye(t)}),Dr.clear())})}let Hn;function wt(e){Hn=e}function Zn(){if(!Hn)throw new Error("Function called outside component initialization");return Hn}function cl(e){Zn().$$.after_update.push(e)}function Nu(e){Zn().$$.on_destroy.push(e)}function Mu(){const e=Zn();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Iu(t,n,{cancelable:r});return i.slice().forEach(a=>{a.call(e,o)}),!o.defaultPrevented}return!0}}function fl(e,t){return Zn().$$.context.set(e,t),t}function Ba(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const cn=[],Gn=[];let dn=[];const Gi=[],Lu=Promise.resolve();let zi=!1;function Bu(){zi||(zi=!0,Lu.then(Io))}function ll(){return Bu(),Lu}function kt(e){dn.push(e)}function Wi(e){Gi.push(e)}const Ei=new Set;let rn=0;function Io(){if(rn!==0)return;const e=Hn;do{try{for(;rn<cn.length;){const t=cn[rn];rn++,wt(t),dl(t.$$)}}catch(t){throw cn.length=0,rn=0,t}for(wt(null),cn.length=0,rn=0;Gn.length;)Gn.pop()();for(let t=0;t<dn.length;t+=1){const n=dn[t];Ei.has(n)||(Ei.add(n),n())}dn.length=0}while(cn.length);for(;Gi.length;)Gi.pop()();zi=!1,Ei.clear(),wt(e)}function dl(e){if(e.fragment!==null){e.update(),lt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(kt)}}function hl(e){const t=[],n=[];dn.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),dn=t}let xn;function Uu(){return xn||(xn=Promise.resolve(),xn.then(()=>{xn=null})),xn}function Mr(e,t,n){e.dispatchEvent(Iu(`${t?"intro":"outro"}${n}`))}const Sr=new Set;let Ct;function $n(){Ct={r:0,c:[],p:Ct}}function En(){Ct.r||lt(Ct.c),Ct=Ct.p}function be(e,t){e&&e.i&&(Sr.delete(e),e.i(t))}function ke(e,t,n,r){if(e&&e.o){if(Sr.has(e))return;Sr.add(e),Ct.c.push(()=>{Sr.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const qu={duration:0};function vl(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,a,u,s=0;function l(){a&&Hi(e,a)}function g(){const{delay:p=0,duration:_=300,easing:m=Au,tick:$=de,css:w}=i||qu;w&&(a=Du(e,0,1,_,p,m,w,s++)),$(0,1);const v=xu()+p,d=v+_;u&&u.abort(),o=!0,kt(()=>Mr(e,!0,"start")),u=Ru(c=>{if(o){if(c>=d)return $(1,0),Mr(e,!0,"end"),l(),o=!1;if(c>=v){const h=m((c-v)/_);$(h,1-h)}}return o})}let f=!1;return{start(){f||(f=!0,Hi(e),Jt(i)?(i=i(r),Uu().then(g)):g())},invalidate(){f=!1},end(){o&&(l(),o=!1)}}}function pl(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,a;const u=Ct;u.r+=1;function s(){const{delay:l=0,duration:g=300,easing:f=Au,tick:p=de,css:_}=i||qu;_&&(a=Du(e,1,0,g,l,f,_));const m=xu()+l,$=m+g;kt(()=>Mr(e,!1,"start")),Ru(w=>{if(o){if(w>=$)return p(0,1),Mr(e,!1,"end"),--u.r||lt(u.c),!1;if(w>=m){const v=f((w-m)/g);p(1-v,v)}}return o})}return Jt(i)?Uu().then(()=>{i=i(r),s()}):s(),{end(l){l&&i.tick&&i.tick(1,0),o&&(a&&Hi(e,a),o=!1)}}}function Ua(e,t){const n=t.token={};function r(i,o,a,u){if(t.token!==n)return;t.resolved=u;let s=t.ctx;a!==void 0&&(s=s.slice(),s[a]=u);const l=i&&(t.current=i)(s);let g=!1;t.block&&(t.blocks?t.blocks.forEach((f,p)=>{p!==o&&f&&($n(),ke(f,1,1,()=>{t.blocks[p]===f&&(t.blocks[p]=null)}),En())}):t.block.d(1),l.c(),be(l,1),l.m(t.mount(),t.anchor),g=!0),t.block=l,t.blocks&&(t.blocks[o]=l),g&&Io()}if(Jf(e)){const i=Zn();if(e.then(o=>{wt(i),r(t.then,1,t.value,o),wt(null)},o=>{if(wt(i),r(t.catch,2,t.error,o),wt(null),!t.hasCatch)throw o}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function gl(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function r1(e,t){e.d(1),t.delete(e.key)}function i1(e,t,n,r,i,o,a,u,s,l,g,f){let p=e.length,_=o.length,m=p;const $={};for(;m--;)$[e[m].key]=m;const w=[],v=new Map,d=new Map,c=[];for(m=_;m--;){const k=f(i,o,m),j=n(k);let P=a.get(j);P?r&&c.push(()=>P.p(k,t)):(P=l(j,k),P.c()),v.set(j,w[m]=P),j in $&&d.set(j,Math.abs(m-$[j]))}const h=new Set,y=new Set;function b(k){be(k,1),k.m(u,g),a.set(k.key,k),g=k.first,_--}for(;p&&_;){const k=w[_-1],j=e[p-1],P=k.key,L=j.key;k===j?(g=k.first,p--,_--):v.has(L)?!a.has(P)||h.has(P)?b(k):y.has(L)?p--:d.get(P)>d.get(L)?(y.add(P),b(k)):(h.add(L),p--):(s(j,a),p--)}for(;p--;){const k=e[p];v.has(k.key)||s(k,a)}for(;_;)b(w[_-1]);return lt(c),w}function Hu(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const a=e[o],u=t[o];if(u){for(const s in a)s in u||(r[s]=1);for(const s in u)i[s]||(n[s]=u[s],i[s]=1);e[o]=u}else for(const s in a)i[s]=1}for(const a in r)a in n||(n[a]=void 0);return n}function Gu(e){return typeof e=="object"&&e!==null?e:{}}const yl=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...yl];function Ki(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Qe(e){e&&e.c()}function We(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||kt(()=>{const a=e.$$.on_mount.map(Su).filter(Jt);e.$$.on_destroy?e.$$.on_destroy.push(...a):lt(a),e.$$.on_mount=[]}),o.forEach(kt)}function Ke(e,t){const n=e.$$;n.fragment!==null&&(hl(n.after_update),lt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function _l(e,t){e.$$.dirty[0]===-1&&(cn.push(e),Bu(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function rt(e,t,n,r,i,o,a,u=[-1]){const s=Hn;wt(e);const l=e.$$={fragment:null,ctx:[],props:o,update:de,not_equal:i,bound:Na(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Na(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};a&&a(l.root);let g=!1;if(l.ctx=n?n(e,t.props||{},(f,p,..._)=>{const m=_.length?_[0]:p;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),g&&_l(e,f)),p}):[],l.update(),g=!0,lt(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=ol(t.target);l.fragment&&l.fragment.l(f),f.forEach(ye)}else l.fragment&&l.fragment.c();t.intro&&be(e.$$.fragment),We(e,t.target,t.anchor,t.customElement),Io()}wt(s)}class it{$destroy(){Ke(this,1),this.$destroy=de}$on(t,n){if(!Jt(n))return de;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Zf(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ai(e){if(!e)throw Error("Parameter args is required");if(!e.component==!e.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(e.component&&(e.asyncComponent=()=>Promise.resolve(e.component)),typeof e.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(e.conditions){Array.isArray(e.conditions)||(e.conditions=[e.conditions]);for(let n=0;n<e.conditions.length;n++)if(!e.conditions[n]||typeof e.conditions[n]!="function")throw Error("Invalid parameter conditions["+n+"]")}return e.loadingComponent&&(e.asyncComponent.loading=e.loadingComponent,e.asyncComponent.loadingParams=e.loadingParams||void 0),{component:e.asyncComponent,userData:e.userData,conditions:e.conditions&&e.conditions.length?e.conditions:void 0,props:e.props&&Object.keys(e.props).length?e.props:{},_sveltesparouter:!0}}const on=[];function zu(e,t){return{subscribe:Jr(e,t).subscribe}}function Jr(e,t=de){let n;const r=new Set;function i(u){if(Xe(e,u)&&(e=u,n)){const s=!on.length;for(const l of r)l[1](),on.push(l,e);if(s){for(let l=0;l<on.length;l+=2)on[l][0](on[l+1]);on.length=0}}}function o(u){i(u(e))}function a(u,s=de){const l=[u,s];return r.add(l),r.size===1&&(n=t(i)||de),u(e),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:a}}function Zr(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return zu(n,a=>{let u=!1;const s=[];let l=0,g=de;const f=()=>{if(l)return;g();const _=t(r?s[0]:s,a);o?a(_):g=Jt(_)?_:de},p=i.map((_,m)=>Cu(_,$=>{s[m]=$,l&=~(1<<m),u&&f()},()=>{l|=1<<m}));return u=!0,f(),function(){lt(p),g(),u=!1}})}function ml(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,o,a=[],u="",s=e.split("/");for(s[0]||s.shift();i=s.shift();)n=i[0],n==="*"?(a.push("wild"),u+="/(.*)"):n===":"?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),u+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(u+=(~r?"?":"")+"\\"+i.substring(o))):u+="/"+i;return{keys:a,pattern:new RegExp("^"+u+(t?"(?=$|/)":"/?$"),"i")}}function wl(e){let t,n,r;const i=[e[2]];var o=e[0];function a(u){let s={};for(let l=0;l<i.length;l+=1)s=qn(s,i[l]);return{props:s}}return o&&(t=Ir(o,a()),t.$on("routeEvent",e[7])),{c(){t&&Qe(t.$$.fragment),n=Vn()},m(u,s){t&&We(t,u,s),Te(u,n,s),r=!0},p(u,s){const l=s&4?Hu(i,[Gu(u[2])]):{};if(s&1&&o!==(o=u[0])){if(t){$n();const g=t;ke(g.$$.fragment,1,0,()=>{Ke(g,1)}),En()}o?(t=Ir(o,a()),t.$on("routeEvent",u[7]),Qe(t.$$.fragment),be(t.$$.fragment,1),We(t,n.parentNode,n)):t=null}else o&&t.$set(l)},i(u){r||(t&&be(t.$$.fragment,u),r=!0)},o(u){t&&ke(t.$$.fragment,u),r=!1},d(u){u&&ye(n),t&&Ke(t,u)}}}function bl(e){let t,n,r;const i=[{params:e[1]},e[2]];var o=e[0];function a(u){let s={};for(let l=0;l<i.length;l+=1)s=qn(s,i[l]);return{props:s}}return o&&(t=Ir(o,a()),t.$on("routeEvent",e[6])),{c(){t&&Qe(t.$$.fragment),n=Vn()},m(u,s){t&&We(t,u,s),Te(u,n,s),r=!0},p(u,s){const l=s&6?Hu(i,[s&2&&{params:u[1]},s&4&&Gu(u[2])]):{};if(s&1&&o!==(o=u[0])){if(t){$n();const g=t;ke(g.$$.fragment,1,0,()=>{Ke(g,1)}),En()}o?(t=Ir(o,a()),t.$on("routeEvent",u[6]),Qe(t.$$.fragment),be(t.$$.fragment,1),We(t,n.parentNode,n)):t=null}else o&&t.$set(l)},i(u){r||(t&&be(t.$$.fragment,u),r=!0)},o(u){t&&ke(t.$$.fragment,u),r=!1},d(u){u&&ye(n),t&&Ke(t,u)}}}function Tl(e){let t,n,r,i;const o=[bl,wl],a=[];function u(s,l){return s[1]?0:1}return t=u(e),n=a[t]=o[t](e),{c(){n.c(),r=Vn()},m(s,l){a[t].m(s,l),Te(s,r,l),i=!0},p(s,[l]){let g=t;t=u(s),t===g?a[t].p(s,l):($n(),ke(a[g],1,1,()=>{a[g]=null}),En(),n=a[t],n?n.p(s,l):(n=a[t]=o[t](s),n.c()),be(n,1),n.m(r.parentNode,r))},i(s){i||(be(n),i=!0)},o(s){ke(n),i=!1},d(s){a[t].d(s),s&&ye(r)}}}function qa(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const Do=zu(null,function(t){t(qa());const n=()=>{t(qa())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});Zr(Do,e=>e.location);Zr(Do,e=>e.querystring);const Ha=Jr(void 0);function No(e,t){if(t=za(t),!e||!e.tagName||e.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Ga(e,t),{update(n){n=za(n),Ga(e,n)}}}function $l(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Ga(e,t){let n=t.href||e.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);e.setAttribute("href",n),e.addEventListener("click",r=>{r.preventDefault(),t.disabled||El(r.currentTarget.getAttribute("href"))})}function za(e){return e&&typeof e=="string"?{href:e}:e||{}}function El(e){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=e}function Al(e,t,n){let{routes:r={}}=t,{prefix:i=""}=t,{restoreScrollState:o=!1}=t;class a{constructor(y,b){if(!b||typeof b!="function"&&(typeof b!="object"||b._sveltesparouter!==!0))throw Error("Invalid component object");if(!y||typeof y=="string"&&(y.length<1||y.charAt(0)!="/"&&y.charAt(0)!="*")||typeof y=="object"&&!(y instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:k,keys:j}=ml(y);this.path=y,typeof b=="object"&&b._sveltesparouter===!0?(this.component=b.component,this.conditions=b.conditions||[],this.userData=b.userData,this.props=b.props||{}):(this.component=()=>Promise.resolve(b),this.conditions=[],this.props={}),this._pattern=k,this._keys=j}match(y){if(i){if(typeof i=="string")if(y.startsWith(i))y=y.substr(i.length)||"/";else return null;else if(i instanceof RegExp){const P=y.match(i);if(P&&P[0])y=y.substr(P[0].length)||"/";else return null}}const b=this._pattern.exec(y);if(b===null)return null;if(this._keys===!1)return b;const k={};let j=0;for(;j<this._keys.length;){try{k[this._keys[j]]=decodeURIComponent(b[j+1]||"")||null}catch{k[this._keys[j]]=null}j++}return k}async checkConditions(y){for(let b=0;b<this.conditions.length;b++)if(!await this.conditions[b](y))return!1;return!0}}const u=[];r instanceof Map?r.forEach((h,y)=>{u.push(new a(y,h))}):Object.keys(r).forEach(h=>{u.push(new a(h,r[h]))});let s=null,l=null,g={};const f=Mu();async function p(h,y){await ll(),f(h,y)}let _=null,m=null;o&&(m=h=>{h.state&&(h.state.__svelte_spa_router_scrollY||h.state.__svelte_spa_router_scrollX)?_=h.state:_=null},window.addEventListener("popstate",m),cl(()=>{$l(_)}));let $=null,w=null;const v=Do.subscribe(async h=>{$=h;let y=0;for(;y<u.length;){const b=u[y].match(h.location);if(!b){y++;continue}const k={route:u[y].path,location:h.location,querystring:h.querystring,userData:u[y].userData,params:b&&typeof b=="object"&&Object.keys(b).length?b:null};if(!await u[y].checkConditions(k)){n(0,s=null),w=null,p("conditionsFailed",k);return}p("routeLoading",Object.assign({},k));const j=u[y].component;if(w!=j){j.loading?(n(0,s=j.loading),w=j,n(1,l=j.loadingParams),n(2,g={}),p("routeLoaded",Object.assign({},k,{component:s,name:s.name,params:l}))):(n(0,s=null),w=null);const P=await j();if(h!=$)return;n(0,s=P&&P.default||P),w=j}b&&typeof b=="object"&&Object.keys(b).length?n(1,l=b):n(1,l=null),n(2,g=u[y].props),p("routeLoaded",Object.assign({},k,{component:s,name:s.name,params:l})).then(()=>{Ha.set(l)});return}n(0,s=null),w=null,Ha.set(void 0)});Nu(()=>{v(),m&&window.removeEventListener("popstate",m)});function d(h){Ba.call(this,e,h)}function c(h){Ba.call(this,e,h)}return e.$$set=h=>{"routes"in h&&n(3,r=h.routes),"prefix"in h&&n(4,i=h.prefix),"restoreScrollState"in h&&n(5,o=h.restoreScrollState)},e.$$.update=()=>{e.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[s,l,g,r,i,o,d,c]}class Sl extends it{constructor(t){super(),rt(this,t,Al,Tl,Xe,{routes:3,prefix:4,restoreScrollState:5})}}function Cl(e,t){const n=t.replace(/\((?!\?)/g,"(?:");return`${e}${n}\\s{0,5}(?:,?\\s{0,5}${n}){0,10}`}function Ol(e){let t;return e instanceof Array?t=[...e]:e instanceof Map?t=Array.from(e.keys()):t=Object.keys(e),t}function Tt(e){return`(?:${Ol(e).sort((n,r)=>r.length-n.length).join("|").replace(/\./g,"\\.")})`}var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mo(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(t,i);return new o}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Wu={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ge,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",a="second",u="minute",s="hour",l="day",g="week",f="month",p="quarter",_="year",m="date",$="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var D=["th","st","nd","rd"],F=K%100;return"["+K+(D[(F-20)%10]||D[F]||D[0])+"]"}},c=function(K,D,F){var U=String(K);return!U||U.length>=D?K:""+Array(D+1-U.length).join(F)+K},h={s:c,z:function(K){var D=-K.utcOffset(),F=Math.abs(D),U=Math.floor(F/60),E=F%60;return(D<=0?"+":"-")+c(U,2,"0")+":"+c(E,2,"0")},m:function K(D,F){if(D.date()<F.date())return-K(F,D);var U=12*(F.year()-D.year())+(F.month()-D.month()),E=D.clone().add(U,f),S=F-E<0,C=D.clone().add(U+(S?-1:1),f);return+(-(U+(F-E)/(S?E-C:C-E))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:f,y:_,w:g,d:l,D:m,h:s,m:u,s:a,ms:o,Q:p}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},y="en",b={};b[y]=d;var k=function(K){return K instanceof V},j=function K(D,F,U){var E;if(!D)return y;if(typeof D=="string"){var S=D.toLowerCase();b[S]&&(E=S),F&&(b[S]=F,E=S);var C=D.split("-");if(!E&&C.length>1)return K(C[0])}else{var x=D.name;b[x]=D,E=x}return!U&&E&&(y=E),E||!U&&y},P=function(K,D){if(k(K))return K.clone();var F=typeof D=="object"?D:{};return F.date=K,F.args=arguments,new V(F)},L=h;L.l=j,L.i=k,L.w=function(K,D){return P(K,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var V=function(){function K(F){this.$L=j(F.locale,null,!0),this.parse(F)}var D=K.prototype;return D.parse=function(F){this.$d=function(U){var E=U.date,S=U.utc;if(E===null)return new Date(NaN);if(L.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var C=E.match(w);if(C){var x=C[2]-1||0,I=(C[7]||"0").substring(0,3);return S?new Date(Date.UTC(C[1],x,C[3]||1,C[4]||0,C[5]||0,C[6]||0,I)):new Date(C[1],x,C[3]||1,C[4]||0,C[5]||0,C[6]||0,I)}}return new Date(E)}(F),this.$x=F.x||{},this.init()},D.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},D.$utils=function(){return L},D.isValid=function(){return this.$d.toString()!==$},D.isSame=function(F,U){var E=P(F);return this.startOf(U)<=E&&E<=this.endOf(U)},D.isAfter=function(F,U){return P(F)<this.startOf(U)},D.isBefore=function(F,U){return this.endOf(U)<P(F)},D.$g=function(F,U,E){return L.u(F)?this[U]:this.set(E,F)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(F,U){var E=this,S=!!L.u(U)||U,C=L.p(F),x=function(T,R){var N=L.w(E.$u?Date.UTC(E.$y,R,T):new Date(E.$y,R,T),E);return S?N:N.endOf(l)},I=function(T,R){return L.w(E.toDate()[T].apply(E.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(R)),E)},B=this.$W,A=this.$M,M=this.$D,H="set"+(this.$u?"UTC":"");switch(C){case _:return S?x(1,0):x(31,11);case f:return S?x(1,A):x(0,A+1);case g:var W=this.$locale().weekStart||0,O=(B<W?B+7:B)-W;return x(S?M-O:M+(6-O),A);case l:case m:return I(H+"Hours",0);case s:return I(H+"Minutes",1);case u:return I(H+"Seconds",2);case a:return I(H+"Milliseconds",3);default:return this.clone()}},D.endOf=function(F){return this.startOf(F,!1)},D.$set=function(F,U){var E,S=L.p(F),C="set"+(this.$u?"UTC":""),x=(E={},E[l]=C+"Date",E[m]=C+"Date",E[f]=C+"Month",E[_]=C+"FullYear",E[s]=C+"Hours",E[u]=C+"Minutes",E[a]=C+"Seconds",E[o]=C+"Milliseconds",E)[S],I=S===l?this.$D+(U-this.$W):U;if(S===f||S===_){var B=this.clone().set(m,1);B.$d[x](I),B.init(),this.$d=B.set(m,Math.min(this.$D,B.daysInMonth())).$d}else x&&this.$d[x](I);return this.init(),this},D.set=function(F,U){return this.clone().$set(F,U)},D.get=function(F){return this[L.p(F)]()},D.add=function(F,U){var E,S=this;F=Number(F);var C=L.p(U),x=function(A){var M=P(S);return L.w(M.date(M.date()+Math.round(A*F)),S)};if(C===f)return this.set(f,this.$M+F);if(C===_)return this.set(_,this.$y+F);if(C===l)return x(1);if(C===g)return x(7);var I=(E={},E[u]=r,E[s]=i,E[a]=n,E)[C]||1,B=this.$d.getTime()+F*I;return L.w(B,this)},D.subtract=function(F,U){return this.add(-1*F,U)},D.format=function(F){var U=this,E=this.$locale();if(!this.isValid())return E.invalidDate||$;var S=F||"YYYY-MM-DDTHH:mm:ssZ",C=L.z(this),x=this.$H,I=this.$m,B=this.$M,A=E.weekdays,M=E.months,H=function(R,N,Y,G){return R&&(R[N]||R(U,S))||Y[N].slice(0,G)},W=function(R){return L.s(x%12||12,R,"0")},O=E.meridiem||function(R,N,Y){var G=R<12?"AM":"PM";return Y?G.toLowerCase():G},T={YY:String(this.$y).slice(-2),YYYY:this.$y,M:B+1,MM:L.s(B+1,2,"0"),MMM:H(E.monthsShort,B,M,3),MMMM:H(M,B),D:this.$D,DD:L.s(this.$D,2,"0"),d:String(this.$W),dd:H(E.weekdaysMin,this.$W,A,2),ddd:H(E.weekdaysShort,this.$W,A,3),dddd:A[this.$W],H:String(x),HH:L.s(x,2,"0"),h:W(1),hh:W(2),a:O(x,I,!0),A:O(x,I,!1),m:String(I),mm:L.s(I,2,"0"),s:String(this.$s),ss:L.s(this.$s,2,"0"),SSS:L.s(this.$ms,3,"0"),Z:C};return S.replace(v,function(R,N){return N||T[R]||C.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(F,U,E){var S,C=L.p(U),x=P(F),I=(x.utcOffset()-this.utcOffset())*r,B=this-x,A=L.m(this,x);return A=(S={},S[_]=A/12,S[f]=A,S[p]=A/3,S[g]=(B-I)/6048e5,S[l]=(B-I)/864e5,S[s]=B/i,S[u]=B/r,S[a]=B/n,S)[C]||B,E?A:L.a(A)},D.daysInMonth=function(){return this.endOf(f).$D},D.$locale=function(){return b[this.$L]},D.locale=function(F,U){if(!F)return this.$L;var E=this.clone(),S=j(F,U,!0);return S&&(E.$L=S),E},D.clone=function(){return L.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},K}(),J=V.prototype;return P.prototype=J,[["$ms",o],["$s",a],["$m",u],["$H",s],["$W",l],["$M",f],["$y",_],["$D",m]].forEach(function(K){J[K[1]]=function(D){return this.$g(D,K[0],K[1])}}),P.extend=function(K,D){return K.$i||(K(D,V,P),K.$i=!0),P},P.locale=j,P.isDayjs=k,P.unix=function(K){return P(1e3*K)},P.en=b[y],P.Ls=b,P.p={},P})})(Wu);var kl=Wu.exports;const Ze=ot(kl);function Ku(e){return e<100&&(e>50?e=e+1900:e=e+2e3),e}function Xr(e,t,n){const r=Ze(e);let i=r;i=i.month(n-1),i=i.date(t),i=i.year(r.year());const o=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(o.diff(r))<Math.abs(i.diff(r))?i=o:Math.abs(a.diff(r))<Math.abs(i.diff(r))&&(i=a),i.year()}const Yu={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Qu={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Rt={...Qu,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Yi={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},Qi={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},ei={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"},xl=`(?:${Tt(Yi)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function jl(e){const t=e.toLowerCase();return Yi[t]!==void 0?Yi[t]:t==="a"||t==="an"||t=="the"?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}const Lr=`(?:${Tt(Qi)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Br(e){let t=e.toLowerCase();return Qi[t]!==void 0?Qi[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const Lo="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function Bo(e){if(/BE/i.test(e))return e=e.replace(/BE/i,""),parseInt(e)-543;if(/BCE?/i.test(e))return e=e.replace(/BCE?/i,""),-parseInt(e);if(/(AD|CE)/i.test(e))return e=e.replace(/(AD|CE)/i,""),parseInt(e);const t=parseInt(e);return Ku(t)}const Vu=`(${xl})\\s{0,3}(${Tt(ei)})`,Wa=new RegExp(Vu,"i"),Zt=Cl("(?:(?:about|around)\\s{0,3})?",Vu);function Xn(e){const t={};let n=e,r=Wa.exec(n);for(;r;)Rl(t,r),n=n.substring(r[0].length).trim(),r=Wa.exec(n);return t}function Rl(e,t){const n=jl(t[1]),r=ei[t[2].toLowerCase()];e[r]=n}var Ju={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ge,function(){var n="month",r="quarter";return function(i,o){var a=o.prototype;a.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var u=a.add;a.add=function(l,g){return l=Number(l),this.$utils().p(g)===r?this.add(3*l,n):u.bind(this)(l,g)};var s=a.startOf;a.startOf=function(l,g){var f=this.$utils(),p=!!f.u(g)||g;if(f.p(l)===r){var _=this.quarter()-1;return p?this.month(3*_).startOf(n).startOf("day"):this.month(3*_+2).endOf(n).endOf("day")}return s.bind(this)(l,g)}}})})(Ju);var Pl=Ju.exports;const Fl=ot(Pl);function Il(e,t){t=t.add(1,"day"),Bn(e,t),ti(e,t)}function Xt(e,t){e.assign("day",t.date()),e.assign("month",t.month()+1),e.assign("year",t.year())}function Zu(e,t){e.assign("hour",t.hour()),e.assign("minute",t.minute()),e.assign("second",t.second()),e.assign("millisecond",t.millisecond()),e.get("hour")<12?e.assign("meridiem",pe.AM):e.assign("meridiem",pe.PM)}function Bn(e,t){e.imply("day",t.date()),e.imply("month",t.month()+1),e.imply("year",t.year())}function ti(e,t){e.imply("hour",t.hour()),e.imply("minute",t.minute()),e.imply("second",t.second()),e.imply("millisecond",t.millisecond())}const Dl={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Nl(e){return e==null?null:typeof e=="number"?e:Dl[e]??null}Ze.extend(Fl);class Xu{constructor(t){t=t??new Date,t instanceof Date?this.instant=t:(this.instant=t.instant??new Date,this.timezoneOffset=Nl(t.timezone))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(t,n){(!t||t.getTime()<0)&&(t=new Date);const r=-t.getTimezoneOffset(),i=n??this.timezoneOffset??r;return r-i}}class Ce{constructor(t,n){if(this.reference=t,this.knownValues={},this.impliedValues={},n)for(const i in n)this.knownValues[i]=n[i];const r=Ze(t.instant);this.imply("day",r.date()),this.imply("month",r.month()+1),this.imply("year",r.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(t){return t in this.knownValues?this.knownValues[t]:t in this.impliedValues?this.impliedValues[t]:null}isCertain(t){return t in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(t,n){return t in this.knownValues?this:(this.impliedValues[t]=n,this)}assign(t,n){return this.knownValues[t]=n,delete this.impliedValues[t],this}delete(t){delete this.knownValues[t],delete this.impliedValues[t]}clone(){const t=new Ce(this.reference);t.knownValues={},t.impliedValues={};for(const n in this.knownValues)t.knownValues[n]=this.knownValues[n];for(const n in this.impliedValues)t.impliedValues[n]=this.impliedValues[n];return t}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const t=this.dateWithoutTimezoneAdjustment();return!(t.getFullYear()!==this.get("year")||t.getMonth()!==this.get("month")-1||t.getDate()!==this.get("day")||this.get("hour")!=null&&t.getHours()!=this.get("hour")||this.get("minute")!=null&&t.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Ze(this.date())}date(){const t=this.dateWithoutTimezoneAdjustment(),n=this.reference.getSystemTimezoneAdjustmentMinute(t,this.get("timezoneOffset"));return new Date(t.getTime()+n*6e4)}dateWithoutTimezoneAdjustment(){const t=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return t.setFullYear(this.get("year")),t}static createRelativeFromReference(t,n){let r=Ze(t.instant);for(const o in n)r=r.add(n[o],o);const i=new Ce(t);return n.hour||n.minute||n.second?(Zu(i,r),Xt(i,r),t.timezoneOffset!==null&&i.assign("timezoneOffset",-t.instant.getTimezoneOffset())):(ti(i,r),t.timezoneOffset!==null&&i.imply("timezoneOffset",-t.instant.getTimezoneOffset()),n.d?(i.assign("day",r.date()),i.assign("month",r.month()+1),i.assign("year",r.year())):(n.week&&i.imply("weekday",r.day()),i.imply("day",r.date()),n.month?(i.assign("month",r.month()+1),i.assign("year",r.year())):(i.imply("month",r.month()+1),n.year?i.assign("year",r.year()):i.imply("year",r.year())))),i}}class er{constructor(t,n,r,i,o){this.reference=t,this.refDate=t.instant,this.index=n,this.text=r,this.start=i||new Ce(t),this.end=o}clone(){const t=new er(this.reference,this.index,this.text);return t.start=this.start?this.start.clone():null,t.end=this.end?this.end.clone():null,t}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}}class Je{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(t){const n=this.innerPattern(t);return n==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${n.source}`,n.flags),this.cachedInnerPattern=n,this.cachedPattern)}extract(t,n){const r=n[1]??"";n.index=n.index+r.length,n[0]=n[0].substring(r.length);for(let i=2;i<n.length;i++)n[i-1]=n[i];return this.innerExtract(t,n)}}const Ml=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Zt})(?=\\W|$)`,"i"),Ll=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Zt})(?=\\W|$)`,"i");class Bl extends Je{innerPattern(t){return t.option.forwardDate?Ll:Ml}innerExtract(t,n){const r=Xn(n[1]);return Ce.createRelativeFromReference(t.reference,r)}}const Ul=new RegExp(`(?:on\\s{0,3})?(${Lr})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${Lr}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${Tt(Rt)})(?:(?:-|/|,?\\s{0,3})(${Lo}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Ka=1,Ya=2,ql=3,Qa=4;class Hl extends Je{innerPattern(){return Ul}innerExtract(t,n){const r=t.createParsingResult(n.index,n[0]),i=Rt[n[ql].toLowerCase()],o=Br(n[Ka]);if(o>31)return n.index=n.index+n[Ka].length,null;if(r.start.assign("month",i),r.start.assign("day",o),n[Qa]){const a=Bo(n[Qa]);r.start.assign("year",a)}else{const a=Xr(t.refDate,o,i);r.start.imply("year",a)}if(n[Ya]){const a=Br(n[Ya]);r.end=r.start.clone(),r.end.assign("day",a)}return r}}const Gl=new RegExp(`(${Tt(Rt)})(?:-|/|\\s*,?\\s*)(${Lr})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Lr})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Lo}))?(?=\\W|$)(?!\\:\\d)`,"i"),zl=1,Wl=2,Va=3,Ja=4;class Kl extends Je{innerPattern(){return Gl}innerExtract(t,n){const r=Rt[n[zl].toLowerCase()],i=Br(n[Wl]);if(i>31)return null;const o=t.createParsingComponents({day:i,month:r});if(n[Ja]){const s=Bo(n[Ja]);o.assign("year",s)}else{const s=Xr(t.refDate,i,r);o.imply("year",s)}if(!n[Va])return o;const a=Br(n[Va]),u=t.createParsingResult(n.index,n[0]);return u.start=o,u.end=o.clone(),u.end.assign("day",a),u}}const Yl=new RegExp(`((?:in)\\s*)?(${Tt(Rt)})\\s*(?:[,-]?\\s*(${Lo})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),Ql=1,Vl=2,Za=3;class Jl extends Je{innerPattern(){return Yl}innerExtract(t,n){const r=n[Vl].toLowerCase();if(n[0].length<=3&&!Qu[r])return null;const i=t.createParsingResult(n.index+(n[Ql]||"").length,n.index+n[0].length);i.start.imply("day",1);const o=Rt[r];if(i.start.assign("month",o),n[Za]){const a=Bo(n[Za]);i.start.assign("year",a)}else{const a=Xr(t.refDate,1,o);i.start.imply("year",a)}return i}}const Zl=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${Tt(Rt)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Xl=1,ed=2,Xa=3,td=4;class nd extends Je{innerPattern(){return Zl}innerExtract(t,n){const r=n[Xa]?parseInt(n[Xa]):Rt[n[ed].toLowerCase()];if(r<1||r>12)return null;const i=parseInt(n[Xl]);return{day:parseInt(n[td]),month:r,year:i}}}const rd=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),id=1,od=2;class ad extends Je{innerPattern(){return rd}innerExtract(t,n){const r=parseInt(n[od]),i=parseInt(n[id]);return t.createParsingComponents().imply("day",1).assign("month",i).assign("year",r)}}function sd(e,t,n,r){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${n}`,r)}function ud(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}const es=2,an=3,_r=4,mr=5,jn=6;class cd{constructor(t=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=t}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(t){return this.getPrimaryTimePatternThroughCache()}extract(t,n){const r=this.extractPrimaryTimeComponents(t,n);if(!r)return n.index+=n[0].length,null;const i=n.index+n[1].length,o=n[0].substring(n[1].length),a=t.createParsingResult(i,o,r);n.index+=n[0].length;const u=t.text.substring(n.index),l=this.getFollowingTimePatternThroughCache().exec(u);return o.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(t,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(t,n,r=!1){const i=t.createParsingComponents();let o=0,a=null,u=parseInt(n[es]);if(u>100){if(this.strictMode||n[an]!=null)return null;o=u%100,u=Math.floor(u/100)}if(u>24)return null;if(n[an]!=null){if(n[an].length==1&&!n[jn])return null;o=parseInt(n[an])}if(o>=60)return null;if(u>12&&(a=pe.PM),n[jn]!=null){if(u>12)return null;const s=n[jn][0].toLowerCase();s=="a"&&(a=pe.AM,u==12&&(u=0)),s=="p"&&(a=pe.PM,u!=12&&(u+=12))}if(i.assign("hour",u),i.assign("minute",o),a!==null?i.assign("meridiem",a):u<12?i.imply("meridiem",pe.AM):i.imply("meridiem",pe.PM),n[mr]!=null){const s=parseInt(n[mr].substring(0,3));if(s>=1e3)return null;i.assign("millisecond",s)}if(n[_r]!=null){const s=parseInt(n[_r]);if(s>=60)return null;i.assign("second",s)}return i}extractFollowingTimeComponents(t,n,r){const i=t.createParsingComponents();if(n[mr]!=null){const s=parseInt(n[mr].substring(0,3));if(s>=1e3)return null;i.assign("millisecond",s)}if(n[_r]!=null){const s=parseInt(n[_r]);if(s>=60)return null;i.assign("second",s)}let o=parseInt(n[es]),a=0,u=-1;if(n[an]!=null?a=parseInt(n[an]):o>100&&(a=o%100,o=Math.floor(o/100)),a>=60||o>24)return null;if(o>=12&&(u=pe.PM),n[jn]!=null){if(o>12)return null;const s=n[jn][0].toLowerCase();s=="a"&&(u=pe.AM,o==12&&(o=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),s=="p"&&(u=pe.PM,o!=12&&(o+=12)),r.start.isCertain("meridiem")||(u==pe.AM?(r.start.imply("meridiem",pe.AM),r.start.get("hour")==12&&r.start.assign("hour",0)):(r.start.imply("meridiem",pe.PM),r.start.get("hour")!=12&&r.start.assign("hour",r.start.get("hour")+12)))}return i.assign("hour",o),i.assign("minute",a),u>=0?i.assign("meridiem",u):r.start.isCertain("meridiem")&&r.start.get("hour")>12?r.start.get("hour")-12>o?i.imply("meridiem",pe.AM):o<=12&&(i.assign("hour",o+12),i.assign("meridiem",pe.PM)):o>12?i.imply("meridiem",pe.PM):o<=12&&i.imply("meridiem",pe.AM),i.date().getTime()<r.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(t){if(t.text.match(/^\d$/)||t.text.match(/^\d\d\d+$/)||t.text.match(/\d[apAP]$/))return null;const n=t.text.match(/[^\d:.](\d[\d.]+)$/);if(n){const r=n[1];if(this.strictMode||r.includes(".")&&!r.match(/\d(\.\d{2})+$/)||parseInt(r)>24)return null}return t}checkAndReturnWithFollowingPattern(t){if(t.text.match(/^\d+-\d+$/))return null;const n=t.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(n){if(this.strictMode)return null;const r=n[1],i=n[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;const o=parseInt(i),a=parseInt(r);if(o>24||a>24)return null}return t}getPrimaryTimePatternThroughCache(){const t=this.primaryPrefix(),n=this.primarySuffix();return this.cachedPrimaryPrefix===t&&this.cachedPrimarySuffix===n?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=sd(this.primaryPatternLeftBoundary(),t,n,this.patternFlags()),this.cachedPrimaryPrefix=t,this.cachedPrimarySuffix=n,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){const t=this.followingPhase(),n=this.followingSuffix();return this.cachedFollowingPhase===t&&this.cachedFollowingSuffix===n?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=ud(t,n),this.cachedFollowingPhase=t,this.cachedFollowingSuffix=n,this.cachedFollowingTimePatten)}}class fd extends cd{constructor(t){super(t)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(t,n){const r=super.extractPrimaryTimeComponents(t,n);if(r){if(n[0].endsWith("night")){const i=r.get("hour");i>=6&&i<12?(r.assign("hour",r.get("hour")+12),r.assign("meridiem",pe.PM)):i<6&&r.assign("meridiem",pe.AM)}if(n[0].endsWith("afternoon")){r.assign("meridiem",pe.PM);const i=r.get("hour");i>=0&&i<=6&&r.assign("hour",r.get("hour")+12)}n[0].endsWith("morning")&&(r.assign("meridiem",pe.AM),r.get("hour")<12&&r.assign("hour",r.get("hour")))}return r}}function Uo(e){const t={};for(const n in e)t[n]=-e[n];return t}function ld(e,t){const n=e.clone();let r=e.dayjs();for(const i in t)r=r.add(t[i],i);return("day"in t||"d"in t||"week"in t||"month"in t||"year"in t)&&(n.imply("day",r.date()),n.imply("month",r.month()+1),n.imply("year",r.year())),("second"in t||"minute"in t||"hour"in t)&&(n.imply("second",r.second()),n.imply("minute",r.minute()),n.imply("hour",r.hour())),n}const dd=new RegExp(`(${Zt})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),hd=new RegExp(`(${Zt})\\s{0,5}ago(?=(?:\\W|$))`,"i");class vd extends Je{constructor(t){super(),this.strictMode=t}innerPattern(){return this.strictMode?hd:dd}innerExtract(t,n){const r=Xn(n[1]),i=Uo(r);return Ce.createRelativeFromReference(t.reference,i)}}const pd=new RegExp(`(${Zt})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),gd=new RegExp("("+Zt+")(later|from now)(?=(?:\\W|$))","i"),yd=1;class _d extends Je{constructor(t){super(),this.strictMode=t}innerPattern(){return this.strictMode?gd:pd}innerExtract(t,n){const r=Xn(n[yd]);return Ce.createRelativeFromReference(t.reference,r)}}class md{refine(t,n){return n.filter(r=>this.isValid(t,r))}}class ni{refine(t,n){if(n.length<2)return n;const r=[];let i=n[0],o=null;for(let a=1;a<n.length;a++){o=n[a];const u=t.text.substring(i.index+i.text.length,o.index);if(!this.shouldMergeResults(u,i,o,t))r.push(i),i=o;else{const s=i,l=o,g=this.mergeResults(u,s,l,t);t.debug(()=>{console.log(`${this.constructor.name} merged ${s} and ${l} into ${g}`)}),i=g}}return i!=null&&r.push(i),r}}class wd extends ni{shouldMergeResults(t,n,r){return!n.end&&!r.end&&t.match(this.patternBetween())!=null}mergeResults(t,n,r){if(!n.start.isOnlyWeekdayComponent()&&!r.start.isOnlyWeekdayComponent()&&(r.start.getCertainComponents().forEach(o=>{n.start.isCertain(o)||n.start.assign(o,r.start.get(o))}),n.start.getCertainComponents().forEach(o=>{r.start.isCertain(o)||r.start.assign(o,n.start.get(o))})),n.start.date().getTime()>r.start.date().getTime()){let o=n.start.dayjs(),a=r.start.dayjs();n.start.isOnlyWeekdayComponent()&&o.add(-7,"days").isBefore(a)?(o=o.add(-7,"days"),n.start.imply("day",o.date()),n.start.imply("month",o.month()+1),n.start.imply("year",o.year())):r.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(o)?(a=a.add(7,"days"),r.start.imply("day",a.date()),r.start.imply("month",a.month()+1),r.start.imply("year",a.year())):[r,n]=[n,r]}const i=n.clone();return i.start=n.start,i.end=r.start,i.index=Math.min(n.index,r.index),n.index<r.index?i.text=n.text+t+r.text:i.text=r.text+t+n.text,i}}class bd extends wd{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function ts(e,t){const n=e.clone(),r=e.start,i=t.start;if(n.start=ns(r,i),e.end!=null||t.end!=null){const o=e.end==null?e.start:e.end,a=t.end==null?t.start:t.end,u=ns(o,a);if(e.end==null&&u.date().getTime()<n.start.date().getTime()){const s=u.dayjs().add(1,"day");u.isCertain("day")?Xt(u,s):Bn(u,s)}n.end=u}return n}function ns(e,t){const n=e.clone();return t.isCertain("hour")?(n.assign("hour",t.get("hour")),n.assign("minute",t.get("minute")),t.isCertain("second")?(n.assign("second",t.get("second")),t.isCertain("millisecond")?n.assign("millisecond",t.get("millisecond")):n.imply("millisecond",t.get("millisecond"))):(n.imply("second",t.get("second")),n.imply("millisecond",t.get("millisecond")))):(n.imply("hour",t.get("hour")),n.imply("minute",t.get("minute")),n.imply("second",t.get("second")),n.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&n.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?n.assign("meridiem",t.get("meridiem")):t.get("meridiem")!=null&&n.get("meridiem")==null&&n.imply("meridiem",t.get("meridiem")),n.get("meridiem")==pe.PM&&n.get("hour")<12&&(t.isCertain("hour")?n.assign("hour",n.get("hour")+12):n.imply("hour",n.get("hour")+12)),n}class Td extends ni{shouldMergeResults(t,n,r){return(n.start.isOnlyDate()&&r.start.isOnlyTime()||r.start.isOnlyDate()&&n.start.isOnlyTime())&&t.match(this.patternBetween())!=null}mergeResults(t,n,r){const i=n.start.isOnlyDate()?ts(n,r):ts(r,n);return i.index=n.index,i.text=n.text+t+r.text,i}}class $d extends Td{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}}const Ed=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Ad={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};class Sd{constructor(t){this.timezone={...Ad,...t}}refine(t,n){const r=t.option.timezones??{};return n.forEach(i=>{const o=t.text.substring(i.index+i.text.length),a=Ed.exec(o);if(!a)return;const u=a[1].toUpperCase(),s=r[u]??this.timezone[u]??null;if(s===null)return;t.debug(()=>{console.log(`Extracting timezone: '${u}' into: ${s} for: ${i.start}`)});const l=i.start.get("timezoneOffset");l!==null&&s!=l&&(i.start.isCertain("timezoneOffset")||u!=a[1])||i.start.isOnlyDate()&&u!=a[1]||(i.text+=a[0],i.start.isCertain("timezoneOffset")||i.start.assign("timezoneOffset",s),i.end!=null&&!i.end.isCertain("timezoneOffset")&&i.end.assign("timezoneOffset",s))}),n}}const Cd=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Od=1,kd=2,xd=3;class jd{refine(t,n){return n.forEach(function(r){if(r.start.isCertain("timezoneOffset"))return;const i=t.text.substring(r.index+r.text.length),o=Cd.exec(i);if(!o)return;t.debug(()=>{console.log(`Extracting timezone: '${o[0]}' into : ${r}`)});const a=parseInt(o[kd]),u=parseInt(o[xd]||"0");let s=a*60+u;s>14*60||(o[Od]==="-"&&(s=-s),r.end!=null&&r.end.assign("timezoneOffset",s),r.start.assign("timezoneOffset",s),r.text+=o[0])}),n}}class rs{refine(t,n){if(n.length<2)return n;const r=[];let i=n[0];for(let o=1;o<n.length;o++){const a=n[o];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(r.push(i),i=a)}return i!=null&&r.push(i),r}}class Rd{refine(t,n){return t.option.forwardDate&&n.forEach(function(r){let i=Ze(t.refDate);if(r.start.isOnlyTime()&&i.isAfter(r.start.dayjs())&&(i=i.add(1,"day"),Bn(r.start,i),r.end&&r.end.isOnlyTime()&&(Bn(r.end,i),r.start.dayjs().isAfter(r.end.dayjs())&&(i=i.add(1,"day"),Bn(r.end,i)))),r.start.isOnlyDayMonthComponent()&&i.isAfter(r.start.dayjs()))for(let o=0;o<3&&i.isAfter(r.start.dayjs());o++)r.start.imply("year",r.start.get("year")+1),t.debug(()=>{console.log(`Forward yearly adjusted for ${r} (${r.start})`)}),r.end&&!r.end.isCertain("year")&&(r.end.imply("year",r.end.get("year")+1),t.debug(()=>{console.log(`Forward yearly adjusted for ${r} (${r.end})`)}));r.start.isOnlyWeekdayComponent()&&i.isAfter(r.start.dayjs())&&(i.day()>=r.start.get("weekday")?i=i.day(r.start.get("weekday")+7):i=i.day(r.start.get("weekday")),r.start.imply("day",i.date()),r.start.imply("month",i.month()+1),r.start.imply("year",i.year()),t.debug(()=>{console.log(`Forward weekly adjusted for ${r} (${r.start})`)}),r.end&&r.end.isOnlyWeekdayComponent()&&(i.day()>r.end.get("weekday")?i=i.day(r.end.get("weekday")+7):i=i.day(r.end.get("weekday")),r.end.imply("day",i.date()),r.end.imply("month",i.month()+1),r.end.imply("year",i.year()),t.debug(()=>{console.log(`Forward weekly adjusted for ${r} (${r.end})`)})))}),n}}class Pd extends md{constructor(t){super(),this.strictMode=t}isValid(t,n){return n.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(t.debug(()=>{console.log(`Removing unlikely result '${n.text}'`)}),!1):n.start.isValidDate()?n.end&&!n.end.isValidDate()?(t.debug(()=>{console.log(`Removing invalid result: ${n} (${n.end})`)}),!1):this.strictMode?this.isStrictModeValid(t,n):!0:(t.debug(()=>{console.log(`Removing invalid result: ${n} (${n.start})`)}),!1)}isStrictModeValid(t,n){return n.start.isOnlyWeekdayComponent()?(t.debug(()=>{console.log(`(Strict) Removing weekday only component: ${n} (${n.end})`)}),!1):n.start.isOnlyTime()&&(!n.start.isCertain("hour")||!n.start.isCertain("minute"))?(t.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${n} (${n.end})`)}),!1):!0}}const Fd=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Id=1,Dd=2,Nd=3,is=4,Md=5,os=6,as=7,ss=8,us=9;class Ld extends Je{innerPattern(){return Fd}innerExtract(t,n){const r={};if(r.year=parseInt(n[Id]),r.month=parseInt(n[Dd]),r.day=parseInt(n[Nd]),n[is]!=null)if(r.hour=parseInt(n[is]),r.minute=parseInt(n[Md]),n[os]!=null&&(r.second=parseInt(n[os])),n[as]!=null&&(r.millisecond=parseInt(n[as])),n[ss]==null)r.timezoneOffset=0;else{const i=parseInt(n[ss]);let o=0;n[us]!=null&&(o=parseInt(n[us]));let a=i*60;a<0?a-=o:a+=o,r.timezoneOffset=a}return r}}class Bd extends ni{mergeResults(t,n,r){const i=r.clone();return i.index=n.index,i.text=n.text+t+i.text,i.start.assign("weekday",n.start.get("weekday")),i.end&&i.end.assign("weekday",n.start.get("weekday")),i}shouldMergeResults(t,n,r){return n.start.isOnlyWeekdayComponent()&&!n.start.isCertain("hour")&&r.start.isCertain("day")&&t.match(/^,?\s*$/)!=null}}function Ud(e,t=!1){return e.parsers.unshift(new Ld),e.refiners.unshift(new Bd),e.refiners.unshift(new Sd),e.refiners.unshift(new jd),e.refiners.unshift(new rs),e.refiners.push(new rs),e.refiners.push(new Rd),e.refiners.push(new Pd(t)),e}function qd(e){const t=Ze(e.instant),n=new Ce(e,{});return Xt(n,t),Zu(n,t),e.timezoneOffset!==null&&n.assign("timezoneOffset",t.utcOffset()),n}function Hd(e){const t=Ze(e.instant),n=new Ce(e,{});return Xt(n,t),ti(n,t),n}function Gd(e){return zd(e,1)}function zd(e,t){return ec(e,-t)}function Wd(e){return ec(e,1)}function ec(e,t){let n=Ze(e.instant);const r=new Ce(e,{});return n=n.add(t,"day"),Xt(r,n),ti(r,n),r}function Kd(e,t=22){const n=Ze(e.instant),r=new Ce(e,{});return r.imply("hour",t),r.imply("meridiem",pe.PM),Xt(r,n),r}function Yd(e,t=20){const n=new Ce(e,{});return n.imply("meridiem",pe.PM),n.imply("hour",t),n}function Qd(e){const t=new Ce(e,{}),n=Ze(e.instant);return n.hour()>2&&Il(t,n),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t}function Vd(e,t=6){const n=new Ce(e,{});return n.imply("meridiem",pe.AM),n.imply("hour",t),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n}function Jd(e,t=15){const n=new Ce(e,{});return n.imply("meridiem",pe.PM),n.imply("hour",t),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n}function Zd(e){const t=new Ce(e,{});return t.imply("meridiem",pe.AM),t.imply("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t}const Xd=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class eh extends Je{innerPattern(t){return Xd}innerExtract(t,n){let r=Ze(t.refDate);const i=n[0].toLowerCase(),o=t.createParsingComponents();switch(i){case"now":return qd(t.reference);case"today":return Hd(t.reference);case"yesterday":return Gd(t.reference);case"tomorrow":case"tmr":case"tmrw":return Wd(t.reference);case"tonight":return Kd(t.reference);default:i.match(/last\s*night/)&&(r.hour()>6&&(r=r.add(-1,"day")),Xt(o,r),o.imply("hour",0));break}return o}}const th=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class nh extends Je{innerPattern(){return th}innerExtract(t,n){switch(n[1].toLowerCase()){case"afternoon":return Jd(t.reference);case"evening":case"night":return Yd(t.reference);case"midnight":return Qd(t.reference);case"morning":return Vd(t.reference);case"noon":case"midday":return Zd(t.reference)}return null}}function rh(e,t,n){const r=e.getDateWithAdjustedTimezone(),i=ih(r,t,n);let o=new Ce(e);return o=ld(o,{day:i}),o.assign("weekday",t),o}function ih(e,t,n){const r=e.getDay();switch(n){case"this":return Cr(e,t);case"last":return tc(e,t);case"next":return r==St.SUNDAY?t==St.SUNDAY?7:t:r==St.SATURDAY?t==St.SATURDAY?7:t==St.SUNDAY?8:1+t:t<r&&t!=St.SUNDAY?Cr(e,t):Cr(e,t)+7}return oh(e,t)}function oh(e,t){const n=tc(e,t),r=Cr(e,t);return r<-n?r:n}function Cr(e,t){const n=e.getDay();let r=t-n;return r<0&&(r+=7),r}function tc(e,t){const n=e.getDay();let r=t-n;return r>=0&&(r-=7),r}const ah=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Tt(Yu)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),sh=1,uh=2,ch=3;class fh extends Je{innerPattern(){return ah}innerExtract(t,n){const r=n[uh].toLowerCase(),i=Yu[r],o=n[sh],a=n[ch];let u=o||a;u=u||"",u=u.toLowerCase();let s=null;return u=="last"||u=="past"?s="last":u=="next"?s="next":u=="this"&&(s="this"),rh(t.reference,i,s)}}const lh=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${Tt(ei)})(?=\\s*)(?=\\W|$)`,"i"),dh=1,hh=2;class vh extends Je{innerPattern(){return lh}innerExtract(t,n){const r=n[dh].toLowerCase(),i=n[hh].toLowerCase(),o=ei[i];if(r=="next"||r.startsWith("after")){const s={};return s[o]=1,Ce.createRelativeFromReference(t.reference,s)}if(r=="last"||r=="past"){const s={};return s[o]=-1,Ce.createRelativeFromReference(t.reference,s)}const a=t.createParsingComponents();let u=Ze(t.reference.instant);return i.match(/week/i)?(u=u.add(-u.get("d"),"d"),a.imply("day",u.date()),a.imply("month",u.month()+1),a.imply("year",u.year())):i.match(/month/i)?(u=u.add(-u.date()+1,"d"),a.imply("day",u.date()),a.assign("year",u.year()),a.assign("month",u.month()+1)):i.match(/year/i)&&(u=u.add(-u.date()+1,"d"),u=u.add(-u.month(),"month"),a.imply("day",u.date()),a.imply("month",u.month()+1),a.assign("year",u.year())),a}}class _n{constructor(t){t=t||nc(),this.parsers=[...t.parsers],this.refiners=[...t.refiners]}clone(){return new _n({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(t,n,r){const i=this.parse(t,n,r);return i.length>0?i[0].start.date():null}parse(t,n,r){const i=new ph(t,n,r);let o=[];return this.parsers.forEach(a=>{const u=_n.executeParser(i,a);o=o.concat(u)}),o.sort((a,u)=>a.index-u.index),this.refiners.forEach(function(a){o=a.refine(i,o)}),o}static executeParser(t,n){const r=[],i=n.pattern(t),o=t.text;let a=t.text,u=i.exec(a);for(;u;){const s=u.index+o.length-a.length;u.index=s;const l=n.extract(t,u);if(!l){a=o.substring(u.index+1),u=i.exec(a);continue}let g=null;l instanceof er?g=l:l instanceof Ce?(g=t.createParsingResult(u.index,u[0]),g.start=l):g=t.createParsingResult(u.index,u[0],l),t.debug(()=>console.log(`${n.constructor.name} extracted result ${g}`)),r.push(g),a=o.substring(s+g.text.length),u=i.exec(a)}return r}}class ph{constructor(t,n,r){this.text=t,this.reference=new Xu(n),this.option=r??{},this.refDate=this.reference.instant}createParsingComponents(t){return t instanceof Ce?t:new Ce(this.reference,t)}createParsingResult(t,n,r,i){const o=typeof n=="string"?n:this.text.substring(t,n),a=r?this.createParsingComponents(r):null,u=i?this.createParsingComponents(i):null;return new er(this.reference,t,o,a,u)}debug(t){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(t):this.option.debug.debug(t))}}const gh=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),wr=1,yh=5,cs=2,fs=3,Si=4;class _h{constructor(t){this.groupNumberMonth=t?fs:cs,this.groupNumberDay=t?cs:fs}pattern(){return gh}extract(t,n){if(n[wr].length==0&&n.index>0&&n.index<t.text.length){const s=t.text[n.index-1];if(s>="0"&&s<="9")return}const r=n.index+n[wr].length,i=n[0].substr(n[wr].length,n[0].length-n[wr].length-n[yh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!n[Si]&&n[0].indexOf("/")<0)return;const o=t.createParsingResult(r,i);let a=parseInt(n[this.groupNumberMonth]),u=parseInt(n[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(u>=1&&u<=12&&a<=31)[u,a]=[a,u];else return null;if(u<1||u>31)return null;if(o.start.assign("day",u),o.start.assign("month",a),n[Si]){const s=parseInt(n[Si]),l=Ku(s);o.start.assign("year",l)}else{const s=Xr(t.refDate,u,a);o.start.imply("year",s)}return o}}const mh=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Zt})(?=\\W|$)`,"i");class wh extends Je{innerPattern(){return mh}innerExtract(t,n){const r=n[1].toLowerCase();let i=Xn(n[2]);switch(r){case"last":case"past":case"-":i=Uo(i);break}return Ce.createRelativeFromReference(t.reference,i)}}function ls(e){return e.text.match(/\s+(before|from)$/i)!=null}function bh(e){return e.text.match(/\s+(after|since)$/i)!=null}class Th extends ni{patternBetween(){return/^\s*$/i}shouldMergeResults(t,n,r){return!t.match(this.patternBetween())||!ls(n)&&!bh(n)?!1:!!r.start.get("day")&&!!r.start.get("month")&&!!r.start.get("year")}mergeResults(t,n,r){let i=Xn(n.text);ls(n)&&(i=Uo(i));const o=Ce.createRelativeFromReference(new Xu(r.start.date()),i);return new er(r.reference,n.index,`${n.text}${t}${r.text}`,o)}}const $h=new _n(nc(!1));new _n(qo(!0,!1));new _n(qo(!1,!0));function nc(e=!1){const t=qo(!1,e);return t.parsers.unshift(new eh),t.parsers.unshift(new nh),t.parsers.unshift(new Jl),t.parsers.unshift(new vh),t.parsers.unshift(new wh),t}function qo(e=!0,t=!1){return Ud({parsers:[new _h(t),new Bl,new Hl,new Kl,new fh,new nd,new ad,new fd(e),new vd(e),new _d(e)],refiners:[new Th,new $d,new bd]},e)}var pe;(function(e){e[e.AM=0]="AM",e[e.PM=1]="PM"})(pe||(pe={}));var St;(function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"})(St||(St={}));const Eh=$h;function Ah(e,t,n){return Eh.parseDate(e,t,n)}function Sh(e,t){let n,r;[r,n]=e.length>t.length?[e,t]:[t,e];const i=Math.floor(r.length/2)-1,o=[],a=[];for(let f=0;f<n.length;f++){let p=n[f];const _=Math.max(0,f-i),m=Math.min(f+i+1,r.length);for(let $=_;$<m;$++)if(a[$]===void 0&&p===r[$]){o[f]=a[$]=p;break}}const u=o.join(""),s=a.join(""),l=u.length;let g=0;for(let f=0;f<u.length;f++)u[f]!==s[f]&&g++;return l>0?(l/n.length+l/r.length+(l-Math.floor(g/2))/l)/3:0}function Ch(e,t,n=.2){const r=Sh(e,t);let i=0;for(let o=0;o<e.length&&e[o]===t[o];o++)i++;return r+Math.min(i,4)*n*(1-r)}const Vi=["homework","test","worksheet","study","research","read","paper","presentation","lab","final","midterm","quiz","project"];function Oh(e,t){let n,r,i=0;const o=e.replaceAll(/[^\w]/g," ").trim().toLowerCase();for(const a of o.split(" "))for(const u of t){const s=Ch(u,a);s>i&&(n=u,r=a,i=s)}return console.log(n,"==",r,i),[n,i]}function kh(e,t){return(e.match(t)||[]).length}const xh={},jh=Object.freeze(Object.defineProperty({__proto__:null,default:xh},Symbol.toStringTag,{value:"Module"})),Rh=Mo(jh);var Ho={};Ho.test=function(){return typeof ge.queueMicrotask=="function"};Ho.install=function(e){return function(){ge.queueMicrotask(e)}};var Go={},rc=ge.MutationObserver||ge.WebKitMutationObserver;Go.test=function(){return rc};Go.install=function(e){var t=0,n=new rc(e),r=ge.document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}};var zo={};zo.test=function(){return ge.setImmediate?!1:typeof ge.MessageChannel<"u"};zo.install=function(e){var t=new ge.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}};var Wo={};Wo.test=function(){return"document"in ge&&"onreadystatechange"in ge.document.createElement("script")};Wo.install=function(e){return function(){var t=ge.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},ge.document.documentElement.appendChild(t),e}};var Ko={};Ko.test=function(){return!0};Ko.install=function(e){return function(){setTimeout(e,0)}};var Dn=[Rh,Ho,Go,zo,Wo,Ko],hn,Bt,Nn=-1,Ot=[],Ji=!1;function Ph(){!hn||!Bt||(hn=!1,Bt.length?Ot=Bt.concat(Ot):Nn=-1,Ot.length&&ic())}function ic(){if(!hn){Ji=!1,hn=!0;for(var e=Ot.length,t=setTimeout(Ph);e;){for(Bt=Ot,Ot=[];Bt&&++Nn<e;)Bt[Nn].run();Nn=-1,e=Ot.length}Bt=null,Nn=-1,hn=!1,clearTimeout(t)}}var oc,Rn=-1,Fh=Dn.length;for(;++Rn<Fh;)if(Dn[Rn]&&Dn[Rn].test&&Dn[Rn].test()){oc=Dn[Rn].install(ic);break}function ac(e,t){this.fun=e,this.array=t}ac.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}};var Ih=Dh;function Dh(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ot.push(new ac(e,t)),!Ji&&!hn&&(Ji=!0,oc())}const He=ot(Ih);var br,Nh=new Uint8Array(16);function Mh(){if(!br&&(br=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!br))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return br(Nh)}const Lh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Bh(e){return typeof e=="string"&&Lh.test(e)}var Le=[];for(var Ci=0;Ci<256;++Ci)Le.push((Ci+256).toString(16).substr(1));function Uh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Le[e[t+0]]+Le[e[t+1]]+Le[e[t+2]]+Le[e[t+3]]+"-"+Le[e[t+4]]+Le[e[t+5]]+"-"+Le[e[t+6]]+Le[e[t+7]]+"-"+Le[e[t+8]]+Le[e[t+9]]+"-"+Le[e[t+10]]+Le[e[t+11]]+Le[e[t+12]]+Le[e[t+13]]+Le[e[t+14]]+Le[e[t+15]]).toLowerCase();if(!Bh(n))throw TypeError("Stringified UUID is invalid");return n}function sc(e,t,n){e=e||{};var r=e.random||(e.rng||Mh)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Uh(r)}var uc={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(v,d){var c=v[0],h=v[1],y=v[2],b=v[3];c+=(h&y|~h&b)+d[0]-680876936|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&y)+d[1]-389564586|0,b=(b<<12|b>>>20)+c|0,y+=(b&c|~b&h)+d[2]+606105819|0,y=(y<<17|y>>>15)+b|0,h+=(y&b|~y&c)+d[3]-1044525330|0,h=(h<<22|h>>>10)+y|0,c+=(h&y|~h&b)+d[4]-176418897|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&y)+d[5]+1200080426|0,b=(b<<12|b>>>20)+c|0,y+=(b&c|~b&h)+d[6]-1473231341|0,y=(y<<17|y>>>15)+b|0,h+=(y&b|~y&c)+d[7]-45705983|0,h=(h<<22|h>>>10)+y|0,c+=(h&y|~h&b)+d[8]+1770035416|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&y)+d[9]-1958414417|0,b=(b<<12|b>>>20)+c|0,y+=(b&c|~b&h)+d[10]-42063|0,y=(y<<17|y>>>15)+b|0,h+=(y&b|~y&c)+d[11]-1990404162|0,h=(h<<22|h>>>10)+y|0,c+=(h&y|~h&b)+d[12]+1804603682|0,c=(c<<7|c>>>25)+h|0,b+=(c&h|~c&y)+d[13]-40341101|0,b=(b<<12|b>>>20)+c|0,y+=(b&c|~b&h)+d[14]-1502002290|0,y=(y<<17|y>>>15)+b|0,h+=(y&b|~y&c)+d[15]+1236535329|0,h=(h<<22|h>>>10)+y|0,c+=(h&b|y&~b)+d[1]-165796510|0,c=(c<<5|c>>>27)+h|0,b+=(c&y|h&~y)+d[6]-1069501632|0,b=(b<<9|b>>>23)+c|0,y+=(b&h|c&~h)+d[11]+643717713|0,y=(y<<14|y>>>18)+b|0,h+=(y&c|b&~c)+d[0]-373897302|0,h=(h<<20|h>>>12)+y|0,c+=(h&b|y&~b)+d[5]-701558691|0,c=(c<<5|c>>>27)+h|0,b+=(c&y|h&~y)+d[10]+38016083|0,b=(b<<9|b>>>23)+c|0,y+=(b&h|c&~h)+d[15]-660478335|0,y=(y<<14|y>>>18)+b|0,h+=(y&c|b&~c)+d[4]-405537848|0,h=(h<<20|h>>>12)+y|0,c+=(h&b|y&~b)+d[9]+568446438|0,c=(c<<5|c>>>27)+h|0,b+=(c&y|h&~y)+d[14]-1019803690|0,b=(b<<9|b>>>23)+c|0,y+=(b&h|c&~h)+d[3]-187363961|0,y=(y<<14|y>>>18)+b|0,h+=(y&c|b&~c)+d[8]+1163531501|0,h=(h<<20|h>>>12)+y|0,c+=(h&b|y&~b)+d[13]-1444681467|0,c=(c<<5|c>>>27)+h|0,b+=(c&y|h&~y)+d[2]-51403784|0,b=(b<<9|b>>>23)+c|0,y+=(b&h|c&~h)+d[7]+1735328473|0,y=(y<<14|y>>>18)+b|0,h+=(y&c|b&~c)+d[12]-1926607734|0,h=(h<<20|h>>>12)+y|0,c+=(h^y^b)+d[5]-378558|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^y)+d[8]-2022574463|0,b=(b<<11|b>>>21)+c|0,y+=(b^c^h)+d[11]+1839030562|0,y=(y<<16|y>>>16)+b|0,h+=(y^b^c)+d[14]-35309556|0,h=(h<<23|h>>>9)+y|0,c+=(h^y^b)+d[1]-1530992060|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^y)+d[4]+1272893353|0,b=(b<<11|b>>>21)+c|0,y+=(b^c^h)+d[7]-155497632|0,y=(y<<16|y>>>16)+b|0,h+=(y^b^c)+d[10]-1094730640|0,h=(h<<23|h>>>9)+y|0,c+=(h^y^b)+d[13]+681279174|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^y)+d[0]-358537222|0,b=(b<<11|b>>>21)+c|0,y+=(b^c^h)+d[3]-722521979|0,y=(y<<16|y>>>16)+b|0,h+=(y^b^c)+d[6]+76029189|0,h=(h<<23|h>>>9)+y|0,c+=(h^y^b)+d[9]-640364487|0,c=(c<<4|c>>>28)+h|0,b+=(c^h^y)+d[12]-421815835|0,b=(b<<11|b>>>21)+c|0,y+=(b^c^h)+d[15]+530742520|0,y=(y<<16|y>>>16)+b|0,h+=(y^b^c)+d[2]-995338651|0,h=(h<<23|h>>>9)+y|0,c+=(y^(h|~b))+d[0]-198630844|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~y))+d[7]+1126891415|0,b=(b<<10|b>>>22)+c|0,y+=(c^(b|~h))+d[14]-1416354905|0,y=(y<<15|y>>>17)+b|0,h+=(b^(y|~c))+d[5]-57434055|0,h=(h<<21|h>>>11)+y|0,c+=(y^(h|~b))+d[12]+1700485571|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~y))+d[3]-1894986606|0,b=(b<<10|b>>>22)+c|0,y+=(c^(b|~h))+d[10]-1051523|0,y=(y<<15|y>>>17)+b|0,h+=(b^(y|~c))+d[1]-2054922799|0,h=(h<<21|h>>>11)+y|0,c+=(y^(h|~b))+d[8]+1873313359|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~y))+d[15]-30611744|0,b=(b<<10|b>>>22)+c|0,y+=(c^(b|~h))+d[6]-1560198380|0,y=(y<<15|y>>>17)+b|0,h+=(b^(y|~c))+d[13]+1309151649|0,h=(h<<21|h>>>11)+y|0,c+=(y^(h|~b))+d[4]-145523070|0,c=(c<<6|c>>>26)+h|0,b+=(h^(c|~y))+d[11]-1120210379|0,b=(b<<10|b>>>22)+c|0,y+=(c^(b|~h))+d[2]+718787259|0,y=(y<<15|y>>>17)+b|0,h+=(b^(y|~c))+d[9]-343485551|0,h=(h<<21|h>>>11)+y|0,v[0]=c+v[0]|0,v[1]=h+v[1]|0,v[2]=y+v[2]|0,v[3]=b+v[3]|0}function o(v){var d=[],c;for(c=0;c<64;c+=4)d[c>>2]=v.charCodeAt(c)+(v.charCodeAt(c+1)<<8)+(v.charCodeAt(c+2)<<16)+(v.charCodeAt(c+3)<<24);return d}function a(v){var d=[],c;for(c=0;c<64;c+=4)d[c>>2]=v[c]+(v[c+1]<<8)+(v[c+2]<<16)+(v[c+3]<<24);return d}function u(v){var d=v.length,c=[1732584193,-271733879,-1732584194,271733878],h,y,b,k,j,P;for(h=64;h<=d;h+=64)i(c,o(v.substring(h-64,h)));for(v=v.substring(h-64),y=v.length,b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<y;h+=1)b[h>>2]|=v.charCodeAt(h)<<(h%4<<3);if(b[h>>2]|=128<<(h%4<<3),h>55)for(i(c,b),h=0;h<16;h+=1)b[h]=0;return k=d*8,k=k.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(k[2],16),P=parseInt(k[1],16)||0,b[14]=j,b[15]=P,i(c,b),c}function s(v){var d=v.length,c=[1732584193,-271733879,-1732584194,271733878],h,y,b,k,j,P;for(h=64;h<=d;h+=64)i(c,a(v.subarray(h-64,h)));for(v=h-64<d?v.subarray(h-64):new Uint8Array(0),y=v.length,b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<y;h+=1)b[h>>2]|=v[h]<<(h%4<<3);if(b[h>>2]|=128<<(h%4<<3),h>55)for(i(c,b),h=0;h<16;h+=1)b[h]=0;return k=d*8,k=k.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(k[2],16),P=parseInt(k[1],16)||0,b[14]=j,b[15]=P,i(c,b),c}function l(v){var d="",c;for(c=0;c<4;c+=1)d+=r[v>>c*8+4&15]+r[v>>c*8&15];return d}function g(v){var d;for(d=0;d<v.length;d+=1)v[d]=l(v[d]);return v.join("")}g(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function v(d,c){return d=d|0||0,d<0?Math.max(d+c,0):Math.min(d,c)}ArrayBuffer.prototype.slice=function(d,c){var h=this.byteLength,y=v(d,h),b=h,k,j,P,L;return c!==n&&(b=v(c,h)),y>b?new ArrayBuffer(0):(k=b-y,j=new ArrayBuffer(k),P=new Uint8Array(j),L=new Uint8Array(this,y,k),P.set(L),j)}}();function f(v){return/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v))),v}function p(v,d){var c=v.length,h=new ArrayBuffer(c),y=new Uint8Array(h),b;for(b=0;b<c;b+=1)y[b]=v.charCodeAt(b);return d?y:h}function _(v){return String.fromCharCode.apply(null,new Uint8Array(v))}function m(v,d,c){var h=new Uint8Array(v.byteLength+d.byteLength);return h.set(new Uint8Array(v)),h.set(new Uint8Array(d),v.byteLength),c?h:h.buffer}function $(v){var d=[],c=v.length,h;for(h=0;h<c-1;h+=2)d.push(parseInt(v.substr(h,2),16));return String.fromCharCode.apply(String,d)}function w(){this.reset()}return w.prototype.append=function(v){return this.appendBinary(f(v)),this},w.prototype.appendBinary=function(v){this._buff+=v,this._length+=v.length;var d=this._buff.length,c;for(c=64;c<=d;c+=64)i(this._hash,o(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},w.prototype.end=function(v){var d=this._buff,c=d.length,h,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b;for(h=0;h<c;h+=1)y[h>>2]|=d.charCodeAt(h)<<(h%4<<3);return this._finish(y,c),b=g(this._hash),v&&(b=$(b)),this.reset(),b},w.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},w.prototype.setState=function(v){return this._buff=v.buff,this._length=v.length,this._hash=v.hash,this},w.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},w.prototype._finish=function(v,d){var c=d,h,y,b;if(v[c>>2]|=128<<(c%4<<3),c>55)for(i(this._hash,v),c=0;c<16;c+=1)v[c]=0;h=this._length*8,h=h.toString(16).match(/(.*?)(.{0,8})$/),y=parseInt(h[2],16),b=parseInt(h[1],16)||0,v[14]=y,v[15]=b,i(this._hash,v)},w.hash=function(v,d){return w.hashBinary(f(v),d)},w.hashBinary=function(v,d){var c=u(v),h=g(c);return d?$(h):h},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(v){var d=m(this._buff.buffer,v,!0),c=d.length,h;for(this._length+=v.byteLength,h=64;h<=c;h+=64)i(this._hash,a(d.subarray(h-64,h)));return this._buff=h-64<c?new Uint8Array(d.buffer.slice(h-64)):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(v){var d=this._buff,c=d.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y,b;for(y=0;y<c;y+=1)h[y>>2]|=d[y]<<(y%4<<3);return this._finish(h,c),b=g(this._hash),v&&(b=$(b)),this.reset(),b},w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.getState=function(){var v=w.prototype.getState.call(this);return v.buff=_(v.buff),v},w.ArrayBuffer.prototype.setState=function(v){return v.buff=p(v.buff,!0),w.prototype.setState.call(this,v)},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.hash=function(v,d){var c=s(new Uint8Array(v)),h=g(c);return d?$(h):h},w})})(uc);var qh=uc.exports;const Ur=ot(qh);var ri={};ri.stringify=function(t){var n=[];n.push({obj:t});for(var r="",i,o,a,u,s,l,g,f,p,_,m;i=n.pop();)if(o=i.obj,a=i.prefix||"",u=i.val||"",r+=a,u)r+=u;else if(typeof o!="object")r+=typeof o>"u"?null:JSON.stringify(o);else if(o===null)r+="null";else if(Array.isArray(o)){for(n.push({val:"]"}),s=o.length-1;s>=0;s--)l=s===0?"":",",n.push({obj:o[s],prefix:l});n.push({val:"["})}else{g=[];for(f in o)o.hasOwnProperty(f)&&g.push(f);for(n.push({val:"}"}),s=g.length-1;s>=0;s--)p=g[s],_=o[p],m=s>0?",":"",m+=JSON.stringify(p)+":",n.push({obj:_,prefix:m});n.push({val:"{"})}return r};function sn(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(e);else if(o===t.length-2){var a=t.pop();i[a]=e}else t.push(e)}ri.parse=function(e){for(var t=[],n=[],r=0,i,o,a,u,s,l,g,f,p;;){if(i=e[r++],i==="}"||i==="]"||typeof i>"u"){if(t.length===1)return t.pop();sn(t.pop(),t,n);continue}switch(i){case" ":case"	":case`
`:case":":case",":break;case"n":r+=3,sn(null,t,n);break;case"t":r+=3,sn(!0,t,n);break;case"f":r+=4,sn(!1,t,n);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(o="",r--;;)if(a=e[r++],/[\d\.\-e\+]/.test(a))o+=a;else{r--;break}sn(parseFloat(o),t,n);break;case'"':for(u="",s=void 0,l=0;g=e[r++],g!=='"'||s==="\\"&&l%2===1;)u+=g,s=g,s==="\\"?l++:l=0;sn(JSON.parse('"'+u+'"'),t,n);break;case"[":f={element:[],index:t.length},t.push(f.element),n.push(f);break;case"{":p={element:{},index:t.length},t.push(p.element),n.push(p);break;default:throw new Error("unexpectedly reached end of input: "+i)}}};var Hh=Gh;function Gh(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}else return e.call(this,[])}}const $t=ot(Hh);var Zi={exports:{}};typeof Object.create=="function"?Zi.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Zi.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var zh=Zi.exports;const Ge=ot(zh);var Yo={exports:{}},vn=typeof Reflect=="object"?Reflect:null,ds=vn&&typeof vn.apply=="function"?vn.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Or;vn&&typeof vn.ownKeys=="function"?Or=vn.ownKeys:Object.getOwnPropertySymbols?Or=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Or=function(t){return Object.getOwnPropertyNames(t)};function Wh(e){console&&console.warn&&console.warn(e)}var cc=Number.isNaN||function(t){return t!==t};function _e(){_e.init.call(this)}Yo.exports=_e;Yo.exports.once=Vh;_e.EventEmitter=_e;_e.prototype._events=void 0;_e.prototype._eventsCount=0;_e.prototype._maxListeners=void 0;var hs=10;function ii(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(_e,"defaultMaxListeners",{enumerable:!0,get:function(){return hs},set:function(e){if(typeof e!="number"||e<0||cc(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");hs=e}});_e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_e.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||cc(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function fc(e){return e._maxListeners===void 0?_e.defaultMaxListeners:e._maxListeners}_e.prototype.getMaxListeners=function(){return fc(this)};_e.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var s=o[t];if(s===void 0)return!1;if(typeof s=="function")ds(s,this,n);else for(var l=s.length,g=pc(s,l),r=0;r<l;++r)ds(g[r],this,n);return!0};function lc(e,t,n,r){var i,o,a;if(ii(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),a===void 0)a=o[t]=n,++e._eventsCount;else if(typeof a=="function"?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=fc(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,Wh(u)}return e}_e.prototype.addListener=function(t,n){return lc(this,t,n,!1)};_e.prototype.on=_e.prototype.addListener;_e.prototype.prependListener=function(t,n){return lc(this,t,n,!0)};function Kh(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dc(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Kh.bind(r);return i.listener=n,r.wrapFn=i,i}_e.prototype.once=function(t,n){return ii(n),this.on(t,dc(this,t,n)),this};_e.prototype.prependOnceListener=function(t,n){return ii(n),this.prependListener(t,dc(this,t,n)),this};_e.prototype.removeListener=function(t,n){var r,i,o,a,u;if(ii(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){u=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():Yh(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};_e.prototype.off=_e.prototype.removeListener;_e.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function hc(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Qh(i):pc(i,i.length)}_e.prototype.listeners=function(t){return hc(this,t,!0)};_e.prototype.rawListeners=function(t){return hc(this,t,!1)};_e.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):vc.call(e,t)};_e.prototype.listenerCount=vc;function vc(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}_e.prototype.eventNames=function(){return this._eventsCount>0?Or(this._events):[]};function pc(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Yh(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Qh(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Vh(e,t){return new Promise(function(n,r){function i(a){e.removeListener(t,o),r(a)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}gc(e,t,o,{once:!0}),t!=="error"&&Jh(e,i,{once:!0})})}function Jh(e,t,n){typeof e.on=="function"&&gc(e,"error",t,n)}function gc(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var An=Yo.exports;const Ue=ot(An);function oi(e){return"$"+e}function yc(e){return e.substring(1)}function Et(){this._store={}}Et.prototype.get=function(e){var t=oi(e);return this._store[t]};Et.prototype.set=function(e,t){var n=oi(e);return this._store[n]=t,!0};Et.prototype.has=function(e){var t=oi(e);return t in this._store};Et.prototype.keys=function(){return Object.keys(this._store).map(e=>yc(e))};Et.prototype.delete=function(e){var t=oi(e),n=t in this._store;return delete this._store[t],n};Et.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],o=this._store[i];i=yc(i),e(o,i)}};Object.defineProperty(Et.prototype,"size",{get:function(){return Object.keys(this._store).length}});function tr(e){if(this._store=new Et,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}tr.prototype.add=function(e){return this._store.set(e,!0)};tr.prototype.has=function(e){return this._store.has(e)};tr.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(tr.prototype,"size",{get:function(){return this._store.size}});function Zh(){if(typeof Symbol>"u"||typeof Map>"u"||typeof Set>"u")return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}var mn,Ye;Zh()?(mn=Set,Ye=Map):(mn=tr,Ye=Et);function Xh(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer||typeof Blob<"u"&&e instanceof Blob}function ev(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function tv(e){if(e instanceof ArrayBuffer)return ev(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var _c=Function.prototype.toString,nv=_c.call(Object);function rv(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&_c.call(n)==nv}function De(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=De(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(Xh(e))return tv(e);if(!rv(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=De(e[n]);typeof i<"u"&&(t[n]=i)}return t}function mc(e){var t=!1;return $t(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function wc(e){return $t(function(t){t=De(t);var n=this,r=typeof t[t.length-1]=="function"?t.pop():!1,i=new Promise(function(o,a){var u;try{var s=mc(function(l,g){l?a(l):o(g)});t.push(s),u=e.apply(n,t),u&&typeof u.then=="function"&&o(u)}catch(l){a(l)}});return r&&i.then(function(o){r(null,o)},r),i})}function iv(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var o=n[n.length-1];n[n.length-1]=function(a,u){var s=["api",e.name,t];s=s.concat(a?["error",a]:["success",u]),e.constructor.emit("debug",s),o(a,u)}}}function Fe(e,t){return wc($t(function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return iv(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise(function(i,o){r.taskqueue.addTask(function(a){a?o(a):i(r[e].apply(r,n))})})}))}function nr(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var ov=6;function vs(e){return e}function av(e){return[{ok:e}]}function bc(e,t,n){var r=t.docs,i=new Ye;r.forEach(function($){i.has($.id)?i.get($.id).push($):i.set($.id,[$])});var o=i.size,a=0,u=new Array(o);function s(){var $=[];u.forEach(function(w){w.docs.forEach(function(v){$.push({id:w.id,docs:[v]})})}),n(null,{results:$})}function l(){++a===o&&s()}function g($,w,v){u[$]={id:w,docs:v},l()}var f=[];i.forEach(function($,w){f.push(w)});var p=0;function _(){if(!(p>=f.length)){var $=Math.min(p+ov,f.length),w=f.slice(p,$);m(w,p),p+=w.length}}function m($,w){$.forEach(function(v,d){var c=w+d,h=i.get(v),y=nr(h[0],["atts_since","attachments"]);y.open_revs=h.map(function(k){return k.rev}),y.open_revs=y.open_revs.filter(vs);var b=vs;y.open_revs.length===0&&(delete y.open_revs,b=av),["revs","attachments","binary","ajax","latest"].forEach(function(k){k in t&&(y[k]=t[k])}),e.get(v,y,function(k,j){var P;k?P=[{error:k}]:P=b(j),g(c,v,P),_()})})}_()}var Xi;try{localStorage.setItem("_pouch_check_localstorage",1),Xi=!!localStorage.getItem("_pouch_check_localstorage")}catch{Xi=!1}function ai(){return Xi}Ge(Sn,Ue);function sv(e){ai()&&addEventListener("storage",function(t){e.emit(t.key)})}function Sn(){Ue.call(this),this._listeners={},sv(this)}Sn.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,o=!1;function a(){if(!i._listeners[t])return;if(o){o="waiting";return}o=!0;var u=nr(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function s(){o=!1}n.changes(u).on("change",function(l){l.seq>r.since&&!r.cancelled&&(r.since=l.seq,r.onChange(l))}).on("complete",function(){o==="waiting"&&He(a),o=!1}).on("error",s)}this._listeners[t]=a,this.on(e,a)};Sn.prototype.removeListener=function(e,t){t in this._listeners&&(Ue.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};Sn.prototype.notifyLocalWindows=function(e){ai()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};Sn.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};function nt(e){if(typeof console<"u"&&typeof console[e]=="function"){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function uv(e,t){var n=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||t<=e?t=(e||1)<<1:t=t+1,t>n&&(e=n>>1,t=n);var r=Math.random(),i=t-e;return~~(i*r+e)}function cv(e){var t=0;return e||(t=2e3),uv(e,t)}function eo(e,t){nt("info","The above "+e+" is totally normal. "+t)}var to;typeof Object.assign=="function"?to=Object.assign:to=function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var zt=to;Ge(me,Error);function me(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}me.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new me(401,"unauthorized","Name or password is incorrect.");var fv=new me(400,"bad_request","Missing JSON list of 'docs'"),ct=new me(404,"not_found","missing"),wn=new me(409,"conflict","Document update conflict"),Tc=new me(400,"bad_request","_id field must contain a string"),lv=new me(412,"missing_id","_id is required for puts"),dv=new me(400,"bad_request","Only reserved document ids may start with underscore.");new me(412,"precondition_failed","Database not open");var $c=new me(500,"unknown_error","Database encountered an unknown error"),Ec=new me(500,"badarg","Some query argument is invalid");new me(400,"invalid_request","Request was invalid");var hv=new me(400,"query_parse_error","Some query parameter is invalid"),ps=new me(500,"doc_validation","Bad special document member"),si=new me(400,"bad_request","Something wrong with the request"),Qo=new me(400,"bad_request","Document must be a JSON object");new me(404,"not_found","Database not found");var Vo=new me(500,"indexed_db_went_bad","unknown");new me(500,"web_sql_went_bad","unknown");new me(500,"levelDB_went_went_bad","unknown");new me(403,"forbidden","Forbidden by design doc validate_doc_update function");var Ac=new me(400,"bad_request","Invalid rev format");new me(412,"file_exists","The database could not be created, the file already exists.");var vv=new me(412,"missing_stub","A pre-existing attachment stub wasn't found");new me(413,"invalid_url","Provided URL is invalid");function fe(e,t){function n(r){for(var i=Object.getOwnPropertyNames(e),o=0,a=i.length;o<a;o++)typeof e[i[o]]!="function"&&(this[i[o]]=e[i[o]]);this.stack===void 0&&(this.stack=new Error().stack),r!==void 0&&(this.reason=r)}return n.prototype=me.prototype,new n(t)}function bn(e){if(typeof e!="object"){var t=e;e=$c,e.data=t}return"error"in e&&e.error==="conflict"&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=new Error().stack),e}function pv(e,t,n){try{return!e(t,n)}catch(i){var r="Filter function threw: "+i.toString();return fe(si,r)}}function Jo(e){var t={},n=e.filter&&typeof e.filter=="function";return t.query=e.query_params,function(i){i.doc||(i.doc={});var o=n&&pv(e.filter,i.doc,t);if(typeof o=="object")return o;if(o)return!1;if(!e.include_docs)delete i.doc;else if(!e.attachments)for(var a in i.doc._attachments)Object.prototype.hasOwnProperty.call(i.doc._attachments,a)&&(i.doc._attachments[a].stub=!0);return!0}}function qr(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function Sc(e){var t;if(e?typeof e!="string"?t=fe(Tc):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=fe(dv)):t=fe(lv),t)throw t}function pt(e){return typeof e._remote=="boolean"?e._remote:typeof e.type=="function"?(nt("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),e.type()==="http"):!1}function gv(e,t){return"listenerCount"in e?e.listenerCount(t):Ue.listenerCount(e,t)}function no(e){if(!e)return null;var t=e.split("/");return t.length===2?t:t.length===1?[e,e]:null}function gs(e){var t=no(e);return t?t.join("/"):null}var ys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_s="queryKey",yv=/(?:^|&)([^&=]*)=?([^&]*)/g,_v=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function Cc(e){for(var t=_v.exec(e),n={},r=14;r--;){var i=ys[r],o=t[r]||"",a=["user","password"].indexOf(i)!==-1;n[i]=a?decodeURIComponent(o):o}return n[_s]={},n[ys[12]].replace(yv,function(u,s,l){s&&(n[_s][s]=l)}),n}function Zo(e,t){var n=[],r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function ui(e,t,n){return e.get(t).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,o=n(r);return o?(o._id=t,o._rev=i,mv(e,o,n)):{updated:!1,rev:i}})}function mv(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return ui(e,t._id,n)})}var Xo=function(e){return atob(e)},rr=function(e){return btoa(e)};function ea(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if(o.name!=="TypeError")throw o;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function wv(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function ta(e,t){return ea([wv(e)],{type:t})}function na(e,t){return ta(Xo(e),t)}function bv(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function Oc(e,t){var n=new FileReader,r=typeof n.readAsBinaryString=="function";n.onloadend=function(i){var o=i.target.result||"";if(r)return t(o);t(bv(o))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function kc(e,t){Oc(e,function(n){t(n)})}function ra(e,t){kc(e,function(n){t(rr(n))})}function Tv(e,t){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);t(i)},n.readAsArrayBuffer(e)}var $v=self.setImmediate||self.setTimeout,Ev=32768;function Av(e){return rr(e)}function Sv(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}function Cv(e,t,n,r,i){(n>0||r<t.size)&&(t=Sv(t,n,r)),Tv(t,function(o){e.append(o),i()})}function Ov(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function ia(e,t){var n=typeof e=="string",r=n?e.length:e.size,i=Math.min(Ev,r),o=Math.ceil(r/i),a=0,u=n?new Ur:new Ur.ArrayBuffer,s=n?Ov:Cv;function l(){$v(f)}function g(){var p=u.end(!0),_=Av(p);t(_),u.destroy()}function f(){var p=a*i,_=p+i;a++,a<o?s(u,e,p,_,l):s(u,e,p,_,g)}f()}function xc(e){return Ur.hash(e)}function jc(e,t){if(!t)return sc().replace(/-/g,"").toLowerCase();var n=zt({},e);return delete n._rev_tree,xc(JSON.stringify(n))}var ci=sc;function Wt(e){for(var t,n,r,i=e.rev_tree.slice(),o;o=i.pop();){var a=o.ids,u=a[2],s=o.pos;if(u.length){for(var l=0,g=u.length;l<g;l++)i.push({pos:s+1,ids:u[l]});continue}var f=!!a[1].deleted,p=a[0];(!t||(r!==f?r:n!==s?n<s:t<p))&&(t=p,n=s,r=f)}return n+"-"+t}function en(e,t){for(var n=e.slice(),r;r=n.pop();)for(var i=r.pos,o=r.ids,a=o[2],u=t(a.length===0,i,o[0],r.ctx,o[1]),s=0,l=a.length;s<l;s++)n.push({pos:i+1,ids:a[s],ctx:u})}function kv(e,t){return e.pos-t.pos}function oa(e){var t=[];en(e,function(i,o,a,u,s){i&&t.push({rev:o+"-"+a,pos:o,opts:s})}),t.sort(kv).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function aa(e){for(var t=Wt(e),n=oa(e.rev_tree),r=[],i=0,o=n.length;i<o;i++){var a=n[i];a.rev!==t&&!a.opts.deleted&&r.push(a.rev)}return r}function xv(e){var t=[];return en(e.rev_tree,function(n,r,i,o,a){a.status==="available"&&!n&&(t.push(r+"-"+i),a.status="missing")}),t}function Rc(e){for(var t=[],n=e.slice(),r;r=n.pop();){var i=r.pos,o=r.ids,a=o[0],u=o[1],s=o[2],l=s.length===0,g=r.history?r.history.slice():[];g.push({id:a,opts:u}),l&&t.push({pos:i+1-g.length,ids:g});for(var f=0,p=s.length;f<p;f++)n.push({pos:i+1,ids:s[f],history:g})}return t.reverse()}function jv(e,t){return e.pos-t.pos}function Rv(e,t,n){for(var r=0,i=e.length,o;r<i;)o=r+i>>>1,n(e[o],t)<0?r=o+1:i=o;return r}function Pv(e,t,n){var r=Rv(e,t,n);e.splice(r,0,t)}function ms(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var a=e[i],u=[a.id,a.opts,[]];r?(r[2].push(u),r=u):n=r=u}return n}function Fv(e,t){return e[0]<t[0]?-1:1}function ws(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,a=i.tree2;(o[1].status||a[1].status)&&(o[1].status=o[1].status==="available"||a[1].status==="available"?"available":"missing");for(var u=0;u<a[2].length;u++){if(!o[2][0]){r="new_leaf",o[2][0]=a[2][u];continue}for(var s=!1,l=0;l<o[2].length;l++)o[2][l][0]===a[2][u][0]&&(n.push({tree1:o[2][l],tree2:a[2][u]}),s=!0);s||(r="new_branch",Pv(o[2],a[2][u],Fv))}}return{conflicts:r,tree:e}}function Pc(e,t,n){var r=[],i=!1,o=!1,a;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,s=e.length;u<s;u++){var l=e[u];if(l.pos===t.pos&&l.ids[0]===t.ids[0])a=ws(l.ids,t.ids),r.push({pos:l.pos,ids:a.tree}),i=i||a.conflicts,o=!0;else if(n!==!0){var g=l.pos<t.pos?l:t,f=l.pos<t.pos?t:l,p=f.pos-g.pos,_=[],m=[];for(m.push({ids:g.ids,diff:p,parent:null,parentIdx:null});m.length>0;){var $=m.pop();if($.diff===0){$.ids[0]===f.ids[0]&&_.push($);continue}for(var w=$.ids[2],v=0,d=w.length;v<d;v++)m.push({ids:w[v],diff:$.diff-1,parent:$.ids,parentIdx:v})}var c=_[0];c?(a=ws(c.ids,f.ids),c.parent[2][c.parentIdx]=a.tree,r.push({pos:g.pos,ids:g.ids}),i=i||a.conflicts,o=!0):r.push(l)}else r.push(l)}return o||r.push(t),r.sort(jv),{tree:r,conflicts:i||"internal_node"}}function Iv(e,t){for(var n=Rc(e),r,i,o=0,a=n.length;o<a;o++){var u=n[o],s=u.ids,l;if(s.length>t){r||(r={});var g=s.length-t;l={pos:u.pos+g,ids:ms(s,g)};for(var f=0;f<g;f++){var p=u.pos+f+"-"+s[f].id;r[p]=!0}}else l={pos:u.pos,ids:ms(s,0)};i?i=Pc(i,l,!0).tree:i=[l]}return r&&en(i,function(_,m,$){delete r[m+"-"+$]}),{tree:i,revs:r?Object.keys(r):[]}}function Fc(e,t,n){var r=Pc(e,t),i=Iv(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function Dv(e,t){for(var n=e.slice(),r=t.split("-"),i=parseInt(r[0],10),o=r[1],a;a=n.pop();){if(a.pos===i&&a.ids[0]===o)return!0;for(var u=a.ids[2],s=0,l=u.length;s<l;s++)n.push({pos:a.pos+1,ids:u[s]})}return!1}function Nv(e){return e.ids}function bt(e,t){t||(t=Wt(e));for(var n=t.substring(t.indexOf("-")+1),r=e.rev_tree.map(Nv),i;i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function Kt(e){return/^_local/.test(e)}function Mv(e,t){for(var n=t.rev_tree.slice(),r;r=n.pop();){var i=r.pos,o=r.ids,a=o[0],u=o[1],s=o[2],l=s.length===0,g=r.history?r.history.slice():[];if(g.push({id:a,pos:i,opts:u}),l)for(var f=0,p=g.length;f<p;f++){var _=g[f],m=_.pos+"-"+_.id;if(m===e)return i+"-"+a}for(var $=0,w=s.length;$<w;$++)n.push({pos:i+1,ids:s[$],history:g})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}Ge(ir,Ue);function Lv(e,t,n,r){try{e.emit("change",t,n,r)}catch(i){nt("error",'Error in .on("change", function):',i)}}function ir(e,t,n){Ue.call(this);var r=this;this.db=e,t=t?De(t):{};var i=t.complete=mc(function(u,s){u?gv(r,"error")>0&&r.emit("error",u):r.emit("complete",s),r.removeAllListeners(),e.removeListener("destroyed",o)});n&&(r.on("complete",function(u){n(null,u)}),r.on("error",n));function o(){r.cancel()}e.once("destroyed",o),t.onChange=function(u,s,l){r.isCancelled||Lv(r,u,s,l)};var a=new Promise(function(u,s){t.complete=function(l,g){l?s(l):u(g)}});r.once("cancel",function(){e.removeListener("destroyed",o),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this.catch=a.catch.bind(a),this.then(function(u){i(null,u)},i),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask(function(u){u?t.complete(u):r.isCancelled?r.emit("cancel"):r.validateChanges(t)})}ir.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")};function Bv(e,t,n){var r=[{rev:e._rev}];n.style==="all_docs"&&(r=oa(t.rev_tree).map(function(o){return{rev:o.rev}}));var i={id:t.id,changes:r,doc:e};return bt(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=aa(t),i.doc._conflicts.length||delete i.doc._conflicts),i}ir.prototype.validateChanges=function(e){var t=e.complete,n=this;ae._changesFilterPlugin?ae._changesFilterPlugin.validate(e,function(r){if(r)return t(r);n.doChanges(e)}):n.doChanges(e)};ir.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=De(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Bv,e.since==="latest"&&(e.since="now"),e.since||(e.since=0),e.since==="now"){this.db.info().then(function(o){if(t.isCancelled){n(null,{status:"cancelled"});return}e.since=o.update_seq,t.doChanges(e)},n);return}if(ae._changesFilterPlugin){if(ae._changesFilterPlugin.normalize(e),ae._changesFilterPlugin.shouldFilter(this,e))return ae._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(o){o in e&&nt("warn",'The "'+o+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=e.limit===0?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&typeof r.cancel=="function"){var i=t.cancel;t.cancel=$t(function(o){r.cancel(),i.apply(this,o)})}};function bs(e,t){return e<t?-1:e>t?1:0}function sa(e,t){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=t,e(n)):e(null,r.length?r[0]:r)}}function Uv(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=nr(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}function qv(e,t){var n=bs(e._id,t._id);if(n!==0)return n;var r=e._revisions?e._revisions.start:0,i=t._revisions?t._revisions.start:0;return bs(r,i)}function Hv(e){var t={},n=[];return en(e,function(r,i,o,a){var u=i+"-"+o;return r&&(t[u]=0),a!==void 0&&n.push({from:a,to:u}),u}),n.reverse(),n.forEach(function(r){t[r.from]===void 0?t[r.from]=1+t[r.to]:t[r.from]=Math.min(t[r.from],1+t[r.to])}),t}function Gv(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}function Ic(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),e._compact(n,function(o,a){o?r(o):r(null,a),He(function(){e._compactionQueue.shift(),e._compactionQueue.length&&Ic(e)})})})}function zv(e){return e.charAt(0)==="_"?e+" is not a valid attachment name, attachment names cannot start with '_'":!1}Ge(Ae,Ue);function Ae(){Ue.call(this);for(var e in Ae.prototype)typeof this[e]=="function"&&(this[e]=this[e].bind(this))}Ae.prototype.post=Fe("post",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="object"||Array.isArray(e))return n(fe(Qo));this.bulkDocs({docs:[e]},t,sa(n,e._id))});Ae.prototype.put=Fe("put",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="object"||Array.isArray(e))return n(fe(Qo));if(Sc(e._id),Kt(e._id)&&typeof this._putLocal=="function")return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var r=this;t.force&&e._rev?(i(),o(function(a){var u=a?null:{ok:!0,id:e._id,rev:e._rev};n(a,u)})):o(n);function i(){var a=e._rev.split("-"),u=a[1],s=parseInt(a[0],10),l=s+1,g=jc();e._revisions={start:l,ids:[g,u]},e._rev=l+"-"+g,t.new_edits=!1}function o(a){typeof r._put=="function"&&t.new_edits!==!1?r._put(e,t,a):r.bulkDocs({docs:[e]},t,sa(a,e._id))}});Ae.prototype.putAttachment=Fe("putAttachment",function(e,t,n,r,i){var o=this;typeof i=="function"&&(i=r,r=n,n=null),typeof i>"u"&&(i=r,r=n,n=null),i||nt("warn","Attachment",t,"on document",e,"is missing content_type");function a(u){var s="_rev"in u?parseInt(u._rev,10):0;return u._attachments=u._attachments||{},u._attachments[t]={content_type:i,data:r,revpos:++s},o.put(u)}return o.get(e).then(function(u){if(u._rev!==n)throw fe(wn);return a(u)},function(u){if(u.reason===ct.message)return a({_id:e});throw u})});Ae.prototype.removeAttachment=Fe("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(o,a){if(o){r(o);return}if(a._rev!==n){r(fe(wn));return}if(!a._attachments)return r();delete a._attachments[t],Object.keys(a._attachments).length===0&&delete a._attachments,i.put(a,r)})});Ae.prototype.remove=Fe("remove",function(e,t,n,r){var i;typeof t=="string"?(i={_id:e,_rev:t},typeof n=="function"&&(r=n,n={})):(i=e,typeof t=="function"?(r=t,n={}):(r=n,n=t)),n=n||{},n.was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev};if(o._deleted=!0,Kt(o._id)&&typeof this._removeLocal=="function")return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,sa(r,o._id))});Ae.prototype.revsDiff=Fe("revsDiff",function(e,t,n){typeof t=="function"&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var i=0,o=new Ye;function a(s,l){o.has(s)||o.set(s,{missing:[]}),o.get(s).missing.push(l)}function u(s,l){var g=e[s].slice(0);en(l,function(f,p,_,m,$){var w=p+"-"+_,v=g.indexOf(w);v!==-1&&(g.splice(v,1),$.status!=="available"&&a(s,w))}),g.forEach(function(f){a(s,f)})}r.map(function(s){this._getRevisionTree(s,function(l,g){if(l&&l.status===404&&l.message==="missing")o.set(s,{missing:e[s]});else{if(l)return n(l);u(s,g)}if(++i===r.length){var f={};return o.forEach(function(p,_){f[_]=p}),n(null,f)}})},this)});Ae.prototype.bulkGet=Fe("bulkGet",function(e,t){bc(this,e,t)});Ae.prototype.compactDocument=Fe("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(i,o){if(i)return n(i);var a=Hv(o),u=[],s=[];Object.keys(a).forEach(function(l){a[l]>t&&u.push(l)}),en(o,function(l,g,f,p,_){var m=g+"-"+f;_.status==="available"&&u.indexOf(m)!==-1&&s.push(m)}),r._doCompaction(e,s,n)})});Ae.prototype.compact=Fe("compact",function(e,t){typeof e=="function"&&(t=e,e={});var n=this;e=e||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),n._compactionQueue.length===1&&Ic(n)});Ae.prototype._compact=function(e,t){var n=this,r={return_docs:!1,last_seq:e.last_seq||0},i=[];function o(u){i.push(n.compactDocument(u.id,0))}function a(u){var s=u.last_seq;Promise.all(i).then(function(){return ui(n,"_local/compaction",function(g){return!g.last_seq||g.last_seq<s?(g.last_seq=s,g):!1})}).then(function(){t(null,{ok:!0})}).catch(t)}n.changes(r).on("change",o).on("complete",a).on("error",t)};Ae.prototype.get=Fe("get",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),typeof e!="string")return n(fe(Tc));if(Kt(e)&&typeof this._getLocal=="function")return this._getLocal(e,n);var r=[],i=this;function o(){var s=[],l=r.length;if(!l)return n(null,s);r.forEach(function(g){i.get(e,{rev:g,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(f,p){if(f)s.push({missing:g});else{for(var _,m=0,$=s.length;m<$;m++)if(s[m].ok&&s[m].ok._rev===p._rev){_=!0;break}_||s.push({ok:p})}l--,l||n(null,s)})})}if(t.open_revs){if(t.open_revs==="all")this._getRevisionTree(e,function(s,l){if(s)return n(s);r=oa(l).map(function(g){return g.rev}),o()});else if(Array.isArray(t.open_revs)){r=t.open_revs;for(var a=0;a<r.length;a++){var u=r[a];if(!(typeof u=="string"&&/^\d+-/.test(u)))return n(fe(Ac))}o()}else return n(fe($c,"function_clause"));return}return this._get(e,t,function(s,l){if(s)return s.docId=e,n(s);var g=l.doc,f=l.metadata,p=l.ctx;if(t.conflicts){var _=aa(f);_.length&&(g._conflicts=_)}if(bt(f,g._rev)&&(g._deleted=!0),t.revs||t.revs_info){for(var m=g._rev.split("-"),$=parseInt(m[0],10),w=m[1],v=Rc(f.rev_tree),d=null,c=0;c<v.length;c++){var h=v[c],y=h.ids.map(function(K){return K.id}).indexOf(w),b=y===$-1;(b||!d&&y!==-1)&&(d=h)}if(!d)return s=new Error("invalid rev tree"),s.docId=e,n(s);var k=d.ids.map(function(K){return K.id}).indexOf(g._rev.split("-")[1])+1,j=d.ids.length-k;if(d.ids.splice(k,j),d.ids.reverse(),t.revs&&(g._revisions={start:d.pos+d.ids.length-1,ids:d.ids.map(function(K){return K.id})}),t.revs_info){var P=d.pos+d.ids.length;g._revs_info=d.ids.map(function(K){return P--,{rev:P+"-"+K.id,status:K.opts.status}})}}if(t.attachments&&g._attachments){var L=g._attachments,V=Object.keys(L).length;if(V===0)return n(null,g);Object.keys(L).forEach(function(K){this._getAttachment(g._id,K,L[K],{rev:g._rev,binary:t.binary,ctx:p},function(D,F){var U=g._attachments[K];U.data=F,delete U.stub,delete U.length,--V||n(null,g)})},i)}else{if(g._attachments)for(var J in g._attachments)Object.prototype.hasOwnProperty.call(g._attachments,J)&&(g._attachments[J].stub=!0);n(null,g)}})});Ae.prototype.getAttachment=Fe("getAttachment",function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,function(o,a){if(o)return r(o);if(a.doc._attachments&&a.doc._attachments[t])n.ctx=a.ctx,n.binary=!0,i._getAttachment(e,t,a.doc._attachments[t],n,r);else return r(fe(ct))})});Ae.prototype.allDocs=Fe("allDocs",function(e,t){if(typeof e=="function"&&(t=e,e={}),e.skip=typeof e.skip<"u"?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(r){return r in e})[0];if(n){t(fe(hv,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!pt(this)&&(Gv(e),e.keys.length===0))return this._allDocs({limit:0},t)}return this._allDocs(e,t)});Ae.prototype.changes=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},e.return_docs="return_docs"in e?e.return_docs:!e.live,new ir(this,e,t)};Ae.prototype.close=Fe("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)});Ae.prototype.info=Fe("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!!(t.auto_compaction&&!pt(t)),r.adapter=t.adapter,e(null,r)})});Ae.prototype.id=Fe("id",function(e){return this._id(e)});Ae.prototype.type=function(){return typeof this._type=="function"?this._type():this.adapter};Ae.prototype.bulkDocs=Fe("bulkDocs",function(e,t,n){if(typeof t=="function"&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(fe(fv));for(var r=0;r<e.docs.length;++r)if(typeof e.docs[r]!="object"||Array.isArray(e.docs[r]))return n(fe(Qo));var i;if(e.docs.forEach(function(u){u._attachments&&Object.keys(u._attachments).forEach(function(s){i=i||zv(s),u._attachments[s].content_type||nt("warn","Attachment",s,"on document",u._id,"is missing content_type")})}),i)return n(fe(si,i));"new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0);var o=this;!t.new_edits&&!pt(o)&&e.docs.sort(qv),Uv(e.docs);var a=e.docs.map(function(u){return u._id});return this._bulkDocs(e,t,function(u,s){if(u)return n(u);if(t.new_edits||(s=s.filter(function(f){return f.error})),!pt(o))for(var l=0,g=s.length;l<g;l++)s[l].id=s[l].id||a[l];n(null,s)})});Ae.prototype.registerDependentDatabase=Fe("registerDependentDatabase",function(e,t){var n=De(this.__opts);this.__opts.view_adapter&&(n.adapter=this.__opts.view_adapter);var r=new this.constructor(e,n);function i(o){return o.dependentDbs=o.dependentDbs||{},o.dependentDbs[e]?!1:(o.dependentDbs[e]=!0,o)}ui(this,"_local/_pouch_dependentDbs",i).then(function(){t(null,{db:r})}).catch(t)});Ae.prototype.destroy=Fe("destroy",function(e,t){typeof e=="function"&&(t=e,e={});var n=this,r="use_prefix"in n?n.use_prefix:!0;function i(){n._destroy(e,function(o,a){if(o)return t(o);n._destroyed=!0,n.emit("destroyed"),t(null,a||{ok:!0})})}if(pt(n))return i();n.get("_local/_pouch_dependentDbs",function(o,a){if(o)return o.status!==404?t(o):i();var u=a.dependentDbs,s=n.constructor,l=Object.keys(u).map(function(g){var f=r?g.replace(new RegExp("^"+s.prefix),""):g;return new s(f,n.__opts).destroy()});Promise.all(l).then(i,t)})});function or(){this.isReady=!1,this.failed=!1,this.queue=[]}or.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()};or.prototype.fail=function(e){this.failed=e,this.execute()};or.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()};or.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()};function Wv(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=ae.adapters,i=ae.preferredAdapters,o=ae.prefix,a=t.adapter;if(!a)for(var u=0;u<i.length;++u){if(a=i[u],a==="idb"&&"websql"in r&&ai()&&localStorage["_pouch__websqldb_"+o+e]){nt("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}var s=r[a],l=s&&"use_prefix"in s?s.use_prefix:!0;return{name:l?o+e:e,adapter:a}}function Kv(e){function t(r){e.removeListener("closed",n),r||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}Ge(ae,Ae);function ae(e,t){if(!(this instanceof ae))return new ae(e,t);var n=this;if(t=t||{},e&&typeof e=="object"&&(t=e,e=t.name,delete t.name),t.deterministic_revs===void 0&&(t.deterministic_revs=!0),this.__opts=t=De(t),n.auto_compaction=t.auto_compaction,n.prefix=ae.prefix,typeof e!="string")throw new Error("Missing/invalid DB name");var r=(t.prefix||"")+e,i=Wv(r,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,n.name=e,n._adapter=t.adapter,ae.emit("debug",["adapter","Picked adapter: ",t.adapter]),!ae.adapters[t.adapter]||!ae.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);if(t.view_adapter&&(!ae.adapters[t.view_adapter]||!ae.adapters[t.view_adapter].valid()))throw new Error("Invalid View Adapter: "+t.view_adapter);Ae.call(n),n.taskqueue=new or,n.adapter=t.adapter,ae.adapters[t.adapter].call(n,t,function(o){if(o)return n.taskqueue.fail(o);Kv(n),n.emit("created",n),ae.emit("created",n.name),n.taskqueue.ready(n)})}var Yv=typeof AbortController<"u"?AbortController:function(){return{abort:function(){}}},Dc=fetch,pn=Headers;ae.adapters={};ae.preferredAdapters=[];ae.prefix="_pouch_";var Ts=new Ue;function Qv(e){Object.keys(Ue.prototype).forEach(function(n){typeof Ue.prototype[n]=="function"&&(e[n]=Ts[n].bind(Ts))});var t=e._destructionListeners=new Ye;e.on("ref",function(r){t.has(r.name)||t.set(r.name,[]),t.get(r.name).push(r)}),e.on("unref",function(r){if(t.has(r.name)){var i=t.get(r.name),o=i.indexOf(r);o<0||(i.splice(o,1),i.length>1?t.set(r.name,i):t.delete(r.name))}}),e.on("destroyed",function(r){if(t.has(r)){var i=t.get(r);t.delete(r),i.forEach(function(o){o.emit("destroyed",!0)})}})}Qv(ae);ae.adapter=function(e,t,n){t.valid()&&(ae.adapters[e]=t,n&&ae.preferredAdapters.push(e))};ae.plugin=function(e){if(typeof e=="function")e(ae);else{if(typeof e!="object"||Object.keys(e).length===0)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){ae.prototype[t]=e[t]})}return this.__defaults&&(ae.__defaults=zt({},this.__defaults)),ae};ae.defaults=function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);r=r||{},n&&typeof n=="object"&&(r=n,n=r.name,delete r.name),r=zt({},t.__defaults,r),ae.call(this,n,r)}return Ge(t,ae),t.preferredAdapters=ae.preferredAdapters.slice(),Object.keys(ae).forEach(function(n){n in t||(t[n]=ae[n])}),t.__defaults=zt({},this.__defaults,e),t};ae.fetch=function(e,t){return Dc(e,t)};var Vv="7.3.1";function ua(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function Jv(e,t){return e<t?-1:e>t?1:0}function ca(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];r>0&&e[r-1]==="\\"&&(o==="$"||o===".")?n=n.substring(0,n.length-1)+o:o==="."?(t.push(n),n=""):n+=o}return t.push(n),t}var Zv=["$or","$nor","$not"];function Nc(e){return Zv.indexOf(e)>-1}function Mc(e){return Object.keys(e)[0]}function Xv(e){return e[Mc(e)]}function zn(e){var t={},n={$or:!0,$nor:!0};return e.forEach(function(r){Object.keys(r).forEach(function(i){var o=r[i];if(typeof o!="object"&&(o={$eq:o}),Nc(i))if(o instanceof Array){if(n[i]){n[i]=!1,t[i]=o;return}var a=[];t[i].forEach(function(s){Object.keys(o).forEach(function(l){var g=o[l],f=Math.max(Object.keys(s).length,Object.keys(g).length),p=zn([s,g]);Object.keys(p).length<=f||a.push(p)})}),t[i]=a}else t[i]=zn([o]);else{var u=t[i]=t[i]||{};Object.keys(o).forEach(function(s){var l=o[s];if(s==="$gt"||s==="$gte")return ep(s,l,u);if(s==="$lt"||s==="$lte")return tp(s,l,u);if(s==="$ne")return np(l,u);if(s==="$eq")return rp(l,u);if(s==="$regex")return ip(l,u);u[s]=l})}})}),t}function ep(e,t,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt<"u"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function tp(e,t,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt<"u"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function np(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function rp(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function ip(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}function Lc(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=zn(e[n].$and));var r=e[t];typeof r=="object"&&Lc(r)}return e}function Bc(e,t){for(var n in e){n==="$and"&&(t=!0);var r=e[n];typeof r=="object"&&(t=Bc(r,t))}return t}function op(e){var t=De(e),n=!1;Bc(t,!1)&&(t=Lc(t),"$and"in t&&(t=zn(t.$and)),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(s){for(var l=Object.keys(s),g=0;g<l.length;g++){var f=l[g],p=s[f];(typeof p!="object"||p===null)&&(s[f]={$eq:p})}})}),"$not"in t&&(t.$not=zn([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];typeof a!="object"||a===null?a={$eq:a}:n||("$ne"in a&&(a.$ne=[a.$ne]),"$regex"in a&&(a.$regex=[a.$regex])),t[o]=a}return t}function ap(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function sp(e,t,n){var r=ap(e,t,n);return r+e}var Uc=-324,ro=3,io="";function xe(e,t){if(e===t)return 0;e=Yt(e),t=Yt(t);var n=oo(e),r=oo(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return hp(e,t)}return Array.isArray(e)?dp(e,t):vp(e,t)}function Yt(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Yt(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];typeof o<"u"&&(e[i]=Yt(o))}}}}return e}function up(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return pp(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=at(n[r]);else for(;++r<i;){var a=n[r];o+=at(a)+at(e[a])}return o}return""}function at(e){var t="\0";return e=Yt(e),oo(e)+io+up(e)+t}function cp(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var o=e[t]==="0";t++;var a="",u=e.substring(t,t+ro),s=parseInt(u,10)+Uc;for(o&&(s=-s),t+=ro;;){var l=e[t];if(l==="\0")break;a+=l,t++}a=a.split("."),a.length===1?r=parseInt(a,10):r=parseFloat(a[0]+"."+a[1]),o&&(r=r-10),s!==0&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}function fp(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){var a=e.pop();i[a]=n}else e.push(n)}}function lp(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();fp(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var o=cp(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var u=e[r];if(u==="\0")break;a+=u,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var s={element:[],index:t.length};t.push(s.element),n.push(s);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function dp(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=xe(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function hp(e,t){return e===t?0:e>t?1:-1}function vp(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=xe(n[o],r[o]);if(a!==0||(a=xe(e[n[o]],t[r[o]]),a!==0))return a}return n.length===r.length?0:n.length>r.length?1:-1}function oo(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function pp(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(r?-n:n)-Uc,a=sp(o.toString(),"0",ro);i+=io+a;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var s=u.toFixed(20);return s=s.replace(/\.?0+$/,""),i+=io+s,i}function gp(e){function t(n){return e.map(function(r){var i=Mc(r),o=ca(i),a=ua(n,o);return a})}return function(n,r){var i=t(n.doc),o=t(r.doc),a=xe(i,o);return a!==0?a:Jv(n.doc._id,r.doc._id)}}function yp(e,t,n){if(e=e.filter(function(a){return gn(a.doc,t.selector,n)}),t.sort){var r=gp(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&Xv(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function gn(e,t,n){return n.every(function(r){var i=t[r],o=ca(r),a=ua(e,o);return Nc(r)?_p(r,i,e):Hr(i,e,o,a)})}function Hr(e,t,n,r){return e?typeof e=="object"?Object.keys(e).every(function(i){var o=e[i];if(i.indexOf("$")===0)return $s(i,t,o,n,r);var a=ca(i);if(r===void 0&&typeof o!="object"&&a.length>0)return!1;var u=ua(r,a);return typeof o=="object"?Hr(o,t,n,u):$s("$eq",t,o,a,u)}):e===r:!0}function _p(e,t,n){return e==="$or"?t.some(function(r){return gn(n,r,Object.keys(r))}):e==="$not"?!gn(n,t,Object.keys(t)):!t.find(function(r){return gn(n,r,Object.keys(r))})}function $s(e,t,n,r,i){if(!As[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return As[e](t,n,r,i)}function Pn(e){return typeof e<"u"&&e!==null}function Ft(e){return typeof e<"u"}function mp(e,t){if(typeof e!="number"||parseInt(e,10)!==e)return!1;var n=t[0],r=t[1];return e%n===r}function Es(e,t){return t.some(function(n){return e instanceof Array?e.some(function(r){return xe(n,r)===0}):xe(n,e)===0})}function wp(e,t){return t.every(function(n){return e.some(function(r){return xe(n,r)===0})})}function bp(e,t){return e.length===t}function Tp(e,t){var n=new RegExp(t);return n.test(e)}function $p(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}}var As={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.some(function(i){return gn(i,t,Object.keys(t))}):r.some(function(i){return Hr(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.every(function(i){return gn(i,t,Object.keys(t))}):r.every(function(i){return Hr(t,e,n,i)})},$eq:function(e,t,n,r){return Ft(r)&&xe(r,t)===0},$gte:function(e,t,n,r){return Ft(r)&&xe(r,t)>=0},$gt:function(e,t,n,r){return Ft(r)&&xe(r,t)>0},$lte:function(e,t,n,r){return Ft(r)&&xe(r,t)<=0},$lt:function(e,t,n,r){return Ft(r)&&xe(r,t)<0},$exists:function(e,t,n,r){return t?Ft(r):!Ft(r)},$mod:function(e,t,n,r){return Pn(r)&&mp(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return xe(r,i)!==0})},$in:function(e,t,n,r){return Pn(r)&&Es(r,t)},$nin:function(e,t,n,r){return Pn(r)&&!Es(r,t)},$size:function(e,t,n,r){return Pn(r)&&Array.isArray(r)&&bp(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&wp(r,t)},$regex:function(e,t,n,r){return Pn(r)&&typeof r=="string"&&t.every(function(i){return Tp(r,i)})},$type:function(e,t,n,r){return $p(r,t)}};function Ep(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=op(t);var n={doc:e},r=yp([n],{selector:t},Object.keys(t));return r&&r.length===1}function Ap(e){return Zo(`"use strict";
return `+e+";",{})}function Sp(e){var t=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join(`
`);return Zo(t,{})}function Cp(e,t){if(e.selector&&e.filter&&e.filter!=="_selector"){var n=typeof e.filter=="string"?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function Op(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&typeof e.filter=="string"&&(e.filter==="_view"?e.view=gs(e.view):e.filter=gs(e.filter))}function kp(e,t){return t.filter&&typeof t.filter=="string"&&!t.doc_ids&&!pt(e.db)}function xp(e,t){var n=t.complete;if(t.filter==="_view"){if(!t.view||typeof t.view!="string"){var r=fe(si,"`view` filter parameter not found or invalid.");return n(r)}var i=no(t.view);e.db.get("_design/"+i[0],function(a,u){if(e.isCancelled)return n(null,{status:"cancelled"});if(a)return n(bn(a));var s=u&&u.views&&u.views[i[1]]&&u.views[i[1]].map;if(!s)return n(fe(ct,u.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=Sp(s),e.doChanges(t)})}else if(t.selector)t.filter=function(a){return Ep(a,t.selector)},e.doChanges(t);else{var o=no(t.filter);e.db.get("_design/"+o[0],function(a,u){if(e.isCancelled)return n(null,{status:"cancelled"});if(a)return n(bn(a));var s=u&&u.filters&&u.filters[o[1]];if(!s)return n(fe(ct,u&&u.filters?"missing json key: "+o[1]:"missing json key: filters"));t.filter=Ap(s),e.doChanges(t)})}}function jp(e){e._changesFilterPlugin={validate:Cp,normalize:Op,shouldFilter:kp,filter:xp}}ae.plugin(jp);ae.version=Vv;function qc(e){return e.reduce(function(t,n){return t[n]=!0,t},{})}var Rp=qc(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Pp=qc(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Ss(e){if(!/^\d+-/.test(e))return fe(Ac);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Fp(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,a=r.length;o<a;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}function Hc(e,t,n){n||(n={deterministic_revs:!0});var r,i,o,a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=ci()),i=jc(e,n.deterministic_revs),e._rev){if(o=Ss(e._rev),o.error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[i,a,[]]]]}],r=o.prefix+1}else e._rev_tree=[{pos:1,ids:[i,a,[]]}],r=1;else if(e._revisions&&(e._rev_tree=Fp(e._revisions,a),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if(o=Ss(e._rev),o.error)return o;r=o.prefix,i=o.id,e._rev_tree=[{pos:r,ids:[i,a,[]]}]}Sc(e._id),e._rev=r+"-"+i;var u={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=s[0]==="_";if(l&&!Rp[s]){var g=fe(ps,s);throw g.message=ps.message+": "+s,g}else l&&!Pp[s]?u.metadata[s.slice(1)]=e[s]:u.data[s]=e[s]}return u}function Ip(e){try{return Xo(e)}catch{var t=fe(Ec,"Attachment is not a valid base64 string");return{error:t}}}function Dp(e,t,n){var r=Ip(e.data);if(r.error)return n(r.error);e.length=r.length,t==="blob"?e.data=ta(r,e.content_type):t==="base64"?e.data=rr(r):e.data=r,ia(r,function(i){e.digest="md5-"+i,n()})}function Np(e,t,n){ia(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,t==="binary"?kc(e.data,function(i){e.data=i,n()}):t==="base64"?ra(e.data,function(i){e.data=i,n()}):n()})}function Mp(e,t,n){if(e.stub)return n();typeof e.data=="string"?Dp(e,t,n):Np(e,t,n)}function Lp(e,t,n){if(!e.length)return n();var r=0,i;e.forEach(function(a){var u=a.data&&a.data._attachments?Object.keys(a.data._attachments):[],s=0;if(!u.length)return o();function l(f){i=f,s++,s===u.length&&o()}for(var g in a.data._attachments)Object.prototype.hasOwnProperty.call(a.data._attachments,g)&&Mp(a.data._attachments[g],t,l)});function o(){r++,e.length===r&&(i?n(i):n())}}function Bp(e,t,n,r,i,o,a,u){if(Dv(t.rev_tree,n.metadata.rev)&&!u)return r[i]=n,o();var s=t.winningRev||Wt(t),l="deleted"in t?t.deleted:bt(t,s),g="deleted"in n.metadata?n.metadata.deleted:bt(n.metadata),f=/^1-/.test(n.metadata.rev);if(l&&!g&&u&&f){var p=n.data;p._rev=s,p._id=n.metadata.id,n=Hc(p,u)}var _=Fc(t.rev_tree,n.metadata.rev_tree[0],e),m=u&&(l&&g&&_.conflicts!=="new_leaf"||!l&&_.conflicts!=="new_leaf"||l&&!g&&_.conflicts==="new_branch");if(m){var $=fe(wn);return r[i]=$,o()}var w=n.metadata.rev;n.metadata.rev_tree=_.tree,n.stemmedRevs=_.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var v=Wt(n.metadata),d=bt(n.metadata,v),c=l===d?0:l<d?-1:1,h;w===v?h=d:h=bt(n.metadata,w),a(n,v,d,h,!0,c,i,o)}function Up(e){return e.metadata.rev_tree[0].ids[1].status==="missing"}function qp(e,t,n,r,i,o,a,u,s){e=e||1e3;function l($,w,v){var d=Wt($.metadata),c=bt($.metadata,d);if("was_delete"in u&&c)return o[w]=fe(ct,"deleted"),v();var h=g&&Up($);if(h){var y=fe(wn);return o[w]=y,v()}var b=c?0:1;a($,d,c,c,!1,b,w,v)}var g=u.new_edits,f=new Ye,p=0,_=t.length;function m(){++p===_&&s&&s()}t.forEach(function($,w){if($._id&&Kt($._id)){var v=$._deleted?"_removeLocal":"_putLocal";n[v]($,{ctx:i},function(c,h){o[w]=c||h,m()});return}var d=$.metadata.id;f.has(d)?(_--,f.get(d).push([$,w])):f.set(d,[[$,w]])}),f.forEach(function($,w){var v=0;function d(){++v<$.length?c():m()}function c(){var h=$[v],y=h[0],b=h[1];if(r.has(w))Bp(e,r.get(w),y,o,b,d,a,g);else{var k=Fc([],y.metadata.rev_tree[0],e);y.metadata.rev_tree=k.tree,y.stemmedRevs=k.stemmedRevs||[],l(y,b,d)}}c()})}var Hp=5,Re="document-store",Be="by-sequence",et="attach-store",Ut="attach-seq-store",ze="meta-store",dt="local-store",ao="detect-blob-support";function Gp(e){try{return JSON.parse(e)}catch{return ri.parse(e)}}function zp(e){try{return JSON.stringify(e)}catch{return ri.stringify(e)}}function vt(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(fe(Vo,n,t.type))}}function so(e,t,n){return{data:zp(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function qt(e){if(!e)return null;var t=Gp(e.data);return t.winningRev=e.winningRev,t.deleted=e.deletedOrLocal==="1",t.seq=e.seq,t}function Gr(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Gc(e,t,n,r){n?r(e?typeof e!="string"?e:na(e,t):ea([""],{type:t})):e?typeof e!="string"?Oc(e,function(i){r(rr(i))}):r(e):r("")}function zc(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var o=0;function a(){++o===i.length&&r&&r()}function u(s,l){var g=s._attachments[l],f=g.digest,p=n.objectStore(et).get(f);p.onsuccess=function(_){g.body=_.target.result.body,a()}}i.forEach(function(s){t.attachments&&t.include_docs?u(e,s):(e._attachments[s].stub=!0,a())})}function uo(e,t){return Promise.all(e.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var o=n.doc._attachments[i];if("body"in o){var a=o.body,u=o.content_type;return new Promise(function(s){Gc(a,u,t,function(l){n.doc._attachments[i]=zt(nr(o,["digest","content_type"]),{data:l}),s()})})}}))}}))}function Wc(e,t,n){var r=[],i=n.objectStore(Be),o=n.objectStore(et),a=n.objectStore(Ut),u=e.length;function s(){u--,u||l()}function l(){r.length&&r.forEach(function(g){var f=a.index("digestSeq").count(IDBKeyRange.bound(g+"::",g+"::￿",!1,!1));f.onsuccess=function(p){var _=p.target.result;_||o.delete(g)}})}e.forEach(function(g){var f=i.index("_doc_id_rev"),p=t+"::"+g;f.getKey(p).onsuccess=function(_){var m=_.target.result;if(typeof m!="number")return s();i.delete(m);var $=a.index("seq").openCursor(IDBKeyRange.only(m));$.onsuccess=function(w){var v=w.target.result;if(v){var d=v.value.digestSeq.split("::")[0];r.push(d),a.delete(v.primaryKey),v.continue()}else s()}}})}function st(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}var Un=new Sn;function Wp(e,t,n,r,i,o){for(var a=t.docs,u,s,l,g,f,p,_,m,$=0,w=a.length;$<w;$++){var v=a[$];v._id&&Kt(v._id)||(v=a[$]=Hc(v,n.new_edits,e),v.error&&!_&&(_=v))}if(_)return o(_);var d=!1,c=0,h=new Array(a.length),y=new Ye,b=!1,k=r._meta.blobSupport?"blob":"base64";Lp(a,k,function(I){if(I)return o(I);j()});function j(){var I=[Re,Be,et,dt,Ut,ze],B=st(i,I,"readwrite");if(B.error)return o(B.error);u=B.txn,u.onabort=vt(o),u.ontimeout=vt(o),u.oncomplete=K,s=u.objectStore(Re),l=u.objectStore(Be),g=u.objectStore(et),f=u.objectStore(Ut),p=u.objectStore(ze),p.get(ze).onsuccess=function(A){m=A.target.result,V()},F(function(A){if(A)return b=!0,o(A);J()})}function P(){d=!0,V()}function L(){qp(e.revs_limit,a,r,y,u,h,U,n,P)}function V(){!m||!d||(m.docCount+=c,p.put(m))}function J(){if(!a.length)return;var I=0;function B(){++I===a.length&&L()}function A(T){var R=qt(T.target.result);R&&y.set(R.id,R),B()}for(var M=0,H=a.length;M<H;M++){var W=a[M];if(W._id&&Kt(W._id)){B();continue}var O=s.get(W.metadata.id);O.onsuccess=A}}function K(){b||(Un.notify(r._meta.name),o(null,h))}function D(I,B){var A=g.get(I);A.onsuccess=function(M){if(M.target.result)B();else{var H=fe(vv,"unknown stub attachment with digest "+I);H.status=412,B(H)}}}function F(I){var B=[];if(a.forEach(function(W){W.data&&W.data._attachments&&Object.keys(W.data._attachments).forEach(function(O){var T=W.data._attachments[O];T.stub&&B.push(T.digest)})}),!B.length)return I();var A=0,M;function H(){++A===B.length&&I(M)}B.forEach(function(W){D(W,function(O){O&&!M&&(M=O),H()})})}function U(I,B,A,M,H,W,O,T){I.metadata.winningRev=B,I.metadata.deleted=A;var R=I.data;R._id=I.metadata.id,R._rev=I.metadata.rev,M&&(R._deleted=!0);var N=R._attachments&&Object.keys(R._attachments).length;if(N)return S(I,B,A,H,O,T);c+=W,V(),E(I,B,A,H,O,T)}function E(I,B,A,M,H,W){var O=I.data,T=I.metadata;O._doc_id_rev=T.id+"::"+T.rev,delete O._id,delete O._rev;function R(Q){var ee=I.stemmedRevs||[];M&&r.auto_compaction&&(ee=ee.concat(xv(I.metadata))),ee&&ee.length&&Wc(ee,I.metadata.id,u),T.seq=Q.target.result;var te=so(T,B,A),se=s.put(te);se.onsuccess=Y}function N(Q){Q.preventDefault(),Q.stopPropagation();var ee=l.index("_doc_id_rev"),te=ee.getKey(O._doc_id_rev);te.onsuccess=function(se){var ie=l.put(O,se.target.result);ie.onsuccess=R}}function Y(){h[H]={ok:!0,id:T.id,rev:T.rev},y.set(I.metadata.id,I.metadata),C(I,T.seq,W)}var G=l.put(O);G.onsuccess=R,G.onerror=N}function S(I,B,A,M,H,W){var O=I.data,T=0,R=Object.keys(O._attachments);function N(){T===R.length&&E(I,B,A,M,H,W)}function Y(){T++,N()}R.forEach(function(G){var Q=I.data._attachments[G];if(Q.stub)T++,N();else{var ee=Q.data;delete Q.data,Q.revpos=parseInt(B,10);var te=Q.digest;x(te,ee,Y)}})}function C(I,B,A){var M=0,H=Object.keys(I.data._attachments||{});if(!H.length)return A();function W(){++M===H.length&&A()}function O(R){var N=I.data._attachments[R].digest,Y=f.put({seq:B,digestSeq:N+"::"+B});Y.onsuccess=W,Y.onerror=function(G){G.preventDefault(),G.stopPropagation(),W()}}for(var T=0;T<H.length;T++)O(H[T])}function x(I,B,A){var M=g.count(I);M.onsuccess=function(H){var W=H.target.result;if(W)return A();var O={digest:I,body:B},T=g.put(O);T.onsuccess=A}}}function Kc(e,t,n,r,i){r===-1&&(r=1e3);var o=typeof e.getAll=="function"&&typeof e.getAllKeys=="function"&&r>1&&!n,a,u,s;function l(_){u=_.target.result,a&&i(a,u,s)}function g(_){a=_.target.result,u&&i(a,u,s)}function f(){if(!a.length)return i();var _=a[a.length-1],m;if(t&&t.upper)try{m=IDBKeyRange.bound(_,t.upper,!0,t.upperOpen)}catch($){if($.name==="DataError"&&$.code===0)return i()}else m=IDBKeyRange.lowerBound(_,!0);t=m,a=null,u=null,e.getAll(t,r).onsuccess=l,e.getAllKeys(t,r).onsuccess=g}function p(_){var m=_.target.result;if(!m)return i();i([m.key],[m.value],m)}o?(s={continue:f},e.getAll(t,r).onsuccess=l,e.getAllKeys(t,r).onsuccess=g):n?e.openCursor(t,"prev").onsuccess=p:e.openCursor(t).onsuccess=p}function Kp(e,t,n){if(typeof e.getAll=="function"){e.getAll(t).onsuccess=n;return}var r=[];function i(o){var a=o.target.result;a?(r.push(a.value),a.continue()):n({target:{result:r}})}e.openCursor(t).onsuccess=i}function Yp(e,t,n){var r=new Array(e.length),i=0;e.forEach(function(o,a){t.get(o).onsuccess=function(u){u.target.result?r[a]=u.target.result:r[a]={key:o,error:"not_found"},i++,i===e.length&&n(e,r,{})}})}function Qp(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(o){return{error:o}}return null}function Vp(e,t,n){var r="startkey"in e?e.startkey:!1,i="endkey"in e?e.endkey:!1,o="key"in e?e.key:!1,a="keys"in e?e.keys:!1,u=e.skip||0,s=typeof e.limit=="number"?e.limit:-1,l=e.inclusive_end!==!1,g,f;if(!a&&(g=Qp(r,i,l,o,e.descending),f=g&&g.error,f&&!(f.name==="DataError"&&f.code===0)))return n(fe(Vo,f.name,f.message));var p=[Re,Be,ze];e.attachments&&p.push(et);var _=st(t,p,"readonly");if(_.error)return n(_.error);var m=_.txn;m.oncomplete=K,m.onabort=vt(n);var $=m.objectStore(Re),w=m.objectStore(Be),v=m.objectStore(ze),d=w.index("_doc_id_rev"),c=[],h,y;v.get(ze).onsuccess=function(D){h=D.target.result.docCount},e.update_seq&&b(w,function(D){D.target.result&&D.target.result.length>0&&(y=D.target.result[0])});function b(D,F){function U(E){var S=E.target.result,C=void 0;return S&&S.key&&(C=S.key),F({target:{result:[C]}})}D.openCursor(null,"prev").onsuccess=U}function k(D,F,U){var E=D.id+"::"+U;d.get(E).onsuccess=function(C){if(F.doc=Gr(C.target.result)||{},e.conflicts){var x=aa(D);x.length&&(F.doc._conflicts=x)}zc(F.doc,e,m)}}function j(D,F){var U={id:F.id,key:F.id,value:{rev:D}},E=F.deleted;E?a&&(c.push(U),U.value.deleted=!0,U.doc=null):u--<=0&&(c.push(U),e.include_docs&&k(F,U,D))}function P(D){for(var F=0,U=D.length;F<U&&c.length!==s;F++){var E=D[F];if(E.error&&a){c.push(E);continue}var S=qt(E),C=S.winningRev;j(C,S)}}function L(D,F,U){U&&(P(F),c.length<s&&U.continue())}function V(D){var F=D.target.result;e.descending&&(F=F.reverse()),P(F)}function J(){var D={total_rows:h,offset:e.skip,rows:c};e.update_seq&&y!==void 0&&(D.update_seq=y),n(null,D)}function K(){e.attachments?uo(c,e.binary).then(J):J()}if(!(f||s===0)){if(a)return Yp(e.keys,$,L);if(s===-1)return Kp($,g,V);Kc($,g,e.descending,s+u,L)}}function Jp(e){return new Promise(function(t){var n=ea([""]),r=e.objectStore(ao).put(n,"key");r.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);t(o||!i||parseInt(i[1],10)>=43)},r.onerror=e.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)}}).catch(function(){return!1})}function Zp(e,t){var n=e.objectStore(Re).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(r){t(r.target.result)}}var co=!1,fo=[];function Xp(e,t,n,r){try{e(t,n)}catch(i){r.emit("error",i)}}function Cs(){co||!fo.length||(co=!0,fo.shift()())}function eg(e,t,n){fo.push(function(){e(function(o,a){Xp(t,o,a,n),co=!1,He(function(){Cs()})})}),Cs()}function tg(e,t,n,r){if(e=De(e),e.continuous){var i=n+":"+ci();return Un.addListener(n,i,t,e),Un.notify(n),{cancel:function(){Un.removeListener(n,i)}}}var o=e.doc_ids&&new mn(e.doc_ids);e.since=e.since||0;var a=e.since,u="limit"in e?e.limit:-1;u===0&&(u=1);var s=[],l=0,g=Jo(e),f=new Ye,p,_,m,$;function w(j,P,L){if(!L||!j.length)return;var V=new Array(j.length),J=new Array(j.length);function K(U,E){var S=e.processChange(E,U,e);a=S.seq=U.seq;var C=g(S);return typeof C=="object"?Promise.reject(C):C?(l++,e.return_docs&&s.push(S),e.attachments&&e.include_docs?new Promise(function(x){zc(E,e,p,function(){uo([S],e.binary).then(function(){x(S)})})}):Promise.resolve(S)):Promise.resolve()}function D(){for(var U=[],E=0,S=V.length;E<S&&l!==u;E++){var C=V[E];if(C){var x=J[E];U.push(K(x,C))}}Promise.all(U).then(function(I){for(var B=0,A=I.length;B<A;B++)I[B]&&e.onChange(I[B])}).catch(e.complete),l!==u&&L.continue()}var F=0;P.forEach(function(U,E){var S=Gr(U),C=j[E];d(S,C,function(x,I){J[E]=x,V[E]=I,++F===j.length&&D()})})}function v(j,P,L,V){if(L.seq!==P)return V();if(L.winningRev===j._rev)return V(L,j);var J=j._id+"::"+L.winningRev,K=$.get(J);K.onsuccess=function(D){V(L,Gr(D.target.result))}}function d(j,P,L){if(o&&!o.has(j._id))return L();var V=f.get(j._id);if(V)return v(j,P,V,L);m.get(j._id).onsuccess=function(J){V=qt(J.target.result),f.set(j._id,V),v(j,P,V,L)}}function c(){e.complete(null,{results:s,last_seq:a})}function h(){!e.continuous&&e.attachments?uo(s).then(c):c()}var y=[Re,Be];e.attachments&&y.push(et);var b=st(r,y,"readonly");if(b.error)return e.complete(b.error);p=b.txn,p.onabort=vt(e.complete),p.oncomplete=h,_=p.objectStore(Be),m=p.objectStore(Re),$=_.index("_doc_id_rev");var k=e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null;Kc(_,k,e.descending,u,w)}var un=new Ye,Oi,ki=new Ye;function Yc(e,t){var n=this;eg(function(r){ng(n,e,r)},t,n.constructor)}function ng(e,t,n){var r=t.name,i=null,o=null;e._meta=null;function a(w){return function(v,d){v&&v instanceof Error&&!v.reason&&o&&(v.reason=o),w(v,d)}}function u(w){var v=w.createObjectStore(Re,{keyPath:"id"});w.createObjectStore(Be,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),w.createObjectStore(et,{keyPath:"digest"}),w.createObjectStore(ze,{keyPath:"id",autoIncrement:!1}),w.createObjectStore(ao),v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),w.createObjectStore(dt,{keyPath:"_id"});var d=w.createObjectStore(Ut,{autoIncrement:!0});d.createIndex("seq","seq"),d.createIndex("digestSeq","digestSeq",{unique:!0})}function s(w,v){var d=w.objectStore(Re);d.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),d.openCursor().onsuccess=function(c){var h=c.target.result;if(h){var y=h.value,b=bt(y);y.deletedOrLocal=b?"1":"0",d.put(y),h.continue()}else v()}}function l(w){w.createObjectStore(dt,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function g(w,v){var d=w.objectStore(dt),c=w.objectStore(Re),h=w.objectStore(Be),y=c.openCursor();y.onsuccess=function(b){var k=b.target.result;if(k){var j=k.value,P=j.id,L=Kt(P),V=Wt(j);if(L){var J=P+"::"+V,K=P+"::",D=P+"::~",F=h.index("_doc_id_rev"),U=IDBKeyRange.bound(K,D,!1,!1),E=F.openCursor(U);E.onsuccess=function(S){if(E=S.target.result,!E)c.delete(k.primaryKey),k.continue();else{var C=E.value;C._doc_id_rev===J&&d.put(C),h.delete(E.primaryKey),E.continue()}}}else k.continue()}else v&&v()}}function f(w){var v=w.createObjectStore(Ut,{autoIncrement:!0});v.createIndex("seq","seq"),v.createIndex("digestSeq","digestSeq",{unique:!0})}function p(w,v){var d=w.objectStore(Be),c=w.objectStore(et),h=w.objectStore(Ut),y=c.count();y.onsuccess=function(b){var k=b.target.result;if(!k)return v();d.openCursor().onsuccess=function(j){var P=j.target.result;if(!P)return v();for(var L=P.value,V=P.primaryKey,J=Object.keys(L._attachments||{}),K={},D=0;D<J.length;D++){var F=L._attachments[J[D]];K[F.digest]=!0}var U=Object.keys(K);for(D=0;D<U.length;D++){var E=U[D];h.put({seq:V,digestSeq:E+"::"+V})}P.continue()}}}function _(w){function v(y){return y.data?qt(y):(y.deleted=y.deletedOrLocal==="1",y)}var d=w.objectStore(Be),c=w.objectStore(Re),h=c.openCursor();h.onsuccess=function(y){var b=y.target.result;if(!b)return;var k=v(b.value);k.winningRev=k.winningRev||Wt(k);function j(){var L=k.id+"::",V=k.id+"::￿",J=d.index("_doc_id_rev").openCursor(IDBKeyRange.bound(L,V)),K=0;J.onsuccess=function(D){var F=D.target.result;if(!F)return k.seq=K,P();var U=F.primaryKey;U>K&&(K=U),F.continue()}}function P(){var L=so(k,k.winningRev,k.deleted),V=c.put(L);V.onsuccess=function(){b.continue()}}if(k.seq)return P();j()}}e._remote=!1,e.type=function(){return"idb"},e._id=wc(function(w){w(null,e._meta.instanceId)}),e._bulkDocs=function(v,d,c){Wp(t,v,d,e,i,a(c))},e._get=function(v,d,c){var h,y,b,k=d.ctx;if(!k){var j=st(i,[Re,Be,et],"readonly");if(j.error)return c(j.error);k=j.txn}function P(){c(b,{doc:h,metadata:y,ctx:k})}k.objectStore(Re).get(v).onsuccess=function(L){if(y=qt(L.target.result),!y)return b=fe(ct,"missing"),P();var V;if(d.rev)V=d.latest?Mv(d.rev,y):d.rev;else{V=y.winningRev;var J=bt(y);if(J)return b=fe(ct,"deleted"),P()}var K=k.objectStore(Be),D=y.id+"::"+V;K.index("_doc_id_rev").get(D).onsuccess=function(F){if(h=F.target.result,h&&(h=Gr(h)),!h)return b=fe(ct,"missing"),P();P()}}},e._getAttachment=function(w,v,d,c,h){var y;if(c.ctx)y=c.ctx;else{var b=st(i,[Re,Be,et],"readonly");if(b.error)return h(b.error);y=b.txn}var k=d.digest,j=d.content_type;y.objectStore(et).get(k).onsuccess=function(P){var L=P.target.result.body;Gc(L,j,c.binary,function(V){h(null,V)})}},e._info=function(v){var d,c,h=st(i,[ze,Be],"readonly");if(h.error)return v(h.error);var y=h.txn;y.objectStore(ze).get(ze).onsuccess=function(b){c=b.target.result.docCount},y.objectStore(Be).openCursor(null,"prev").onsuccess=function(b){var k=b.target.result;d=k?k.key:0},y.oncomplete=function(){v(null,{doc_count:c,update_seq:d,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(v,d){Vp(v,i,a(d))},e._changes=function(v){return tg(v,e,r,i)},e._close=function(w){i.close(),un.delete(r),w()},e._getRevisionTree=function(w,v){var d=st(i,[Re],"readonly");if(d.error)return v(d.error);var c=d.txn,h=c.objectStore(Re).get(w);h.onsuccess=function(y){var b=qt(y.target.result);b?v(null,b.rev_tree):v(fe(ct))}},e._doCompaction=function(w,v,d){var c=[Re,Be,et,Ut],h=st(i,c,"readwrite");if(h.error)return d(h.error);var y=h.txn,b=y.objectStore(Re);b.get(w).onsuccess=function(k){var j=qt(k.target.result);en(j.rev_tree,function(V,J,K,D,F){var U=J+"-"+K;v.indexOf(U)!==-1&&(F.status="missing")}),Wc(v,w,y);var P=j.winningRev,L=j.deleted;y.objectStore(Re).put(so(j,P,L))},y.onabort=vt(d),y.oncomplete=function(){d()}},e._getLocal=function(w,v){var d=st(i,[dt],"readonly");if(d.error)return v(d.error);var c=d.txn,h=c.objectStore(dt).get(w);h.onerror=vt(v),h.onsuccess=function(y){var b=y.target.result;b?(delete b._doc_id_rev,v(null,b)):v(fe(ct))}},e._putLocal=function(w,v,d){typeof v=="function"&&(d=v,v={}),delete w._revisions;var c=w._rev,h=w._id;c?w._rev="0-"+(parseInt(c.split("-")[1],10)+1):w._rev="0-1";var y=v.ctx,b;if(!y){var k=st(i,[dt],"readwrite");if(k.error)return d(k.error);y=k.txn,y.onerror=vt(d),y.oncomplete=function(){b&&d(null,b)}}var j=y.objectStore(dt),P;c?(P=j.get(h),P.onsuccess=function(L){var V=L.target.result;if(!V||V._rev!==c)d(fe(wn));else{var J=j.put(w);J.onsuccess=function(){b={ok:!0,id:w._id,rev:w._rev},v.ctx&&d(null,b)}}}):(P=j.add(w),P.onerror=function(L){d(fe(wn)),L.preventDefault(),L.stopPropagation()},P.onsuccess=function(){b={ok:!0,id:w._id,rev:w._rev},v.ctx&&d(null,b)})},e._removeLocal=function(w,v,d){typeof v=="function"&&(d=v,v={});var c=v.ctx;if(!c){var h=st(i,[dt],"readwrite");if(h.error)return d(h.error);c=h.txn,c.oncomplete=function(){y&&d(null,y)}}var y,b=w._id,k=c.objectStore(dt),j=k.get(b);j.onerror=vt(d),j.onsuccess=function(P){var L=P.target.result;!L||L._rev!==w._rev?d(fe(ct)):(k.delete(b),y={ok:!0,id:b,rev:"0-0"},v.ctx&&d(null,y))}},e._destroy=function(w,v){Un.removeAllListeners(r);var d=ki.get(r);d&&d.result&&(d.result.close(),un.delete(r));var c=indexedDB.deleteDatabase(r);c.onsuccess=function(){ki.delete(r),ai()&&r in localStorage&&delete localStorage[r],v(null,{ok:!0})},c.onerror=vt(v)};var m=un.get(r);if(m)return i=m.idb,e._meta=m.global,He(function(){n(null,e)});var $=indexedDB.open(r,Hp);ki.set(r,$),$.onupgradeneeded=function(w){var v=w.target.result;if(w.oldVersion<1)return u(v);var d=w.currentTarget.transaction;w.oldVersion<3&&l(v),w.oldVersion<4&&f(v);var c=[s,g,p,_],h=w.oldVersion;function y(){var b=c[h-1];h++,b&&b(d,y)}y()},$.onsuccess=function(w){i=w.target.result,i.onversionchange=function(){i.close(),un.delete(r)},i.onabort=function(P){nt("error","Database has a global failure",P.target.error),o=P.target.error,i.close(),un.delete(r)};var v=i.transaction([ze,ao,Re],"readwrite"),d=!1,c,h,y,b;function k(){typeof y>"u"||!d||(e._meta={name:r,instanceId:b,blobSupport:y},un.set(r,{idb:i,global:e._meta}),n(null,e))}function j(){if(!(typeof h>"u"||typeof c>"u")){var P=r+"_id";P in c?b=c[P]:c[P]=b=ci(),c.docCount=h,v.objectStore(ze).put(c)}}v.objectStore(ze).get(ze).onsuccess=function(P){c=P.target.result||{id:ze},j()},Zp(v,function(P){h=P,j()}),Oi||(Oi=Jp(v)),Oi.then(function(P){y=P,k()}),v.oncomplete=function(){d=!0,k()},v.onabort=vt(n)},$.onerror=function(w){var v=w.target.error&&w.target.error.message;v?v.indexOf("stored database is a higher version")!==-1&&(v=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):v="Failed to open indexedDB, are you in private browsing mode?",nt("error",v),n(fe(Vo,v))}}Yc.valid=function(){try{return typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}};function rg(e){e.adapter("idb",Yc,!0)}function ig(e,t){return new Promise(function(n,r){var i=0,o=0,a=0,u=e.length,s;function l(){i++,e[o++]().then(f,p)}function g(){++a===u?s?r(s):n():_()}function f(){i--,g()}function p(m){i--,s=s||m,g()}function _(){for(;i<t&&o<u;)l()}_()})}var og=25,ag=50,Tr=5e3,sg=1e4,xi={};function ji(e){var t=e.doc||e.ok,n=t&&t._attachments;n&&Object.keys(n).forEach(function(r){var i=n[r];i.data=na(i.data,i.content_type)})}function It(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function Os(e){return!e._attachments||!Object.keys(e._attachments)?Promise.resolve():Promise.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&typeof n.data!="string")return new Promise(function(r){ra(n.data,r)}).then(function(r){n.data=r})}))}function ug(e){if(!e.prefix)return!1;var t=Cc(e.prefix).protocol;return t==="http"||t==="https"}function cg(e,t){if(ug(t)){var n=t.name.substr(t.prefix.length),r=t.prefix.replace(/\/?$/,"/");e=r+encodeURIComponent(n)}var i=Cc(e);(i.user||i.password)&&(i.auth={username:i.user,password:i.password});var o=i.path.replace(/(^\/|\/$)/g,"").split("/");return i.db=o.pop(),i.db.indexOf("%")===-1&&(i.db=encodeURIComponent(i.db)),i.path=o.join("/"),i}function Ie(e,t){return kr(e,e.db+"/"+t)}function kr(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function $r(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function fg(e){var t=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=t.indexOf("msie")!==-1,r=t.indexOf("trident")!==-1,i=t.indexOf("edge")!==-1,o=!("method"in e)||e.method==="GET";return(n||r||i)&&o}function lo(e,t){var n=this,r=cg(e.name,e),i=Ie(r,"");e=De(e);var o=function(f,p){if(p=p||{},p.headers=p.headers||new pn,p.credentials="include",e.auth||r.auth){var _=e.auth||r.auth,m=_.username+":"+_.password,$=rr(unescape(encodeURIComponent(m)));p.headers.set("Authorization","Basic "+$)}var w=e.headers||{};Object.keys(w).forEach(function(d){p.headers.append(d,w[d])}),fg(p)&&(f+=(f.indexOf("?")===-1?"?":"&")+"_nonce="+Date.now());var v=e.fetch||Dc;return v(f,p)};function a(f,p){return Fe(f,$t(function(_){l().then(function(){return p.apply(this,_)}).catch(function(m){var $=_.pop();$(m)})})).bind(n)}function u(f,p,_){var m={};return p=p||{},p.headers=p.headers||new pn,p.headers.get("Content-Type")||p.headers.set("Content-Type","application/json"),p.headers.get("Accept")||p.headers.set("Accept","application/json"),o(f,p).then(function($){return m.ok=$.ok,m.status=$.status,$.json()}).then(function($){if(m.data=$,!m.ok){m.data.status=m.status;var w=bn(m.data);if(_)return _(w);throw w}if(Array.isArray(m.data)&&(m.data=m.data.map(function(v){return v.error||v.missing?bn(v):v})),_)_(null,m.data);else return m})}var s;function l(){return e.skip_setup?Promise.resolve():s||(s=u(i).catch(function(f){return f&&f.status&&f.status===404?(eo(404,"PouchDB is just detecting if the remote exists."),u(i,{method:"PUT"})):Promise.reject(f)}).catch(function(f){return f&&f.status&&f.status===412?!0:Promise.reject(f)}),s.catch(function(){s=null}),s)}He(function(){t(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=a("id",function(f){o(kr(r,"")).then(function(p){return p.json()}).catch(function(){return{}}).then(function(p){var _=p&&p.uuid?p.uuid+r.db:Ie(r,"");f(null,_)})}),n.compact=a("compact",function(f,p){typeof f=="function"&&(p=f,f={}),f=De(f),u(Ie(r,"_compact"),{method:"POST"}).then(function(){function _(){n.info(function(m,$){$&&!$.compact_running?p(null,{ok:!0}):setTimeout(_,f.interval||200)})}_()})}),n.bulkGet=Fe("bulkGet",function(f,p){var _=this;function m(d){var c={};f.revs&&(c.revs=!0),f.attachments&&(c.attachments=!0),f.latest&&(c.latest=!0),u(Ie(r,"_bulk_get"+$r(c)),{method:"POST",body:JSON.stringify({docs:f.docs})}).then(function(h){f.attachments&&f.binary&&h.data.results.forEach(function(y){y.docs.forEach(ji)}),d(null,h.data)}).catch(d)}function $(){var d=ag,c=Math.ceil(f.docs.length/d),h=0,y=new Array(c);function b(P){return function(L,V){y[P]=V.results,++h===c&&p(null,{results:qr(y)})}}for(var k=0;k<c;k++){var j=nr(f,["revs","attachments","binary","latest"]);j.docs=f.docs.slice(k*d,Math.min(f.docs.length,(k+1)*d)),bc(_,j,b(k))}}var w=kr(r,""),v=xi[w];typeof v!="boolean"?m(function(d,c){d?(xi[w]=!1,eo(d.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),$()):(xi[w]=!0,p(null,c))}):v?m(p):$()}),n._info=function(f){l().then(function(){return o(Ie(r,""))}).then(function(p){return p.json()}).then(function(p){p.host=Ie(r,""),f(null,p)}).catch(f)},n.fetch=function(f,p){return l().then(function(){var _=f.substring(0,1)==="/"?kr(r,f.substring(1)):Ie(r,f);return o(_,p)})},n.get=a("get",function(f,p,_){typeof p=="function"&&(_=p,p={}),p=De(p);var m={};p.revs&&(m.revs=!0),p.revs_info&&(m.revs_info=!0),p.latest&&(m.latest=!0),p.open_revs&&(p.open_revs!=="all"&&(p.open_revs=JSON.stringify(p.open_revs)),m.open_revs=p.open_revs),p.rev&&(m.rev=p.rev),p.conflicts&&(m.conflicts=p.conflicts),p.update_seq&&(m.update_seq=p.update_seq),f=It(f);function $(d){var c=d._attachments,h=c&&Object.keys(c);if(!c||!h.length)return;function y(k){var j=c[k],P=It(d._id)+"/"+g(k)+"?rev="+d._rev;return o(Ie(r,P)).then(function(L){return"buffer"in L?L.buffer():L.blob()}).then(function(L){if(p.binary){var V=Object.getOwnPropertyDescriptor(L.__proto__,"type");return(!V||V.set)&&(L.type=j.content_type),L}return new Promise(function(J){ra(L,J)})}).then(function(L){delete j.stub,delete j.length,j.data=L})}var b=h.map(function(k){return function(){return y(k)}});return ig(b,5)}function w(d){return Array.isArray(d)?Promise.all(d.map(function(c){if(c.ok)return $(c.ok)})):$(d)}var v=Ie(r,f+$r(m));u(v).then(function(d){return Promise.resolve().then(function(){if(p.attachments)return w(d.data)}).then(function(){_(null,d.data)})}).catch(function(d){d.docId=f,_(d)})}),n.remove=a("remove",function(f,p,_,m){var $;typeof p=="string"?($={_id:f,_rev:p},typeof _=="function"&&(m=_,_={})):($=f,typeof p=="function"?(m=p,_={}):(m=_,_=p));var w=$._rev||_.rev,v=Ie(r,It($._id))+"?rev="+w;u(v,{method:"DELETE"},m).catch(m)});function g(f){return f.split("/").map(encodeURIComponent).join("/")}n.getAttachment=a("getAttachment",function(f,p,_,m){typeof _=="function"&&(m=_,_={});var $=_.rev?"?rev="+_.rev:"",w=Ie(r,It(f))+"/"+g(p)+$,v;o(w,{method:"GET"}).then(function(d){if(v=d.headers.get("content-type"),d.ok)return typeof process<"u"&&!process.browser&&typeof d.buffer=="function"?d.buffer():d.blob();throw d}).then(function(d){if(typeof process<"u"&&!process.browser){var c=Object.getOwnPropertyDescriptor(d.__proto__,"type");(!c||c.set)&&(d.type=v)}m(null,d)}).catch(function(d){m(d)})}),n.removeAttachment=a("removeAttachment",function(f,p,_,m){var $=Ie(r,It(f)+"/"+g(p))+"?rev="+_;u($,{method:"DELETE"},m).catch(m)}),n.putAttachment=a("putAttachment",function(f,p,_,m,$,w){typeof $=="function"&&(w=$,$=m,m=_,_=null);var v=It(f)+"/"+g(p),d=Ie(r,v);if(_&&(d+="?rev="+_),typeof m=="string"){var c;try{c=Xo(m)}catch{return w(fe(Ec,"Attachment is not a valid base64 string"))}m=c?ta(c,$):""}u(d,{headers:new pn({"Content-Type":$}),method:"PUT",body:m},w).catch(w)}),n._bulkDocs=function(f,p,_){f.new_edits=p.new_edits,l().then(function(){return Promise.all(f.docs.map(Os))}).then(function(){return u(Ie(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(f)},_)}).catch(_)},n._put=function(f,p,_){l().then(function(){return Os(f)}).then(function(){return u(Ie(r,It(f._id)),{method:"PUT",body:JSON.stringify(f)})}).then(function(m){_(null,m.data)}).catch(function(m){m.docId=f&&f._id,_(m)})},n.allDocs=a("allDocs",function(f,p){typeof f=="function"&&(p=f,f={}),f=De(f);var _={},m,$="GET";f.conflicts&&(_.conflicts=!0),f.update_seq&&(_.update_seq=!0),f.descending&&(_.descending=!0),f.include_docs&&(_.include_docs=!0),f.attachments&&(_.attachments=!0),f.key&&(_.key=JSON.stringify(f.key)),f.start_key&&(f.startkey=f.start_key),f.startkey&&(_.startkey=JSON.stringify(f.startkey)),f.end_key&&(f.endkey=f.end_key),f.endkey&&(_.endkey=JSON.stringify(f.endkey)),typeof f.inclusive_end<"u"&&(_.inclusive_end=!!f.inclusive_end),typeof f.limit<"u"&&(_.limit=f.limit),typeof f.skip<"u"&&(_.skip=f.skip);var w=$r(_);typeof f.keys<"u"&&($="POST",m={keys:f.keys}),u(Ie(r,"_all_docs"+w),{method:$,body:JSON.stringify(m)}).then(function(v){f.include_docs&&f.attachments&&f.binary&&v.data.rows.forEach(ji),p(null,v.data)}).catch(p)}),n._changes=function(f){var p="batch_size"in f?f.batch_size:og;f=De(f),f.continuous&&!("heartbeat"in f)&&(f.heartbeat=sg);var _="timeout"in f?f.timeout:30*1e3;"timeout"in f&&f.timeout&&_-f.timeout<Tr&&(_=f.timeout+Tr),"heartbeat"in f&&f.heartbeat&&_-f.heartbeat<Tr&&(_=f.heartbeat+Tr);var m={};"timeout"in f&&f.timeout&&(m.timeout=f.timeout);var $=typeof f.limit<"u"?f.limit:!1,w=$;if(f.style&&(m.style=f.style),(f.include_docs||f.filter&&typeof f.filter=="function")&&(m.include_docs=!0),f.attachments&&(m.attachments=!0),f.continuous&&(m.feed="longpoll"),f.seq_interval&&(m.seq_interval=f.seq_interval),f.conflicts&&(m.conflicts=!0),f.descending&&(m.descending=!0),f.update_seq&&(m.update_seq=!0),"heartbeat"in f&&f.heartbeat&&(m.heartbeat=f.heartbeat),f.filter&&typeof f.filter=="string"&&(m.filter=f.filter),f.view&&typeof f.view=="string"&&(m.filter="_view",m.view=f.view),f.query_params&&typeof f.query_params=="object")for(var v in f.query_params)Object.prototype.hasOwnProperty.call(f.query_params,v)&&(m[v]=f.query_params[v]);var d="GET",c;f.doc_ids?(m.filter="_doc_ids",d="POST",c={doc_ids:f.doc_ids}):f.selector&&(m.filter="_selector",d="POST",c={selector:f.selector});var h=new Yv,y,b=function(P,L){if(!f.aborted){m.since=P,typeof m.since=="object"&&(m.since=JSON.stringify(m.since)),f.descending?$&&(m.limit=w):m.limit=!$||w>p?p:w;var V=Ie(r,"_changes"+$r(m)),J={signal:h.signal,method:d,body:JSON.stringify(c)};y=P,!f.aborted&&l().then(function(){return u(V,J,L)}).catch(L)}},k={results:[]},j=function(P,L){if(!f.aborted){var V=0;if(L&&L.results){V=L.results.length,k.last_seq=L.last_seq;var J=null,K=null;typeof L.pending=="number"&&(J=L.pending),(typeof k.last_seq=="string"||typeof k.last_seq=="number")&&(K=k.last_seq);var D={};D.query=f.query_params,L.results=L.results.filter(function(U){w--;var E=Jo(f)(U);return E&&(f.include_docs&&f.attachments&&f.binary&&ji(U),f.return_docs&&k.results.push(U),f.onChange(U,J,K)),E})}else if(P){f.aborted=!0,f.complete(P);return}L&&L.last_seq&&(y=L.last_seq);var F=$&&w<=0||L&&V<p||f.descending;f.continuous&&!($&&w<=0)||!F?He(function(){b(y,j)}):f.complete(null,k)}};return b(f.since||0,j),{cancel:function(){f.aborted=!0,h.abort()}}},n.revsDiff=a("revsDiff",function(f,p,_){typeof p=="function"&&(_=p,p={}),u(Ie(r,"_revs_diff"),{method:"POST",body:JSON.stringify(f)},_).catch(_)}),n._close=function(f){f()},n._destroy=function(f,p){u(Ie(r,""),{method:"DELETE"}).then(function(_){p(null,_)}).catch(function(_){_.status===404?p(null,{ok:!0}):p(_)})}}lo.valid=function(){return!0};function lg(e){e.adapter("http",lo,!1),e.adapter("https",lo,!1)}function Mt(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Mt)}catch{}}Ge(Mt,Error);function fi(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,fi)}catch{}}Ge(fi,Error);function li(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,li)}catch{}}Ge(li,Error);function Qc(e,t){return t&&e.then(function(n){He(function(){t(null,n)})},function(n){He(function(){t(n)})}),e}function dg(e){return $t(function(t){var n=t.pop(),r=e.apply(this,t);return typeof n=="function"&&Qc(r,n),r})}function hg(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}function Ri(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function ks(e){var t=new mn(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function Pi(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function xs(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new li(t)}function ho(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if(typeof i!="number")if(Array.isArray(i)){t=typeof t=="number"?[t]:t;for(var o=0,a=i.length;o<a;o++){var u=i[o];if(typeof u!="number")throw xs("_sum");typeof t[o]>"u"?t.push(u):t[o]+=u}}else throw xs("_sum");else typeof t=="number"?t+=i:t[0]+=i}return t}var vg=nt.bind(null,"log"),pg=Array.isArray,gg=JSON.parse;function Vc(e,t){return Zo("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:ho,log:vg,isArray:pg,toJSON:gg})}function Wn(){this.promise=new Promise(function(e){e()})}Wn.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise};Wn.prototype.finish=function(){return this.promise};function js(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function yg(e,t){return js(e)+js(t)+"undefined"}function Rs(e,t,n,r,i,o){var a=yg(n,r),u;if(!i&&(u=e._cachedViews=e._cachedViews||{},u[a]))return u[a];var s=e.info().then(function(l){var g=l.db_name+"-mrview-"+(i?"temp":xc(a));function f(p){p.views=p.views||{};var _=t;_.indexOf("/")===-1&&(_=t+"/"+t);var m=p.views[_]=p.views[_]||{};if(!m[g])return m[g]=!0,p}return ui(e,"_local/"+o,f).then(function(){return e.registerDependentDatabase(g).then(function(p){var _=p.db;_.auto_compaction=!0;var m={name:g,db:_,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return m.db.get("_local/lastSeq").catch(function($){if($.status!==404)throw $}).then(function($){return m.seq=$?$.seq:0,u&&m.db.once("destroyed",function(){delete u[a]}),m})})})});return u&&(u[a]=s),s}var Ps={},Fs=new Wn,_g=50;function Fi(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function mg(e){return e.length===1&&/^1-/.test(e[0].rev)}function Is(e,t,n){try{e.emit("error",t)}catch{nt("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),nt("error",t,n)}}function wg(e,t,n,r){function i(E,S,C){try{S(C)}catch(x){Is(E,x,{fun:S,doc:C})}}function o(E,S,C,x,I){try{return{output:S(C,x,I)}}catch(B){return Is(E,B,{fun:S,keys:C,values:x,rereduce:I}),{error:B}}}function a(E,S){var C=xe(E.key,S.key);return C!==0?C:xe(E.value,S.value)}function u(E,S,C){return C=C||0,typeof S=="number"?E.slice(C,S+C):C>0?E.slice(C):E}function s(E){var S=E.value,C=S&&typeof S=="object"&&S._id||E.id;return C}function l(E){E.rows.forEach(function(S){var C=S.doc&&S.doc._attachments;C&&Object.keys(C).forEach(function(x){var I=C[x];C[x].data=na(I.data,I.content_type)})})}function g(E){return function(S){return E.include_docs&&E.attachments&&E.binary&&l(S),S}}function f(E,S,C,x){var I=S[E];typeof I<"u"&&(x&&(I=encodeURIComponent(JSON.stringify(I))),C.push(E+"="+I))}function p(E){if(typeof E<"u"){var S=Number(E);return!isNaN(S)&&S===parseInt(E,10)?S:E}}function _(E){return E.group_level=p(E.group_level),E.limit=p(E.limit),E.skip=p(E.skip),E}function m(E){if(E){if(typeof E!="number")return new Mt('Invalid value for integer: "'+E+'"');if(E<0)return new Mt('Invalid value for positive integer: "'+E+'"')}}function $(E,S){var C=E.descending?"endkey":"startkey",x=E.descending?"startkey":"endkey";if(typeof E[C]<"u"&&typeof E[x]<"u"&&xe(E[C],E[x])>0)throw new Mt("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(S.reduce&&E.reduce!==!1){if(E.include_docs)throw new Mt("{include_docs:true} is invalid for reduce");if(E.keys&&E.keys.length>1&&!E.group&&!E.group_level)throw new Mt("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(I){var B=m(E[I]);if(B)throw B})}function w(E,S,C){var x=[],I,B="GET",A,M;if(f("reduce",C,x),f("include_docs",C,x),f("attachments",C,x),f("limit",C,x),f("descending",C,x),f("group",C,x),f("group_level",C,x),f("skip",C,x),f("stale",C,x),f("conflicts",C,x),f("startkey",C,x,!0),f("start_key",C,x,!0),f("endkey",C,x,!0),f("end_key",C,x,!0),f("inclusive_end",C,x),f("key",C,x,!0),f("update_seq",C,x),x=x.join("&"),x=x===""?"":"?"+x,typeof C.keys<"u"){var H=2e3,W="keys="+encodeURIComponent(JSON.stringify(C.keys));W.length+x.length+1<=H?x+=(x[0]==="?"?"&":"?")+W:(B="POST",typeof S=="string"?I={keys:C.keys}:S.keys=C.keys)}if(typeof S=="string"){var O=Fi(S);return E.fetch("_design/"+O[0]+"/_view/"+O[1]+x,{headers:new pn({"Content-Type":"application/json"}),method:B,body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,bn(T);return T.rows.forEach(function(R){if(R.value&&R.value.error&&R.value.error==="builtin_reduce_error")throw new Error(R.reason)}),T}).then(g(C))}return I=I||{},Object.keys(S).forEach(function(T){Array.isArray(S[T])?I[T]=S[T]:I[T]=S[T].toString()}),E.fetch("_temp_view"+x,{headers:new pn({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,bn(T);return T}).then(g(C))}function v(E,S,C){return new Promise(function(x,I){E._query(S,C,function(B,A){if(B)return I(B);x(A)})})}function d(E){return new Promise(function(S,C){E._viewCleanup(function(x,I){if(x)return C(x);S(I)})})}function c(E){return function(S){if(S.status===404)return E;throw S}}function h(E,S,C){var x="_local/doc_"+E,I={_id:x,keys:[]},B=C.get(E),A=B[0],M=B[1];function H(){return mg(M)?Promise.resolve(I):S.db.get(x).catch(c(I))}function W(T){return T.keys.length?S.db.allDocs({keys:T.keys,include_docs:!0}):Promise.resolve({rows:[]})}function O(T,R){for(var N=[],Y=new mn,G=0,Q=R.rows.length;G<Q;G++){var ee=R.rows[G],te=ee.doc;if(te&&(N.push(te),Y.add(te._id),te._deleted=!A.has(te._id),!te._deleted)){var se=A.get(te._id);"value"in se&&(te.value=se.value)}}var ie=Pi(A);return ie.forEach(function(he){if(!Y.has(he)){var Me={_id:he},gt=A.get(he);"value"in gt&&(Me.value=gt.value),N.push(Me)}}),T.keys=ks(ie.concat(T.keys)),N.push(T),N}return H().then(function(T){return W(T).then(function(R){return O(T,R)})})}function y(E,S,C){var x="_local/lastSeq";return E.db.get(x).catch(c({_id:x,seq:0})).then(function(I){var B=Pi(S);return Promise.all(B.map(function(A){return h(A,E,S)})).then(function(A){var M=qr(A);return I.seq=C,M.push(I),E.db.bulkDocs({docs:M})})})}function b(E){var S=typeof E=="string"?E:E.name,C=Ps[S];return C||(C=Ps[S]=new Wn),C}function k(E,S){return Ri(b(E),function(){return j(E,S)})()}function j(E,S){var C,x;function I(G,Q){var ee={id:x._id,key:Yt(G)};typeof Q<"u"&&Q!==null&&(ee.value=Yt(Q)),C.push(ee)}var B=t(E.mapFun,I),A=E.seq||0;function M(G,Q){return function(){return y(E,G,Q)}}let H=0,W={view:E.name,indexed_docs:H};E.sourceDB.emit("indexing",W);var O=new Wn;function T(){return E.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:A,limit:S.changes_batch_size}).then(R)}function R(G){var Q=G.results;if(!Q.length)return;var ee=N(Q);O.add(M(ee,A)),H=H+Q.length;let te={view:E.name,last_seq:G.last_seq,results_count:Q.length,indexed_docs:H};if(E.sourceDB.emit("indexing",te),!(Q.length<S.changes_batch_size))return T()}function N(G){for(var Q=new Ye,ee=0,te=G.length;ee<te;ee++){var se=G[ee];if(se.doc._id[0]!=="_"){C=[],x=se.doc,x._deleted||i(E.sourceDB,B,x),C.sort(a);var ie=Y(C);Q.set(se.doc._id,[ie,se.changes])}A=se.seq}return Q}function Y(G){for(var Q=new Ye,ee,te=0,se=G.length;te<se;te++){var ie=G[te],he=[ie.key,ie.id];te>0&&xe(ie.key,ee)===0&&he.push(te),Q.set(at(he),ie),ee=ie.key}return Q}return T().then(function(){return O.finish()}).then(function(){E.seq=A})}function P(E,S,C){C.group_level===0&&delete C.group_level;var x=C.group||C.group_level,I=n(E.reduceFun),B=[],A=isNaN(C.group_level)?Number.POSITIVE_INFINITY:C.group_level;S.forEach(function(T){var R=B[B.length-1],N=x?T.key:null;if(x&&Array.isArray(N)&&(N=N.slice(0,A)),R&&xe(R.groupKey,N)===0){R.keys.push([T.key,T.id]),R.values.push(T.value);return}B.push({keys:[[T.key,T.id]],values:[T.value],groupKey:N})}),S=[];for(var M=0,H=B.length;M<H;M++){var W=B[M],O=o(E.sourceDB,I,W.keys,W.values,!1);if(O.error&&O.error instanceof li)throw O.error;S.push({value:O.error?null:O.output,key:W.groupKey})}return{rows:u(S,C.limit,C.skip)}}function L(E,S){return Ri(b(E),function(){return V(E,S)})()}function V(E,S){var C,x=E.reduceFun&&S.reduce!==!1,I=S.skip||0;typeof S.keys<"u"&&!S.keys.length&&(S.limit=0,delete S.keys);function B(G){return G.include_docs=!0,E.db.allDocs(G).then(function(Q){return C=Q.total_rows,Q.rows.map(function(ee){if("value"in ee.doc&&typeof ee.doc.value=="object"&&ee.doc.value!==null){var te=Object.keys(ee.doc.value).sort(),se=["id","key","value"];if(!(te<se||te>se))return ee.doc.value}var ie=lp(ee.doc._id);return{key:ie[0],id:ie[1],value:"value"in ee.doc?ee.doc.value:null}})})}function A(G){var Q;if(x?Q=P(E,G,S):typeof S.keys>"u"?Q={total_rows:C,offset:I,rows:G}:Q={total_rows:C,offset:I,rows:u(G,S.limit,S.skip)},S.update_seq&&(Q.update_seq=E.seq),S.include_docs){var ee=ks(G.map(s));return E.sourceDB.allDocs({keys:ee,include_docs:!0,conflicts:S.conflicts,attachments:S.attachments,binary:S.binary}).then(function(te){var se=new Ye;return te.rows.forEach(function(ie){se.set(ie.id,ie.doc)}),G.forEach(function(ie){var he=s(ie),Me=se.get(he);Me&&(ie.doc=Me)}),Q})}else return Q}if(typeof S.keys<"u"){var M=S.keys,H=M.map(function(G){var Q={startkey:at([G]),endkey:at([G,{}])};return S.update_seq&&(Q.update_seq=!0),B(Q)});return Promise.all(H).then(qr).then(A)}else{var W={descending:S.descending};S.update_seq&&(W.update_seq=!0);var O,T;if("start_key"in S&&(O=S.start_key),"startkey"in S&&(O=S.startkey),"end_key"in S&&(T=S.end_key),"endkey"in S&&(T=S.endkey),typeof O<"u"&&(W.startkey=S.descending?at([O,{}]):at([O])),typeof T<"u"){var R=S.inclusive_end!==!1;S.descending&&(R=!R),W.endkey=at(R?[T,{}]:[T])}if(typeof S.key<"u"){var N=at([S.key]),Y=at([S.key,{}]);W.descending?(W.endkey=N,W.startkey=Y):(W.startkey=N,W.endkey=Y)}return x||(typeof S.limit=="number"&&(W.limit=S.limit),W.skip=I),B(W).then(A)}}function J(E){return E.fetch("_view_cleanup",{headers:new pn({"Content-Type":"application/json"}),method:"POST"}).then(function(S){return S.json()})}function K(E){return E.get("_local/"+e).then(function(S){var C=new Ye;Object.keys(S.views).forEach(function(I){var B=Fi(I),A="_design/"+B[0],M=B[1],H=C.get(A);H||(H=new mn,C.set(A,H)),H.add(M)});var x={keys:Pi(C),include_docs:!0};return E.allDocs(x).then(function(I){var B={};I.rows.forEach(function(H){var W=H.key.substring(8);C.get(H.key).forEach(function(O){var T=W+"/"+O;S.views[T]||(T=O);var R=Object.keys(S.views[T]),N=H.doc&&H.doc.views&&H.doc.views[O];R.forEach(function(Y){B[Y]=B[Y]||N})})});var A=Object.keys(B).filter(function(H){return!B[H]}),M=A.map(function(H){return Ri(b(H),function(){return new E.constructor(H,E.__opts).destroy()})()});return Promise.all(M).then(function(){return{ok:!0}})})},c({ok:!0}))}function D(E,S,C){if(typeof E._query=="function")return v(E,S,C);if(pt(E))return w(E,S,C);var x={changes_batch_size:E.__opts.view_update_changes_batch_size||_g};if(typeof S!="string")return $(C,S),Fs.add(function(){var H=Rs(E,"temp_view/temp_view",S.map,S.reduce,!0,e);return H.then(function(W){return hg(k(W,x).then(function(){return L(W,C)}),function(){return W.db.destroy()})})}),Fs.finish();var I=S,B=Fi(I),A=B[0],M=B[1];return E.get("_design/"+A).then(function(H){var W=H.views&&H.views[M];if(!W)throw new fi("ddoc "+H._id+" has no view named "+M);r(H,M),$(C,W);var O=Rs(E,I,W.map,W.reduce,!1,e);return O.then(function(T){return C.stale==="ok"||C.stale==="update_after"?(C.stale==="update_after"&&He(function(){k(T,x)}),L(T,C)):k(T,x).then(function(){return L(T,C)})})})}function F(E,S,C){var x=this;typeof S=="function"&&(C=S,S={}),S=S?_(S):{},typeof E=="function"&&(E={map:E});var I=Promise.resolve().then(function(){return D(x,E,S)});return Qc(I,C),I}var U=dg(function(){var E=this;return typeof E._viewCleanup=="function"?d(E):pt(E)?J(E):K(E)});return{query:F,viewCleanup:U}}var Ii={_sum:function(e,t){return ho(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(r){for(var i=0,o=0,a=r.length;o<a;o++){var u=r[o];i+=u*u}return i}return{sum:ho(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}};function bg(e){if(/^_sum/.test(e))return Ii._sum;if(/^_count/.test(e))return Ii._count;if(/^_stats/.test(e))return Ii._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}function Tg(e,t){if(typeof e=="function"&&e.length===2){var n=e;return function(r){return n(r,t)}}else return Vc(e.toString(),t)}function $g(e){var t=e.toString(),n=bg(t);return n||Vc(t)}function Eg(e,t){var n=e.views&&e.views[t];if(typeof n.map!="string")throw new fi("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}var Ag="mrviews",Jc=wg(Ag,Tg,$g,Eg);function Sg(e,t,n){return Jc.query.call(this,e,t,n)}function Cg(e){return Jc.viewCleanup.call(this,e)}var Og={query:Sg,viewCleanup:Cg};function Ds(e){return/^1-/.test(e)}function kg(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}function Ns(e,t){var n=Object.keys(t._attachments);return Promise.all(n.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function xg(e,t,n){var r=pt(t)&&!pt(e),i=Object.keys(n._attachments);return r?e.get(n._id).then(function(o){return Promise.all(i.map(function(a){return kg(o,n,a)?t.getAttachment(n._id,a):e.getAttachment(o._id,a)}))}).catch(function(o){if(o.status!==404)throw o;return Ns(t,n)}):Ns(t,n)}function jg(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n].missing;r.forEach(function(i){t.push({id:n,rev:i})})}),{docs:t,revs:!0,latest:!0}}function Rg(e,t,n,r){n=De(n);var i=[],o=!0;function a(){var p=jg(n);if(p.docs.length)return e.bulkGet(p).then(function(_){if(r.cancelled)throw new Error("cancelled");return Promise.all(_.results.map(function(m){return Promise.all(m.docs.map(function($){var w=$.ok;return $.error&&(o=!1),!w||!w._attachments?w:xg(t,e,w).then(function(v){var d=Object.keys(w._attachments);return v.forEach(function(c,h){var y=w._attachments[d[h]];delete y.stub,delete y.length,y.data=c}),w})}))})).then(function(m){i=i.concat(qr(m).filter(Boolean))})})}function u(p){return p._attachments&&Object.keys(p._attachments).length>0}function s(p){return p._conflicts&&p._conflicts.length>0}function l(p){return e.allDocs({keys:p,include_docs:!0,conflicts:!0}).then(function(_){if(r.cancelled)throw new Error("cancelled");_.rows.forEach(function(m){m.deleted||!m.doc||!Ds(m.value.rev)||u(m.doc)||s(m.doc)||(m.doc._conflicts&&delete m.doc._conflicts,i.push(m.doc),delete n[m.id])})})}function g(){var p=Object.keys(n).filter(function(_){var m=n[_].missing;return m.length===1&&Ds(m[0])});if(p.length>0)return l(p)}function f(){return{ok:o,docs:i}}return Promise.resolve().then(g).then(a).then(f)}var Ms=1,Ls="pouchdb",Pg=5,ht=0;function fa(e,t,n,r,i){return e.get(t).catch(function(o){if(o.status===404)return(e.adapter==="http"||e.adapter==="https")&&eo(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:Ls,version:Ms};throw o}).then(function(o){if(!i.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter(function(a){return a.session_id!==r}),o.history.unshift({last_seq:n,session_id:r}),o.history=o.history.slice(0,Pg),o.version=Ms,o.replicator=Ls,o.session_id=r,o.last_seq=n,e.put(o).catch(function(a){if(a.status===409)return fa(e,t,n,r,i);throw a})})}function ar(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i||{}}ar.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})};ar.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?fa(this.target,this.id,e,t,this.returnValue):Promise.resolve(!0)};ar.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return fa(this.src,this.id,e,t,this.returnValue).catch(function(r){if(Xc(r))return n.opts.writeSourceCheckpoint=!1,!0;throw r})}else return Promise.resolve(!0)};var Bs={undefined:function(e,t){return xe(e.last_seq,t.last_seq)===0?t.last_seq:0},1:function(e,t){return Fg(t,e).last_seq}};ar.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(t){return t.last_seq||ht}).catch(function(t){if(t.status!==404)throw t;return ht}):e.target.get(e.id).then(function(t){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?t.last_seq||ht:e.src.get(e.id).then(function(n){if(t.version!==n.version)return ht;var r;return t.version?r=t.version.toString():r="undefined",r in Bs?Bs[r](t,n):ht},function(n){if(n.status===404&&t.last_seq)return e.src.put({_id:e.id,last_seq:ht}).then(function(){return ht},function(r){return Xc(r)?(e.opts.writeSourceCheckpoint=!1,t.last_seq):ht});throw n})}).catch(function(t){if(t.status!==404)throw t;return ht})};function Fg(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:Zc(e.history,t.history)}function Zc(e,t){var n=e[0],r=e.slice(1),i=t[0],o=t.slice(1);if(!n||t.length===0)return{last_seq:ht,history:[]};var a=n.session_id;if(vo(a,t))return{last_seq:n.last_seq,history:e};var u=i.session_id;return vo(u,r)?{last_seq:i.last_seq,history:o}:Zc(r,o)}function vo(e,t){var n=t[0],r=t.slice(1);return!e||t.length===0?!1:e===n.session_id?!0:vo(e,r)}function Xc(e){return typeof e.status=="number"&&Math.floor(e.status/100)===4}var Us=0;function Ig(e,t,n,r){if(e.retry===!1){t.emit("error",n),t.removeAllListeners();return}if(typeof e.back_off_function!="function"&&(e.back_off_function=cv),t.emit("requestError",n),t.state==="active"||t.state==="pending"){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=Us},o=function(){t.removeListener("active",i)};t.once("paused",o),t.once("active",i)}e.current_back_off=e.current_back_off||Us,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}function Dg(e){return Object.keys(e).sort(xe).reduce(function(t,n){return t[n]=e[n],t},{})}function Ng(e,t,n){var r=n.doc_ids?n.doc_ids.sort(xe):"",i=n.filter?n.filter.toString():"",o="",a="",u="";return n.selector&&(u=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(Dg(n.query_params))),n.filter&&n.filter==="_view"&&(a=n.view.toString()),Promise.all([e.id(),t.id()]).then(function(s){var l=s[0]+s[1]+i+a+o+r+u;return new Promise(function(g){ia(l,g)})}).then(function(s){return s=s.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+s})}function ef(e,t,n,r,i){var o=[],a,u={seq:0,changes:[],docs:[]},s=!1,l=!1,g=!1,f=0,p=n.continuous||n.live||!1,_=n.batch_size||100,m=n.batches_limit||10,$=n.style||"all_docs",w=!1,v=n.doc_ids,d=n.selector,c,h,y=[],b=ci();i=i||{ok:!0,start_time:new Date().toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};r.ready(e,t);function j(){return h?Promise.resolve():Ng(e,t,n).then(function(A){c=A;var M={};n.checkpoint===!1?M={writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:n.checkpoint==="source"?M={writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:n.checkpoint==="target"?M={writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:M={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},h=new ar(e,t,c,r,M)})}function P(){if(y=[],a.docs.length!==0){var A=a.docs,M={timeout:n.timeout};return t.bulkDocs({docs:A,new_edits:!1},M).then(function(H){if(r.cancelled)throw U(),new Error("cancelled");var W=Object.create(null);H.forEach(function(T){T.error&&(W[T.id]=T)});var O=Object.keys(W).length;i.doc_write_failures+=O,i.docs_written+=A.length-O,A.forEach(function(T){var R=W[T._id];if(R){i.errors.push(R);var N=(R.name||"").toLowerCase();if(N==="unauthorized"||N==="forbidden")r.emit("denied",De(R));else throw R}else y.push(T)})},function(H){throw i.doc_write_failures+=A.length,H})}}function L(){if(a.error)throw new Error("There was a problem getting docs.");i.last_seq=f=a.seq;var A=De(i);return y.length&&(A.docs=y,typeof a.pending=="number"&&(A.pending=a.pending,delete a.pending),r.emit("change",A)),s=!0,h.writeCheckpoint(a.seq,b).then(function(){if(r.emit("checkpoint",{checkpoint:a.seq}),s=!1,r.cancelled)throw U(),new Error("cancelled");a=void 0,x()}).catch(function(M){throw B(M),M})}function V(){var A={};return a.changes.forEach(function(M){r.emit("checkpoint",{revs_diff:M}),M.id!=="_user/"&&(A[M.id]=M.changes.map(function(H){return H.rev}))}),t.revsDiff(A).then(function(M){if(r.cancelled)throw U(),new Error("cancelled");a.diffs=M})}function J(){return Rg(e,t,a.diffs,r).then(function(A){a.error=!A.ok,A.docs.forEach(function(M){delete a.diffs[M._id],i.docs_read++,a.docs.push(M)})})}function K(){if(!(r.cancelled||a)){if(o.length===0){D(!0);return}a=o.shift(),r.emit("checkpoint",{start_next_batch:a.seq}),V().then(J).then(P).then(L).then(K).catch(function(A){F("batch processing terminated with error",A)})}}function D(A){if(u.changes.length===0){o.length===0&&!a&&((p&&k.live||l)&&(r.state="pending",r.emit("paused")),l&&U());return}(A||l||u.changes.length>=_)&&(o.push(u),u={seq:0,changes:[],docs:[]},(r.state==="pending"||r.state==="stopped")&&(r.state="active",r.emit("active")),K())}function F(A,M){g||(M.message||(M.message=A),i.ok=!1,i.status="aborting",o=[],u={seq:0,changes:[],docs:[]},U(M))}function U(A){if(!g&&!(r.cancelled&&(i.status="cancelled",s)))if(i.status=i.status||"complete",i.end_time=new Date().toISOString(),i.last_seq=f,g=!0,A){A=fe(A),A.result=i;var M=(A.name||"").toLowerCase();M==="unauthorized"||M==="forbidden"?(r.emit("error",A),r.removeAllListeners()):Ig(n,r,A,function(){ef(e,t,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function E(A,M,H){if(r.cancelled)return U();typeof M=="number"&&(u.pending=M);var W=Jo(n)(A);W&&(u.seq=A.seq||H,u.changes.push(A),r.emit("checkpoint",{pending_batch:u.seq}),He(function(){D(o.length===0&&k.live)}))}function S(A){if(w=!1,r.cancelled)return U();if(A.results.length>0)k.since=A.results[A.results.length-1].seq,x(),D(!0);else{var M=function(){p?(k.live=!0,x()):l=!0,D(!0)};!a&&A.results.length===0?(s=!0,h.writeCheckpoint(A.last_seq,b).then(function(){s=!1,i.last_seq=f=A.last_seq,M()}).catch(B)):M()}}function C(A){if(w=!1,r.cancelled)return U();F("changes rejected",A)}function x(){if(!(!w&&!l&&o.length<m))return;w=!0;function A(){H.cancel()}function M(){r.removeListener("cancel",A)}r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",A);var H=e.changes(k).on("change",E);H.then(M,M),H.then(S).catch(C),n.retry&&(r._changes=H,r._abortChanges=A)}function I(){j().then(function(){if(r.cancelled){U();return}return h.getCheckpoint().then(function(A){f=A,k={since:f,limit:_,batch_size:_,style:$,doc_ids:v,selector:d,return_docs:!0},n.filter&&(typeof n.filter!="string"?k.include_docs=!0:k.filter=n.filter),"heartbeat"in n&&(k.heartbeat=n.heartbeat),"timeout"in n&&(k.timeout=n.timeout),n.query_params&&(k.query_params=n.query_params),n.view&&(k.view=n.view),x()})}).catch(function(A){F("getCheckpoint rejected with ",A)})}function B(A){s=!1,F("writeCheckpoint completed with error",A)}if(r.cancelled){U();return}r._addedListeners||(r.once("cancel",U),typeof n.complete=="function"&&(r.once("error",n.complete),r.once("complete",function(A){n.complete(null,A)})),r._addedListeners=!0),typeof n.since>"u"?I():j().then(function(){return s=!0,h.writeCheckpoint(n.since,b)}).then(function(){if(s=!1,r.cancelled){U();return}f=n.since,I()}).catch(B)}Ge(di,Ue);function di(){Ue.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new Promise(function(n,r){e.once("complete",n),e.once("error",r)});e.then=function(n,r){return t.then(n,r)},e.catch=function(n){return t.catch(n)},e.catch(function(){})}di.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")};di.prototype.ready=function(e,t){var n=this;if(n._readyCalled)return;n._readyCalled=!0;function r(){n.cancel()}e.once("destroyed",r),t.once("destroyed",r);function i(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}n.once("complete",i),n.once("error",i)};function zr(e,t){var n=t.PouchConstructor;return typeof e=="string"?new n(e,t):e}function po(e,t,n,r){if(typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw fe(si,"`doc_ids` filter parameter is not a list.");n.complete=r,n=De(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:!1,n.PouchConstructor=n.PouchConstructor||this;var i=new di,o=zr(e,n),a=zr(t,n);return ef(o,a,n,i),i}Ge(la,Ue);function Mg(e,t,n,r){return typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n=De(n),n.PouchConstructor=n.PouchConstructor||this,e=zr(e,n),t=zr(t,n),new la(e,t,n,r)}function la(e,t,n,r){var i=this;this.canceled=!1;var o=n.push?zt({},n,n.push):n,a=n.pull?zt({},n,n.pull):n;this.push=po(e,t,o),this.pull=po(t,e,a),this.pushPaused=!0,this.pullPaused=!0;function u(c){i.emit("change",{direction:"pull",change:c})}function s(c){i.emit("change",{direction:"push",change:c})}function l(c){i.emit("denied",{direction:"push",doc:c})}function g(c){i.emit("denied",{direction:"pull",doc:c})}function f(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function p(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function _(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function m(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}var $={};function w(c){return function(h,y){var b=h==="change"&&(y===u||y===s),k=h==="denied"&&(y===g||y===l),j=h==="paused"&&(y===p||y===f),P=h==="active"&&(y===m||y===_);(b||k||j||P)&&(h in $||($[h]={}),$[h][c]=!0,Object.keys($[h]).length===2&&i.removeAllListeners(h))}}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push)));function v(c,h,y){c.listeners(h).indexOf(y)==-1&&c.on(h,y)}this.on("newListener",function(c){c==="change"?(v(i.pull,"change",u),v(i.push,"change",s)):c==="denied"?(v(i.pull,"denied",g),v(i.push,"denied",l)):c==="active"?(v(i.pull,"active",m),v(i.push,"active",_)):c==="paused"&&(v(i.pull,"paused",p),v(i.push,"paused",f))}),this.on("removeListener",function(c){c==="change"?(i.pull.removeListener("change",u),i.push.removeListener("change",s)):c==="denied"?(i.pull.removeListener("denied",g),i.push.removeListener("denied",l)):c==="active"?(i.pull.removeListener("active",m),i.push.removeListener("active",_)):c==="paused"&&(i.pull.removeListener("paused",p),i.push.removeListener("paused",f))}),this.pull.on("removeListener",w("pull")),this.push.on("removeListener",w("push"));var d=Promise.all([this.push,this.pull]).then(function(c){var h={push:c[0],pull:c[1]};return i.emit("complete",h),r&&r(null,h),i.removeAllListeners(),h},function(c){if(i.cancel(),r?r(c):i.emit("error",c),i.removeAllListeners(),r)throw c});this.then=function(c,h){return d.then(c,h)},this.catch=function(c){return d.catch(c)}}la.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};function Lg(e){e.replicate=po,e.sync=Mg,Object.defineProperty(e.prototype,"replicate",{get:function(){var t=this;return typeof this.replicateMethods>"u"&&(this.replicateMethods={from:function(n,r,i){return t.constructor.replicate(n,t,r,i)},to:function(n,r,i){return t.constructor.replicate(t,n,r,i)}}),this.replicateMethods}}),e.prototype.sync=function(t,n,r){return this.constructor.sync(this,t,n,r)}}ae.plugin(rg).plugin(lg).plugin(Og).plugin(Lg);var tf={},nf={exports:{}};/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2018 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function a(l,g){if(!i[l]){if(!r[l]){var f=typeof _dereq_=="function"&&_dereq_;if(!g&&f)return f(l,!0);if(u)return u(l,!0);var p=new Error("Cannot find module '"+l+"'");throw p.code="MODULE_NOT_FOUND",p}var _=i[l]={exports:{}};r[l][0].call(_.exports,function(m){var $=r[l][1][m];return a($||m)},_,_.exports,n,r,i,o)}return i[l].exports}for(var u=typeof _dereq_=="function"&&_dereq_,s=0;s<o.length;s++)a(o[s]);return a}({1:[function(n,r,i){r.exports=function(o){var a=o._SomePromiseArray;function u(s){var l=new a(s),g=l.promise();return l.setHowMany(1),l.setUnwrap(),l.init(),g}o.any=function(s){return u(s)},o.prototype.any=function(){return u(this)}}},{}],2:[function(n,r,i){var o;try{throw new Error}catch(m){o=m}var a=n("./schedule"),u=n("./queue");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1;var m=this;this.drainQueues=function(){m._drainQueues()},this._schedule=a}s.prototype.setScheduler=function(m){var $=this._schedule;return this._schedule=m,this._customScheduler=!0,$},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(m,$){$?(process.stderr.write("Fatal "+(m instanceof Error?m.stack:m)+`
`),process.exit(2)):this.throwLater(m)},s.prototype.throwLater=function(m,$){if(arguments.length===1&&($=m,m=function(){throw $}),typeof setTimeout<"u")setTimeout(function(){m($)},0);else try{this._schedule(function(){m($)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function l(m,$,w){this._lateQueue.push(m,$,w),this._queueTick()}function g(m,$,w){this._normalQueue.push(m,$,w),this._queueTick()}function f(m){this._normalQueue._pushOne(m),this._queueTick()}s.prototype.invokeLater=l,s.prototype.invoke=g,s.prototype.settlePromises=f;function p(m){for(;m.length()>0;)_(m)}function _(m){var $=m.shift();if(typeof $!="function")$._settlePromises();else{var w=m.shift(),v=m.shift();$.call(w,v)}}s.prototype._drainQueues=function(){p(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,p(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},r.exports=s,r.exports.firstLineError=o},{"./queue":26,"./schedule":29}],3:[function(n,r,i){r.exports=function(o,a,u,s){var l=!1,g=function(m,$){this._reject($)},f=function(m,$){$.promiseRejectionQueued=!0,$.bindingPromise._then(g,g,null,this,m)},p=function(m,$){this._bitField&50397184||this._resolveCallback($.target)},_=function(m,$){$.promiseRejectionQueued||this._reject(m)};o.prototype.bind=function(m){l||(l=!0,o.prototype._propagateFrom=s.propagateFromFunction(),o.prototype._boundValue=s.boundValueFunction());var $=u(m),w=new o(a);w._propagateFrom(this,1);var v=this._target();if(w._setBoundTo($),$ instanceof o){var d={promiseRejectionQueued:!1,promise:w,target:v,bindingPromise:$};v._then(a,f,void 0,w,d),$._then(p,_,void 0,w,d),w._setOnCancel($)}else w._resolveCallback(v);return w},o.prototype._setBoundTo=function(m){m!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=m):this._bitField=this._bitField&-2097153},o.prototype._isBound=function(){return(this._bitField&2097152)===2097152},o.bind=function(m,$){return o.resolve($).bind(m)}}},{}],4:[function(n,r,i){var o;typeof Promise<"u"&&(o=Promise);function a(){try{Promise===u&&(Promise=o)}catch{}return u}var u=n("./promise")();u.noConflict=a,r.exports=u},{"./promise":22}],5:[function(n,r,i){var o=Object.create;if(o){var a=o(null),u=o(null);a[" size"]=u[" size"]=0}r.exports=function(s){var l=n("./util"),g=l.canEvaluate;l.isIdentifier;var f;function p(w,v){var d;if(w!=null&&(d=w[v]),typeof d!="function"){var c="Object "+l.classString(w)+" has no method '"+l.toString(v)+"'";throw new s.TypeError(c)}return d}function _(w){var v=this.pop(),d=p(w,v);return d.apply(w,this)}s.prototype.call=function(w){var v=[].slice.call(arguments,1);return v.push(w),this._then(_,void 0,void 0,v,void 0)};function m(w){return w[this]}function $(w){var v=+this;return v<0&&(v=Math.max(0,v+w.length)),w[v]}s.prototype.get=function(w){var v=typeof w=="number",d;if(v)d=$;else if(g){var c=f(w);d=c!==null?c:m}else d=m;return this._then(d,void 0,void 0,w,void 0)}}},{"./util":36}],6:[function(n,r,i){r.exports=function(o,a,u,s){var l=n("./util"),g=l.tryCatch,f=l.errorObj,p=o._async;o.prototype.break=o.prototype.cancel=function(){if(!s.cancellation())return this._warn("cancellation is disabled");for(var _=this,m=_;_._isCancellable();){if(!_._cancelBy(m)){m._isFollowing()?m._followee().cancel():m._cancelBranched();break}var $=_._cancellationParent;if($==null||!$._isCancellable()){_._isFollowing()?_._followee().cancel():_._cancelBranched();break}else _._isFollowing()&&_._followee().cancel(),_._setWillBeCancelled(),m=_,_=$}},o.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},o.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},o.prototype._cancelBy=function(_){return _===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},o.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},o.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),p.invoke(this._cancelPromises,this,void 0))},o.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},o.prototype._unsetOnCancel=function(){this._onCancelField=void 0},o.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},o.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},o.prototype._doInvokeOnCancel=function(_,m){if(l.isArray(_))for(var $=0;$<_.length;++$)this._doInvokeOnCancel(_[$],m);else if(_!==void 0)if(typeof _=="function"){if(!m){var w=g(_).call(this._boundValue());w===f&&(this._attachExtraTrace(w.e),p.throwLater(w.e))}}else _._resultCancelled(this)},o.prototype._invokeOnCancel=function(){var _=this._onCancel();this._unsetOnCancel(),p.invoke(this._doInvokeOnCancel,this,_)},o.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},o.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(n,r,i){r.exports=function(o){var a=n("./util"),u=n("./es5").keys,s=a.tryCatch,l=a.errorObj;function g(f,p,_){return function(m){var $=_._boundValue();e:for(var w=0;w<f.length;++w){var v=f[w];if(v===Error||v!=null&&v.prototype instanceof Error){if(m instanceof v)return s(p).call($,m)}else if(typeof v=="function"){var d=s(v).call($,m);if(d===l)return d;if(d)return s(p).call($,m)}else if(a.isObject(m)){for(var c=u(v),h=0;h<c.length;++h){var y=c[h];if(v[y]!=m[y])continue e}return s(p).call($,m)}}return o}}return g}},{"./es5":13,"./util":36}],8:[function(n,r,i){r.exports=function(o){var a=!1,u=[];o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){};function s(){this._trace=new s.CapturedTrace(g())}s.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,u.push(this._trace))},s.prototype._popContext=function(){if(this._trace!==void 0){var f=u.pop(),p=f._promiseCreated;return f._promiseCreated=null,p}return null};function l(){if(a)return new s}function g(){var f=u.length-1;if(f>=0)return u[f]}return s.CapturedTrace=null,s.create=l,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var f=o.prototype._pushContext,p=o.prototype._popContext,_=o._peekContext,m=o.prototype._peekContext,$=o.prototype._promiseCreated;s.deactivateLongStackTraces=function(){o.prototype._pushContext=f,o.prototype._popContext=p,o._peekContext=_,o.prototype._peekContext=m,o.prototype._promiseCreated=$,a=!1},a=!0,o.prototype._pushContext=s.prototype._pushContext,o.prototype._popContext=s.prototype._popContext,o._peekContext=o.prototype._peekContext=g,o.prototype._promiseCreated=function(){var w=this._peekContext();w&&w._promiseCreated==null&&(w._promiseCreated=this)}},s}},{}],9:[function(n,r,i){r.exports=function(o,a,u,s){var l=o._async,g=n("./errors").Warning,f=n("./util"),p=n("./es5"),_=f.canAttachTrace,m,$,w=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,v=/\((?:timers\.js):\d+:\d+\)/,d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,c=null,h=null,y=!1,b,k=f.env("BLUEBIRD_DEBUG")!=0,j=!!(f.env("BLUEBIRD_WARNINGS")!=0&&(k||f.env("BLUEBIRD_WARNINGS"))),P=!!(f.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(k||f.env("BLUEBIRD_LONG_STACK_TRACES"))),L=f.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(j||!!f.env("BLUEBIRD_W_FORGOTTEN_RETURN")),V;(function(){var q=[];function z(){for(var Z=0;Z<q.length;++Z)q[Z]._notifyUnhandledRejection();X()}function X(){q.length=0}V=function(Z){q.push(Z),setTimeout(z,1)},p.defineProperty(o,"_unhandledRejectionCheck",{value:z}),p.defineProperty(o,"_unhandledRejectionClear",{value:X})})(),o.prototype.suppressUnhandledRejections=function(){var q=this._target();q._bitField=q._bitField&-1048577|524288},o.prototype._ensurePossibleRejectionHandled=function(){this._bitField&524288||(this._setRejectionIsUnhandled(),V(this))},o.prototype._notifyUnhandledRejectionIsHandled=function(){Pa("rejectionHandled",m,void 0,this)},o.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},o.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},o.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var q=this._settledValue();this._setUnhandledRejectionIsNotified(),Pa("unhandledRejection",$,q,this)}},o.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},o.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},o.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},o.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},o.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},o.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},o.prototype._warn=function(q,z,X){return ee(q,z,X||this)},o.onPossiblyUnhandledRejection=function(q){var z=o._getContext();$=f.contextBind(z,q)},o.onUnhandledRejectionHandled=function(q){var z=o._getContext();m=f.contextBind(z,q)};var J=function(){};o.longStackTraces=function(){if(l.haveItemsQueued()&&!Oe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!Oe.longStackTraces&&wi()){var q=o.prototype._captureStackTrace,z=o.prototype._attachExtraTrace,X=o.prototype._dereferenceTrace;Oe.longStackTraces=!0,J=function(){if(l.haveItemsQueued()&&!Oe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);o.prototype._captureStackTrace=q,o.prototype._attachExtraTrace=z,o.prototype._dereferenceTrace=X,a.deactivateLongStackTraces(),Oe.longStackTraces=!1},o.prototype._captureStackTrace=R,o.prototype._attachExtraTrace=N,o.prototype._dereferenceTrace=Y,a.activateLongStackTraces()}},o.hasLongStackTraces=function(){return Oe.longStackTraces&&wi()};var K={unhandledrejection:{before:function(){var q=f.global.onunhandledrejection;return f.global.onunhandledrejection=null,q},after:function(q){f.global.onunhandledrejection=q}},rejectionhandled:{before:function(){var q=f.global.onrejectionhandled;return f.global.onrejectionhandled=null,q},after:function(q){f.global.onrejectionhandled=q}}},D=function(){var q=function(X,Z){if(X){var re;try{return re=X.before(),!f.global.dispatchEvent(Z)}finally{X.after(re)}}else return!f.global.dispatchEvent(Z)};try{if(typeof CustomEvent=="function"){var z=new CustomEvent("CustomEvent");return f.global.dispatchEvent(z),function(X,Z){X=X.toLowerCase();var re={detail:Z,cancelable:!0},le=new CustomEvent(X,re);return p.defineProperty(le,"promise",{value:Z.promise}),p.defineProperty(le,"reason",{value:Z.reason}),q(K[X],le)}}else if(typeof Event=="function"){var z=new Event("CustomEvent");return f.global.dispatchEvent(z),function(Z,re){Z=Z.toLowerCase();var le=new Event(Z,{cancelable:!0});return le.detail=re,p.defineProperty(le,"promise",{value:re.promise}),p.defineProperty(le,"reason",{value:re.reason}),q(K[Z],le)}}else{var z=document.createEvent("CustomEvent");return z.initCustomEvent("testingtheevent",!1,!0,{}),f.global.dispatchEvent(z),function(Z,re){Z=Z.toLowerCase();var le=document.createEvent("CustomEvent");return le.initCustomEvent(Z,!1,!0,re),q(K[Z],le)}}}catch{}return function(){return!1}}(),F=function(){return f.isNode?function(){return process.emit.apply(process,arguments)}:f.global?function(q){var z="on"+q.toLowerCase(),X=f.global[z];return X?(X.apply(f.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function U(q,z){return{promise:z}}var E={promiseCreated:U,promiseFulfilled:U,promiseRejected:U,promiseResolved:U,promiseCancelled:U,promiseChained:function(q,z,X){return{promise:z,child:X}},warning:function(q,z){return{warning:z}},unhandledRejection:function(q,z,X){return{reason:z,promise:X}},rejectionHandled:U},S=function(q){var z=!1;try{z=F.apply(null,arguments)}catch(Z){l.throwLater(Z),z=!0}var X=!1;try{X=D(q,E[q].apply(null,arguments))}catch(Z){l.throwLater(Z),X=!0}return X||z};o.config=function(q){if(q=Object(q),"longStackTraces"in q&&(q.longStackTraces?o.longStackTraces():!q.longStackTraces&&o.hasLongStackTraces()&&J()),"warnings"in q){var z=q.warnings;Oe.warnings=!!z,L=Oe.warnings,f.isObject(z)&&"wForgottenReturn"in z&&(L=!!z.wForgottenReturn)}if("cancellation"in q&&q.cancellation&&!Oe.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");o.prototype._clearCancellationData=M,o.prototype._propagateFrom=H,o.prototype._onCancel=B,o.prototype._setOnCancel=A,o.prototype._attachCancellationCallback=I,o.prototype._execute=x,O=H,Oe.cancellation=!0}if("monitoring"in q&&(q.monitoring&&!Oe.monitoring?(Oe.monitoring=!0,o.prototype._fireEvent=S):!q.monitoring&&Oe.monitoring&&(Oe.monitoring=!1,o.prototype._fireEvent=C)),"asyncHooks"in q&&f.nodeSupportsAsyncResource){var X=Oe.asyncHooks,Z=!!q.asyncHooks;X!==Z&&(Oe.asyncHooks=Z,Z?u():s())}return o};function C(){return!1}o.prototype._fireEvent=C,o.prototype._execute=function(q,z,X){try{q(z,X)}catch(Z){return Z}},o.prototype._onCancel=function(){},o.prototype._setOnCancel=function(q){},o.prototype._attachCancellationCallback=function(q){},o.prototype._captureStackTrace=function(){},o.prototype._attachExtraTrace=function(){},o.prototype._dereferenceTrace=function(){},o.prototype._clearCancellationData=function(){},o.prototype._propagateFrom=function(q,z){};function x(q,z,X){var Z=this;try{q(z,X,function(re){if(typeof re!="function")throw new TypeError("onCancel must be a function, got: "+f.toString(re));Z._attachCancellationCallback(re)})}catch(re){return re}}function I(q){if(!this._isCancellable())return this;var z=this._onCancel();z!==void 0?f.isArray(z)?z.push(q):this._setOnCancel([z,q]):this._setOnCancel(q)}function B(){return this._onCancelField}function A(q){this._onCancelField=q}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function H(q,z){if(z&1){this._cancellationParent=q;var X=q._branchesRemainingToCancel;X===void 0&&(X=0),q._branchesRemainingToCancel=X+1}z&2&&q._isBound()&&this._setBoundTo(q._boundTo)}function W(q,z){z&2&&q._isBound()&&this._setBoundTo(q._boundTo)}var O=W;function T(){var q=this._boundTo;return q!==void 0&&q instanceof o?q.isFulfilled()?q.value():void 0:q}function R(){this._trace=new Pt(this._peekContext())}function N(q,z){if(_(q)){var X=this._trace;if(X!==void 0&&z&&(X=X._parent),X!==void 0)X.attachExtraTrace(q);else if(!q.__stackCleaned__){var Z=gt(q);f.notEnumerableProp(q,"stack",Z.message+`
`+Z.stack.join(`
`)),f.notEnumerableProp(q,"__stackCleaned__",!0)}}}function Y(){this._trace=void 0}function G(q,z,X,Z,re){if(q===void 0&&z!==null&&L){if(re!==void 0&&re._returnedNonUndefined()||!(Z._bitField&65535))return;X&&(X=X+" ");var le="",we="";if(z._trace){for(var ue=z._trace.stack.split(`
`),Se=he(ue),je=Se.length-1;je>=0;--je){var yt=Se[je];if(!v.test(yt)){var _t=yt.match(d);_t&&(le="at "+_t[1]+":"+_t[2]+":"+_t[3]+" ");break}}if(Se.length>0){for(var Kf=Se[0],je=0;je<ue.length;++je)if(ue[je]===Kf){je>0&&(we=`
`+ue[je-1]);break}}}var Yf="a promise was created in a "+X+"handler "+le+"but was not returned from it, see http://goo.gl/rRqMUw"+we;Z._warn(Yf,!0,z)}}function Q(q,z){var X=q+" is deprecated and will be removed in a future version.";return z&&(X+=" Use "+z+" instead."),ee(X)}function ee(q,z,X){if(Oe.warnings){var Z=new g(q),re;if(z)X._attachExtraTrace(Z);else if(Oe.longStackTraces&&(re=o._peekContext()))re.attachExtraTrace(Z);else{var le=gt(Z);Z.stack=le.message+`
`+le.stack.join(`
`)}S("warning",Z)||Ra(Z,"",!0)}}function te(q,z){for(var X=0;X<z.length-1;++X)z[X].push("From previous event:"),z[X]=z[X].join(`
`);return X<z.length&&(z[X]=z[X].join(`
`)),q+`
`+z.join(`
`)}function se(q){for(var z=0;z<q.length;++z)(q[z].length===0||z+1<q.length&&q[z][0]===q[z+1][0])&&(q.splice(z,1),z--)}function ie(q){for(var z=q[0],X=1;X<q.length;++X){for(var Z=q[X],re=z.length-1,le=z[re],we=-1,ue=Z.length-1;ue>=0;--ue)if(Z[ue]===le){we=ue;break}for(var ue=we;ue>=0;--ue){var Se=Z[ue];if(z[re]===Se)z.pop(),re--;else break}z=Z}}function he(q){for(var z=[],X=0;X<q.length;++X){var Z=q[X],re=Z==="    (No stack trace)"||c.test(Z),le=re&&bi(Z);re&&!le&&(y&&Z.charAt(0)!==" "&&(Z="    "+Z),z.push(Z))}return z}function Me(q){for(var z=q.stack.replace(/\s+$/g,"").split(`
`),X=0;X<z.length;++X){var Z=z[X];if(Z==="    (No stack trace)"||c.test(Z))break}return X>0&&q.name!="SyntaxError"&&(z=z.slice(X)),z}function gt(q){var z=q.stack,X=q.toString();return z=typeof z=="string"&&z.length>0?Me(q):["    (No stack trace)"],{message:X,stack:q.name=="SyntaxError"?z:he(z)}}function Ra(q,z,X){if(typeof console<"u"){var Z;if(f.isObject(q)){var re=q.stack;Z=z+h(re,q)}else Z=z+String(q);typeof b=="function"?b(Z,X):(typeof console.log=="function"||typeof console.log=="object")&&console.log(Z)}}function Pa(q,z,X,Z){var re=!1;try{typeof z=="function"&&(re=!0,q==="rejectionHandled"?z(Z):z(X,Z))}catch(le){l.throwLater(le)}q==="unhandledRejection"?!S(q,X,Z)&&!re&&Ra(X,"Unhandled rejection "):S(q,Z)}function Fa(q){var z;if(typeof q=="function")z="[function "+(q.name||"anonymous")+"]";else{z=q&&typeof q.toString=="function"?q.toString():f.toString(q);var X=/\[object [a-zA-Z0-9$_]+\]/;if(X.test(z))try{var Z=JSON.stringify(q);z=Z}catch{}z.length===0&&(z="(empty array)")}return"(<"+Gf(z)+">, no stack trace)"}function Gf(q){var z=41;return q.length<z?q:q.substr(0,z-3)+"..."}function wi(){return typeof Ia=="function"}var bi=function(){return!1},zf=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Ti(q){var z=q.match(zf);if(z)return{fileName:z[1],line:parseInt(z[2],10)}}function Wf(q,z){if(wi()){for(var X=(q.stack||"").split(`
`),Z=(z.stack||"").split(`
`),re=-1,le=-1,we,ue,Se=0;Se<X.length;++Se){var je=Ti(X[Se]);if(je){we=je.fileName,re=je.line;break}}for(var Se=0;Se<Z.length;++Se){var je=Ti(Z[Se]);if(je){ue=je.fileName,le=je.line;break}}re<0||le<0||!we||!ue||we!==ue||re>=le||(bi=function(yt){if(w.test(yt))return!0;var _t=Ti(yt);return!!(_t&&_t.fileName===we&&re<=_t.line&&_t.line<=le)})}}function Pt(q){this._parent=q,this._promisesCreated=0;var z=this._length=1+(q===void 0?0:q._length);Ia(this,Pt),z>32&&this.uncycle()}f.inherits(Pt,Error),a.CapturedTrace=Pt,Pt.prototype.uncycle=function(){var q=this._length;if(!(q<2)){for(var z=[],X={},Z=0,re=this;re!==void 0;++Z)z.push(re),re=re._parent;q=this._length=Z;for(var Z=q-1;Z>=0;--Z){var le=z[Z].stack;X[le]===void 0&&(X[le]=Z)}for(var Z=0;Z<q;++Z){var we=z[Z].stack,ue=X[we];if(ue!==void 0&&ue!==Z){ue>0&&(z[ue-1]._parent=void 0,z[ue-1]._length=1),z[Z]._parent=void 0,z[Z]._length=1;var Se=Z>0?z[Z-1]:this;ue<q-1?(Se._parent=z[ue+1],Se._parent.uncycle(),Se._length=Se._parent._length+1):(Se._parent=void 0,Se._length=1);for(var je=Se._length+1,yt=Z-2;yt>=0;--yt)z[yt]._length=je,je++;return}}}},Pt.prototype.attachExtraTrace=function(q){if(!q.__stackCleaned__){this.uncycle();for(var z=gt(q),X=z.message,Z=[z.stack],re=this;re!==void 0;)Z.push(he(re.stack.split(`
`))),re=re._parent;ie(Z),se(Z),f.notEnumerableProp(q,"stack",te(X,Z)),f.notEnumerableProp(q,"__stackCleaned__",!0)}};var Ia=function(){var z=/^\s*at\s*/,X=function(we,ue){return typeof we=="string"?we:ue.name!==void 0&&ue.message!==void 0?ue.toString():Fa(ue)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,c=z,h=X;var Z=Error.captureStackTrace;return bi=function(we){return w.test(we)},function(we,ue){Error.stackTraceLimit+=6,Z(we,ue),Error.stackTraceLimit-=6}}var re=new Error;if(typeof re.stack=="string"&&re.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return c=/@/,h=X,y=!0,function(ue){ue.stack=new Error().stack};var le;try{throw new Error}catch(we){le="stack"in we}return!("stack"in re)&&le&&typeof Error.stackTraceLimit=="number"?(c=z,h=X,function(ue){Error.stackTraceLimit+=6;try{throw new Error}catch(Se){ue.stack=Se.stack}Error.stackTraceLimit-=6}):(h=function(we,ue){return typeof we=="string"?we:(typeof ue=="object"||typeof ue=="function")&&ue.name!==void 0&&ue.message!==void 0?ue.toString():Fa(ue)},null)}();typeof console<"u"&&typeof console.warn<"u"&&(b=function(q){console.warn(q)},f.isNode&&process.stderr.isTTY?b=function(q,z){var X=z?"\x1B[33m":"\x1B[31m";console.warn(X+q+`\x1B[0m
`)}:!f.isNode&&typeof new Error().stack=="string"&&(b=function(q,z){console.warn("%c"+q,z?"color: darkorange":"color: red")}));var Oe={warnings:j,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return P&&o.longStackTraces(),{asyncHooks:function(){return Oe.asyncHooks},longStackTraces:function(){return Oe.longStackTraces},warnings:function(){return Oe.warnings},cancellation:function(){return Oe.cancellation},monitoring:function(){return Oe.monitoring},propagateFromFunction:function(){return O},boundValueFunction:function(){return T},checkForgottenReturns:G,setBounds:Wf,warn:ee,deprecated:Q,CapturedTrace:Pt,fireDomEvent:D,fireGlobalEvent:F}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(n,r,i){r.exports=function(o){function a(){return this.value}function u(){throw this.reason}o.prototype.return=o.prototype.thenReturn=function(s){return s instanceof o&&s.suppressUnhandledRejections(),this._then(a,void 0,void 0,{value:s},void 0)},o.prototype.throw=o.prototype.thenThrow=function(s){return this._then(u,void 0,void 0,{reason:s},void 0)},o.prototype.catchThrow=function(s){if(arguments.length<=1)return this._then(void 0,u,void 0,{reason:s},void 0);var l=arguments[1],g=function(){throw l};return this.caught(s,g)},o.prototype.catchReturn=function(s){if(arguments.length<=1)return s instanceof o&&s.suppressUnhandledRejections(),this._then(void 0,a,void 0,{value:s},void 0);var l=arguments[1];l instanceof o&&l.suppressUnhandledRejections();var g=function(){return l};return this.caught(s,g)}}},{}],11:[function(n,r,i){r.exports=function(o,a){var u=o.reduce,s=o.all;function l(){return s(this)}function g(f,p){return u(f,p,a,a)}o.prototype.each=function(f){return u(this,f,a,0)._then(l,void 0,void 0,this,void 0)},o.prototype.mapSeries=function(f){return u(this,f,a,a)},o.each=function(f,p){return u(f,p,a,0)._then(l,void 0,void 0,f,void 0)},o.mapSeries=g}},{}],12:[function(n,r,i){var o=n("./es5"),a=o.freeze,u=n("./util"),s=u.inherits,l=u.notEnumerableProp;function g(b,k){function j(P){if(!(this instanceof j))return new j(P);l(this,"message",typeof P=="string"?P:k),l(this,"name",b),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return s(j,Error),j}var f,p,_=g("Warning","warning"),m=g("CancellationError","cancellation error"),$=g("TimeoutError","timeout error"),w=g("AggregateError","aggregate error");try{f=TypeError,p=RangeError}catch{f=g("TypeError","type error"),p=g("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),d=0;d<v.length;++d)typeof Array.prototype[v[d]]=="function"&&(w.prototype[v[d]]=Array.prototype[v[d]]);o.defineProperty(w.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),w.prototype.isOperational=!0;var c=0;w.prototype.toString=function(){var b=Array(c*4+1).join(" "),k=`
`+b+`AggregateError of:
`;c++,b=Array(c*4+1).join(" ");for(var j=0;j<this.length;++j){for(var P=this[j]===this?"[Circular AggregateError]":this[j]+"",L=P.split(`
`),V=0;V<L.length;++V)L[V]=b+L[V];P=L.join(`
`),k+=P+`
`}return c--,k};function h(b){if(!(this instanceof h))return new h(b);l(this,"name","OperationalError"),l(this,"message",b),this.cause=b,this.isOperational=!0,b instanceof Error?(l(this,"message",b.message),l(this,"stack",b.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}s(h,Error);var y=Error.__BluebirdErrorTypes__;y||(y=a({CancellationError:m,TimeoutError:$,OperationalError:h,RejectionError:h,AggregateError:w}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),r.exports={Error,TypeError:f,RangeError:p,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:_}},{"./es5":13,"./util":36}],13:[function(n,r,i){var o=function(){return this===void 0}();if(o)r.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:o,propertyIsWritable:function($,w){var v=Object.getOwnPropertyDescriptor($,w);return!!(!v||v.writable||v.set)}};else{var a={}.hasOwnProperty,u={}.toString,s={}.constructor.prototype,l=function($){var w=[];for(var v in $)a.call($,v)&&w.push(v);return w},g=function($,w){return{value:$[w]}},f=function($,w,v){return $[w]=v.value,$},p=function($){return $},_=function($){try{return Object($).constructor.prototype}catch{return s}},m=function($){try{return u.call($)==="[object Array]"}catch{return!1}};r.exports={isArray:m,keys:l,names:l,defineProperty:f,getDescriptor:g,freeze:p,getPrototypeOf:_,isES5:o,propertyIsWritable:function(){return!0}}}},{}],14:[function(n,r,i){r.exports=function(o,a){var u=o.map;o.prototype.filter=function(s,l){return u(this,s,l,a)},o.filter=function(s,l,g){return u(s,l,g,a)}}},{}],15:[function(n,r,i){r.exports=function(o,a,u){var s=n("./util"),l=o.CancellationError,g=s.errorObj,f=n("./catch_filter")(u);function p(d,c,h){this.promise=d,this.type=c,this.handler=h,this.called=!1,this.cancelPromise=null}p.prototype.isFinallyHandler=function(){return this.type===0};function _(d){this.finallyHandler=d}_.prototype._resultCancelled=function(){m(this.finallyHandler)};function m(d,c){return d.cancelPromise!=null?(arguments.length>1?d.cancelPromise._reject(c):d.cancelPromise._cancel(),d.cancelPromise=null,!0):!1}function $(){return v.call(this,this.promise._target()._settledValue())}function w(d){if(!m(this,d))return g.e=d,g}function v(d){var c=this.promise,h=this.handler;if(!this.called){this.called=!0;var y=this.isFinallyHandler()?h.call(c._boundValue()):h.call(c._boundValue(),d);if(y===u)return y;if(y!==void 0){c._setReturnedNonUndefined();var b=a(y,c);if(b instanceof o){if(this.cancelPromise!=null)if(b._isCancelled()){var k=new l("late cancellation observer");return c._attachExtraTrace(k),g.e=k,g}else b.isPending()&&b._attachCancellationCallback(new _(this));return b._then($,w,void 0,this,void 0)}}}return c.isRejected()?(m(this),g.e=d,g):(m(this),d)}return o.prototype._passThrough=function(d,c,h,y){return typeof d!="function"?this.then():this._then(h,y,void 0,new p(this,c,d),void 0)},o.prototype.lastly=o.prototype.finally=function(d){return this._passThrough(d,0,v,v)},o.prototype.tap=function(d){return this._passThrough(d,1,v)},o.prototype.tapCatch=function(d){var c=arguments.length;if(c===1)return this._passThrough(d,1,void 0,v);var h=new Array(c-1),y=0,b;for(b=0;b<c-1;++b){var k=arguments[b];if(s.isObject(k))h[y++]=k;else return o.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+s.classString(k)))}h.length=y;var j=arguments[b];return this._passThrough(f(h,j,this),1,void 0,v)},p}},{"./catch_filter":7,"./util":36}],16:[function(n,r,i){r.exports=function(o,a,u,s,l,g){var f=n("./errors"),p=f.TypeError,_=n("./util"),m=_.errorObj,$=_.tryCatch,w=[];function v(c,h,y){for(var b=0;b<h.length;++b){y._pushContext();var k=$(h[b])(c);if(y._popContext(),k===m){y._pushContext();var j=o.reject(m.e);return y._popContext(),j}var P=s(k,y);if(P instanceof o)return P}return null}function d(c,h,y,b){if(g.cancellation()){var k=new o(u),j=this._finallyPromise=new o(u);this._promise=k.lastly(function(){return j}),k._captureStackTrace(),k._setOnCancel(this)}else{var P=this._promise=new o(u);P._captureStackTrace()}this._stack=b,this._generatorFunction=c,this._receiver=h,this._generator=void 0,this._yieldHandlers=typeof y=="function"?[y].concat(w):w,this._yieldedPromise=null,this._cancellationPhase=!1}_.inherits(d,l),d.prototype._isResolved=function(){return this._promise===null},d.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var c=typeof this._generator.return<"u",h;if(c)this._promise._pushContext(),h=$(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var y=new o.CancellationError("generator .return() sentinel");o.coroutine.returnSentinel=y,this._promise._attachExtraTrace(y),this._promise._pushContext(),h=$(this._generator.throw).call(this._generator,y),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(h)}},d.prototype._promiseFulfilled=function(c){this._yieldedPromise=null,this._promise._pushContext();var h=$(this._generator.next).call(this._generator,c);this._promise._popContext(),this._continue(h)},d.prototype._promiseRejected=function(c){this._yieldedPromise=null,this._promise._attachExtraTrace(c),this._promise._pushContext();var h=$(this._generator.throw).call(this._generator,c);this._promise._popContext(),this._continue(h)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof o){var c=this._yieldedPromise;this._yieldedPromise=null,c.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(c){var h=this._promise;if(c===m)return this._cleanup(),this._cancellationPhase?h.cancel():h._rejectCallback(c.e,!1);var y=c.value;if(c.done===!0)return this._cleanup(),this._cancellationPhase?h.cancel():h._resolveCallback(y);var b=s(y,this._promise);if(!(b instanceof o)&&(b=v(b,this._yieldHandlers,this._promise),b===null)){this._promiseRejected(new p(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(y))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}b=b._target();var k=b._bitField;k&50397184?k&33554432?o._async.invoke(this._promiseFulfilled,this,b._value()):k&16777216?o._async.invoke(this._promiseRejected,this,b._reason()):this._promiseCancelled():(this._yieldedPromise=b,b._proxy(this,null))},o.coroutine=function(c,h){if(typeof c!="function")throw new p(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var y=Object(h).yieldHandler,b=d,k=new Error().stack;return function(){var j=c.apply(this,arguments),P=new b(void 0,void 0,y,k),L=P.promise();return P._generator=j,P._promiseFulfilled(void 0),L}},o.coroutine.addYieldHandler=function(c){if(typeof c!="function")throw new p("expecting a function but got "+_.classString(c));w.push(c)},o.spawn=function(c){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),typeof c!="function")return a(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var h=new d(c,this),y=h.promise();return h._run(o.spawn),y}}},{"./errors":12,"./util":36}],17:[function(n,r,i){r.exports=function(o,a,u,s,l){var g=n("./util");g.canEvaluate,g.tryCatch,g.errorObj,o.join=function(){var f=arguments.length-1,p;if(f>0&&typeof arguments[f]=="function"){p=arguments[f];var m}var _=[].slice.call(arguments);p&&_.pop();var m=new a(_).promise();return p!==void 0?m.spread(p):m}}},{"./util":36}],18:[function(n,r,i){r.exports=function(o,a,u,s,l,g){var f=n("./util"),p=f.tryCatch,_=f.errorObj,m=o._async;function $(v,d,c,h){this.constructor$(v),this._promise._captureStackTrace();var y=o._getContext();if(this._callback=f.contextBind(y,d),this._preservedValues=h===l?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],m.invoke(this._asyncInit,this,void 0),f.isArray(v))for(var b=0;b<v.length;++b){var k=v[b];k instanceof o&&k.suppressUnhandledRejections()}}f.inherits($,a),$.prototype._asyncInit=function(){this._init$(void 0,-2)},$.prototype._init=function(){},$.prototype._promiseFulfilled=function(v,d){var c=this._values,h=this.length(),y=this._preservedValues,b=this._limit;if(d<0){if(d=d*-1-1,c[d]=v,b>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(b>=1&&this._inFlight>=b)return c[d]=v,this._queue.push(d),!1;y!==null&&(y[d]=v);var k=this._promise,j=this._callback,P=k._boundValue();k._pushContext();var L=p(j).call(P,v,d,h),V=k._popContext();if(g.checkForgottenReturns(L,V,y!==null?"Promise.filter":"Promise.map",k),L===_)return this._reject(L.e),!0;var J=s(L,this._promise);if(J instanceof o){J=J._target();var K=J._bitField;if(K&50397184)if(K&33554432)L=J._value();else return K&16777216?(this._reject(J._reason()),!0):(this._cancel(),!0);else return b>=1&&this._inFlight++,c[d]=J,J._proxy(this,(d+1)*-1),!1}c[d]=L}var D=++this._totalResolved;return D>=h?(y!==null?this._filter(c,y):this._resolve(c),!0):!1},$.prototype._drainQueue=function(){for(var v=this._queue,d=this._limit,c=this._values;v.length>0&&this._inFlight<d;){if(this._isResolved())return;var h=v.pop();this._promiseFulfilled(c[h],h)}},$.prototype._filter=function(v,d){for(var c=d.length,h=new Array(c),y=0,b=0;b<c;++b)v[b]&&(h[y++]=d[b]);h.length=y,this._resolve(h)},$.prototype.preservedValues=function(){return this._preservedValues};function w(v,d,c,h){if(typeof d!="function")return u("expecting a function but got "+f.classString(d));var y=0;if(c!==void 0)if(typeof c=="object"&&c!==null){if(typeof c.concurrency!="number")return o.reject(new TypeError("'concurrency' must be a number but it is "+f.classString(c.concurrency)));y=c.concurrency}else return o.reject(new TypeError("options argument must be an object but it is "+f.classString(c)));return y=typeof y=="number"&&isFinite(y)&&y>=1?y:0,new $(v,d,y,h).promise()}o.prototype.map=function(v,d){return w(this,v,d,null)},o.map=function(v,d,c,h){return w(v,d,c,h)}}},{"./util":36}],19:[function(n,r,i){r.exports=function(o,a,u,s,l){var g=n("./util"),f=g.tryCatch;o.method=function(p){if(typeof p!="function")throw new o.TypeError("expecting a function but got "+g.classString(p));return function(){var _=new o(a);_._captureStackTrace(),_._pushContext();var m=f(p).apply(this,arguments),$=_._popContext();return l.checkForgottenReturns(m,$,"Promise.method",_),_._resolveFromSyncValue(m),_}},o.attempt=o.try=function(p){if(typeof p!="function")return s("expecting a function but got "+g.classString(p));var _=new o(a);_._captureStackTrace(),_._pushContext();var m;if(arguments.length>1){l.deprecated("calling Promise.try with more than 1 argument");var $=arguments[1],w=arguments[2];m=g.isArray($)?f(p).apply(w,$):f(p).call(w,$)}else m=f(p)();var v=_._popContext();return l.checkForgottenReturns(m,v,"Promise.try",_),_._resolveFromSyncValue(m),_},o.prototype._resolveFromSyncValue=function(p){p===g.errorObj?this._rejectCallback(p.e,!1):this._resolveCallback(p,!0)}}},{"./util":36}],20:[function(n,r,i){var o=n("./util"),a=o.maybeWrapAsError,u=n("./errors"),s=u.OperationalError,l=n("./es5");function g(m){return m instanceof Error&&l.getPrototypeOf(m)===Error.prototype}var f=/^(?:name|message|stack|cause)$/;function p(m){var $;if(g(m)){$=new s(m),$.name=m.name,$.message=m.message,$.stack=m.stack;for(var w=l.keys(m),v=0;v<w.length;++v){var d=w[v];f.test(d)||($[d]=m[d])}return $}return o.markAsOriginatingFromRejection(m),m}function _(m,$){return function(w,v){if(m!==null){if(w){var d=p(a(w));m._attachExtraTrace(d),m._reject(d)}else if(!$)m._fulfill(v);else{var c=[].slice.call(arguments,1);m._fulfill(c)}m=null}}}r.exports=_},{"./errors":12,"./es5":13,"./util":36}],21:[function(n,r,i){r.exports=function(o){var a=n("./util"),u=o._async,s=a.tryCatch,l=a.errorObj;function g(_,m){var $=this;if(!a.isArray(_))return f.call($,_,m);var w=s(m).apply($._boundValue(),[null].concat(_));w===l&&u.throwLater(w.e)}function f(_,m){var $=this,w=$._boundValue(),v=_===void 0?s(m).call(w,null):s(m).call(w,null,_);v===l&&u.throwLater(v.e)}function p(_,m){var $=this;if(!_){var w=new Error(_+"");w.cause=_,_=w}var v=s(m).call($._boundValue(),_);v===l&&u.throwLater(v.e)}o.prototype.asCallback=o.prototype.nodeify=function(_,m){if(typeof _=="function"){var $=f;m!==void 0&&Object(m).spread&&($=g),this._then($,p,void 0,this,_)}return this}}},{"./util":36}],22:[function(n,r,i){r.exports=function(){var o=function(){return new k(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},a=function(){return new A.PromiseInspection(this._target())},u=function(O){return A.reject(new k(O))};function s(){}var l={},g=n("./util");g.setReflectHandler(a);var f=function(){var O=process.domain;return O===void 0?null:O},p=function(){return null},_=function(){return{domain:f(),async:null}},m=g.isNode&&g.nodeSupportsAsyncResource?n("async_hooks").AsyncResource:null,$=function(){return{domain:f(),async:new m("Bluebird::Promise")}},w=g.isNode?_:p;g.notEnumerableProp(A,"_getContext",w);var v=function(){w=$,g.notEnumerableProp(A,"_getContext",$)},d=function(){w=_,g.notEnumerableProp(A,"_getContext",_)},c=n("./es5"),h=n("./async"),y=new h;c.defineProperty(A,"_async",{value:y});var b=n("./errors"),k=A.TypeError=b.TypeError;A.RangeError=b.RangeError;var j=A.CancellationError=b.CancellationError;A.TimeoutError=b.TimeoutError,A.OperationalError=b.OperationalError,A.RejectionError=b.OperationalError,A.AggregateError=b.AggregateError;var P=function(){},L={},V={},J=n("./thenables")(A,P),K=n("./promise_array")(A,P,J,u,s),D=n("./context")(A),F=D.create,U=n("./debuggability")(A,D,v,d);U.CapturedTrace;var E=n("./finally")(A,J,V),S=n("./catch_filter")(V),C=n("./nodeback"),x=g.errorObj,I=g.tryCatch;function B(O,T){if(O==null||O.constructor!==A)throw new k(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof T!="function")throw new k("expecting a function but got "+g.classString(T))}function A(O){O!==P&&B(this,O),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(O),this._promiseCreated(),this._fireEvent("promiseCreated",this)}A.prototype.toString=function(){return"[object Promise]"},A.prototype.caught=A.prototype.catch=function(O){var T=arguments.length;if(T>1){var R=new Array(T-1),N=0,Y;for(Y=0;Y<T-1;++Y){var G=arguments[Y];if(g.isObject(G))R[N++]=G;else return u("Catch statement predicate: expecting an object but got "+g.classString(G))}if(R.length=N,O=arguments[Y],typeof O!="function")throw new k("The last argument to .catch() must be a function, got "+g.toString(O));return this.then(void 0,S(R,O,this))}return this.then(void 0,O)},A.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},A.prototype.then=function(O,T){if(U.warnings()&&arguments.length>0&&typeof O!="function"&&typeof T!="function"){var R=".then() only accepts functions but was passed: "+g.classString(O);arguments.length>1&&(R+=", "+g.classString(T)),this._warn(R)}return this._then(O,T,void 0,void 0,void 0)},A.prototype.done=function(O,T){var R=this._then(O,T,void 0,void 0,void 0);R._setIsFinal()},A.prototype.spread=function(O){return typeof O!="function"?u("expecting a function but got "+g.classString(O)):this.all()._then(O,void 0,void 0,L,void 0)},A.prototype.toJSON=function(){var O={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(O.fulfillmentValue=this.value(),O.isFulfilled=!0):this.isRejected()&&(O.rejectionReason=this.reason(),O.isRejected=!0),O},A.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new K(this).promise()},A.prototype.error=function(O){return this.caught(g.originatesFromRejection,O)},A.getNewLibraryCopy=r.exports,A.is=function(O){return O instanceof A},A.fromNode=A.fromCallback=function(O){var T=new A(P);T._captureStackTrace();var R=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,N=I(O)(C(T,R));return N===x&&T._rejectCallback(N.e,!0),T._isFateSealed()||T._setAsyncGuaranteed(),T},A.all=function(O){return new K(O).promise()},A.cast=function(O){var T=J(O);return T instanceof A||(T=new A(P),T._captureStackTrace(),T._setFulfilled(),T._rejectionHandler0=O),T},A.resolve=A.fulfilled=A.cast,A.reject=A.rejected=function(O){var T=new A(P);return T._captureStackTrace(),T._rejectCallback(O,!0),T},A.setScheduler=function(O){if(typeof O!="function")throw new k("expecting a function but got "+g.classString(O));return y.setScheduler(O)},A.prototype._then=function(O,T,R,N,Y){var G=Y!==void 0,Q=G?Y:new A(P),ee=this._target(),te=ee._bitField;G||(Q._propagateFrom(this,3),Q._captureStackTrace(),N===void 0&&this._bitField&2097152&&(te&50397184?N=this._boundValue():N=ee===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Q));var se=w();if(te&50397184){var ie,he,Me=ee._settlePromiseCtx;te&33554432?(he=ee._rejectionHandler0,ie=O):te&16777216?(he=ee._fulfillmentHandler0,ie=T,ee._unsetRejectionIsUnhandled()):(Me=ee._settlePromiseLateCancellationObserver,he=new j("late cancellation observer"),ee._attachExtraTrace(he),ie=T),y.invoke(Me,ee,{handler:g.contextBind(se,ie),promise:Q,receiver:N,value:he})}else ee._addCallbacks(O,T,Q,N,se);return Q},A.prototype._length=function(){return this._bitField&65535},A.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},A.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},A.prototype._setLength=function(O){this._bitField=this._bitField&-65536|O&65535},A.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},A.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},A.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},A.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},A.prototype._isFinal=function(){return(this._bitField&4194304)>0},A.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},A.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},A.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},A.prototype._setAsyncGuaranteed=function(){if(!y.hasCustomScheduler()){var O=this._bitField;this._bitField=O|(O&536870912)>>2^134217728}},A.prototype._setNoAsyncGuarantee=function(){this._bitField=(this._bitField|536870912)&-134217729},A.prototype._receiverAt=function(O){var T=O===0?this._receiver0:this[O*4-4+3];if(T!==l)return T===void 0&&this._isBound()?this._boundValue():T},A.prototype._promiseAt=function(O){return this[O*4-4+2]},A.prototype._fulfillmentHandlerAt=function(O){return this[O*4-4+0]},A.prototype._rejectionHandlerAt=function(O){return this[O*4-4+1]},A.prototype._boundValue=function(){},A.prototype._migrateCallback0=function(O){O._bitField;var T=O._fulfillmentHandler0,R=O._rejectionHandler0,N=O._promise0,Y=O._receiverAt(0);Y===void 0&&(Y=l),this._addCallbacks(T,R,N,Y,null)},A.prototype._migrateCallbackAt=function(O,T){var R=O._fulfillmentHandlerAt(T),N=O._rejectionHandlerAt(T),Y=O._promiseAt(T),G=O._receiverAt(T);G===void 0&&(G=l),this._addCallbacks(R,N,Y,G,null)},A.prototype._addCallbacks=function(O,T,R,N,Y){var G=this._length();if(G>=65535-4&&(G=0,this._setLength(0)),G===0)this._promise0=R,this._receiver0=N,typeof O=="function"&&(this._fulfillmentHandler0=g.contextBind(Y,O)),typeof T=="function"&&(this._rejectionHandler0=g.contextBind(Y,T));else{var Q=G*4-4;this[Q+2]=R,this[Q+3]=N,typeof O=="function"&&(this[Q+0]=g.contextBind(Y,O)),typeof T=="function"&&(this[Q+1]=g.contextBind(Y,T))}return this._setLength(G+1),G},A.prototype._proxy=function(O,T){this._addCallbacks(void 0,void 0,T,O,null)},A.prototype._resolveCallback=function(O,T){if(!(this._bitField&117506048)){if(O===this)return this._rejectCallback(o(),!1);var R=J(O,this);if(!(R instanceof A))return this._fulfill(O);T&&this._propagateFrom(R,2);var N=R._target();if(N===this){this._reject(o());return}var Y=N._bitField;if(Y&50397184)if(Y&33554432)this._fulfill(N._value());else if(Y&16777216)this._reject(N._reason());else{var ee=new j("late cancellation observer");N._attachExtraTrace(ee),this._reject(ee)}else{var G=this._length();G>0&&N._migrateCallback0(this);for(var Q=1;Q<G;++Q)N._migrateCallbackAt(this,Q);this._setFollowing(),this._setLength(0),this._setFollowee(R)}}},A.prototype._rejectCallback=function(O,T,R){var N=g.ensureErrorObject(O),Y=N===O;if(!Y&&!R&&U.warnings()){var G="a promise was rejected with a non-error: "+g.classString(O);this._warn(G,!0)}this._attachExtraTrace(N,T?Y:!1),this._reject(O)},A.prototype._resolveFromExecutor=function(O){if(O!==P){var T=this;this._captureStackTrace(),this._pushContext();var R=!0,N=this._execute(O,function(Y){T._resolveCallback(Y)},function(Y){T._rejectCallback(Y,R)});R=!1,this._popContext(),N!==void 0&&T._rejectCallback(N,!0)}},A.prototype._settlePromiseFromHandler=function(O,T,R,N){var Y=N._bitField;if(!(Y&65536)){N._pushContext();var G;T===L?!R||typeof R.length!="number"?(G=x,G.e=new k("cannot .spread() a non-array: "+g.classString(R))):G=I(O).apply(this._boundValue(),R):G=I(O).call(T,R);var Q=N._popContext();Y=N._bitField,!(Y&65536)&&(G===V?N._reject(R):G===x?N._rejectCallback(G.e,!1):(U.checkForgottenReturns(G,Q,"",N,this),N._resolveCallback(G)))}},A.prototype._target=function(){for(var O=this;O._isFollowing();)O=O._followee();return O},A.prototype._followee=function(){return this._rejectionHandler0},A.prototype._setFollowee=function(O){this._rejectionHandler0=O},A.prototype._settlePromise=function(O,T,R,N){var Y=O instanceof A,G=this._bitField,Q=(G&134217728)!==0;G&65536?(Y&&O._invokeInternalOnCancel(),R instanceof E&&R.isFinallyHandler()?(R.cancelPromise=O,I(T).call(R,N)===x&&O._reject(x.e)):T===a?O._fulfill(a.call(R)):R instanceof s?R._promiseCancelled(O):Y||O instanceof K?O._cancel():R.cancel()):typeof T=="function"?Y?(Q&&O._setAsyncGuaranteed(),this._settlePromiseFromHandler(T,R,N,O)):T.call(R,N,O):R instanceof s?R._isResolved()||(G&33554432?R._promiseFulfilled(N,O):R._promiseRejected(N,O)):Y&&(Q&&O._setAsyncGuaranteed(),G&33554432?O._fulfill(N):O._reject(N))},A.prototype._settlePromiseLateCancellationObserver=function(O){var T=O.handler,R=O.promise,N=O.receiver,Y=O.value;typeof T=="function"?R instanceof A?this._settlePromiseFromHandler(T,N,Y,R):T.call(N,Y,R):R instanceof A&&R._reject(Y)},A.prototype._settlePromiseCtx=function(O){this._settlePromise(O.promise,O.handler,O.receiver,O.value)},A.prototype._settlePromise0=function(O,T,R){var N=this._promise0,Y=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(N,O,Y,T)},A.prototype._clearCallbackDataAtIndex=function(O){var T=O*4-4;this[T+2]=this[T+3]=this[T+0]=this[T+1]=void 0},A.prototype._fulfill=function(O){var T=this._bitField;if(!((T&117506048)>>>16)){if(O===this){var R=o();return this._attachExtraTrace(R),this._reject(R)}this._setFulfilled(),this._rejectionHandler0=O,(T&65535)>0&&(T&134217728?this._settlePromises():y.settlePromises(this),this._dereferenceTrace())}},A.prototype._reject=function(O){var T=this._bitField;if(!((T&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=O,this._isFinal())return y.fatalError(O,g.isNode);(T&65535)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled()}},A.prototype._fulfillPromises=function(O,T){for(var R=1;R<O;R++){var N=this._fulfillmentHandlerAt(R),Y=this._promiseAt(R),G=this._receiverAt(R);this._clearCallbackDataAtIndex(R),this._settlePromise(Y,N,G,T)}},A.prototype._rejectPromises=function(O,T){for(var R=1;R<O;R++){var N=this._rejectionHandlerAt(R),Y=this._promiseAt(R),G=this._receiverAt(R);this._clearCallbackDataAtIndex(R),this._settlePromise(Y,N,G,T)}},A.prototype._settlePromises=function(){var O=this._bitField,T=O&65535;if(T>0){if(O&16842752){var R=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,R,O),this._rejectPromises(T,R)}else{var N=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,N,O),this._fulfillPromises(T,N)}this._setLength(0)}this._clearCancellationData()},A.prototype._settledValue=function(){var O=this._bitField;if(O&33554432)return this._rejectionHandler0;if(O&16777216)return this._fulfillmentHandler0},typeof Symbol<"u"&&Symbol.toStringTag&&c.defineProperty(A.prototype,Symbol.toStringTag,{get:function(){return"Object"}});function M(O){this.promise._resolveCallback(O)}function H(O){this.promise._rejectCallback(O,!1)}A.defer=A.pending=function(){U.deprecated("Promise.defer","new Promise");var O=new A(P);return{promise:O,resolve:M,reject:H}},g.notEnumerableProp(A,"_makeSelfResolutionError",o),n("./method")(A,P,J,u,U),n("./bind")(A,P,J,U),n("./cancel")(A,K,u,U),n("./direct_resolve")(A),n("./synchronous_inspection")(A),n("./join")(A,K,J,P,y),A.Promise=A,A.version="3.7.2",n("./call_get.js")(A),n("./generators.js")(A,u,P,J,s,U),n("./map.js")(A,K,u,J,P,U),n("./nodeify.js")(A),n("./promisify.js")(A,P),n("./props.js")(A,K,J,u),n("./race.js")(A,P,J,u),n("./reduce.js")(A,K,u,J,P,U),n("./settle.js")(A,K,U),n("./some.js")(A,K,u),n("./timers.js")(A,P,U),n("./using.js")(A,u,J,F,P,U),n("./any.js")(A),n("./each.js")(A,P),n("./filter.js")(A,P),g.toFastProperties(A),g.toFastProperties(A.prototype);function W(O){var T=new A(P);T._fulfillmentHandler0=O,T._rejectionHandler0=O,T._promise0=O,T._receiver0=O}return W({a:1}),W({b:2}),W({c:3}),W(1),W(function(){}),W(void 0),W(!1),W(new A(P)),U.setBounds(h.firstLineError,g.lastLineError),A}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(n,r,i){r.exports=function(o,a,u,s,l){var g=n("./util");g.isArray;function f(_){switch(_){case-2:return[];case-3:return{};case-6:return new Map}}function p(_){var m=this._promise=new o(a);_ instanceof o&&(m._propagateFrom(_,3),_.suppressUnhandledRejections()),m._setOnCancel(this),this._values=_,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return g.inherits(p,l),p.prototype.length=function(){return this._length},p.prototype.promise=function(){return this._promise},p.prototype._init=function _(m,$){var w=u(this._values,this._promise);if(w instanceof o){w=w._target();var v=w._bitField;if(this._values=w,v&50397184)if(v&33554432)w=w._value();else return v&16777216?this._reject(w._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),w._then(_,this._reject,void 0,this,$)}if(w=g.asArray(w),w===null){var d=s("expecting an array or an iterable object but got "+g.classString(w)).reason();this._promise._rejectCallback(d,!1);return}if(w.length===0){$===-5?this._resolveEmptyArray():this._resolve(f($));return}this._iterate(w)},p.prototype._iterate=function(_){var m=this.getActualLength(_.length);this._length=m,this._values=this.shouldCopyValues()?new Array(m):this._values;for(var $=this._promise,w=!1,v=null,d=0;d<m;++d){var c=u(_[d],$);c instanceof o?(c=c._target(),v=c._bitField):v=null,w?v!==null&&c.suppressUnhandledRejections():v!==null?v&50397184?v&33554432?w=this._promiseFulfilled(c._value(),d):v&16777216?w=this._promiseRejected(c._reason(),d):w=this._promiseCancelled(d):(c._proxy(this,d),this._values[d]=c):w=this._promiseFulfilled(c,d)}w||$._setAsyncGuaranteed()},p.prototype._isResolved=function(){return this._values===null},p.prototype._resolve=function(_){this._values=null,this._promise._fulfill(_)},p.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},p.prototype._reject=function(_){this._values=null,this._promise._rejectCallback(_,!1)},p.prototype._promiseFulfilled=function(_,m){this._values[m]=_;var $=++this._totalResolved;return $>=this._length?(this._resolve(this._values),!0):!1},p.prototype._promiseCancelled=function(){return this._cancel(),!0},p.prototype._promiseRejected=function(_){return this._totalResolved++,this._reject(_),!0},p.prototype._resultCancelled=function(){if(!this._isResolved()){var _=this._values;if(this._cancel(),_ instanceof o)_.cancel();else for(var m=0;m<_.length;++m)_[m]instanceof o&&_[m].cancel()}},p.prototype.shouldCopyValues=function(){return!0},p.prototype.getActualLength=function(_){return _},p}},{"./util":36}],24:[function(n,r,i){r.exports=function(o,a){var u={},s=n("./util"),l=n("./nodeback"),g=s.withAppended,f=s.maybeWrapAsError,p=s.canEvaluate,_=n("./errors").TypeError,m="Async",$={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],v=new RegExp("^(?:"+w.join("|")+")$"),d=function(D){return s.isIdentifier(D)&&D.charAt(0)!=="_"&&D!=="constructor"};function c(D){return!v.test(D)}function h(D){try{return D.__isPromisified__===!0}catch{return!1}}function y(D,F,U){var E=s.getDataPropertyOrDefault(D,F+U,$);return E?h(E):!1}function b(D,F,U){for(var E=0;E<D.length;E+=2){var S=D[E];if(U.test(S)){for(var C=S.replace(U,""),x=0;x<D.length;x+=2)if(D[x]===C)throw new _(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",F))}}}function k(D,F,U,E){for(var S=s.inheritedDataKeys(D),C=[],x=0;x<S.length;++x){var I=S[x],B=D[I],A=E===d?!0:d(I);typeof B=="function"&&!h(B)&&!y(D,I,F)&&E(I,B,D,A)&&C.push(I,B)}return b(C,F,U),C}var j=function(D){return D.replace(/([$])/,"\\$")},P;function L(D,F,U,E,S,C){var x=function(){return this}(),I=D;typeof I=="string"&&(D=E);function B(){var A=F;F===u&&(A=this);var M=new o(a);M._captureStackTrace();var H=typeof I=="string"&&this!==x?this[I]:D,W=l(M,C);try{H.apply(A,g(arguments,W))}catch(O){M._rejectCallback(f(O),!0,!0)}return M._isFateSealed()||M._setAsyncGuaranteed(),M}return s.notEnumerableProp(B,"__isPromisified__",!0),B}var V=p?P:L;function J(D,F,U,E,S){for(var C=new RegExp(j(F)+"$"),x=k(D,F,C,U),I=0,B=x.length;I<B;I+=2){var A=x[I],M=x[I+1],H=A+F;if(E===V)D[H]=V(A,u,A,M,F,S);else{var W=E(M,function(){return V(A,u,A,M,F,S)});s.notEnumerableProp(W,"__isPromisified__",!0),D[H]=W}}return s.toFastProperties(D),D}function K(D,F,U){return V(D,F,void 0,D,null,U)}o.promisify=function(D,F){if(typeof D!="function")throw new _("expecting a function but got "+s.classString(D));if(h(D))return D;F=Object(F);var U=F.context===void 0?u:F.context,E=!!F.multiArgs,S=K(D,U,E);return s.copyDescriptors(D,S,c),S},o.promisifyAll=function(D,F){if(typeof D!="function"&&typeof D!="object")throw new _(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);F=Object(F);var U=!!F.multiArgs,E=F.suffix;typeof E!="string"&&(E=m);var S=F.filter;typeof S!="function"&&(S=d);var C=F.promisifier;if(typeof C!="function"&&(C=V),!s.isIdentifier(E))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var x=s.inheritedDataKeys(D),I=0;I<x.length;++I){var B=D[x[I]];x[I]!=="constructor"&&s.isClass(B)&&(J(B.prototype,E,S,C,U),J(B,E,S,C,U))}return J(D,E,S,C,U)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(n,r,i){r.exports=function(o,a,u,s){var l=n("./util"),g=l.isObject,f=n("./es5"),p;typeof Map=="function"&&(p=Map);var _=function(){var v=0,d=0;function c(h,y){this[v]=h,this[v+d]=y,v++}return function(y){d=y.size,v=0;var b=new Array(y.size*2);return y.forEach(c,b),b}}(),m=function(v){for(var d=new p,c=v.length/2|0,h=0;h<c;++h){var y=v[c+h],b=v[h];d.set(y,b)}return d};function $(v){var d=!1,c;if(p!==void 0&&v instanceof p)c=_(v),d=!0;else{var h=f.keys(v),y=h.length;c=new Array(y*2);for(var b=0;b<y;++b){var k=h[b];c[b]=v[k],c[b+y]=k}}this.constructor$(c),this._isMap=d,this._init$(void 0,d?-6:-3)}l.inherits($,a),$.prototype._init=function(){},$.prototype._promiseFulfilled=function(v,d){this._values[d]=v;var c=++this._totalResolved;if(c>=this._length){var h;if(this._isMap)h=m(this._values);else{h={};for(var y=this.length(),b=0,k=this.length();b<k;++b)h[this._values[b+y]]=this._values[b]}return this._resolve(h),!0}return!1},$.prototype.shouldCopyValues=function(){return!1},$.prototype.getActualLength=function(v){return v>>1};function w(v){var d,c=u(v);if(g(c))c instanceof o?d=c._then(o.props,void 0,void 0,void 0,void 0):d=new $(c).promise();else return s(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return c instanceof o&&d._propagateFrom(c,2),d}o.prototype.props=function(){return w(this)},o.props=function(v){return w(v)}}},{"./es5":13,"./util":36}],26:[function(n,r,i){function o(u,s,l,g,f){for(var p=0;p<f;++p)l[p+g]=u[p+s],u[p+s]=void 0}function a(u){this._capacity=u,this._length=0,this._front=0}a.prototype._willBeOverCapacity=function(u){return this._capacity<u},a.prototype._pushOne=function(u){var s=this.length();this._checkCapacity(s+1);var l=this._front+s&this._capacity-1;this[l]=u,this._length=s+1},a.prototype.push=function(u,s,l){var g=this.length()+3;if(this._willBeOverCapacity(g)){this._pushOne(u),this._pushOne(s),this._pushOne(l);return}var f=this._front+g-3;this._checkCapacity(g);var p=this._capacity-1;this[f+0&p]=u,this[f+1&p]=s,this[f+2&p]=l,this._length=g},a.prototype.shift=function(){var u=this._front,s=this[u];return this[u]=void 0,this._front=u+1&this._capacity-1,this._length--,s},a.prototype.length=function(){return this._length},a.prototype._checkCapacity=function(u){this._capacity<u&&this._resizeTo(this._capacity<<1)},a.prototype._resizeTo=function(u){var s=this._capacity;this._capacity=u;var l=this._front,g=this._length,f=l+g&s-1;o(this,0,this,s,f)},r.exports=a},{}],27:[function(n,r,i){r.exports=function(o,a,u,s){var l=n("./util"),g=function(p){return p.then(function(_){return f(_,p)})};function f(p,_){var m=u(p);if(m instanceof o)return g(m);if(p=l.asArray(p),p===null)return s("expecting an array or an iterable object but got "+l.classString(p));var $=new o(a);_!==void 0&&$._propagateFrom(_,3);for(var w=$._fulfill,v=$._reject,d=0,c=p.length;d<c;++d){var h=p[d];h===void 0&&!(d in p)||o.cast(h)._then(w,v,void 0,$,null)}return $}o.race=function(p){return f(p,void 0)},o.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(n,r,i){r.exports=function(o,a,u,s,l,g){var f=n("./util"),p=f.tryCatch;function _(d,c,h,y){this.constructor$(d);var b=o._getContext();this._fn=f.contextBind(b,c),h!==void 0&&(h=o.resolve(h),h._attachCancellationCallback(this)),this._initialValue=h,this._currentCancellable=null,y===l?this._eachValues=Array(this._length):y===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}f.inherits(_,a),_.prototype._gotAccum=function(d){this._eachValues!==void 0&&this._eachValues!==null&&d!==l&&this._eachValues.push(d)},_.prototype._eachComplete=function(d){return this._eachValues!==null&&this._eachValues.push(d),this._eachValues},_.prototype._init=function(){},_.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},_.prototype.shouldCopyValues=function(){return!1},_.prototype._resolve=function(d){this._promise._resolveCallback(d),this._values=null},_.prototype._resultCancelled=function(d){if(d===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof o&&this._currentCancellable.cancel(),this._initialValue instanceof o&&this._initialValue.cancel())},_.prototype._iterate=function(d){this._values=d;var c,h,y=d.length;this._initialValue!==void 0?(c=this._initialValue,h=0):(c=o.resolve(d[0]),h=1),this._currentCancellable=c;for(var b=h;b<y;++b){var k=d[b];k instanceof o&&k.suppressUnhandledRejections()}if(!c.isRejected())for(;h<y;++h){var j={accum:null,value:d[h],index:h,length:y,array:this};c=c._then(w,void 0,void 0,j,void 0),h&127||c._setNoAsyncGuarantee()}this._eachValues!==void 0&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(m,m,void 0,c,this)},o.prototype.reduce=function(d,c){return $(this,d,c,null)},o.reduce=function(d,c,h,y){return $(d,c,h,y)};function m(d,c){this.isFulfilled()?c._resolve(d):c._reject(d)}function $(d,c,h,y){if(typeof c!="function")return u("expecting a function but got "+f.classString(c));var b=new _(d,c,h,y);return b.promise()}function w(d){this.accum=d,this.array._gotAccum(d);var c=s(this.value,this.array._promise);return c instanceof o?(this.array._currentCancellable=c,c._then(v,void 0,void 0,this,void 0)):v.call(this,c)}function v(d){var c=this.array,h=c._promise,y=p(c._fn);h._pushContext();var b;c._eachValues!==void 0?b=y.call(h._boundValue(),d,this.index,this.length):b=y.call(h._boundValue(),this.accum,d,this.index,this.length),b instanceof o&&(c._currentCancellable=b);var k=h._popContext();return g.checkForgottenReturns(b,k,c._eachValues!==void 0?"Promise.each":"Promise.reduce",h),b}}},{"./util":36}],29:[function(n,r,i){var o=n("./util"),a,u=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},s=o.getNativePromise();if(o.isNode&&typeof MutationObserver>"u"){var l=ge.setImmediate,g=process.nextTick;a=o.isRecentNode?function(p){l.call(ge,p)}:function(p){g.call(process,p)}}else if(typeof s=="function"&&typeof s.resolve=="function"){var f=s.resolve();a=function(p){f.then(p)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))&&"classList"in document.documentElement?a=function(){var p=document.createElement("div"),_={attributes:!0},m=!1,$=document.createElement("div"),w=new MutationObserver(function(){p.classList.toggle("foo"),m=!1});w.observe($,_);var v=function(){m||(m=!0,$.classList.toggle("foo"))};return function(c){var h=new MutationObserver(function(){h.disconnect(),c()});h.observe(p,_),v()}}():typeof setImmediate<"u"?a=function(p){setImmediate(p)}:typeof setTimeout<"u"?a=function(p){setTimeout(p,0)}:a=u;r.exports=a},{"./util":36}],30:[function(n,r,i){r.exports=function(o,a,u){var s=o.PromiseInspection,l=n("./util");function g(f){this.constructor$(f)}l.inherits(g,a),g.prototype._promiseResolved=function(f,p){this._values[f]=p;var _=++this._totalResolved;return _>=this._length?(this._resolve(this._values),!0):!1},g.prototype._promiseFulfilled=function(f,p){var _=new s;return _._bitField=33554432,_._settledValueField=f,this._promiseResolved(p,_)},g.prototype._promiseRejected=function(f,p){var _=new s;return _._bitField=16777216,_._settledValueField=f,this._promiseResolved(p,_)},o.settle=function(f){return u.deprecated(".settle()",".reflect()"),new g(f).promise()},o.allSettled=function(f){return new g(f).promise()},o.prototype.settle=function(){return o.settle(this)}}},{"./util":36}],31:[function(n,r,i){r.exports=function(o,a,u){var s=n("./util"),l=n("./errors").RangeError,g=n("./errors").AggregateError,f=s.isArray,p={};function _($){this.constructor$($),this._howMany=0,this._unwrap=!1,this._initialized=!1}s.inherits(_,a),_.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var $=f(this._values);!this._isResolved()&&$&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},_.prototype.init=function(){this._initialized=!0,this._init()},_.prototype.setUnwrap=function(){this._unwrap=!0},_.prototype.howMany=function(){return this._howMany},_.prototype.setHowMany=function($){this._howMany=$},_.prototype._promiseFulfilled=function($){return this._addFulfilled($),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},_.prototype._promiseRejected=function($){return this._addRejected($),this._checkOutcome()},_.prototype._promiseCancelled=function(){return this._values instanceof o||this._values==null?this._cancel():(this._addRejected(p),this._checkOutcome())},_.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var $=new g,w=this.length();w<this._values.length;++w)this._values[w]!==p&&$.push(this._values[w]);return $.length>0?this._reject($):this._cancel(),!0}return!1},_.prototype._fulfilled=function(){return this._totalResolved},_.prototype._rejected=function(){return this._values.length-this.length()},_.prototype._addRejected=function($){this._values.push($)},_.prototype._addFulfilled=function($){this._values[this._totalResolved++]=$},_.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},_.prototype._getRangeError=function($){var w="Input array must contain at least "+this._howMany+" items but contains only "+$+" items";return new l(w)},_.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function m($,w){if((w|0)!==w||w<0)return u(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var v=new _($),d=v.promise();return v.setHowMany(w),v.init(),d}o.some=function($,w){return m($,w)},o.prototype.some=function($){return m(this,$)},o._SomePromiseArray=_}},{"./errors":12,"./util":36}],32:[function(n,r,i){r.exports=function(o){function a(_){_!==void 0?(_=_._target(),this._bitField=_._bitField,this._settledValueField=_._isFateSealed()?_._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}a.prototype._settledValue=function(){return this._settledValueField};var u=a.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},s=a.prototype.error=a.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},l=a.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},g=a.prototype.isRejected=function(){return(this._bitField&16777216)!==0},f=a.prototype.isPending=function(){return(this._bitField&50397184)===0},p=a.prototype.isResolved=function(){return(this._bitField&50331648)!==0};a.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},o.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},o.prototype._isCancelled=function(){return this._target().__isCancelled()},o.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},o.prototype.isPending=function(){return f.call(this._target())},o.prototype.isRejected=function(){return g.call(this._target())},o.prototype.isFulfilled=function(){return l.call(this._target())},o.prototype.isResolved=function(){return p.call(this._target())},o.prototype.value=function(){return u.call(this._target())},o.prototype.reason=function(){var _=this._target();return _._unsetRejectionIsUnhandled(),s.call(_)},o.prototype._value=function(){return this._settledValue()},o.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},o.PromiseInspection=a}},{}],33:[function(n,r,i){r.exports=function(o,a){var u=n("./util"),s=u.errorObj,l=u.isObject;function g(w,v){if(l(w)){if(w instanceof o)return w;var d=p(w);if(d===s){v&&v._pushContext();var c=o.reject(d.e);return v&&v._popContext(),c}else if(typeof d=="function"){if(m(w)){var c=new o(a);return w._then(c._fulfill,c._reject,void 0,c,null),c}return $(w,d,v)}}return w}function f(w){return w.then}function p(w){try{return f(w)}catch(v){return s.e=v,s}}var _={}.hasOwnProperty;function m(w){try{return _.call(w,"_promise0")}catch{return!1}}function $(w,v,d){var c=new o(a),h=c;d&&d._pushContext(),c._captureStackTrace(),d&&d._popContext();var y=!0,b=u.tryCatch(v).call(w,k,j);y=!1,c&&b===s&&(c._rejectCallback(b.e,!0,!0),c=null);function k(P){c&&(c._resolveCallback(P),c=null)}function j(P){c&&(c._rejectCallback(P,y,!0),c=null)}return h}return g}},{"./util":36}],34:[function(n,r,i){r.exports=function(o,a,u){var s=n("./util"),l=o.TimeoutError;function g(w){this.handle=w}g.prototype._resultCancelled=function(){clearTimeout(this.handle)};var f=function(w){return p(+this).thenReturn(w)},p=o.delay=function(w,v){var d,c;return v!==void 0?(d=o.resolve(v)._then(f,null,null,w,void 0),u.cancellation()&&v instanceof o&&d._setOnCancel(v)):(d=new o(a),c=setTimeout(function(){d._fulfill()},+w),u.cancellation()&&d._setOnCancel(new g(c)),d._captureStackTrace()),d._setAsyncGuaranteed(),d};o.prototype.delay=function(w){return p(w,this)};var _=function(w,v,d){var c;typeof v!="string"?v instanceof Error?c=v:c=new l("operation timed out"):c=new l(v),s.markAsOriginatingFromRejection(c),w._attachExtraTrace(c),w._reject(c),d!=null&&d.cancel()};function m(w){return clearTimeout(this.handle),w}function $(w){throw clearTimeout(this.handle),w}o.prototype.timeout=function(w,v){w=+w;var d,c,h=new g(setTimeout(function(){d.isPending()&&_(d,v,c)},w));return u.cancellation()?(c=this.then(),d=c._then(m,$,void 0,h,void 0),d._setOnCancel(h)):d=this._then(m,$,void 0,h,void 0),d}}},{"./util":36}],35:[function(n,r,i){r.exports=function(o,a,u,s,l,g){var f=n("./util"),p=n("./errors").TypeError,_=n("./util").inherits,m=f.errorObj,$=f.tryCatch,w={};function v(j){setTimeout(function(){throw j},0)}function d(j){var P=u(j);return P!==j&&typeof j._isDisposable=="function"&&typeof j._getDisposer=="function"&&j._isDisposable()&&P._setDisposable(j._getDisposer()),P}function c(j,P){var L=0,V=j.length,J=new o(l);function K(){if(L>=V)return J._fulfill();var D=d(j[L++]);if(D instanceof o&&D._isDisposable()){try{D=u(D._getDisposer().tryDispose(P),j.promise)}catch(F){return v(F)}if(D instanceof o)return D._then(K,v,null,null,null)}K()}return K(),J}function h(j,P,L){this._data=j,this._promise=P,this._context=L}h.prototype.data=function(){return this._data},h.prototype.promise=function(){return this._promise},h.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():w},h.prototype.tryDispose=function(j){var P=this.resource(),L=this._context;L!==void 0&&L._pushContext();var V=P!==w?this.doDispose(P,j):null;return L!==void 0&&L._popContext(),this._promise._unsetDisposable(),this._data=null,V},h.isDisposer=function(j){return j!=null&&typeof j.resource=="function"&&typeof j.tryDispose=="function"};function y(j,P,L){this.constructor$(j,P,L)}_(y,h),y.prototype.doDispose=function(j,P){var L=this.data();return L.call(j,j,P)};function b(j){return h.isDisposer(j)?(this.resources[this.index]._setDisposable(j),j.promise()):j}function k(j){this.length=j,this.promise=null,this[j-1]=null}k.prototype._resultCancelled=function(){for(var j=this.length,P=0;P<j;++P){var L=this[P];L instanceof o&&L.cancel()}},o.using=function(){var j=arguments.length;if(j<2)return a("you must pass at least 2 arguments to Promise.using");var P=arguments[j-1];if(typeof P!="function")return a("expecting a function but got "+f.classString(P));var L,V=!0;j===2&&Array.isArray(arguments[0])?(L=arguments[0],j=L.length,V=!1):(L=arguments,j--);for(var J=new k(j),K=0;K<j;++K){var D=L[K];if(h.isDisposer(D)){var F=D;D=D.promise(),D._setDisposable(F)}else{var U=u(D);U instanceof o&&(D=U._then(b,null,null,{resources:J,index:K},void 0))}J[K]=D}for(var E=new Array(J.length),K=0;K<E.length;++K)E[K]=o.resolve(J[K]).reflect();var S=o.all(E).then(function(x){for(var I=0;I<x.length;++I){var B=x[I];if(B.isRejected())return m.e=B.error(),m;if(!B.isFulfilled()){S.cancel();return}x[I]=B.value()}C._pushContext(),P=$(P);var A=V?P.apply(void 0,x):P(x),M=C._popContext();return g.checkForgottenReturns(A,M,"Promise.using",C),A}),C=S.lastly(function(){var x=new o.PromiseInspection(S);return c(J,x)});return J.promise=C,C._setOnCancel(J),C},o.prototype._setDisposable=function(j){this._bitField=this._bitField|131072,this._disposer=j},o.prototype._isDisposable=function(){return(this._bitField&131072)>0},o.prototype._getDisposer=function(){return this._disposer},o.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},o.prototype.disposer=function(j){if(typeof j=="function")return new y(j,this,s());throw new p}}},{"./errors":12,"./util":36}],36:[function(n,r,i){var o=n("./es5"),a=typeof navigator>"u",u={e:{}},s,l=typeof self<"u"?self:typeof window<"u"?window:typeof ge<"u"?ge:this!==void 0?this:null;function g(){try{var T=s;return s=null,T.apply(this,arguments)}catch(R){return u.e=R,u}}function f(T){return s=T,g}var p=function(T,R){var N={}.hasOwnProperty;function Y(){this.constructor=T,this.constructor$=R;for(var G in R.prototype)N.call(R.prototype,G)&&G.charAt(G.length-1)!=="$"&&(this[G+"$"]=R.prototype[G])}return Y.prototype=R.prototype,T.prototype=new Y,T.prototype};function _(T){return T==null||T===!0||T===!1||typeof T=="string"||typeof T=="number"}function m(T){return typeof T=="function"||typeof T=="object"&&T!==null}function $(T){return _(T)?new Error(V(T)):T}function w(T,R){var N=T.length,Y=new Array(N+1),G;for(G=0;G<N;++G)Y[G]=T[G];return Y[G]=R,Y}function v(T,R,N){if(o.isES5){var Y=Object.getOwnPropertyDescriptor(T,R);if(Y!=null)return Y.get==null&&Y.set==null?Y.value:N}else return{}.hasOwnProperty.call(T,R)?T[R]:void 0}function d(T,R,N){if(_(T))return T;var Y={value:N,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(T,R,Y),T}function c(T){throw T}var h=function(){var T=[Array.prototype,Object.prototype,Function.prototype],R=function(G){for(var Q=0;Q<T.length;++Q)if(T[Q]===G)return!0;return!1};if(o.isES5){var N=Object.getOwnPropertyNames;return function(G){for(var Q=[],ee=Object.create(null);G!=null&&!R(G);){var te;try{te=N(G)}catch{return Q}for(var se=0;se<te.length;++se){var ie=te[se];if(!ee[ie]){ee[ie]=!0;var he=Object.getOwnPropertyDescriptor(G,ie);he!=null&&he.get==null&&he.set==null&&Q.push(ie)}}G=o.getPrototypeOf(G)}return Q}}else{var Y={}.hasOwnProperty;return function(G){if(R(G))return[];var Q=[];e:for(var ee in G)if(Y.call(G,ee))Q.push(ee);else{for(var te=0;te<T.length;++te)if(Y.call(T[te],ee))continue e;Q.push(ee)}return Q}}}(),y=/this\s*\.\s*\S+\s*=/;function b(T){try{if(typeof T=="function"){var R=o.names(T.prototype),N=o.isES5&&R.length>1,Y=R.length>0&&!(R.length===1&&R[0]==="constructor"),G=y.test(T+"")&&o.names(T).length>0;if(N||Y||G)return!0}return!1}catch{return!1}}function k(T){function R(){}R.prototype=T;var N=new R;function Y(){return typeof N.foo}return Y(),Y(),T}var j=/^[a-z$_][a-z$_0-9]*$/i;function P(T){return j.test(T)}function L(T,R,N){for(var Y=new Array(T),G=0;G<T;++G)Y[G]=R+G+N;return Y}function V(T){try{return T+""}catch{return"[no string representation]"}}function J(T){return T instanceof Error||T!==null&&typeof T=="object"&&typeof T.message=="string"&&typeof T.name=="string"}function K(T){try{d(T,"isOperational",!0)}catch{}}function D(T){return T==null?!1:T instanceof Error.__BluebirdErrorTypes__.OperationalError||T.isOperational===!0}function F(T){return J(T)&&o.propertyIsWritable(T,"stack")}var U=function(){return"stack"in new Error?function(T){return F(T)?T:new Error(V(T))}:function(T){if(F(T))return T;try{throw new Error(V(T))}catch(R){return R}}}();function E(T){return{}.toString.call(T)}function S(T,R,N){for(var Y=o.names(T),G=0;G<Y.length;++G){var Q=Y[G];if(N(Q))try{o.defineProperty(R,Q,o.getDescriptor(T,Q))}catch{}}}var C=function(T){return o.isArray(T)?T:null};if(typeof Symbol<"u"&&Symbol.iterator){var x=typeof Array.from=="function"?function(T){return Array.from(T)}:function(T){for(var R=[],N=T[Symbol.iterator](),Y;!(Y=N.next()).done;)R.push(Y.value);return R};C=function(T){return o.isArray(T)?T:T!=null&&typeof T[Symbol.iterator]=="function"?x(T):null}}var I=typeof process<"u"&&E(process).toLowerCase()==="[object process]",B=typeof process<"u"&&typeof process.env<"u";function A(T){return B?process.env[T]:void 0}function M(){if(typeof Promise=="function")try{var T=new Promise(function(){});if(E(T)==="[object Promise]")return Promise}catch{}}var H;function W(T,R){if(T===null||typeof R!="function"||R===H)return R;T.domain!==null&&(R=T.domain.bind(R));var N=T.async;if(N!==null){var Y=R;R=function(){var G=new Array(2).concat([].slice.call(arguments));return G[0]=Y,G[1]=this,N.runInAsyncScope.apply(N,G)}}return R}var O={setReflectHandler:function(T){H=T},isClass:b,isIdentifier:P,inheritedDataKeys:h,getDataPropertyOrDefault:v,thrower:c,isArray:o.isArray,asArray:C,notEnumerableProp:d,isPrimitive:_,isObject:m,isError:J,canEvaluate:a,errorObj:u,tryCatch:f,inherits:p,withAppended:w,maybeWrapAsError:$,toFastProperties:k,filledRange:L,toString:V,canAttachTrace:F,ensureErrorObject:U,originatesFromRejection:D,markAsOriginatingFromRejection:K,classString:E,copyDescriptors:S,isNode:I,hasEnvVariables:B,env:A,global:l,getNativePromise:M,contextBind:W};O.isRecentNode=O.isNode&&function(){var T;return process.versions&&process.versions.node?T=process.versions.node.split(".").map(Number):process.version&&(T=process.version.split(".").map(Number)),T[0]===0&&T[1]>10||T[0]>0}(),O.nodeSupportsAsyncResource=O.isNode&&function(){var T=!1;try{var R=n("async_hooks").AsyncResource;T=typeof R.prototype.runInAsyncScope=="function"}catch{T=!1}return T}(),O.isNode&&O.toFastProperties(process);try{throw new Error}catch(T){O.lastLineError=T}r.exports=O},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&window!==null?window.P=window.Promise:typeof self<"u"&&self!==null&&(self.P=self.Promise)})(nf);var Bg=nf.exports;(function(e){var t=Bg,n=An;function r(v){for(var d in v)return!1;return!0}function i(v){return typeof v=="string"||v instanceof String}function o(v){return!isNaN(v)}function a(v){return typeof v>"u"}e.deltaInit=function(){this.delta=new n.EventEmitter,this.on("destroyed",function(){f(this)})},e.clone=function(v){return JSON.parse(JSON.stringify(v))},e.merge=function(v,d){var c={};for(var h in v)c[h]=v[h];for(h in d)c[h]=d[h];return c},e.mergeAll=function(v){var d={},c={};return v.forEach(function(h){h.doc.$id||(h.doc.$id=h.doc._id),h.doc.$deleted?(delete d[h.doc.$id],c[h.doc.$id]=!0):c[h.doc.$id]||(d[h.doc.$id]?d[h.doc.$id].doc=e.merge(d[h.doc.$id].doc,h.doc):d[h.doc.$id]=h)}),Object.values(d)};function u(v,d){return delete d._rev,d.$createdAt=new Date().toJSON(),d.$id?(d._id=d.$id+"_"+d.$createdAt,v.put(d).then(function(c){return c.$id=d.$id,g(v,c),c}).catch(function(c){if(c.status!==409)throw c})):v.post(d).then(function(c){return c.$id=c.id,g(v,{id:c.id}),c})}e.save=function(v){return u(this,v)},e.delete=function(v){var d=i(v)||o(v)?v:v.$id;if(a(d))throw new Error("missing $id");return u(this,{$id:d,$deleted:!0})};function s(v,d,c){var h=this;return new t(function(y,b){v.call(h,e.merge(d,{include_docs:!0}),function(k,j){k?b(k):(j.rows=e.mergeAll(j.rows),y(j)),typeof c=="function"&&c(k,j)})})}e.all=function(){var v=this;return v.allDocs({include_docs:!0}).then(function(d){var c={};return d.rows.forEach(function(h){c[h.doc.$id]=h.doc}),c})};var l={};e.wasDeleted=function(v){return!!l[v]},e.markDeletion=function(v){l[v]=!0};function g(v,d){v.get(d.id).then(function(c){var h=c.$id?c.$id:c._id;e.wasDeleted(h)||(c.$deleted?(e.markDeletion(h),v.delta.emit("delete",h)):c.$id?v.delta.emit("update",c):(c.$id=h,v.delta.emit("create",c)))})}function f(v){v.delta.removeAllListeners()}function p(v,d){var c={},h=!1;for(var y in d)v[y]!==d[y]&&(h=!0,c[y]=d[y]);return h?c:null}e.saveChanges=function(v,d){var c=this,h=p(v,d);return h!==null?(h.$id=v.$id,c.save(h).then(function(){return h})):t.resolve()};function _(v,d){return v.get(d).then(function(c){return v.remove(c)}).catch(function(c){if(c.status!==404)throw c})}e.getAndRemove=function(v){return _(this,v)};function m(v,d,c){var h=[];return d.rows.forEach(function(y){c[y.doc.$id]&&h.push(_(v,y.id))}),t.all(h)}function $(v,d,c,h){return v.get(d.doc._id).then(function(y){if(d.doc.$id||(d.doc.$id=d.doc._id),d.doc.$deleted||h[d.doc.$id])return h[d.doc.$id]=!0,v.remove(y);if(c[d.doc.$id]){var b=!1;for(var k in d.doc)if(typeof c[d.doc.$id][k]>"u"){b=!0;break}if(b)c[d.doc.$id]=e.merge(c[d.doc.$id],d.doc);else return v.remove(y)}else c[d.doc.$id]=d.doc})}var w=function(v,d,c,h){return function(){return $(v,d,c,h)}};e.cleanup=function(){var v=this;return v.allDocs({include_docs:!0}).then(function(d){var c={},h={},y=t.resolve();return d.rows.forEach(function(b){y=y.then(w(v,b,c,h))}),y.then(function(){if(!r(h))return m(v,d,h)})})},typeof window<"u"&&window.PouchDB&&window.PouchDB.plugin(e),e.default=function(v){var d=v.prototype.allDocs;for(var c in e)v.prototype[c]=e[c];v.prototype.allDocs=function(h,y){return s.call(this,d,h,y)}}})(tf);const Ug=ot(tf);var da={};function qg(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function Hg(e,t,n){var r=qg(e,t,n);return r+e}var rf=-324,go=3,yo="";function ft(e,t){if(e===t)return 0;e=Tn(e),t=Tn(t);var n=_o(e),r=_o(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return Qg(e,t)}return Array.isArray(e)?Yg(e,t):Vg(e,t)}function Tn(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Tn(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];typeof o<"u"&&(e[i]=Tn(o))}}}}return e}function Gg(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return Jg(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=xr(n[r]);else for(;++r<i;){var a=n[r];o+=xr(a)+xr(e[a])}return o}return""}function xr(e){var t="\0";return e=Tn(e),_o(e)+yo+Gg(e)+t}function zg(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var o=e[t]==="0";t++;var a="",u=e.substring(t,t+go),s=parseInt(u,10)+rf;for(o&&(s=-s),t+=go;;){var l=e[t];if(l==="\0")break;a+=l,t++}a=a.split("."),a.length===1?r=parseInt(a,10):r=parseFloat(a[0]+"."+a[1]),o&&(r=r-10),s!==0&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}function Wg(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){var a=e.pop();i[a]=n}else e.push(n)}}function Kg(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();Wg(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var o=zg(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var u=e[r];if(u==="\0")break;a+=u,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var s={element:[],index:t.length};t.push(s.element),n.push(s);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function Yg(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=ft(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function Qg(e,t){return e===t?0:e>t?1:-1}function Vg(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=ft(n[o],r[o]);if(a!==0||(a=ft(e[n[o]],t[r[o]]),a!==0))return a}return n.length===r.length?0:n.length>r.length?1:-1}function _o(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function Jg(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(r?-n:n)-rf,a=Hg(o.toString(),"0",go);i+=yo+a;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var s=u.toFixed(20);return s=s.replace(/\.?0+$/,""),i+=yo+s,i}const Zg=Object.freeze(Object.defineProperty({__proto__:null,collate:ft,normalizeKey:Tn,parseIndexableString:Kg,toIndexableString:xr},Symbol.toStringTag,{value:"Module"})),of=Mo(Zg);var qs=ge.MutationObserver||ge.WebKitMutationObserver,Mn;if(qs){var Hs=0,Xg=new qs(Er),Gs=ge.document.createTextNode("");Xg.observe(Gs,{characterData:!0}),Mn=function(){Gs.data=Hs=++Hs%2}}else if(!ge.setImmediate&&typeof ge.MessageChannel<"u"){var zs=new ge.MessageChannel;zs.port1.onmessage=Er,Mn=function(){zs.port2.postMessage(0)}}else"document"in ge&&"onreadystatechange"in ge.document.createElement("script")?Mn=function(){var e=ge.document.createElement("script");e.onreadystatechange=function(){Er(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},ge.document.documentElement.appendChild(e)}:Mn=function(){setTimeout(Er,0)};var mo,Ln=[];function Er(){mo=!0;for(var e,t,n=Ln.length;n;){for(t=Ln,Ln=[],e=-1;++e<n;)t[e]();n=Ln.length}mo=!1}var af=ey;function ey(e){Ln.push(e)===1&&!mo&&Mn()}const ty=ot(af);var ny=af;function Cn(){}var qe={},sf=["REJECTED"],wo=["FULFILLED"],uf=["PENDING"];function On(e){if(typeof e!="function")throw new TypeError("resolver must be a function");this.state=uf,this.queue=[],this.outcome=void 0,e!==Cn&&cf(this,e)}On.prototype.catch=function(e){return this.then(null,e)};On.prototype.then=function(e,t){if(typeof e!="function"&&this.state===wo||typeof t!="function"&&this.state===sf)return this;var n=new this.constructor(Cn);if(this.state!==uf){var r=this.state===wo?e:t;ha(n,r,this.outcome)}else this.queue.push(new sr(n,e,t));return n};function sr(e,t,n){this.promise=e,typeof t=="function"&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),typeof n=="function"&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}sr.prototype.callFulfilled=function(e){qe.resolve(this.promise,e)};sr.prototype.otherCallFulfilled=function(e){ha(this.promise,this.onFulfilled,e)};sr.prototype.callRejected=function(e){qe.reject(this.promise,e)};sr.prototype.otherCallRejected=function(e){ha(this.promise,this.onRejected,e)};function ha(e,t,n){ny(function(){var r;try{r=t(n)}catch(i){return qe.reject(e,i)}r===e?qe.reject(e,new TypeError("Cannot resolve promise with itself")):qe.resolve(e,r)})}qe.resolve=function(e,t){var n=ff(ry,t);if(n.status==="error")return qe.reject(e,n.value);var r=n.value;if(r)cf(e,r);else{e.state=wo,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e};qe.reject=function(e,t){e.state=sf,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e};function ry(e){var t=e&&e.then;if(e&&(typeof e=="object"||typeof e=="function")&&typeof t=="function")return function(){t.apply(e,arguments)}}function cf(e,t){var n=!1;function r(u){n||(n=!0,qe.reject(e,u))}function i(u){n||(n=!0,qe.resolve(e,u))}function o(){t(i,r)}var a=ff(o);a.status==="error"&&r(a.value)}function ff(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}On.resolve=iy;function iy(e){return e instanceof this?e:qe.resolve(new this(Cn),e)}On.reject=oy;function oy(e){var t=new this(Cn);return qe.reject(t,e)}On.all=ay;function ay(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),o=0,a=-1,u=new this(Cn);++a<n;)s(e[a],a);return u;function s(l,g){t.resolve(l).then(f,function(p){r||(r=!0,qe.reject(u,p))});function f(p){i[g]=p,++o===n&&!r&&(r=!0,qe.resolve(u,i))}}}On.race=sy;function sy(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,o=new this(Cn);++i<n;)a(e[i]);return o;function a(u){t.resolve(u).then(function(s){r||(r=!0,qe.resolve(o,s))},function(s){r||(r=!0,qe.reject(o,s))})}}function hi(e){return"$"+e}function uy(e){return e.substring(1)}function tn(){this._store={}}tn.prototype.get=function(e){var t=hi(e);return this._store[t]};tn.prototype.set=function(e,t){var n=hi(e);return this._store[n]=t,!0};tn.prototype.has=function(e){var t=hi(e);return t in this._store};tn.prototype.delete=function(e){var t=hi(e),n=t in this._store;return delete this._store[t],n};tn.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],o=this._store[i];i=uy(i),e(o,i)}};Object.defineProperty(tn.prototype,"size",{get:function(){return Object.keys(this._store).length}});function vi(e){if(this._store=new tn,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}vi.prototype.add=function(e){return this._store.set(e,!0)};vi.prototype.has=function(e){return this._store.has(e)};vi.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(vi.prototype,"size",{get:function(){return this._store.size}});var bo={exports:{}};typeof Object.create=="function"?bo.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:bo.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t};var cy=bo.exports;const lf=ot(cy);lf($e,Error);function $e(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}$e.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new $e(401,"unauthorized","Name or password is incorrect.");new $e(400,"bad_request","Missing JSON list of 'docs'");new $e(404,"not_found","missing");new $e(409,"conflict","Document update conflict");new $e(400,"bad_request","_id field must contain a string");new $e(412,"missing_id","_id is required for puts");new $e(400,"bad_request","Only reserved document ids may start with underscore.");new $e(412,"precondition_failed","Database not open");new $e(500,"unknown_error","Database encountered an unknown error");new $e(500,"badarg","Some query argument is invalid");new $e(400,"invalid_request","Request was invalid");new $e(400,"query_parse_error","Some query parameter is invalid");new $e(500,"doc_validation","Bad special document member");new $e(400,"bad_request","Something wrong with the request");new $e(400,"bad_request","Document must be a JSON object");new $e(404,"not_found","Database not found");new $e(500,"indexed_db_went_bad","unknown");new $e(500,"web_sql_went_bad","unknown");new $e(500,"levelDB_went_went_bad","unknown");new $e(403,"forbidden","Forbidden by design doc validate_doc_update function");new $e(400,"bad_request","Invalid rev format");new $e(412,"file_exists","The database could not be created, the file already exists.");new $e(412,"missing_stub","A pre-existing attachment stub wasn't found");new $e(413,"invalid_url","Provided URL is invalid");var To={exports:{}},Ws=typeof crypto<"u"&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&msCrypto.getRandomValues.bind(msCrypto);if(Ws){var Ks=new Uint8Array(16);To.exports=function(){return Ws(Ks),Ks}}else{var Ys=new Array(16);To.exports=function(){for(var t=0,n;t<16;t++)t&3||(n=Math.random()*4294967296),Ys[t]=n>>>((t&3)<<3)&255;return Ys}}var df=To.exports,hf=[];for(var Ar=0;Ar<256;++Ar)hf[Ar]=(Ar+256).toString(16).substr(1);function fy(e,t){var n=t||0,r=hf;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}var vf=fy,ly=df,dy=vf,Qs,Di,Ni=0,Mi=0;function hy(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var o=e.node||Qs,a=e.clockseq!==void 0?e.clockseq:Di;if(o==null||a==null){var u=ly();o==null&&(o=Qs=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=Di=(u[6]<<8|u[7])&16383)}var s=e.msecs!==void 0?e.msecs:new Date().getTime(),l=e.nsecs!==void 0?e.nsecs:Mi+1,g=s-Ni+(l-Mi)/1e4;if(g<0&&e.clockseq===void 0&&(a=a+1&16383),(g<0||s>Ni)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ni=s,Mi=l,Di=a,s+=122192928e5;var f=((s&268435455)*1e4+l)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var p=s/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=p&255,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(var _=0;_<6;++_)i[r+_]=o[_];return t||dy(i)}var vy=hy,py=df,gy=vf;function yy(e,t,n){var r=t&&n||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||py)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||gy(i)}var _y=yy,my=vy,pf=_y,va=pf;va.v1=my;va.v4=pf;var wy=va;const by=ot(wy);function Ty(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer||typeof Blob<"u"&&e instanceof Blob}function $y(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function Ey(e){if(e instanceof ArrayBuffer)return $y(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var gf=Function.prototype.toString,Ay=gf.call(Object);function Sy(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&gf.call(n)==Ay}function $o(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=$o(e[n]);return t}if(e instanceof Date)return e.toISOString();if(Ty(e))return Ey(e);if(!Sy(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=$o(e[n]);typeof i<"u"&&(t[n]=i)}return t}function Cy(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}function pa(){return typeof chrome<"u"&&typeof chrome.storage<"u"&&typeof chrome.storage.local<"u"}var jr;if(pa())jr=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),jr=!!localStorage.getItem("_pouch_check_localstorage")}catch{jr=!1}function yf(){return jr}lf(ur,An.EventEmitter);function Oy(e){pa()?chrome.storage.onChanged.addListener(function(t){t.db_name!=null&&e.emit(t.dbName.newValue)}):yf()&&(typeof addEventListener<"u"?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function ur(){An.EventEmitter.call(this),this._listeners={},Oy(this)}ur.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,o=!1;function a(){if(!i._listeners[t])return;if(o){o="waiting";return}o=!0;var u=Cy(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);function s(){o=!1}n.changes(u).on("change",function(l){l.seq>r.since&&!r.cancelled&&(r.since=l.seq,r.onChange(l))}).on("complete",function(){o==="waiting"&&ty(a),o=!1}).on("error",s)}this._listeners[t]=a,this.on(e,a)};ur.prototype.removeListener=function(e,t){t in this._listeners&&(An.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};ur.prototype.notifyLocalWindows=function(e){pa()?chrome.storage.local.set({dbName:e}):yf()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};ur.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};by.v4;function ga(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function ky(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var o=t[r];e=e[o]={}}e[t[i-1]]=n}function _f(e,t){return e<t?-1:e>t?1:0}function ya(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];o==="."?r>0&&e[r-1]==="\\"?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=o}return t.push(n),t}var xy=["$or","$nor","$not"];function _a(e){return xy.indexOf(e)>-1}function ma(e){return Object.keys(e)[0]}function mf(e){return e[ma(e)]}function Wr(e){var t={};return e.forEach(function(n){Object.keys(n).forEach(function(r){var i=n[r];if(typeof i!="object"&&(i={$eq:i}),_a(r))i instanceof Array?t[r]=i.map(function(a){return Wr([a])}):t[r]=Wr([i]);else{var o=t[r]=t[r]||{};Object.keys(i).forEach(function(a){var u=i[a];if(a==="$gt"||a==="$gte")return jy(a,u,o);if(a==="$lt"||a==="$lte")return Ry(a,u,o);if(a==="$ne")return Py(u,o);if(a==="$eq")return Fy(u,o);o[a]=u})}})}),t}function jy(e,t,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt<"u"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function Ry(e,t,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt<"u"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function Py(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function Fy(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function wf(e){var t=$o(e),n=!1;"$and"in t&&(t=Wr(t.$and),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(s){for(var l=Object.keys(s),g=0;g<l.length;g++){var f=l[g],p=s[f];(typeof p!="object"||p===null)&&(s[f]={$eq:p})}})}),"$not"in t&&(t.$not=Wr([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];typeof a!="object"||a===null?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),t[o]=a}return t}function bf(e){function t(n){return e.map(function(r){var i=ma(r),o=ya(i),a=ga(n,o);return a})}return function(n,r){var i=t(n.doc),o=t(r.doc),a=ft(i,o);return a!==0?a:_f(n.doc._id,r.doc._id)}}function Tf(e,t,n){if(e=e.filter(function(a){return Ht(a.doc,t.selector,n)}),t.sort){var r=bf(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&mf(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function Ht(e,t,n){return n.every(function(r){var i=t[r],o=ya(r),a=ga(e,o);return _a(r)?Iy(r,i,e):Eo(i,e,o,a)})}function Eo(e,t,n,r){return e?Object.keys(e).every(function(i){var o=e[i];return Dy(i,t,o,n,r)}):!0}function Iy(e,t,n){return e==="$or"?t.some(function(r){return Ht(n,r,Object.keys(r))}):e==="$not"?!Ht(n,t,Object.keys(t)):!t.find(function(r){return Ht(n,r,Object.keys(r))})}function Dy(e,t,n,r,i){if(!Js[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Js[e](t,n,r,i)}function Fn(e){return typeof e<"u"&&e!==null}function Dt(e){return typeof e<"u"}function Ny(e,t){var n=t[0],r=t[1];if(n===0)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)!==e?!1:e%n===r}function Vs(e,t){return t.some(function(n){return e instanceof Array?e.indexOf(n)>-1:e===n})}function My(e,t){return t.every(function(n){return e.indexOf(n)>-1})}function Ly(e,t){return e.length===t}function By(e,t){var n=new RegExp(t);return n.test(e)}function Uy(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}var Js={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.some(function(i){return Ht(i,t,Object.keys(t))}):r.some(function(i){return Eo(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"?r.every(function(i){return Ht(i,t,Object.keys(t))}):r.every(function(i){return Eo(t,e,n,i)})},$eq:function(e,t,n,r){return Dt(r)&&ft(r,t)===0},$gte:function(e,t,n,r){return Dt(r)&&ft(r,t)>=0},$gt:function(e,t,n,r){return Dt(r)&&ft(r,t)>0},$lte:function(e,t,n,r){return Dt(r)&&ft(r,t)<=0},$lt:function(e,t,n,r){return Dt(r)&&ft(r,t)<0},$exists:function(e,t,n,r){return t?Dt(r):!Dt(r)},$mod:function(e,t,n,r){return Fn(r)&&Ny(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return ft(r,i)!==0})},$in:function(e,t,n,r){return Fn(r)&&Vs(r,t)},$nin:function(e,t,n,r){return Fn(r)&&!Vs(r,t)},$size:function(e,t,n,r){return Fn(r)&&Ly(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&My(r,t)},$regex:function(e,t,n,r){return Fn(r)&&By(r,t)},$type:function(e,t,n,r){return Uy(r,t)}};function qy(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=wf(t);var n={doc:e},r=Tf([n],{selector:t},Object.keys(t));return r&&r.length===1}const Hy=Object.freeze(Object.defineProperty({__proto__:null,compare:_f,createFieldSorter:bf,filterInMemoryFields:Tf,getFieldFromDoc:ga,getKey:ma,getValue:mf,isCombinationalField:_a,massageSelector:wf,matchesSelector:qy,parseField:ya,rowFilter:Ht,setFieldInDoc:ky},Symbol.toStringTag,{value:"Module"})),wa=Mo(Hy);var cr={},pi=wa,Zs=pi.getKey,Gy=pi.getFieldFromDoc,zy=pi.setFieldInDoc,Wy=pi.parseField;cr.getUserFields=function(e,t){var n=Object.keys(e),r=t?t.map(Zs):[],i;return n.length>=r.length?i=n:i=r,r.length===0?{fields:i}:(i=i.sort(function(o,a){var u=r.indexOf(o);u===-1&&(u=Number.MAX_VALUE);var s=r.indexOf(a);return s===-1&&(s=Number.MAX_VALUE),u<s?-1:u>s?1:0}),{fields:i,sortOrder:t.map(Zs)})};cr.massageSort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}else return t})};cr.pick=function(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=Wy(t[r]),a=Gy(e,o);typeof a<"u"&&zy(n,o,a)}return n};var Ky=of.collate,fr=wa,Yy=fr.filterInMemoryFields,Qy=cr,Vy=fr.compare,Jy=Qy.getUserFields,Zy=fr.getKey,Xy=fr.getValue,e_=fr.parseField,t_=da.memoryFilter=function(e,t){var n=Jy(t.selector,t.sort),r=n.fields,i=e.map(function(o){return{doc:o}});return Yy(i,t,r).map(function(o){return o.doc})},n_=da.createFieldSorter=function(e){function t(r){return e.map(function(i){var o=Zy(i),a=e_(o),u=r_(r,a);return u})}var n=e.map(function(r){return typeof r!="string"&&Xy(r)==="desc"?-1:1});return function(r,i){for(var o=t(r),a=t(i),u=0,s=n.length;u<s;u++){var l=Ky(o[u],a[u]);if(l!==0)return l*n[u]}return Vy(r._id,i._id)*n[0]}};function r_(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function gi(e){return"$"+e}function $f(e){return e.substring(1)}function At(){this._store={}}At.prototype.get=function(e){var t=gi(e);return this._store[t]};At.prototype.set=function(e,t){var n=gi(e);return this._store[n]=t,!0};At.prototype.has=function(e){var t=gi(e);return t in this._store};At.prototype.keys=function(){return Object.keys(this._store).map(e=>$f(e))};At.prototype.delete=function(e){var t=gi(e),n=t in this._store;return delete this._store[t],n};At.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],o=this._store[i];i=$f(i),e(o,i)}};Object.defineProperty(At.prototype,"size",{get:function(){return Object.keys(this._store).length}});function lr(e){if(this._store=new At,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}lr.prototype.add=function(e){return this._store.set(e,!0)};lr.prototype.has=function(e){return this._store.has(e)};lr.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})};Object.defineProperty(lr.prototype,"size",{get:function(){return this._store.size}});function i_(){if(typeof Symbol>"u"||typeof Map>"u"||typeof Set>"u")return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}var Kn,fn;i_()?(Kn=Set,fn=Map):(Kn=lr,fn=At);Ge(Ee,Error);function Ee(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}Ee.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new Ee(401,"unauthorized","Name or password is incorrect.");new Ee(400,"bad_request","Missing JSON list of 'docs'");new Ee(404,"not_found","missing");new Ee(409,"conflict","Document update conflict");new Ee(400,"bad_request","_id field must contain a string");new Ee(412,"missing_id","_id is required for puts");new Ee(400,"bad_request","Only reserved document ids may start with underscore.");new Ee(412,"precondition_failed","Database not open");var o_=new Ee(500,"unknown_error","Database encountered an unknown error");new Ee(500,"badarg","Some query argument is invalid");new Ee(400,"invalid_request","Request was invalid");new Ee(400,"query_parse_error","Some query parameter is invalid");new Ee(500,"doc_validation","Bad special document member");new Ee(400,"bad_request","Something wrong with the request");new Ee(400,"bad_request","Document must be a JSON object");new Ee(404,"not_found","Database not found");new Ee(500,"indexed_db_went_bad","unknown");new Ee(500,"web_sql_went_bad","unknown");new Ee(500,"levelDB_went_went_bad","unknown");new Ee(403,"forbidden","Forbidden by design doc validate_doc_update function");new Ee(400,"bad_request","Invalid rev format");new Ee(412,"file_exists","The database could not be created, the file already exists.");new Ee(412,"missing_stub","A pre-existing attachment stub wasn't found");new Ee(413,"invalid_url","Provided URL is invalid");function Ao(e){if(typeof e!="object"){var t=e;e=o_,e.data=t}return"error"in e&&e.error==="conflict"&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=new Error().stack),e}var a_=function(e){return atob(e)};function s_(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if(o.name!=="TypeError")throw o;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function u_(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function c_(e,t){return s_([u_(e)],{type:t})}function f_(e,t){return c_(a_(e),t)}function Ef(e){return Ur.hash(e)}function l_(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer||typeof Blob<"u"&&e instanceof Blob}function d_(e){if(typeof e.slice=="function")return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function h_(e){if(e instanceof ArrayBuffer)return d_(e);var t=e.size,n=e.type;return typeof e.slice=="function"?e.slice(0,t,n):e.webkitSlice(0,t,n)}var Af=Function.prototype.toString,v_=Af.call(Object);function p_(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&Af.call(n)==v_}function xt(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=xt(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(l_(e))return h_(e);if(!p_(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=xt(e[n]);typeof i<"u"&&(t[n]=i)}return t}function g_(e){var t=!1;return $t(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function dr(e){return $t(function(t){t=xt(t);var n=this,r=typeof t[t.length-1]=="function"?t.pop():!1,i=new Promise(function(o,a){var u;try{var s=g_(function(l,g){l?a(l):o(g)});t.push(s),u=e.apply(n,t),u&&typeof u.then=="function"&&o(u)}catch(l){a(l)}});return r&&i.then(function(o){r(null,o)},r),i})}function y_(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var So;try{localStorage.setItem("_pouch_check_localstorage",1),So=!!localStorage.getItem("_pouch_check_localstorage")}catch{So=!1}function Sf(){return So}Ge(hr,Ue);function __(e){Sf()&&addEventListener("storage",function(t){e.emit(t.key)})}function hr(){Ue.call(this),this._listeners={},__(this)}hr.prototype.addListener=function(e,t,n,r){if(this._listeners[t])return;var i=this,o=!1;function a(){if(!i._listeners[t])return;if(o){o="waiting";return}o=!0;var u=y_(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function s(){o=!1}n.changes(u).on("change",function(l){l.seq>r.since&&!r.cancelled&&(r.since=l.seq,r.onChange(l))}).on("complete",function(){o==="waiting"&&He(a),o=!1}).on("error",s)}this._listeners[t]=a,this.on(e,a)};hr.prototype.removeListener=function(e,t){t in this._listeners&&(Ue.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])};hr.prototype.notifyLocalWindows=function(e){Sf()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")};hr.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};function Co(e){if(typeof console<"u"&&typeof console[e]=="function"){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}var Oo;typeof Object.assign=="function"?Oo=Object.assign:Oo=function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var ba=Oo;function Xs(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function Qt(e){return typeof e._remote=="boolean"?e._remote:typeof e.type=="function"?(Co("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),e.type()==="http"):!1}function yi(e,t,n){return e.get(t).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,o=n(r);return o?(o._id=t,o._rev=i,m_(e,o,n)):{updated:!1,rev:i}})}function m_(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return yi(e,t._id,n)})}function w_(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function b_(e,t,n){var r=w_(e,t,n);return r+e}var Cf=-324,ko=3,xo="";function Pe(e,t){if(e===t)return 0;e=Vt(e),t=Vt(t);var n=jo(e),r=jo(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return C_(e,t)}return Array.isArray(e)?S_(e,t):O_(e,t)}function Vt(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Vt(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];typeof o<"u"&&(e[i]=Vt(o))}}}}return e}function T_(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return k_(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=ut(n[r]);else for(;++r<i;){var a=n[r];o+=ut(a)+ut(e[a])}return o}return""}function ut(e){var t="\0";return e=Vt(e),jo(e)+xo+T_(e)+t}function $_(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var o=e[t]==="0";t++;var a="",u=e.substring(t,t+ko),s=parseInt(u,10)+Cf;for(o&&(s=-s),t+=ko;;){var l=e[t];if(l==="\0")break;a+=l,t++}a=a.split("."),a.length===1?r=parseInt(a,10):r=parseFloat(a[0]+"."+a[1]),o&&(r=r-10),s!==0&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}function E_(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){var a=e.pop();i[a]=n}else e.push(n)}}function A_(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();E_(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var o=$_(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var u=e[r];if(u==="\0")break;a+=u,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var s={element:[],index:t.length};t.push(s.element),n.push(s);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function S_(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=Pe(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function C_(e,t){return e===t?0:e>t?1:-1}function O_(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=Pe(n[o],r[o]);if(a!==0||(a=Pe(e[n[o]],t[r[o]]),a!==0))return a}return n.length===r.length?0:n.length>r.length?1:-1}function jo(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function k_(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(r?-n:n)-Cf,a=b_(o.toString(),"0",ko);i+=xo+a;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var s=u.toFixed(20);return s=s.replace(/\.?0+$/,""),i+=xo+s,i}function vr(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var o=t[r];if(n=n[o],!n)break}return n}function Of(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var o=t[r];e=e[o]=e[o]||{}}e[t[i-1]]=n}function _i(e,t){return e<t?-1:e>t?1:0}function nn(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];r>0&&e[r-1]==="\\"&&(o==="$"||o===".")?n=n.substring(0,n.length-1)+o:o==="."?(t.push(n),n=""):n+=o}return t.push(n),t}var x_=["$or","$nor","$not"];function Ta(e){return x_.indexOf(e)>-1}function Ve(e){return Object.keys(e)[0]}function mi(e){return e[Ve(e)]}function Yn(e){var t={},n={$or:!0,$nor:!0};return e.forEach(function(r){Object.keys(r).forEach(function(i){var o=r[i];if(typeof o!="object"&&(o={$eq:o}),Ta(i))if(o instanceof Array){if(n[i]){n[i]=!1,t[i]=o;return}var a=[];t[i].forEach(function(s){Object.keys(o).forEach(function(l){var g=o[l],f=Math.max(Object.keys(s).length,Object.keys(g).length),p=Yn([s,g]);Object.keys(p).length<=f||a.push(p)})}),t[i]=a}else t[i]=Yn([o]);else{var u=t[i]=t[i]||{};Object.keys(o).forEach(function(s){var l=o[s];if(s==="$gt"||s==="$gte")return j_(s,l,u);if(s==="$lt"||s==="$lte")return R_(s,l,u);if(s==="$ne")return P_(l,u);if(s==="$eq")return F_(l,u);if(s==="$regex")return I_(l,u);u[s]=l})}})}),t}function j_(e,t,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt<"u"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function R_(e,t,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt<"u"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function P_(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function F_(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function I_(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}function kf(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=Yn(e[n].$and));var r=e[t];typeof r=="object"&&kf(r)}return e}function xf(e,t){for(var n in e){n==="$and"&&(t=!0);var r=e[n];typeof r=="object"&&(t=xf(r,t))}return t}function $a(e){var t=xt(e),n=!1;xf(t,!1)&&(t=kf(t),"$and"in t&&(t=Yn(t.$and)),n=!0),["$or","$nor"].forEach(function(u){u in t&&t[u].forEach(function(s){for(var l=Object.keys(s),g=0;g<l.length;g++){var f=l[g],p=s[f];(typeof p!="object"||p===null)&&(s[f]={$eq:p})}})}),"$not"in t&&(t.$not=Yn([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];typeof a!="object"||a===null?a={$eq:a}:n||("$ne"in a&&(a.$ne=[a.$ne]),"$regex"in a&&(a.$regex=[a.$regex])),t[o]=a}return t}function jf(e){function t(n){return e.map(function(r){var i=Ve(r),o=nn(i),a=vr(n,o);return a})}return function(n,r){var i=t(n.doc),o=t(r.doc),a=Pe(i,o);return a!==0?a:_i(n.doc._id,r.doc._id)}}function Ea(e,t,n){if(e=e.filter(function(a){return Gt(a.doc,t.selector,n)}),t.sort){var r=jf(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&mi(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function Gt(e,t,n){return n.every(function(r){var i=t[r],o=nn(r),a=vr(e,o);return Ta(r)?D_(r,i,e):Kr(i,e,o,a)})}function Kr(e,t,n,r){return e?typeof e=="object"?Object.keys(e).every(function(i){var o=e[i];if(i.indexOf("$")===0)return eu(i,t,o,n,r);var a=nn(i);if(r===void 0&&typeof o!="object"&&a.length>0)return!1;var u=vr(r,a);return typeof o=="object"?Kr(o,t,n,u):eu("$eq",t,o,a,u)}):e===r:!0}function D_(e,t,n){return e==="$or"?t.some(function(r){return Gt(n,r,Object.keys(r))}):e==="$not"?!Gt(n,t,Object.keys(t)):!t.find(function(r){return Gt(n,r,Object.keys(r))})}function eu(e,t,n,r,i){if(!nu[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return nu[e](t,n,r,i)}function In(e){return typeof e<"u"&&e!==null}function Nt(e){return typeof e<"u"}function N_(e,t){if(typeof e!="number"||parseInt(e,10)!==e)return!1;var n=t[0],r=t[1];return e%n===r}function tu(e,t){return t.some(function(n){return e instanceof Array?e.some(function(r){return Pe(n,r)===0}):Pe(n,e)===0})}function M_(e,t){return t.every(function(n){return e.some(function(r){return Pe(n,r)===0})})}function L_(e,t){return e.length===t}function B_(e,t){var n=new RegExp(t);return n.test(e)}function U_(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}}var nu={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.some(function(i){return Gt(i,t,Object.keys(t))}):r.some(function(i){return Kr(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.every(function(i){return Gt(i,t,Object.keys(t))}):r.every(function(i){return Kr(t,e,n,i)})},$eq:function(e,t,n,r){return Nt(r)&&Pe(r,t)===0},$gte:function(e,t,n,r){return Nt(r)&&Pe(r,t)>=0},$gt:function(e,t,n,r){return Nt(r)&&Pe(r,t)>0},$lte:function(e,t,n,r){return Nt(r)&&Pe(r,t)<=0},$lt:function(e,t,n,r){return Nt(r)&&Pe(r,t)<0},$exists:function(e,t,n,r){return t?Nt(r):!Nt(r)},$mod:function(e,t,n,r){return In(r)&&N_(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return Pe(r,i)!==0})},$in:function(e,t,n,r){return In(r)&&tu(r,t)},$nin:function(e,t,n,r){return In(r)&&!tu(r,t)},$size:function(e,t,n,r){return In(r)&&Array.isArray(r)&&L_(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&M_(r,t)},$regex:function(e,t,n,r){return In(r)&&typeof r=="string"&&t.every(function(i){return B_(r,i)})},$type:function(e,t,n,r){return U_(r,t)}};function pr(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=$a(t);var n={doc:e},r=Ea([n],{selector:t},Object.keys(t));return r&&r.length===1}const q_=Object.freeze(Object.defineProperty({__proto__:null,compare:_i,createFieldSorter:jf,filterInMemoryFields:Ea,getFieldFromDoc:vr,getKey:Ve,getValue:mi,isCombinationalField:Ta,massageSelector:$a,matchesSelector:pr,parseField:nn,rowFilter:Gt,setFieldInDoc:Of},Symbol.toStringTag,{value:"Module"})),{massageSelector:H_,massageSort:o1}=q_;function G_(e){e.prototype.asSvelteStore=function(t){const n=this;let r;const i=Jr([],s=>{s||n.close()});n.deltaInit(),n.delta.on("create",s=>{o(s)&&(r[s.$id]=s,a())}).on("update",s=>{const l={...r[s.$id],...s};o(l)?r[s.$id]=l:delete r[s.$id],a()}).on("delete",s=>{delete r[s],a()});function o(s){return t==null?!0:t_([s],t).length>0}function a(){console.log(n.name,r);const s=Object.values(r);t!=null&&t.sortFn&&s.sort(t.sortFn),i.set(s)}async function u(s){if(s){t=s?{...t??{},...s}:t,t.selector&&(t.selector=H_(t.selector)),t.sort&&(t.sortFn=n_(t.sort)),r={};const{docs:l,warning:g}=await n.find(t);g&&console.warn(g),l.forEach(f=>r[f.$id]=f)}else r=await n.all();a()}return u(t),{subscribe:i.subscribe,updateSearch:u}}}var Rr=Headers;function Lt(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Lt)}catch{}}Ge(Lt,Error);function Aa(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Aa)}catch{}}Ge(Aa,Error);function Sa(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Sa)}catch{}}Ge(Sa,Error);function Rf(e,t){return t&&e.then(function(n){He(function(){t(null,n)})},function(n){He(function(){t(n)})}),e}function z_(e){return $t(function(t){var n=t.pop(),r=e.apply(this,t);return typeof n=="function"&&Rf(r,n),r})}function W_(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}function Li(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function ru(e){var t=new Kn(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function Bi(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function Qn(){this.promise=new Promise(function(e){e()})}Qn.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise};Qn.prototype.finish=function(){return this.promise};function iu(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function K_(e,t){return iu(e)+iu(t)+"undefined"}function ou(e,t,n,r,i,o){var a=K_(n,r),u;if(!i&&(u=e._cachedViews=e._cachedViews||{},u[a]))return u[a];var s=e.info().then(function(l){var g=l.db_name+"-mrview-"+(i?"temp":Ef(a));function f(p){p.views=p.views||{};var _=t;_.indexOf("/")===-1&&(_=t+"/"+t);var m=p.views[_]=p.views[_]||{};if(!m[g])return m[g]=!0,p}return yi(e,"_local/"+o,f).then(function(){return e.registerDependentDatabase(g).then(function(p){var _=p.db;_.auto_compaction=!0;var m={name:g,db:_,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return m.db.get("_local/lastSeq").catch(function($){if($.status!==404)throw $}).then(function($){return m.seq=$?$.seq:0,u&&m.db.once("destroyed",function(){delete u[a]}),m})})})});return u&&(u[a]=s),s}var au={},su=new Qn,Y_=50;function Ui(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function Q_(e){return e.length===1&&/^1-/.test(e[0].rev)}function uu(e,t,n){try{e.emit("error",t)}catch{Co("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),Co("error",t,n)}}function V_(e,t,n,r){function i(E,S,C){try{S(C)}catch(x){uu(E,x,{fun:S,doc:C})}}function o(E,S,C,x,I){try{return{output:S(C,x,I)}}catch(B){return uu(E,B,{fun:S,keys:C,values:x,rereduce:I}),{error:B}}}function a(E,S){var C=Pe(E.key,S.key);return C!==0?C:Pe(E.value,S.value)}function u(E,S,C){return C=C||0,typeof S=="number"?E.slice(C,S+C):C>0?E.slice(C):E}function s(E){var S=E.value,C=S&&typeof S=="object"&&S._id||E.id;return C}function l(E){E.rows.forEach(function(S){var C=S.doc&&S.doc._attachments;C&&Object.keys(C).forEach(function(x){var I=C[x];C[x].data=f_(I.data,I.content_type)})})}function g(E){return function(S){return E.include_docs&&E.attachments&&E.binary&&l(S),S}}function f(E,S,C,x){var I=S[E];typeof I<"u"&&(x&&(I=encodeURIComponent(JSON.stringify(I))),C.push(E+"="+I))}function p(E){if(typeof E<"u"){var S=Number(E);return!isNaN(S)&&S===parseInt(E,10)?S:E}}function _(E){return E.group_level=p(E.group_level),E.limit=p(E.limit),E.skip=p(E.skip),E}function m(E){if(E){if(typeof E!="number")return new Lt('Invalid value for integer: "'+E+'"');if(E<0)return new Lt('Invalid value for positive integer: "'+E+'"')}}function $(E,S){var C=E.descending?"endkey":"startkey",x=E.descending?"startkey":"endkey";if(typeof E[C]<"u"&&typeof E[x]<"u"&&Pe(E[C],E[x])>0)throw new Lt("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(S.reduce&&E.reduce!==!1){if(E.include_docs)throw new Lt("{include_docs:true} is invalid for reduce");if(E.keys&&E.keys.length>1&&!E.group&&!E.group_level)throw new Lt("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(I){var B=m(E[I]);if(B)throw B})}function w(E,S,C){var x=[],I,B="GET",A,M;if(f("reduce",C,x),f("include_docs",C,x),f("attachments",C,x),f("limit",C,x),f("descending",C,x),f("group",C,x),f("group_level",C,x),f("skip",C,x),f("stale",C,x),f("conflicts",C,x),f("startkey",C,x,!0),f("start_key",C,x,!0),f("endkey",C,x,!0),f("end_key",C,x,!0),f("inclusive_end",C,x),f("key",C,x,!0),f("update_seq",C,x),x=x.join("&"),x=x===""?"":"?"+x,typeof C.keys<"u"){var H=2e3,W="keys="+encodeURIComponent(JSON.stringify(C.keys));W.length+x.length+1<=H?x+=(x[0]==="?"?"&":"?")+W:(B="POST",typeof S=="string"?I={keys:C.keys}:S.keys=C.keys)}if(typeof S=="string"){var O=Ui(S);return E.fetch("_design/"+O[0]+"/_view/"+O[1]+x,{headers:new Rr({"Content-Type":"application/json"}),method:B,body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,Ao(T);return T.rows.forEach(function(R){if(R.value&&R.value.error&&R.value.error==="builtin_reduce_error")throw new Error(R.reason)}),T}).then(g(C))}return I=I||{},Object.keys(S).forEach(function(T){Array.isArray(S[T])?I[T]=S[T]:I[T]=S[T].toString()}),E.fetch("_temp_view"+x,{headers:new Rr({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(I)}).then(function(T){return A=T.ok,M=T.status,T.json()}).then(function(T){if(!A)throw T.status=M,Ao(T);return T}).then(g(C))}function v(E,S,C){return new Promise(function(x,I){E._query(S,C,function(B,A){if(B)return I(B);x(A)})})}function d(E){return new Promise(function(S,C){E._viewCleanup(function(x,I){if(x)return C(x);S(I)})})}function c(E){return function(S){if(S.status===404)return E;throw S}}function h(E,S,C){var x="_local/doc_"+E,I={_id:x,keys:[]},B=C.get(E),A=B[0],M=B[1];function H(){return Q_(M)?Promise.resolve(I):S.db.get(x).catch(c(I))}function W(T){return T.keys.length?S.db.allDocs({keys:T.keys,include_docs:!0}):Promise.resolve({rows:[]})}function O(T,R){for(var N=[],Y=new Kn,G=0,Q=R.rows.length;G<Q;G++){var ee=R.rows[G],te=ee.doc;if(te&&(N.push(te),Y.add(te._id),te._deleted=!A.has(te._id),!te._deleted)){var se=A.get(te._id);"value"in se&&(te.value=se.value)}}var ie=Bi(A);return ie.forEach(function(he){if(!Y.has(he)){var Me={_id:he},gt=A.get(he);"value"in gt&&(Me.value=gt.value),N.push(Me)}}),T.keys=ru(ie.concat(T.keys)),N.push(T),N}return H().then(function(T){return W(T).then(function(R){return O(T,R)})})}function y(E,S,C){var x="_local/lastSeq";return E.db.get(x).catch(c({_id:x,seq:0})).then(function(I){var B=Bi(S);return Promise.all(B.map(function(A){return h(A,E,S)})).then(function(A){var M=Xs(A);return I.seq=C,M.push(I),E.db.bulkDocs({docs:M})})})}function b(E){var S=typeof E=="string"?E:E.name,C=au[S];return C||(C=au[S]=new Qn),C}function k(E,S){return Li(b(E),function(){return j(E,S)})()}function j(E,S){var C,x;function I(G,Q){var ee={id:x._id,key:Vt(G)};typeof Q<"u"&&Q!==null&&(ee.value=Vt(Q)),C.push(ee)}var B=t(E.mapFun,I),A=E.seq||0;function M(G,Q){return function(){return y(E,G,Q)}}let H=0,W={view:E.name,indexed_docs:H};E.sourceDB.emit("indexing",W);var O=new Qn;function T(){return E.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:A,limit:S.changes_batch_size}).then(R)}function R(G){var Q=G.results;if(!Q.length)return;var ee=N(Q);O.add(M(ee,A)),H=H+Q.length;let te={view:E.name,last_seq:G.last_seq,results_count:Q.length,indexed_docs:H};if(E.sourceDB.emit("indexing",te),!(Q.length<S.changes_batch_size))return T()}function N(G){for(var Q=new fn,ee=0,te=G.length;ee<te;ee++){var se=G[ee];if(se.doc._id[0]!=="_"){C=[],x=se.doc,x._deleted||i(E.sourceDB,B,x),C.sort(a);var ie=Y(C);Q.set(se.doc._id,[ie,se.changes])}A=se.seq}return Q}function Y(G){for(var Q=new fn,ee,te=0,se=G.length;te<se;te++){var ie=G[te],he=[ie.key,ie.id];te>0&&Pe(ie.key,ee)===0&&he.push(te),Q.set(ut(he),ie),ee=ie.key}return Q}return T().then(function(){return O.finish()}).then(function(){E.seq=A})}function P(E,S,C){C.group_level===0&&delete C.group_level;var x=C.group||C.group_level,I=n(E.reduceFun),B=[],A=isNaN(C.group_level)?Number.POSITIVE_INFINITY:C.group_level;S.forEach(function(T){var R=B[B.length-1],N=x?T.key:null;if(x&&Array.isArray(N)&&(N=N.slice(0,A)),R&&Pe(R.groupKey,N)===0){R.keys.push([T.key,T.id]),R.values.push(T.value);return}B.push({keys:[[T.key,T.id]],values:[T.value],groupKey:N})}),S=[];for(var M=0,H=B.length;M<H;M++){var W=B[M],O=o(E.sourceDB,I,W.keys,W.values,!1);if(O.error&&O.error instanceof Sa)throw O.error;S.push({value:O.error?null:O.output,key:W.groupKey})}return{rows:u(S,C.limit,C.skip)}}function L(E,S){return Li(b(E),function(){return V(E,S)})()}function V(E,S){var C,x=E.reduceFun&&S.reduce!==!1,I=S.skip||0;typeof S.keys<"u"&&!S.keys.length&&(S.limit=0,delete S.keys);function B(G){return G.include_docs=!0,E.db.allDocs(G).then(function(Q){return C=Q.total_rows,Q.rows.map(function(ee){if("value"in ee.doc&&typeof ee.doc.value=="object"&&ee.doc.value!==null){var te=Object.keys(ee.doc.value).sort(),se=["id","key","value"];if(!(te<se||te>se))return ee.doc.value}var ie=A_(ee.doc._id);return{key:ie[0],id:ie[1],value:"value"in ee.doc?ee.doc.value:null}})})}function A(G){var Q;if(x?Q=P(E,G,S):typeof S.keys>"u"?Q={total_rows:C,offset:I,rows:G}:Q={total_rows:C,offset:I,rows:u(G,S.limit,S.skip)},S.update_seq&&(Q.update_seq=E.seq),S.include_docs){var ee=ru(G.map(s));return E.sourceDB.allDocs({keys:ee,include_docs:!0,conflicts:S.conflicts,attachments:S.attachments,binary:S.binary}).then(function(te){var se=new fn;return te.rows.forEach(function(ie){se.set(ie.id,ie.doc)}),G.forEach(function(ie){var he=s(ie),Me=se.get(he);Me&&(ie.doc=Me)}),Q})}else return Q}if(typeof S.keys<"u"){var M=S.keys,H=M.map(function(G){var Q={startkey:ut([G]),endkey:ut([G,{}])};return S.update_seq&&(Q.update_seq=!0),B(Q)});return Promise.all(H).then(Xs).then(A)}else{var W={descending:S.descending};S.update_seq&&(W.update_seq=!0);var O,T;if("start_key"in S&&(O=S.start_key),"startkey"in S&&(O=S.startkey),"end_key"in S&&(T=S.end_key),"endkey"in S&&(T=S.endkey),typeof O<"u"&&(W.startkey=S.descending?ut([O,{}]):ut([O])),typeof T<"u"){var R=S.inclusive_end!==!1;S.descending&&(R=!R),W.endkey=ut(R?[T,{}]:[T])}if(typeof S.key<"u"){var N=ut([S.key]),Y=ut([S.key,{}]);W.descending?(W.endkey=N,W.startkey=Y):(W.startkey=N,W.endkey=Y)}return x||(typeof S.limit=="number"&&(W.limit=S.limit),W.skip=I),B(W).then(A)}}function J(E){return E.fetch("_view_cleanup",{headers:new Rr({"Content-Type":"application/json"}),method:"POST"}).then(function(S){return S.json()})}function K(E){return E.get("_local/"+e).then(function(S){var C=new fn;Object.keys(S.views).forEach(function(I){var B=Ui(I),A="_design/"+B[0],M=B[1],H=C.get(A);H||(H=new Kn,C.set(A,H)),H.add(M)});var x={keys:Bi(C),include_docs:!0};return E.allDocs(x).then(function(I){var B={};I.rows.forEach(function(H){var W=H.key.substring(8);C.get(H.key).forEach(function(O){var T=W+"/"+O;S.views[T]||(T=O);var R=Object.keys(S.views[T]),N=H.doc&&H.doc.views&&H.doc.views[O];R.forEach(function(Y){B[Y]=B[Y]||N})})});var A=Object.keys(B).filter(function(H){return!B[H]}),M=A.map(function(H){return Li(b(H),function(){return new E.constructor(H,E.__opts).destroy()})()});return Promise.all(M).then(function(){return{ok:!0}})})},c({ok:!0}))}function D(E,S,C){if(typeof E._query=="function")return v(E,S,C);if(Qt(E))return w(E,S,C);var x={changes_batch_size:E.__opts.view_update_changes_batch_size||Y_};if(typeof S!="string")return $(C,S),su.add(function(){var H=ou(E,"temp_view/temp_view",S.map,S.reduce,!0,e);return H.then(function(W){return W_(k(W,x).then(function(){return L(W,C)}),function(){return W.db.destroy()})})}),su.finish();var I=S,B=Ui(I),A=B[0],M=B[1];return E.get("_design/"+A).then(function(H){var W=H.views&&H.views[M];if(!W)throw new Aa("ddoc "+H._id+" has no view named "+M);r(H,M),$(C,W);var O=ou(E,I,W.map,W.reduce,!1,e);return O.then(function(T){return C.stale==="ok"||C.stale==="update_after"?(C.stale==="update_after"&&He(function(){k(T,x)}),L(T,C)):k(T,x).then(function(){return L(T,C)})})})}function F(E,S,C){var x=this;typeof S=="function"&&(C=S,S={}),S=S?_(S):{},typeof E=="function"&&(E={map:E});var I=Promise.resolve().then(function(){return D(x,E,S)});return Rf(I,C),I}var U=z_(function(){var E=this;return typeof E._viewCleanup=="function"?d(E):Qt(E)?J(E):K(E)});return{query:F,viewCleanup:U}}function Pf(e){return e=xt(e),e.index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function J_(e,t,n){var r="",i=t,o=!0;if(["$in","$nin","$or","$and","$mod","$nor","$all"].indexOf(e)!==-1&&(Array.isArray(t)||(r="Query operator "+e+" must be an array.")),["$not","$elemMatch","$allMatch"].indexOf(e)!==-1&&(!Array.isArray(t)&&typeof t=="object"&&t!==null||(r="Query operator "+e+" must be an object.")),e==="$mod"&&Array.isArray(t))if(t.length!==2)r="Query operator $mod must be in the format [divisor, remainder], where divisor and remainder are both integers.";else{var a=t[0],u=t[1];a===0&&(r="Query operator $mod's divisor cannot be 0, cannot divide by zero.",o=!1),(typeof a!="number"||parseInt(a,10)!==a)&&(r="Query operator $mod's divisor is not an integer.",i=a),parseInt(u,10)!==u&&(r="Query operator $mod's remainder is not an integer.",i=u)}if(e==="$exists"&&typeof t!="boolean"&&(r="Query operator $exists must be a boolean."),e==="$type"){var s=["null","boolean","number","string","array","object"],l='"'+s.slice(0,s.length-1).join('", "')+'", or "'+s[s.length-1]+'"';(typeof t!="string"||s.indexOf(t)==-1)&&(r="Query operator $type must be a string. Supported values: "+l+".")}if(e==="$size"&&parseInt(t,10)!==t&&(r="Query operator $size must be a integer."),e==="$regex"&&typeof t!="string"&&(console.log("here",n),n?r="Query operator $regex must be a string.":t instanceof RegExp||(r="Query operator $regex must be a string or an instance of a javascript regular expression.")),r){if(o){var g=i===null?" ":Array.isArray(i)?" array":" "+typeof i,f=typeof i=="object"&&i!==null?JSON.stringify(i,null,"	"):i;r+=" Received"+g+": "+f}throw new Error(r)}}var Z_=["$all","$allMatch","$and","$elemMatch","$exists","$in","$mod","$nin","$nor","$not","$or","$regex","$size","$type"],X_=["$in","$nin","$mod","$all"],e0=["$eq","$gt","$gte","$lt","$lte"];function Yr(e,t){if(Array.isArray(e))for(var n of e)typeof n=="object"&&a!==null&&Yr(n,t);else for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=e[o];Z_.indexOf(o)!==-1&&J_(o,a,t),e0.indexOf(o)===-1&&X_.indexOf(o)===-1&&typeof a=="object"&&a!==null&&Yr(a,t)}}function gr(e,t,n,r){var i,o;n.headers=new Rr({"Content-type":"application/json"}),e.fetch(t,n).then(function(a){return i=a.status,o=a.ok,a.json()}).then(function(a){if(o)r(null,a);else{a.status=i;var u=Ao(a);r(u)}}).catch(r)}function t0(e,t,n){t=Pf(t),gr(e,"_index",{method:"POST",body:JSON.stringify(t)},n)}function n0(e,t,n){Yr(t.selector,!0),gr(e,"_find",{method:"POST",body:JSON.stringify(t)},n)}function r0(e,t,n){gr(e,"_explain",{method:"POST",body:JSON.stringify(t)},n)}function i0(e,t){gr(e,"_index",{method:"GET"},t)}function o0(e,t,n){var r=t.ddoc,i=t.type||"json",o=t.name;if(!r)return n(new Error("you must provide an index's ddoc"));if(!o)return n(new Error("you must provide an index's name"));var a="_index/"+[r,i,o].map(encodeURIComponent).join("/");gr(e,a,{method:"DELETE"},n)}function Ff(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}}function yr(e){return Ff(function(t){var n=t.pop(),r=e.apply(this,t);return a0(r,n),r})}function a0(e,t){return e.then(function(n){He(function(){t(null,n)})},function(n){He(function(){t(n)})}),e}var Ca=Ff(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?t=t.concat(Ca.apply(null,i)):t.push(i)}return t});function Oa(e){for(var t={},n=0,r=e.length;n<r;n++)t=ba(t,e[n]);return t}function s0(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=nn(t[r]),a=vr(e,o);typeof a<"u"&&Of(n,o,a)}return n}function If(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r;n++)if(e[n]!==t[n])return!1;return!0}function u0(e,t){return e.length>t.length?!1:If(e,t)}function c0(e,t){e=e.slice();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(!e.length)break;var o=e.indexOf(i);if(o===-1)return!1;e.splice(o,1)}return!0}function f0(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function l0(e,t){for(var n=null,r=-1,i=0,o=e.length;i<o;i++){var a=e[i],u=t(a);u>r&&(r=u,n=a)}return n}function cu(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function d0(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map(function(r){return r.substring(1)})}function h0(e,t,n){return function(r){if(!(n&&!pr(r,n))){for(var i=[],o=0,a=e.length;o<a;o++){for(var u=nn(e[o]),s=r,l=0,g=u.length;l<g;l++){var f=u[l];if(s=s[f],typeof s>"u")return}i.push(s)}t(i)}}}function v0(e,t,n){var r=nn(e);return function(i){if(!(n&&!pr(i,n))){for(var o=i,a=0,u=r.length;a<u;a++){var s=r[a];if(o=o[s],typeof o>"u")return}t(o)}}}function p0(e,t,n){return function(r){n&&!pr(r,n)||t(r[e])}}function g0(e,t,n){return function(r){if(!(n&&!pr(r,n))){for(var i=[],o=0,a=e.length;o<a;o++)i.push(r[e[o]]);t(i)}}}function y0(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.indexOf(".")!==-1)return!1}return!0}function _0(e,t,n){var r=y0(e),i=e.length===1;return r?i?p0(e[0],t,n):g0(e,t,n):i?v0(e[0],t,n):h0(e,t,n)}function m0(e,t){const n=Object.keys(e.fields),r=e.partial_filter_selector;return _0(n,t,r)}function w0(){throw new Error("reduce not supported")}function b0(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}var T0=V_("indexes",m0,w0,b0);function ka(e){return e._customFindAbstractMapper||T0}function $0(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}else return t})}function E0(e){var t=[];return typeof e=="string"?t.push(e):t=e,t.map(function(n){return n.replace("_design/","")})}function Df(e){return e.fields=e.fields.map(function(t){if(typeof t=="string"){var n={};return n[t]="asc",n}return t}),e}function A0(e,t){for(var n=[],r=0;r<t.def.fields.length;r++){var i=Ve(t.def.fields[r]);n.push(e[i])}return n}function S0(e,t,n){for(var r=n.def.fields,i=0,o=e.length;i<o;i++){var a=e[i],u=A0(a.doc,n);if(r.length===1)u=u[0];else for(;u.length>t.length;)u.pop();if(Math.abs(Pe(u,t))>0)break}return i>0?e.slice(i):e}function C0(e){var t=xt(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}function O0(e){var t=e.fields.filter(function(n){return mi(n)==="asc"});if(t.length!==0&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}function k0(e,t){if(t.defaultUsed&&e.sort){var n=e.sort.filter(function(r){return Object.keys(r)[0]!=="_id"}).map(function(r){return Object.keys(r)[0]});if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}t.defaultUsed}function x0(e){if(typeof e.selector!="object")throw new Error("you must provide a selector when you find()")}function j0(e,t){var n=Object.keys(e),r=t?t.map(Ve):[],i;return n.length>=r.length?i=n:i=r,r.length===0?{fields:i}:(i=i.sort(function(o,a){var u=r.indexOf(o);u===-1&&(u=Number.MAX_VALUE);var s=r.indexOf(a);return s===-1&&(s=Number.MAX_VALUE),u<s?-1:u>s?1:0}),{fields:i,sortOrder:t.map(Ve)})}function R0(e,t){t=Pf(t);var n=xt(t.index);t.index=Df(t.index),O0(t.index);var r;function i(){return r||(r=Ef(JSON.stringify(t)))}var o=t.name||"idx-"+i(),a=t.ddoc||"idx-"+i(),u="_design/"+a,s=!1,l=!1;function g(f){return f._rev&&f.language!=="query"&&(s=!0),f.language="query",f.views=f.views||{},l=!!f.views[o],l?!1:(f.views[o]={map:{fields:Oa(t.index.fields)},reduce:"_count",options:{def:n}},f)}return e.constructor.emit("debug",["find","creating index",u]),yi(e,u,g).then(function(){if(s)throw new Error('invalid language for ddoc with id "'+u+'" (should be "query")')}).then(function(){var f=a+"/"+o;return ka(e).query.call(e,f,{limit:0,reduce:!1}).then(function(){return{id:u,name:o,result:l?"exists":"created"}})})}function Nf(e){return e.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(t){var n={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return n.indexes=Ca(n.indexes,t.rows.filter(function(r){return r.doc.language==="query"}).map(function(r){var i=r.doc.views!==void 0?Object.keys(r.doc.views):[];return i.map(function(o){var a=r.doc.views[o];return{ddoc:r.id,name:o,type:"json",def:Df(a.options.def)}})})),n.indexes.sort(function(r,i){return _i(r.name,i.name)}),n.total_rows=n.indexes.length,n})}var Qr=null,Ro={"￿":{}};const P0={queryOpts:{limit:0,startkey:Ro,endkey:Qr},inMemoryFields:[]};function F0(e,t){for(var n=e.def.fields.map(Ve),r=0,i=n.length;r<i;r++){var o=n[r];if(t===o)return!0}return!1}function I0(e,t){var n=e[t],r=Ve(n);return r!=="$eq"}function Mf(e,t){var n=t.def.fields.map(Ve);return e.slice().sort(function(r,i){var o=n.indexOf(r),a=n.indexOf(i);return o===-1&&(o=Number.MAX_VALUE),a===-1&&(a=Number.MAX_VALUE),_i(o,a)})}function D0(e,t,n){n=Mf(n,e);for(var r=!1,i=0,o=n.length;i<o;i++){var a=n[i];if(r||!F0(e,a))return n.slice(i);i<o-1&&I0(t,a)&&(r=!0)}return[]}function N0(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n];Object.keys(r).forEach(function(i){i==="$ne"&&t.push(n)})}),t}function M0(e,t,n,r){var i=Ca(e,D0(t,n,r),N0(n));return Mf(d0(i),t)}function L0(e,t,n){if(t){var r=u0(t,e),i=If(n,e);return r&&i}return c0(n,e)}var B0=["$eq","$gt","$gte","$lt","$lte"];function Lf(e){return B0.indexOf(e)===-1}function U0(e,t){var n=e[0],r=t[n];if(typeof r>"u")return!0;var i=Object.keys(r).length===1&&Ve(r)==="$ne";return!i}function q0(e,t,n,r){var i=e.def.fields.map(Ve),o=L0(i,t,n);return o?U0(i,r):!1}function H0(e,t,n,r){return r.filter(function(i){return q0(i,n,t,e)})}function G0(e,t,n,r,i){var o=H0(e,t,n,r);if(o.length===0){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var a=r[0];return a.defaultUsed=!0,a}if(o.length===1&&!i)return o[0];var u=f0(t);function s(p){for(var _=p.def.fields.map(Ve),m=0,$=0,w=_.length;$<w;$++){var v=_[$];u[v]&&m++}return m}if(i){var l="_design/"+i[0],g=i.length===2?i[1]:!1,f=o.find(function(p){return!!(g&&p.ddoc===l&&g===p.name||p.ddoc===l)});if(!f)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return f}return l0(o,s)}function z0(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:Qr}}function W0(e,t){var n=Ve(t.def.fields[0]),r=e[n]||{},i=[],o=Object.keys(r),a;return o.forEach(function(u){Lf(u)&&i.push(n);var s=r[u],l=z0(u,s);a?a=Oa([a,l]):a=l}),{queryOpts:a,inMemoryFields:i}}function K0(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function Y0(e,t){var n=t.def.fields.map(Ve),r=[],i=[],o=[],a,u;function s(P){a!==!1&&i.push(Qr),u!==!1&&o.push(Ro),r=n.slice(P)}for(var l=0,g=n.length;l<g;l++){var f=n[l],p=e[f];if(!p||!Object.keys(p).length){s(l);break}else if(Object.keys(p).some(Lf)){s(l);break}else if(l>0){var _="$gt"in p||"$gte"in p||"$lt"in p||"$lte"in p,m=Object.keys(e[n[l-1]]),$=cu(m,["$eq"]),w=cu(m,Object.keys(p)),v=_&&!$&&!w;if(v){s(l);break}}for(var d=Object.keys(p),c=null,h=0;h<d.length;h++){var y=d[h],b=p[y],k=K0(y,b);c?c=Oa([c,k]):c=k}i.push("startkey"in c?c.startkey:Qr),o.push("endkey"in c?c.endkey:Ro),"inclusive_start"in c&&(a=c.inclusive_start),"inclusive_end"in c&&(u=c.inclusive_end)}var j={startkey:i,endkey:o};return typeof a<"u"&&(j.inclusive_start=a),typeof u<"u"&&(j.inclusive_end=u),{queryOpts:j,inMemoryFields:r}}function Q0(e){return Object.keys(e).map(function(n){return e[n]}).some(function(n){return typeof n=="object"&&Object.keys(n).length===0})}function V0(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}function J0(e,t){return t.defaultUsed?V0(e):t.def.fields.length===1?W0(e,t):Y0(e,t)}function Z0(e,t){var n=e.selector,r=e.sort;if(Q0(n))return ba({},P0,{index:t[0]});var i=j0(n,r),o=i.fields,a=i.sortOrder,u=G0(n,o,a,t,e.use_index),s=J0(n,u),l=s.queryOpts,g=s.inMemoryFields,f=M0(g,u,n,o),p={queryOpts:l,index:u,inMemoryFields:f};return p}function X0(e){return e.ddoc.substring(8)+"/"+e.name}function em(e,t){var n=xt(t);return n.descending?("endkey"in n&&typeof n.endkey!="string"&&(n.endkey=""),"startkey"in n&&typeof n.startkey!="string"&&(n.limit=0)):("startkey"in n&&typeof n.startkey!="string"&&(n.startkey=""),"endkey"in n&&typeof n.endkey!="string"&&(n.limit=0)),"key"in n&&typeof n.key!="string"&&(n.limit=0),n.limit>0&&n.indexes_count&&(n.original_limit=n.limit,n.limit+=n.indexes_count),e.allDocs(n).then(function(r){return r.rows=r.rows.filter(function(i){return!/^_design\//.test(i.id)}),n.original_limit&&(n.limit=n.original_limit),r.rows=r.rows.slice(0,n.limit),r})}function Bf(e,t,n){return t.selector&&(Yr(t.selector,!1),t.selector=$a(t.selector)),t.sort&&(t.sort=$0(t.sort)),t.use_index&&(t.use_index=E0(t.use_index)),x0(t),Nf(e).then(function(r){e.constructor.emit("debug",["find","planning query",t]);var i=Z0(t,r.indexes);e.constructor.emit("debug",["find","query plan",i]);var o=i.index;k0(t,o);var a=ba({include_docs:!0,reduce:!1,indexes_count:r.total_rows},i.queryOpts);if("startkey"in a&&"endkey"in a&&Pe(a.startkey,a.endkey)>0)return{docs:[]};var u=t.sort&&typeof t.sort[0]!="string"&&mi(t.sort[0])==="desc";return u&&(a.descending=!0,a=C0(a)),i.inMemoryFields.length||("limit"in t&&(a.limit=t.limit),"skip"in t&&(a.skip=t.skip)),n?Promise.resolve(i,a):Promise.resolve().then(function(){if(o.name==="_all_docs")return em(e,a);var s=X0(o);return ka(e).query.call(e,s,a)}).then(function(s){a.inclusive_start===!1&&(s.rows=S0(s.rows,a.startkey,o)),i.inMemoryFields.length&&(s.rows=Ea(s.rows,t,i.inMemoryFields));var l={docs:s.rows.map(function(g){var f=g.doc;return t.fields?s0(f,t.fields):f})};return o.defaultUsed&&(l.warning="No matching index found, create an index to optimize query time."),l})})}function tm(e,t){return Bf(e,t,!0).then(function(n){return{dbname:e.name,index:n.index,selector:t.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}})}function nm(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,r=t.name;function i(o){return Object.keys(o.views).length===1&&o.views[r]?{_id:n,_deleted:!0}:(delete o.views[r],o)}return yi(e,n,i).then(function(){return ka(e).viewCleanup.apply(e)}).then(function(){return{ok:!0}})}var rm=yr(R0),im=yr(Bf),om=yr(tm),am=yr(Nf),sm=yr(nm),kn={};kn.createIndex=dr(function(e,t){if(typeof e!="object")return t(new Error("you must provide an index to create"));var n=Qt(this)?t0:rm;n(this,e,t)});kn.find=dr(function(e,t){if(typeof t>"u"&&(t=e,e=void 0),typeof e!="object")return t(new Error("you must provide search parameters to find()"));var n=Qt(this)?n0:im;n(this,e,t)});kn.explain=dr(function(e,t){if(typeof t>"u"&&(t=e,e=void 0),typeof e!="object")return t(new Error("you must provide search parameters to explain()"));var n=Qt(this)?r0:om;n(this,e,t)});kn.getIndexes=dr(function(e){var t=Qt(this)?i0:am;t(this,e)});kn.deleteIndex=dr(function(e,t){if(typeof e!="object")return t(new Error("you must provide an index to delete"));var n=Qt(this)?o0:sm;n(this,e,t)});var Uf={};(function(e){var t=An,n=da;of.collate;var r=wa,i=cr;r.getValue;var o=r.massageSelector,a=i.massageSort;function u(s){if(typeof this.find!="function")throw new Error("ERROR: PouchDB Find is a requirement for LiveFind and must be loaded first.");var l=this,g=!1,f={},p=new t,_=[],m=s.aggregate||!1,$=s.fields,w=!1,v=!1;$&&($.indexOf("_id")===-1&&($.unshift("_id"),w=!0),$.indexOf("_rev")===-1&&($.push("_rev"),v=!0));var d;s.selector&&(d=o(s.selector));var c,h;s.sort&&(c=a(s.sort),h=n.createFieldSorter(c));var y=parseInt(s.skip,10)||0,b=parseInt(s.limit,10)||0,k={selector:d,fields:$},j=l.find(k).then(function(A){A.docs.forEach(function(M){F(M)}),p.emit("ready")}).catch(function(A){throw p.emit("error",A),V(),A});l._changeListener||J(),l._activeQueries?l._activeQueries++:l._activeQueries=1,l._changeListener.on("change",P).on("error",L),p.cancel=V,p.then=j.then.bind(j),p.catch=j.catch.bind(j),p.sort=function(A){return c?x(A):A},p.paginate=B;function P(A){j.then(function(){A.doc&&U(A.doc)})}function L(A){p.emit("error",A)}function V(){g||(l._activeQueries--,l._activeQueries?(l._changeListener.removeListener("change",P),l._changeListener.removeListener("error",L)):(l._changeListener.cancel(),delete l._changeListener),p.emit("cancelled"),p.removeAllListeners(),g=!0)}function J(){l._changeListener=l.changes({live:!0,retry:!0,include_docs:!0,since:"now"})}function K(A){var M=n.memoryFilter([A],{selector:d});return M.length?M[0]:null}function D(A){if($){var M=i.pick(A,$);return w&&delete M._id,v&&delete M._rev,M}return A}function F(A){f[A._id]=A._rev;var M=A._id,H=A._rev;return w&&delete A._id,v&&delete A._rev,S(A,M,H)}function U(A){if(f[A._id]!==A._rev){var M=A._id,H=A._rev;if(A._deleted&&f[M])return f[M]=null,E({_id:M,_rev:H,deleted:!0},M,H);var W=K(A);if(!W&&f[M])return f[M]=null,E({_id:M,_rev:H},M,H);if(W&&!f[M])return f[M]=H,S(D(W),M,H);if(W&&f[M])return f[M]=H,C(D(W),M,H)}}function E(A,M,H){var W;m&&(_=_.filter(function(O){return O._id!==A._id}),W=I(_)),p.emit("update",{action:"REMOVE",id:M,rev:H,doc:A},W)}function S(A,M,H){var W;m&&(_=_.concat(A),W=I(_)),p.emit("update",{action:"ADD",id:M,rev:H,doc:A},W)}function C(A,M,H){var W;m&&(_=_.map(function(O){return O._id===A._id?A:O}),W=I(_)),p.emit("update",{action:"UPDATE",id:M,rev:H,doc:A},W)}function x(A){return A.sort(h)}function I(A){return c&&(A=x(A)),(y||b)&&(b?A=A.slice(y,y+b):A=A.slice(y)),A}function B(A){if(!(!m||!A||typeof A!="object"))return A.skip!=null&&(y=parseInt(A.skip,10)||0),A.limit!=null&&(b=parseInt(A.limit,10)||0),A.sort&&A.sort instanceof Array&&(c=a(A.sort),h=n.createFieldSorter(c)),I(_)}return p}e.liveFind=u,typeof window<"u"&&window.PouchDB&&window.PouchDB.plugin(e)})(Uf);const um=ot(Uf);ae.plugin(Ug.default);ae.plugin(kn);ae.plugin(um);ae.plugin(G_);const Vr=new ae("tasks"),xa=new ae("projects");new ae("timer");function cm(e){Vr.save(e)}function fm(e){xa.save({isShared:!1,owner:1,...e})}function lm(e){xa.save({isShared:!0,owner:1,...e})}function dm(){return Vr.asSvelteStore()}function a1(e){return Vr.allDocs().then(t=>console.log(t.rows.map(n=>n.doc))),Zr(Vr.asSvelteStore({selector:{$id:e}}),t=>t[0]??{})}function ja(){return xa.asSvelteStore()}function qf(){return ja()}function hm(){return Zr([ja(),qf()],([e,t])=>[...e,...t])}function vm(e){let t,n,r,i,o,a,u,s,l,g,f,p;return{c(){t=oe("div"),n=oe("button"),n.textContent="1",r=ve(),i=oe("button"),i.textContent="2",o=ve(),a=oe("button"),a.textContent="3",u=ve(),s=oe("button"),s.textContent="4",l=ve(),g=oe("button"),g.textContent="5"},m(_,m){Te(_,t,m),ne(t,n),ne(t,r),ne(t,i),ne(t,o),ne(t,a),ne(t,u),ne(t,s),ne(t,l),ne(t,g),f||(p=[Ne(n,"click",e[0](1)),Ne(i,"click",e[0](2)),Ne(a,"click",e[0](3)),Ne(s,"click",e[0](4)),Ne(g,"click",e[0](5))],f=!0)},p:de,i:de,o:de,d(_){_&&ye(t),f=!1,lt(p)}}}function pm(e,t,n){let{value:r=0}=t;const i=o=>()=>n(1,r=o);return e.$$set=o=>{"value"in o&&n(1,r=o.value)},[i,r]}class gm extends it{constructor(t){super(),rt(this,t,pm,vm,Xe,{value:1})}}function fu(e,t,n){const r=e.slice();return r[4]=t[n],r}function ym(e){return{c:de,m:de,p:de,d:de}}function _m(e){let t,n,r,i=e[2],o=[];for(let a=0;a<i.length;a+=1)o[a]=lu(fu(e,i,a));return{c(){t=oe("select");for(let a=0;a<o.length;a+=1)o[a].c();e[0]===void 0&&kt(()=>e[3].call(t))},m(a,u){Te(a,t,u);for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(t,null);Fr(t,e[0],!0),n||(r=Ne(t,"change",e[3]),n=!0)},p(a,u){if(u&2){i=a[2];let s;for(s=0;s<i.length;s+=1){const l=fu(a,i,s);o[s]?o[s].p(l,u):(o[s]=lu(l),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=i.length}u&3&&Fr(t,a[0])},d(a){a&&ye(t),yn(o,a),n=!1,r()}}}function lu(e){let t,n=e[4].name+"",r,i;return{c(){t=oe("option"),r=jt(n),t.__value=i=e[4].id,t.value=t.__value},m(o,a){Te(o,t,a),ne(t,r)},p(o,a){a&2&&n!==(n=o[4].name+"")&&Jn(r,n),a&2&&i!==(i=o[4].id)&&(t.__value=i,t.value=t.__value)},d(o){o&&ye(t)}}}function mm(e){return{c:de,m:de,p:de,d:de}}function wm(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:mm,then:_m,catch:ym,value:2};return Ua(n=e[1],r),{c(){t=Vn(),r.block.c()},m(i,o){Te(i,t,o),r.block.m(i,r.anchor=o),r.mount=()=>t.parentNode,r.anchor=t},p(i,[o]){e=i,r.ctx=e,o&2&&n!==(n=e[1])&&Ua(n,r)||gl(r,e,o)},i:de,o:de,d(i){i&&ye(t),r.block.d(i),r.token=null,r=null}}}function bm(e,t,n){let r;const i=hm();Pr(e,i,u=>n(1,r=u));let{value:o}=t;function a(){o=Fu(this),n(0,o)}return e.$$set=u=>{"value"in u&&n(0,o=u.value)},[o,r,i,a]}class Tm extends it{constructor(t){super(),rt(this,t,bm,wm,Xe,{value:0})}}function du(e,t,n){const r=e.slice();return r[11]=t[n],r}function $m(e){let t,n,r,i,o,a,u;return{c(){t=oe("input"),n=ve(),r=oe("a"),i=oe("button"),i.textContent="Go",ce(t,"type","checkbox"),ce(r,"href",o="/timer/"+e[0].$id)},m(s,l){Te(s,t,l),Te(s,n,l),Te(s,r,l),ne(r,i),a||(u=Po(No.call(null,r)),a=!0)},p(s,l){l&1&&o!==(o="/timer/"+s[0].$id)&&ce(r,"href",o)},d(s){s&&ye(t),s&&ye(n),s&&ye(r),a=!1,u()}}}function Em(e){let t;return{c(){t=oe("div"),t.textContent="+"},m(n,r){Te(n,t,r)},p:de,d(n){n&&ye(t)}}}function hu(e){let t,n=e[11]+"",r;return{c(){t=oe("option"),r=jt(n),t.__value=e[11],t.value=t.__value,ce(t,"class","svelte-6fx54s")},m(i,o){Te(i,t,o),ne(t,r)},p:de,d(i){i&&ye(t)}}}function Am(e){let t,n,r,i,o,a,u,s,l,g,f,p,_,m,$,w,v,d,c,h,y;function b(F,U){return F[1]?Em:$m}let k=b(e),j=k(e);function P(F){e[6](F)}let L={};e[0].predictedTime!==void 0&&(L.value=e[0].predictedTime),s=new gm({props:L}),Gn.push(()=>Ki(s,"value",P));let V=Vi,J=[];for(let F=0;F<V.length;F+=1)J[F]=hu(du(e,V,F));function K(F){e[8](F)}let D={};return e[0].projectId!==void 0&&(D.value=e[0].projectId),m=new Tm({props:D}),Gn.push(()=>Ki(m,"value",K)),{c(){t=oe("div"),n=oe("div"),j.c(),r=ve(),i=oe("input"),u=ve(),Qe(s.$$.fragment),g=ve(),f=oe("div"),p=oe("select");for(let F=0;F<J.length;F+=1)J[F].c();_=ve(),Qe(m.$$.fragment),w=ve(),v=oe("input"),tt(i,"flex-grow","99"),ce(i,"type","text"),i.value=o=e[0].title,ce(i,"placeholder",a=e[1]?"New task":"Task title"),ce(n,"class","flex svelte-6fx54s"),ce(p,"class","svelte-6fx54s"),e[0].category===void 0&&kt(()=>e[7].call(p)),ce(v,"type","date"),tt(v,"height","1em"),ce(f,"class","flex svelte-6fx54s"),tt(f,"gap","0.25em"),ce(t,"id","task"),ce(t,"class","reset svelte-6fx54s"),ce(t,"hasfocus",d=e[2]||e[1])},m(F,U){Te(F,t,U),ne(t,n),j.m(n,null),ne(n,r),ne(n,i),ne(n,u),We(s,n,null),ne(t,g),ne(t,f),ne(f,p);for(let E=0;E<J.length;E+=1)J[E]&&J[E].m(p,null);Fr(p,e[0].category,!0),ne(f,_),We(m,f,null),ne(f,w),ne(f,v),Ma(v,e[0].due),c=!0,h||(y=[Ne(i,"input",e[3]),Ne(p,"change",e[7]),Ne(v,"input",e[9]),Ne(t,"focusin",e[5]),Ne(t,"focusout",e[4])],h=!0)},p(F,[U]){k===(k=b(F))&&j?j.p(F,U):(j.d(1),j=k(F),j&&(j.c(),j.m(n,r))),(!c||U&1&&o!==(o=F[0].title)&&i.value!==o)&&(i.value=o),(!c||U&2&&a!==(a=F[1]?"New task":"Task title"))&&ce(i,"placeholder",a);const E={};if(!l&&U&1&&(l=!0,E.value=F[0].predictedTime,Wi(()=>l=!1)),s.$set(E),U&0){V=Vi;let C;for(C=0;C<V.length;C+=1){const x=du(F,V,C);J[C]?J[C].p(x,U):(J[C]=hu(x),J[C].c(),J[C].m(p,null))}for(;C<J.length;C+=1)J[C].d(1);J.length=V.length}U&1&&Fr(p,F[0].category);const S={};!$&&U&1&&($=!0,S.value=F[0].projectId,Wi(()=>$=!1)),m.$set(S),U&1&&Ma(v,F[0].due),(!c||U&6&&d!==(d=F[2]||F[1]))&&ce(t,"hasfocus",d)},i(F){c||(be(s.$$.fragment,F),be(m.$$.fragment,F),c=!0)},o(F){ke(s.$$.fragment,F),ke(m.$$.fragment,F),c=!1},d(F){F&&ye(t),j.d(),Ke(s),yn(J,F),Ke(m),h=!1,lt(y)}}}function Sm(e,t,n){let{isNew:r=!1}=t,i=r,{taskData:o={description:"",predictedTime:0,title:"",category:"homework"}}=t;function a(m){const $=m.target.value;n(0,o.title=$,o);let[w,v]=Oh($,Vi);w==="worksheet"&&(w="homework"),w==="research"&&(w="read"),v>.7&&(console.log(w),n(0,o.category=w,o),console.log("priority:",Math.min(kh($,/!/g),3)));let d=Ah($,new Date);if(d){const c=d.getTimezoneOffset();d=new Date(d.getTime()-c*60*1e3),n(0,o.due=d.toISOString().split("T")[0],o)}}function u(m){n(2,i=i&&m.currentTarget.contains(m.relatedTarget)),i||l()}function s(m){n(2,i=i||m.target instanceof HTMLSelectElement||m.target instanceof HTMLInputElement&&m.target.getAttribute("type")==="text")}function l(){cm(o)}function g(m){e.$$.not_equal(o.predictedTime,m)&&(o.predictedTime=m,n(0,o))}function f(){o.category=Fu(this),n(0,o)}function p(m){e.$$.not_equal(o.projectId,m)&&(o.projectId=m,n(0,o))}function _(){o.due=this.value,n(0,o)}return e.$$set=m=>{"isNew"in m&&n(1,r=m.isNew),"taskData"in m&&n(0,o=m.taskData)},[o,r,i,a,u,s,g,f,p,_]}class Hf extends it{constructor(t){super(),rt(this,t,Sm,Am,Xe,{isNew:1,taskData:0})}}var mt=(e=>(e[e.Overdue=0]="Overdue",e[e.Today=1]="Today",e[e.Tomorrow=2]="Tomorrow",e[e.Week=3]="Week",e[e.Later=4]="Later",e))(mt||{});function vu(e,t,n){const r=e.slice();return r[2]=t[n],r}function pu(e){let t,n;return t=new Hf({props:{taskData:e[2]}}),{c(){Qe(t.$$.fragment)},m(r,i){We(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.taskData=r[2]),t.$set(o)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ke(t,r)}}}function Cm(e){let t,n=mt[e[0]]+"",r,i,o,a,u=e[1],s=[];for(let g=0;g<u.length;g+=1)s[g]=pu(vu(e,u,g));const l=g=>ke(s[g],1,1,()=>{s[g]=null});return{c(){t=oe("div"),r=jt(n),i=ve();for(let g=0;g<s.length;g+=1)s[g].c();o=Vn(),tt(t,"background-color","#82c5d1"),tt(t,"padding","5px"),tt(t,"border-radius","12px"),tt(t,"margin","5px")},m(g,f){Te(g,t,f),ne(t,r),Te(g,i,f);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(g,f);Te(g,o,f),a=!0},p(g,[f]){if((!a||f&1)&&n!==(n=mt[g[0]]+"")&&Jn(r,n),f&2){u=g[1];let p;for(p=0;p<u.length;p+=1){const _=vu(g,u,p);s[p]?(s[p].p(_,f),be(s[p],1)):(s[p]=pu(_),s[p].c(),be(s[p],1),s[p].m(o.parentNode,o))}for($n(),p=u.length;p<s.length;p+=1)l(p);En()}},i(g){if(!a){for(let f=0;f<u.length;f+=1)be(s[f]);a=!0}},o(g){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)ke(s[f]);a=!1},d(g){g&&ye(t),g&&ye(i),yn(s,g),g&&ye(o)}}}function Om(e,t,n){let{due:r}=t,{tasks:i}=t;return e.$$set=o=>{"due"in o&&n(0,r=o.due),"tasks"in o&&n(1,i=o.tasks)},[r,i]}class km extends it{constructor(t){super(),rt(this,t,Om,Cm,Xe,{due:0,tasks:1})}}const gu=.001,xm=60,jm=60*xm,qi=24*jm;function yu(e,t,n){const r=e.slice();return r[2]=t[n],r[6]=n,r}function _u(e){let t,n;return t=new km({props:{due:e[6],tasks:e[0]==-1?e[2]:e[2].filter(e[4])}}),{c(){Qe(t.$$.fragment)},m(r,i){We(t,r,i),n=!0},p(r,i){const o={};i&3&&(o.tasks=r[0]==-1?r[2]:r[2].filter(r[4])),t.$set(o)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ke(t,r)}}}function Rm(e){let t,n,r,i;n=new Hf({props:{isNew:!0}});let o=e[1],a=[];for(let s=0;s<o.length;s+=1)a[s]=_u(yu(e,o,s));const u=s=>ke(a[s],1,1,()=>{a[s]=null});return{c(){t=oe("div"),Qe(n.$$.fragment),r=ve();for(let s=0;s<a.length;s+=1)a[s].c();tt(t,"padding-bottom","78px")},m(s,l){Te(s,t,l),We(n,t,null),ne(t,r);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(t,null);i=!0},p(s,[l]){if(l&3){o=s[1];let g;for(g=0;g<o.length;g+=1){const f=yu(s,o,g);a[g]?(a[g].p(f,l),be(a[g],1)):(a[g]=_u(f),a[g].c(),be(a[g],1),a[g].m(t,null))}for($n(),g=o.length;g<a.length;g+=1)u(g);En()}},i(s){if(!i){be(n.$$.fragment,s);for(let l=0;l<o.length;l+=1)be(a[l]);i=!0}},o(s){ke(n.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)ke(a[l]);i=!1},d(s){s&&ye(t),Ke(n),yn(a,s)}}}function Pm(e,t,n){let r,{currentTab:i=-1}=t,o=dm();Pr(e,o,s=>n(3,r=s));let a;const u=s=>s.projectId==i;return e.$$set=s=>{"currentTab"in s&&n(0,i=s.currentTab)},e.$$.update=()=>{if(e.$$.dirty&10){n(1,a=[...Array(Object.keys(mt).length/2)].map(()=>[]));for(const s of r){const l=new Date().setHours(0,0,0,0)*gu,g=s.due*gu;g<l?a[mt.Overdue].push(s):g<l+qi?a[mt.Today].push(s):g<l+2*qi||g<l+7*qi?a[mt.Tomorrow].push(s):a[mt.Later].push(s)}}},[i,a,o,r,u]}class Fm extends it{constructor(t){super(),rt(this,t,Pm,Rm,Xe,{currentTab:0})}}const Im=e=>({currentTab:e&1}),mu=e=>({currentTab:e[0]});function wu(e,t,n){const r=e.slice();return r[12]=t[n],r}function bu(e,t,n){const r=e.slice();return r[15]=t[n],r}function Tu(e){let t,n,r,i,o=e[15].name+"",a,u,s;function l(){return e[10](e[15])}return{c(){t=oe("li"),n=oe("button"),r=oe("i"),i=ve(),a=jt(o),ce(r,"class","fa fa-book"),ce(n,"class","courseProjectButton svelte-mcobzd")},m(g,f){Te(g,t,f),ne(t,n),ne(n,r),ne(n,i),ne(n,a),u||(s=Ne(n,"click",l),u=!0)},p(g,f){e=g,f&2&&o!==(o=e[15].name+"")&&Jn(a,o)},d(g){g&&ye(t),u=!1,s()}}}function $u(e){let t,n,r=e[12].name+"",i,o,a;function u(){return e[11](e[12])}return{c(){t=oe("li"),n=oe("button"),i=jt(r),ce(n,"class","courseProjectButton svelte-mcobzd")},m(s,l){Te(s,t,l),ne(t,n),ne(n,i),o||(a=Ne(n,"click",u),o=!0)},p(s,l){e=s,l&4&&r!==(r=e[12].name+"")&&Jn(i,r)},d(s){s&&ye(t),o=!1,a()}}}function Dm(e){let t,n,r,i,o,a,u,s,l,g,f,p,_,m,$,w,v,d,c,h,y,b,k,j,P,L,V,J,K,D,F,U,E,S,C,x,I,B=e[1],A=[];for(let T=0;T<B.length;T+=1)A[T]=Tu(bu(e,B,T));let M=e[2],H=[];for(let T=0;T<M.length;T+=1)H[T]=$u(wu(e,M,T));const W=e[8].default,O=Xf(W,e,e[7],mu);return{c(){t=oe("link"),n=ve(),r=oe("div"),i=oe("div"),o=oe("h1"),o.textContent="Sidebar",a=ve(),u=oe("br"),s=ve(),l=oe("button"),l.textContent="All",g=ve(),f=oe("br"),p=oe("br"),_=ve(),m=oe("h3"),m.textContent="Classes",$=ve(),w=oe("ul");for(let T=0;T<A.length;T+=1)A[T].c();v=ve(),d=oe("li"),c=oe("button"),c.innerHTML='<i class="fa fa-plus"></i> New Class',h=ve(),y=oe("hr"),b=ve(),k=oe("br"),j=ve(),P=oe("h3"),P.textContent="Projects",L=ve(),V=oe("ul");for(let T=0;T<H.length;T+=1)H[T].c();J=ve(),K=oe("li"),D=oe("button"),D.textContent="Add Project",F=ve(),U=oe("a"),U.innerHTML='<button class="courseProjectButton svelte-mcobzd">Login</button>',E=ve(),S=oe("div"),O&&O.c(),ce(t,"rel","stylesheet"),ce(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),ce(c,"class","courseProjectButton svelte-mcobzd"),ce(w,"class","courseProjectList svelte-mcobzd"),ce(y,"class","svelte-mcobzd"),ce(D,"class","courseProjectButton svelte-mcobzd"),ce(V,"class","courseProjectList svelte-mcobzd"),ce(U,"href","/login"),ce(i,"class","sidebar svelte-mcobzd"),ce(S,"class","other svelte-mcobzd"),ce(r,"class","container svelte-mcobzd")},m(T,R){Te(T,t,R),Te(T,n,R),Te(T,r,R),ne(r,i),ne(i,o),ne(i,a),ne(i,u),ne(i,s),ne(i,l),ne(i,g),ne(i,f),ne(i,p),ne(i,_),ne(i,m),ne(i,$),ne(i,w);for(let N=0;N<A.length;N+=1)A[N]&&A[N].m(w,null);ne(w,v),ne(w,d),ne(d,c),ne(i,h),ne(i,y),ne(i,b),ne(i,k),ne(i,j),ne(i,P),ne(i,L),ne(i,V);for(let N=0;N<H.length;N+=1)H[N]&&H[N].m(V,null);ne(V,J),ne(V,K),ne(K,D),ne(i,F),ne(i,U),ne(r,E),ne(r,S),O&&O.m(S,null),C=!0,x||(I=[Ne(l,"click",e[9]),Ne(c,"click",e[6]),Ne(D,"click",e[5]),Po(No.call(null,U))],x=!0)},p(T,[R]){if(R&3){B=T[1];let N;for(N=0;N<B.length;N+=1){const Y=bu(T,B,N);A[N]?A[N].p(Y,R):(A[N]=Tu(Y),A[N].c(),A[N].m(w,v))}for(;N<A.length;N+=1)A[N].d(1);A.length=B.length}if(R&5){M=T[2];let N;for(N=0;N<M.length;N+=1){const Y=wu(T,M,N);H[N]?H[N].p(Y,R):(H[N]=$u(Y),H[N].c(),H[N].m(V,J))}for(;N<H.length;N+=1)H[N].d(1);H.length=M.length}O&&O.p&&(!C||R&129)&&tl(O,W,T,T[7],C?el(W,T[7],R,Im):nl(T[7]),mu)},i(T){C||(be(O,T),C=!0)},o(T){ke(O,T),C=!1},d(T){T&&ye(t),T&&ye(n),T&&ye(r),yn(A,T),yn(H,T),O&&O.d(T),x=!1,lt(I)}}}function Nm(e,t,n){let r,i,{$$slots:o={},$$scope:a}=t,u;const s=ja();Pr(e,s,$=>n(2,i=$));const l=qf();Pr(e,l,$=>n(1,r=$));function g(){fm({name:prompt("Name your project"),color:"TODO"})}function f(){lm({name:prompt("Name your class"),color:"TODO"})}const p=()=>n(0,u=-1),_=$=>n(0,u=$.id),m=$=>n(0,u=$.id);return e.$$set=$=>{"$$scope"in $&&n(7,a=$.$$scope)},[u,r,i,s,l,g,f,a,o,p,_,m]}class Mm extends it{constructor(t){super(),rt(this,t,Nm,Dm,Xe,{})}}function Lm(e){let t,n=e[0]?"▶️":"⏸️",r,i,o;return{c(){t=oe("button"),r=jt(n),ce(t,"class","reset")},m(a,u){Te(a,t,u),ne(t,r),i||(o=Ne(t,"click",e[1]),i=!0)},p(a,[u]){u&1&&n!==(n=a[0]?"▶️":"⏸️")&&Jn(r,n)},i:de,o:de,d(a){a&&ye(t),i=!1,o()}}}function Bm(e,t,n){let{isPaused:r=!0}=t;const i=Mu();function o(a){a.stopPropagation(),a.preventDefault(),n(0,r=!r),i("click",a)}return e.$$set=a=>{"isPaused"in a&&n(0,r=a.isPaused)},[r,o]}class Um extends it{constructor(t){super(),rt(this,t,Bm,Lm,Xe,{isPaused:0})}}function qm(e){const t=e-1;return t*t*t+1}function Hm(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Gm(e){var{fallback:t}=e,n=Hm(e,["fallback"]);const r=new Map,i=new Map;function o(u,s,l){const{delay:g=0,duration:f=k=>Math.sqrt(k)*30,easing:p=qm}=qn(qn({},n),l),_=u.getBoundingClientRect(),m=s.getBoundingClientRect(),$=_.left-m.left,w=_.top-m.top,v=_.width/m.width,d=_.height/m.height,c=Math.sqrt($*$+w*w),h=getComputedStyle(s),y=h.transform==="none"?"":h.transform,b=+h.opacity;return{delay:g,duration:Jt(f)?f(c):f,easing:p,css:(k,j)=>`
				opacity: ${k*b};
				transform-origin: top left;
				transform: ${y} translate(${j*$}px,${j*w}px) scale(${k+(1-k)*v}, ${k+(1-k)*d});
			`}}function a(u,s,l){return(g,f)=>(u.set(f.key,g),()=>{if(s.has(f.key)){const p=s.get(f.key);return s.delete(f.key),o(p,g,f)}return u.delete(f.key),t&&t(g,f,l)})}return[a(i,r,!1),a(r,i,!0)]}const zm=Gm({});function Eu(e){let t,n,r;return{c(){t=oe("button"),t.textContent="⏹️",ce(t,"class","reset")},m(i,o){Te(i,t,o),n||(r=Ne(t,"click",e[6]),n=!0)},p:de,d(i){i&&ye(t),n=!1,r()}}}function Wm(e){let t,n,r,i,o,a,u,s,l,g,f,p;function _(w){e[7](w)}let m={};e[1]!==void 0&&(m.isPaused=e[1]),o=new Um({props:m}),Gn.push(()=>Ki(o,"isPaused",_));let $=e[1]&&e[0]>0&&Eu(e);return{c(){t=oe("a"),n=oe("div"),r=oe("div"),i=ve(),Qe(o.$$.fragment),u=ve(),$&&$.c(),ce(r,"role","progressbar"),ce(r,"aria-valuenow",e[0]),ce(r,"aria-valuemin",0),ce(r,"aria-valuemax",e[3]),tt(r,"--value",e[0]),tt(r,"--totalTime",e[3]),ce(r,"class","svelte-84lsos"),La(r,"indeterminate",e[2]),ce(n,"id","minitimer"),ce(n,"class","svelte-84lsos"),ce(t,"href","/timer")},m(w,v){Te(w,t,v),ne(t,n),ne(n,r),ne(n,i),We(o,n,null),ne(n,u),$&&$.m(n,null),g=!0,f||(p=Po(No.call(null,t)),f=!0)},p(w,[v]){(!g||v&1)&&ce(r,"aria-valuenow",w[0]),(!g||v&8)&&ce(r,"aria-valuemax",w[3]),(!g||v&1)&&tt(r,"--value",w[0]),(!g||v&8)&&tt(r,"--totalTime",w[3]),(!g||v&4)&&La(r,"indeterminate",w[2]);const d={};!a&&v&2&&(a=!0,d.isPaused=w[1],Wi(()=>a=!1)),o.$set(d),w[1]&&w[0]>0?$?$.p(w,v):($=Eu(w),$.c(),$.m(n,null)):$&&($.d(1),$=null)},i(w){g||(be(o.$$.fragment,w),kt(()=>{g&&(l&&l.end(1),s=vl(n,e[5],{key:"timer"}),s.start())}),g=!0)},o(w){ke(o.$$.fragment,w),s&&s.invalidate(),l=pl(n,e[4],{key:"timer"}),g=!1},d(w){w&&ye(t),Ke(o),$&&$.d(),w&&l&&l.end(),f=!1,p()}}}function Km(e,t,n){let{progress:r=0}=t,{totalTime:i=100}=t,{isPaused:o=!0}=t,{indeterminate:a=!1}=t,u;const[s,l]=zm;function g(p){p.stopPropagation(),p.preventDefault(),n(0,r=0),n(2,a=!1)}Nu(()=>clearInterval(u));function f(p){o=p,n(1,o)}return e.$$set=p=>{"progress"in p&&n(0,r=p.progress),"totalTime"in p&&n(3,i=p.totalTime),"isPaused"in p&&n(1,o=p.isPaused),"indeterminate"in p&&n(2,a=p.indeterminate)},[r,o,a,i,s,l,g,f]}class Ym extends it{constructor(t){super(),rt(this,t,Km,Wm,Xe,{progress:0,totalTime:3,isPaused:1,indeterminate:2})}}function Qm(e){let t,n;return t=new Fm({props:{currentTab:e[0]}}),{c(){Qe(t.$$.fragment)},m(r,i){We(t,r,i),n=!0},p(r,i){const o={};i&1&&(o.currentTab=r[0]),t.$set(o)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ke(t,r)}}}function Vm(e){let t,n,r,i;return t=new Mm({props:{$$slots:{default:[Qm,({currentTab:o})=>({0:o}),({currentTab:o})=>o?1:0]},$$scope:{ctx:e}}}),r=new Ym({}),{c(){Qe(t.$$.fragment),n=ve(),Qe(r.$$.fragment)},m(o,a){We(t,o,a),Te(o,n,a),We(r,o,a),i=!0},p(o,[a]){const u={};a&3&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)},i(o){i||(be(t.$$.fragment,o),be(r.$$.fragment,o),i=!0)},o(o){ke(t.$$.fragment,o),ke(r.$$.fragment,o),i=!1},d(o){Ke(t,o),o&&ye(n),Ke(r,o)}}}class Jm extends it{constructor(t){super(),rt(this,t,null,Vm,Xe,{})}}class Zm extends it{constructor(t){super(),rt(this,t,null,null,Xe,{})}}function Xm(e){let t,n;return t=new Sl({props:{routes:e[0]}}),{c(){Qe(t.$$.fragment)},m(r,i){We(t,r,i),n=!0},p:de,i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){ke(t.$$.fragment,r),n=!1},d(r){Ke(t,r)}}}function e1(e){return fl("timer",Jr({})),[{"/":Jm,"/timer/:task?":Ai({asyncComponent:()=>$i(()=>import("./Timer-4eafaab8.js"),["assets/Timer-4eafaab8.js","assets/Timer-ef2a245c.css"])}),"/login":Ai({asyncComponent:()=>$i(()=>import("./Login-0e07b57a.js"),["assets/Login-0e07b57a.js","assets/Login-0178d0e2.css"])}),"/test":Ai({asyncComponent:()=>$i(()=>import("./DbTest-05ec3418.js"),[])}),"*":Zm}]}class t1 extends it{constructor(t){super(),rt(this,t,e1,Xm,Xe,{})}}new t1({target:document.getElementById("app")});export{Pr as A,Jt as B,Tm as C,zm as D,Po as E,jt as F,i1 as G,Ug as H,kn as I,um as J,G_ as K,zu as L,Jn as M,r1 as N,Cu as O,ae as P,it as S,ve as a,ce as b,Te as c,ne as d,oe as e,ye as f,Mu as g,Gn as h,rt as i,Qe as j,tt as k,Ne as l,We as m,de as n,Nu as o,Ma as p,n1 as q,lt as r,Xe as s,be as t,kt as u,vl as v,ke as w,pl as x,Ke as y,a1 as z};
